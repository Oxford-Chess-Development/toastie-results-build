(this["webpackJsonpscorch-whiplash"]=this["webpackJsonpscorch-whiplash"]||[]).push([[0],{119:function(e,t,n){e.exports={tournament_info:"tournamentinfo_tournament_info__3OozG",tieBreakLink:"tournamentinfo_tieBreakLink__30hG_"}},120:function(e,t,n){e.exports={matchUp:"playerline_matchUp__Jb9ni",white:"playerline_white__2Dg_3",black:"playerline_black__yf2p1",flag:"playerline_flag__1Wzhr",playerInfo:"playerline_playerInfo__2wd6f"}},121:function(e,t,n){e.exports={tableAnnounce:"tournaments_tableAnnounce__2MLQm",rowLink:"tournaments_rowLink__1OayQ",tournamentLink:"tournaments_tournamentLink__3mGz7"}},13:function(e,t,n){e.exports={score:"pairings_score__1yn8S",confirmed:"pairings_confirmed__3JrmJ",finished:"pairings_finished__3Tinj",live:"pairings_live__1ycFn",watchLive:"pairings_watchLive__2cnys",registered:"pairings_registered__Q2QET",scheduled:"pairings_scheduled__1GzqC",pending:"pairings_pending__3TFsg",aborted:"pairings_aborted__pZaOi",pairingRound:"pairings_pairingRound__2Sz8j",roundSelected:"pairings_roundSelected__15kTz",nullRound:"pairings_nullRound__2lhF2",inner:"pairings_inner__hb8sB",subheader:"pairings_subheader__tOuDn",pieMatrix:"pairings_pieMatrix__2pEq7",pie:"pairings_pie__3vifK",statusPicker:"pairings_statusPicker__1Frr2",timezone:"pairings_timezone__2ajYa",download:"pairings_download__gZx8B",jumpTo:"pairings_jumpTo__1i8OA",expandAll:"pairings_expandAll__2WE6V",searchBar:"pairings_searchBar__r83HS",description:"pairings_description__4Fd7Z",buttonList:"pairings_buttonList__2r4XD",flag:"pairings_flag__21EM_",join:"pairings_join__YK3fM",pool:"pairings_pool__3ObdH",table:"pairings_table__RLFKq",watchButton:"pairings_watchButton__1ksVQ"}},15:function(e,t,n){e.exports={canvas:"login_canvas__1qibW",column:"login_column__14Kgt",foreground:"login_foreground__2Cqo8",frame:"login_frame__3ssmQ",loginSection:"login_loginSection__1BBMn",forgottenContainer:"login_forgottenContainer__2yR4y","fade-in":"login_fade-in__3QsyL",forgotten:"login_forgotten__3VFQz",form:"login_form__1ieaR",input:"login_input__3ze1R",back:"login_back__1oP5T",text:"login_text__WDlWF",submit:"login_submit__2qxJT",flip:"login_flip__2KG2q",loginButton:"login_loginButton__1XTHr",registerButton:"login_registerButton__1vv8o",loginForeground:"login_loginForeground__lnGgY",registerForeground:"login_registerForeground__3D6jX",messageBar:"login_messageBar__6TM4O",logo:"login_logo__UJ7Qe",staticLogo:"login_staticLogo__Z0jZQ",loadingGif:"login_loadingGif__WfBMg",crownOutline:"login_crownOutline__2mObX",loadingLine:"login_loadingLine__1iXG0","grow-right":"login_grow-right__2HxVz"}},153:function(e,t,n){e.exports={container:"fullscreen_container__2o3cX",fullScreenHeader:"fullscreen_fullScreenHeader__8hyCZ",stage:"fullscreen_stage__2cH6J"}},154:function(e,t,n){e.exports={cover:"embed_cover__354uy",canvas:"embed_canvas__3b5lE",brand:"embed_brand__2tsAG"}},19:function(e,t,n){e.exports={container:"home_container__3m-V0",section:"home_section__J4Pas",title:"home_title__2zCUD",wrapper:"home_wrapper__1kdtX",col1:"home_col1__1cCiq",col2:"home_col2__1BVR0",announcements:"home_announcements__4cufj",tournaments:"home_tournaments__1q8_O",tableAnnounce:"home_tableAnnounce__dGzDK",yourTournaments:"home_yourTournaments__1aqpu",sectionHeader:"home_sectionHeader__1zVNc",live:"home_live__2gArQ",sizer:"home_sizer__3Z1C7",notificationRow:"home_notificationRow__1q_nU",expando:"home_expando__2-dbm",rowLink:"home_rowLink__1N7Sr",tournamentLink:"home_tournamentLink__1SOA6",iconLink:"home_iconLink__1RN-Z",connected:"home_connected__3l58F",disconnected:"home_disconnected__3n6S0",logout:"home_logout__12JDk",info:"home_info__13MIt",buttons:"home_buttons__3u2f7",row:"home_row__Wfflj",details:"home_details___qRnM",account:"home_account__15sn1",sync:"home_sync__175YB",new:"home_new__2kEVt"}},22:function(e,t,n){e.exports={container:"profile_container__1K7NH",title:"profile_title__2BZxm",grid:"profile_grid__3AVqG",details:"profile_details__T2CsB",flag:"profile_flag__3RCpw",info:"profile_info__3FtOw",contact:"profile_contact__3SQSq",notes:"profile_notes__1GtWG",background:"profile_background__2pk8i",stage:"profile_stage__2kP0B",teamStage:"profile_teamStage__2cDka",midButtons:"profile_midButtons__3oJbm",box:"profile_box__2QL9b",name:"profile_name__bRkcf",history:"profile_history__22CVZ",resultsRow:"profile_resultsRow__4zleX",small:"profile_small__10h6z",fieldBox:"profile_fieldBox__1gEdr",subtitle:"profile_subtitle__2fxvS",scores:"profile_scores__ByD8u",row:"profile_row__aUfgI",key:"profile_key__mRxor",value:"profile_value__vcPiH",action:"profile_action__2ARI5",inactive:"profile_inactive__2tSAV"}},225:function(e,t,n){e.exports={sticky:"sticky_sticky__kzuz5",absolute:"sticky_absolute__3TZI6"}},228:function(e,t,n){},23:function(e,t,n){e.exports={nav:"nav_nav__1gFey",stage:"nav_stage__3GKOi",infoBox:"nav_infoBox__22EbU",linkButtons:"nav_linkButtons__2ee5L",profilePicture:"nav_profilePicture__PVvqr",nameContainer:"nav_nameContainer__17v30",name:"nav_name__1A6FS",profileWrapper:"nav_profileWrapper__33UPj",live:"nav_live__3qmpe",preload:"nav_preload__vbtMr",liveRing:"nav_liveRing__1leOV",rotate:"nav_rotate__3MBnR",livePlay:"nav_livePlay__1hJbH",extra:"nav_extra__nwYhM",rules:"nav_rules__3Fitx",website:"nav_website__3Z3po",buttonContainer:"nav_buttonContainer__2BU-r",linkButton:"nav_linkButton__1saVW",defaultProfilePicture:"nav_defaultProfilePicture__3cROn",tieBreakLink:"nav_tieBreakLink__1UyPD",tieBreakSection:"nav_tieBreakSection__2Qbwx",visible:"nav_visible__1OKR0",tieBreakContainer:"nav_tieBreakContainer__2hPD_",tieBreakTitle:"nav_tieBreakTitle__1guQ_",tieBreaks:"nav_tieBreaks__qpKIN","slide-in-from-left":"nav_slide-in-from-left__1m3c0"}},24:function(e,t,n){e.exports={fixed:"rotating_fixed__1mKEH",backContainer:"rotating_backContainer__PRAiB","fade-in":"rotating_fade-in__2DxCb",parent:"rotating_parent__2hVEL",background:"rotating_background__1qBGX",logoBackground:"rotating_logoBackground__Sunzn",faded:"rotating_faded__pUsO6",lighter:"rotating_lighter__1PJ2J",rotator:"rotating_rotator__1DVLb",stage:"rotating_stage__2scv6",selection:"rotating_selection__2iSsC",child:"rotating_child__1UA2D",curr:"rotating_curr__2YxLv","from-right":"rotating_from-right__1DmXW",description:"rotating_description__2VU0a",title:"rotating_title__1mJSD",palette:"rotating_palette__1UniL",box:"rotating_box__RNGV_",new:"rotating_new__2i9lb",frame:"rotating_frame__LIoJX",logo:"rotating_logo__2NJ_4",dot:"rotating_dot__25TPv",dotSelected:"rotating_dotSelected__1f7uq"}},25:function(e,t,n){e.exports={info:"info_info__2j2R2",small:"info_small__cklkw",cols:"info_cols__1yYqW",flag:"info_flag__1H1VP",name:"info_name__1t72C",bio:"info_bio__3T2uc",details:"info_details__pv7Xk",detail:"info_detail__GcdDt",title:"info_title__lFhDd",buttons:"info_buttons__3NQRo",memberBox:"info_memberBox__3Qob9",more:"info_more__8BqKY",container:"info_container__2WVXM",section:"info_section__1Wa9L",sectionHeader:"info_sectionHeader__1p1UY",expando:"info_expando__26_ZT",status:"info_status__334R_",online:"info_online__1Pz8P"}},26:function(e,t,n){e.exports={container:"crosstable_container__1iD5w",th:"crosstable_th__Q7ggx",round:"crosstable_round__2z99m",pool:"crosstable_pool__nPUSS",table:"crosstable_table__1xVB_",headerCell:"crosstable_headerCell__1MXgj",moreHidden:"crosstable_moreHidden__3RsC0",tr:"crosstable_tr__1OMcp",footer:"crosstable_footer__1NSZx",col2:"crosstable_col2__1bcMr",button:"crosstable_button__2lxn7",searchBar:"crosstable_searchBar__2QHjR",searchBarDiv:"crosstable_searchBarDiv__BkgHE"}},27:function(e,t,n){e.exports={container:"knockout_container__3GFEr",stage:"knockout_stage__2PYEg",scroll:"knockout_scroll__2Lk6I",left:"knockout_left__3kShv",right:"knockout_right__1EZg2",columns:"knockout_columns__1HnTZ",roundNumber:"knockout_roundNumber__H8JgI",column:"knockout_column__1qlCt",matchUp:"knockout_matchUp__3Jiow",spacer:"knockout_spacer__XYmSq",poolTitle:"knockout_poolTitle__2C7J0",visible:"knockout_visible__3GoHg",white:"knockout_white__GNLcm",black:"knockout_black__3bxjQ",playerInfo:"knockout_playerInfo__1lJHe",score:"knockout_score__388e2",win:"knockout_win__GFz0e",winner:"knockout_winner__2ItfJ",all:"knockout_all__1IdMR",connectors:"knockout_connectors__3QXK_",line:"knockout_line__3Bc0o"}},30:function(e,t,n){e.exports={draggable:"components_draggable__6I6m8","move-to-corner":"components_move-to-corner__2IMAP",shade:"components_shade__3PndK",section:"components_section__2oPYC","vertical-split":"components_vertical-split__17qtW",lightBoxContent:"components_lightBoxContent__1phCW",lightBoxTitle:"components_lightBoxTitle__b48fv",error:"components_error__3Plio",dateTime:"components_dateTime__2VtC6",footer:"components_footer__27uos",resolve:"components_resolve__1X_KN",reject:"components_reject__3ymMO",divide:"components_divide__37rpK",collapsed:"components_collapsed__1YIKM"}},31:function(e,t,n){e.exports={header:"header_header__3AnVH",small:"header_small__1FEFj",buttonContainer:"header_buttonContainer__2NGSo",button:"header_button__3Dvcf",native:"header_native__2zjQ6",nameWrapper:"header_nameWrapper__3xkIw",logoWrapper:"header_logoWrapper__1SDiB",logo:"header_logo__2gzAt",headerButton:"header_headerButton__nbL-0",selected:"header_selected__3ZcvA",inactive:"header_inactive__2B8ig",title:"header_title__1aYsG",label:"header_label__3IhFN",installer:"header_installer__3SXUE",icons:"header_icons__2zG98",notifications:"header_notifications__27OsP",mobileMenu:"header_mobileMenu__1JasY",menuButton:"header_menuButton__1iKql",unseen:"header_unseen__z38Fn",inlineNotifTitle:"header_inlineNotifTitle__2-Ono",inlineNotif:"header_inlineNotif__2g-5s",unseenN:"header_unseenN__mphpe",inlineNotifContent:"header_inlineNotifContent__1dD3f",inlineNotifDate:"header_inlineNotifDate__1useH"}},327:function(e,t,n){},34:function(e,t,n){e.exports={container:"chesscom_container__AGg5n",results:"chesscom_results__xtTqO",score:"chesscom_score__wGavR",wrapper:"chesscom_wrapper__3vwwR",boardlabel:"chesscom_boardlabel__E2EmQ",boardLabel:"chesscom_boardLabel__1N2Qy",gameViewWrapper:"chesscom_gameViewWrapper__T9V4M",board:"chesscom_board__3LGEQ","fade-in":"chesscom_fade-in__15-gn",row:"chesscom_row__17flm",square:"chesscom_square___JdY5",W:"chesscom_W__1Kbfl",B:"chesscom_B__misXA",null:"chesscom_null__13qcL",active:"chesscom_active__1tUDT",loading:"chesscom_loading__2Ayrk",spin:"chesscom_spin__1lrfp",button:"chesscom_button__3PlYs"}},36:function(e,t,n){e.exports={fireworksSection:"results_fireworksSection__2qvrE",resultsScreen:"results_resultsScreen__KIKHg",place:"results_place__3ZhVh",position:"results_position__3Onk_",teamName:"results_teamName__2Pxe5",table:"results_table__1keWa",key:"results_key__3XFuQ",standingsButton:"results_standingsButton__36hZx",value:"results_value__3Qasx",flag:"results_flag__2-WYI",links:"results_links__2vHBV"}},37:function(e,t,n){e.exports={container:"streams_container__3OSGu",streamHeader:"streams_streamHeader__2u9wC",popOut:"streams_popOut__20aUz",streamContainer:"streams_streamContainer__28Cw5",player:"streams_player__1u4zp",twitchChat:"streams_twitchChat__2j9X5","move-to-corner":"streams_move-to-corner__1zn6f",chat:"streams_chat__3ysIe",footer:"streams_footer__NYfmO",twitchPlayer:"streams_twitchPlayer__ZwLdZ"}},375:function(e){e.exports=JSON.parse('{"AFG":"Afghanistan","ALA":"Aland Islands","ALB":"Albania","DZA":"Algeria","ASM":"American Samoa","AND":"Andorra","AGO":"Angola","AIA":"Anguilla","ATA":"Antarctica","ATG":"Antigua and Barbuda","ARG":"Argentina","ARM":"Armenia","ABW":"Aruba","AUS":"Australia","AUT":"Austria","AZE":"Azerbaijan","BHS":"Bahamas","BHR":"Bahrain","BGD":"Bangladesh","BRB":"Barbados","BLR":"Belarus","BEL":"Belgium","BLZ":"Belize","BEN":"Benin","BMU":"Bermuda","BTN":"Bhutan","BOL":"Bolivia","BIH":"Bosnia and Herzegovina","BWA":"Botswana","BVT":"Bouvet Island","BRA":"Brazil","VGB":"British Virgin Islands","IOT":"British Indian Ocean Territory","BRN":"Brunei Darussalam","BUL":"Bulgaria","BFA":"Burkina Faso","BDI":"Burundi","KHM":"Cambodia","CMR":"Cameroon","CAN":"Canada","CPV":"Cape Verde","CYM":"Cayman Islands","CAF":"Central African Republic","TCD":"Chad","CHI":"Chile","CHN":"China","HKG":"Hong Kong, SAR China","MAC":"Macao, SAR China","CXR":"Christmas Island","CCK":"Cocos (Keeling) Islands","COL":"Colombia","COM":"Comoros","COG":"Congo (Brazzaville)","COD":"Congo, (Kinshasa)","COK":"Cook Islands","CRI":"Costa Rica","CIV":"C\xf4te d\'Ivoire","HRV":"Croatia","CUB":"Cuba","CYP":"Cyprus","CZE":"Czech Republic","DNK":"Denmark","DJI":"Djibouti","DMA":"Dominica","DOM":"Dominican Republic","ECU":"Ecuador","EGY":"Egypt","SLV":"El Salvador","GNQ":"Equatorial Guinea","ERI":"Eritrea","EST":"Estonia","ETH":"Ethiopia","FLK":"Falkland Islands (Malvinas)","FAI":"Faroe Islands","FJI":"Fiji","FIN":"Finland","FRA":"France","GUF":"French Guiana","PYF":"French Polynesia","ATF":"French Southern Territories","GAB":"Gabon","GBR":"United Kingdom","GMB":"Gambia","GEO":"Georgia","GER":"Germany","GHA":"Ghana","GIB":"Gibraltar","GRE":"Greece","GRL":"Greenland","GRD":"Grenada","GLP":"Guadeloupe","GUM":"Guam","GTM":"Guatemala","GGY":"Guernsey","GIN":"Guinea","GNB":"Guinea-Bissau","GUY":"Guyana","HTI":"Haiti","HMD":"Heard and Mcdonald Islands","VAT":"Holy See (Vatican City State)","HND":"Honduras","HUN":"Hungary","ISL":"Iceland","IND":"India","IDN":"Indonesia","IRN":"Iran, Islamic Republic of","IRQ":"Iraq","IRL":"Ireland","IMN":"Isle of Man","ISR":"Israel","ITA":"Italy","JAM":"Jamaica","JPN":"Japan","JEY":"Jersey","JOR":"Jordan","KAZ":"Kazakhstan","KEN":"Kenya","KIR":"Kiribati","PRK":"Korea (North)","KOR":"Korea (South)","KWT":"Kuwait","KGZ":"Kyrgyzstan","LAO":"Lao PDR","LVA":"Latvia","LBN":"Lebanon","LSO":"Lesotho","LBR":"Liberia","LBY":"Libya","LIE":"Liechtenstein","LTU":"Lithuania","LUX":"Luxembourg","MKD":"Macedonia, Republic of","MDG":"Madagascar","MWI":"Malawi","MAS":"Malaysia","MDV":"Maldives","MLI":"Mali","MLT":"Malta","MHL":"Marshall Islands","MTQ":"Martinique","MRT":"Mauritania","MUS":"Mauritius","MYT":"Mayotte","MEX":"Mexico","FSM":"Micronesia, Federated States of","MDA":"Moldova","MCO":"Monaco","MNG":"Mongolia","MNE":"Montenegro","MSR":"Montserrat","MAR":"Morocco","MOZ":"Mozambique","MMR":"Myanmar","NAM":"Namibia","NRU":"Nauru","NPL":"Nepal","NLD":"Netherlands","ANT":"Netherlands Antilles","NCL":"New Caledonia","NZL":"New Zealand","NIC":"Nicaragua","NER":"Niger","NGA":"Nigeria","NIU":"Niue","NFK":"Norfolk Island","MNP":"Northern Mariana Islands","NOR":"Norway","OMN":"Oman","PAK":"Pakistan","PLW":"Palau","PSE":"Palestinian Territory","PAN":"Panama","PNG":"Papua New Guinea","PRY":"Paraguay","PER":"Peru","PHI":"Philippines","PCN":"Pitcairn","POL":"Poland","POR":"Portugal","PRI":"Puerto Rico","QAT":"Qatar","REU":"R\xe9union","ROU":"Romania","RUS":"Russian Federation","RWA":"Rwanda","BLM":"Saint-Barth\xe9lemy","SHN":"Saint Helena","KNA":"Saint Kitts and Nevis","LCA":"Saint Lucia","MAF":"Saint-Martin (French part)","SPM":"Saint Pierre and Miquelon","VCT":"Saint Vincent and Grenadines","WSM":"Samoa","SMR":"San Marino","STP":"Sao Tome and Principe","SAU":"Saudi Arabia","SEN":"Senegal","SRB":"Serbia","SYC":"Seychelles","SLE":"Sierra Leone","SGP":"Singapore","SVK":"Slovakia","SLO":"Slovenia","SLB":"Solomon Islands","SOM":"Somalia","RSA":"South Africa","SGS":"South Georgia and the South Sandwich Islands","SSD":"South Sudan","ESP":"Spain","LKA":"Sri Lanka","SDN":"Sudan","SUR":"Suriname","SJM":"Svalbard and Jan Mayen Islands","SWZ":"Swaziland","SWE":"Sweden","CHE":"Switzerland","SYR":"Syrian Arab Republic (Syria)","TWN":"Taiwan, Republic of China","TJK":"Tajikistan","TZA":"Tanzania, United Republic of","THA":"Thailand","TLS":"Timor-Leste","TGO":"Togo","TKL":"Tokelau","TON":"Tonga","TTO":"Trinidad and Tobago","TUN":"Tunisia","TUR":"Turkey","TKM":"Turkmenistan","TCA":"Turks and Caicos Islands","TUV":"Tuvalu","UGA":"Uganda","UKR":"Ukraine","ARE":"United Arab Emirates","ENG":"England","SCO":"Scotland","WLS":"Wales","USA":"United States of America","UMI":"US Minor Outlying Islands","URY":"Uruguay","UZB":"Uzbekistan","VUT":"Vanuatu","VEN":"Venezuela (Bolivarian Republic)","VNM":"Viet Nam","VIR":"Virgin Islands, US","WLF":"Wallis and Futuna Islands","ESH":"Western Sahara","YEM":"Yemen","ZMB":"Zambia","ZWE":"Zimbabwe"}')},376:function(e,t,n){e.exports={switcher:"switcher_switcher__3zrJL"}},38:function(e,t,n){e.exports={floated:"floated_floated__118Mz",container:"floated_container__2tXHo",left:"floated_left__3BIxl","fly-in-from-left":"floated_fly-in-from-left__tlTt0",bottom:"floated_bottom__2l4p2",top:"floated_top__1EBos",right:"floated_right__lbqAX","fly-in-from-right":"floated_fly-in-from-right__2J-y2",linkSwitcher:"floated_linkSwitcher__3R5fI",wrapper:"floated_wrapper__PNN0c",formWrapper:"floated_formWrapper__1yAc7",dot:"floated_dot__1hSH3",link:"floated_link__3_GJM",dotExpando:"floated_dotExpando__3Wf4b",expando:"floated_expando__MiW_b",title:"floated_title__37QlP",input:"floated_input__3iheT",buttons:"floated_buttons__uLTYZ",viewTournament:"floated_viewTournament__10Rw-"}},392:function(e){e.exports=JSON.parse('{"name":"scorch-whiplash","version":"1.7.0","private":true,"license":"MIT","babel":{"plugins":["@babel/plugin-proposal-class-properties"]},"scripts":{"win-start":"set PORT=3001 && react-scripts start","start":"HOST=0.0.0.0 PORT=3001 react-scripts start","test":"react-scripts test","eject":"react-scripts eject","build":"react-scripts build","predeploy":"echo \\"results.scorchapp.co.uk\\" > ./public/CNAME; yarn build","deploy":"gh-pages -d build -o public","prebetadeploy":"echo \\"beta.results.scorchapp.co.uk\\" > ./public/CNAME; yarn build","betadeploy":"yarn build; gh-pages -d build -o beta"},"dependencies":{"@welldone-software/why-did-you-render":"^4.3.2","aos":"^2.3.4","axios":"^0.20.0","bcryptjs":"^2.4.3","chartist":"^0.11.4","chartist-plugin-axistitle":"0.0.7","chartist-plugin-tooltips-updated":"^0.1.3","cheerio":"^1.0.0-rc.3","chess-web-api":"^1.0.10","chess.js":"^0.10.3","classnames":"^2.2.6","fen-chess-board":"^2.0.5","html-to-react":"^1.4.5","leven":"^3.1.0","node-vibrant":"^3.1.6","react":"^17.0.1","react-chartist":"^0.14.3","react-dom":"^17.0.1","react-facebook-login":"^4.1.1","react-icons":"^3.11.0","react-images":"^1.1.7","react-indiana-drag-scroll":"^1.8.0","react-markdown":"^4.3.1","react-pgn-viewer":"^0.2.4","react-photo-gallery":"^8.0.0","react-responsive-carousel":"^3.2.10","react-router-dom":"^5.2.0","react-scripts":"^4.0.0","react-slider":"^1.1.2","react-twitch-embed":"^2.1.0","reactjs-chessboard":"^0.0.9","socket.io-client":"^2.3.1","universal-cookie":"^4.0.4"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@babel/plugin-proposal-class-properties":"^7.12.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","@types/aos":"^3.0.3","@types/bcrypt":"^3.0.0","@types/chartist":"^0.9.48","@types/cheerio":"^0.22.22","@types/classnames":"^2.2.11","@types/jest":"^24.0.0","@types/node":"^12.19.4","@types/react":"^16.9.56","@types/react-dom":"^16.9.9","@types/react-facebook-login":"^4.1.2","@types/react-router-dom":"^5.1.6","@types/react-slider":"^1.0.0","@types/socket.io-client":"^1.4.34","@types/universal-cookie":"^2.2.0","aws-sdk":"^2.792.0","eslint":"^7.13.0","node-sass":"^4.14.1","typescript":"^4.0.5"}}')},393:function(e,t,n){e.exports={news:"news_news__3JwX8"}},40:function(e,t,n){e.exports={header:"registered_header__1Gp9E",table:"registered_table__yBsRH",cell:"registered_cell__2gBeU",headerCell:"registered_headerCell__3zk9f",flag:"registered_flag__3SAHb",tr:"registered_tr__2fs11",stickyheader:"registered_stickyheader__1HWiu",showAllButton:"registered_showAllButton__1DD0h",rowLast:"registered_rowLast__3NF--"}},405:function(e,t,n){},408:function(e,t,n){},409:function(e,t,n){},410:function(e,t,n){},44:function(e,t,n){e.exports={container:"dashboard_container__2J23A",left_column:"dashboard_left_column__2yqzh",info_organiser_container:"dashboard_info_organiser_container__329_7",description:"dashboard_description__2f7Ep",organiser_container:"dashboard_organiser_container__1bD29",tieBreakSection:"dashboard_tieBreakSection__1E9RP",tieBreakContainer:"dashboard_tieBreakContainer__1UUuR",visible:"dashboard_visible__ZUPCq",tieBreakTitle:"dashboard_tieBreakTitle__2Bgc7",tieBreaks:"dashboard_tieBreaks__3QIuR",featured:"dashboard_featured__1uxAe",live:"dashboard_live__9fbmX",teams_announcements:"dashboard_teams_announcements__1_Etj",header:"dashboard_header__3PhQ6",teams_list:"dashboard_teams_list__1OrFn",announcements:"dashboard_announcements__Ye1Fj"}},45:function(e,t,n){e.exports={container:"teams_container__2UodT",userTable:"teams_userTable__1ewml",compactContainer:"teams_compactContainer__1FsXq",compact:"teams_compact__JlUva",preview:"teams_preview__3baBK",title:"teams_title__ZBgAW",menu:"teams_menu__3GQxR",active:"teams_active__3EYBs",inactive:"teams_inactive__2C24V",searchBar:"teams_searchBar__2Xvbs",searchBarDiv:"teams_searchBarDiv__39JPn",searchIcon:"teams_searchIcon__7VoOb","scroll-up":"teams_scroll-up__ydb2Z"}},455:function(e,t){},487:function(e,t,n){},492:function(e,t){},494:function(e,t){},50:function(e,t,n){e.exports={pgnHeaderStyles:"pgnviewer_pgnHeaderStyles__1AQQ0",matchName:"pgnviewer_matchName__19kHv",link:"pgnviewer_link__2D2Yj",matchinfo:"pgnviewer_matchinfo__2FfM_",infocenter:"pgnviewer_infocenter__8V_XJ",infoleft:"pgnviewer_infoleft__39J7z",inforight:"pgnviewer_inforight__2Q4ZK",chessboard:"pgnviewer_chessboard__2rr2C"}},504:function(e,t){},506:function(e,t){},51:function(e,t,n){e.exports={sidebar:"sidebar_sidebar__2onqj",name:"sidebar_name__36s3Y",announcement:"sidebar_announcement__3Kxqn",title:"sidebar_title__3-Bzg",body:"sidebar_body__yxp0C",dates:"sidebar_dates__3BaX0",more:"sidebar_more__2_1JR",statusPicker:"sidebar_statusPicker__3PMmo",timezone:"sidebar_timezone__Q_npt",download:"sidebar_download__ctCo6",jumpTo:"sidebar_jumpTo__1aUvg",expandAll:"sidebar_expandAll__1JSCF",searchBar:"sidebar_searchBar__1tfzm"}},531:function(e,t){},533:function(e,t){},534:function(e,t){},539:function(e,t){},541:function(e,t){},560:function(e,t){},57:function(e,t,n){e.exports={th:"leaderboard_th__AoCU4"}},572:function(e,t){},575:function(e,t){},58:function(e,t,n){e.exports={featured:"featured_featured__zs_iR",headerItems:"featured_headerItems__2EPoN",headingContainer:"featured_headingContainer__5ud5j",table:"featured_table__alHoJ",featured_table:"featured_featured_table__3YWrg",cell:"featured_cell__2ru_7",headerCell:"featured_headerCell__3_aGP",flag:"featured_flag__3DtES",tr:"featured_tr__20MXQ",showAllButton:"featured_showAllButton__cv3-K",menuItems:"featured_menuItems__1p2uG",selectedItem:"featured_selectedItem__DBU8G",nullRound:"featured_nullRound__2RKp0",pairingRound:"featured_pairingRound__2YCgO"}},59:function(e,t,n){e.exports={columns:"members_columns__2lClQ",userTable:"members_userTable__14M2i",row:"members_row__2J83a",status:"members_status__2jTkv",online:"members_online__Wd29_",profile:"members_profile__15QHc",searchBar:"members_searchBar__BWiTL"}},60:function(e){e.exports=JSON.parse('{"server":"http://localhost:8080/","prodServer":"https://api.scorchapp.co.uk/","useProd":true,"prodDomain":"scorchapp.co.uk","flags":"https://ratings.fide.com/svg/|.svg","lichess":"QbFvChDTNzA9oLse","lichessBeta":"pdUYlK2nMo6sL2Tc","lichessCallback":"https://api.scorchapp.co.uk/callback/lichess","lichessCallbackBeta":"http://localhost:8080/callback/lichess"}')},66:function(e,t,n){e.exports={footer:"footer_footer__3JrgB",col1:"footer_col1__1qvnn",logoWrapper:"footer_logoWrapper__cNWw0",logo:"footer_logo__1UHL_",text:"footer_text__3rv_o",copyright:"footer_copyright__3FrmR",version:"footer_version__1joZ_",col2:"footer_col2__2wzJ0",shortcuts:"footer_shortcuts__2x3Je"}},72:function(e,t,n){e.exports={content:"contact_content__3nm_K",fieldSet:"contact_fieldSet__21EWO",list:"contact_list__2yoGo",textArea:"contact_textArea__2-djk",submit:"contact_submit__3HK4a"}},776:function(e,t,n){},78:function(e,t,n){e.exports={container:"meta_container__37e3D",nav:"meta_nav__3NyJ8",divider:"meta_divider__3oJiV",announcement:"meta_announcement__AfOYM",title:"meta_title__xgqyZ"}},79:function(e,t,n){e.exports={columns:"rules_columns__TQ3pt",controls:"rules_controls__2PIup",arrows:"rules_arrows__3i4Ul",title:"rules_title__nnkUS",arrow:"rules_arrow__2Jtq1",link:"rules_link__1ontN"}},8:function(e,t,n){e.exports={container:"user_container__1dvTh",col1:"user_col1__3bNLm",col2:"user_col2__1JC_B",infoWrapper:"user_infoWrapper__2j1nO",section:"user_section__3uWp7",title:"user_title__1_x29",wrapper:"user_wrapper__1caZc",accountSection:"user_accountSection__1v38f",optionsContainer:"user_optionsContainer__1_GSb",pendingContainer:"user_pendingContainer__1Bwh8",account:"user_account__2Ssme",submit:"user_submit__2HRF7",claim:"user_claim__3tI48",inline:"user_inline__3OXtN",icon:"user_icon__1Gghq",active:"user_active__2mhNB",facebookLink:"user_facebookLink__2btxv",accountButton:"user_accountButton__3oyQ8",remove:"user_remove__fI5h_",notes:"user_notes__2esV_",sync:"user_sync__1JFkv",auth:"user_auth__2yfjQ",null:"user_null__3Qrr2",invalid:"user_invalid__lfatA",showInvalid:"user_showInvalid__21lcF",authMessage:"user_authMessage__390Sk",upcomingBattle:"user_upcomingBattle__3pUGX",stage:"user_stage__3ss_y",reversed:"user_reversed__2kR16",flag:"user_flag__2UYEA",name:"user_name__3j1p-",vs:"user_vs__1kBgF",round:"user_round__3EHAB",buttons:"user_buttons__2RHQ3",join:"user_join__3BJv3",gameLink:"user_gameLink__3NIae",infoBox:"user_infoBox__3E8hT",scoreBox:"user_scoreBox__fcW-6",warning:"user_warning__1z2z2",clickButton:"user_clickButton__1FCsS",darkMode:"user_darkMode__71Cw8",merge:"user_merge__o00Ut",teamMerge:"user_teamMerge__3sVxu"}},87:function(e,t,n){e.exports={fsChart:"stats_fsChart__3pHze",title:"stats_title__XSaLS",subtitle:"stats_subtitle__24ox6",name:"stats_name__178sR",url:"stats_url__1r9Nj",header:"stats_header__3zy0s"}},88:function(e,t,n){e.exports={container:"community_container__2qOrW",userTable:"community_userTable__NudmB",status:"community_status__3r8a4",online:"community_online__31t3x",profile:"community_profile__3bNmQ",title:"community_title__26thm"}},89:function(e,t,n){e.exports={stage:"game_stage__2w45h",viewer:"game_viewer__3D_Va",rightCol:"game_rightCol__2HW0P",gamelink:"game_gamelink__Q8dwf",linktext:"game_linktext__3Aaj1",more:"game_more__1LAp-",scroll:"game_scroll__3k70v"}},897:function(e,t,n){},898:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"useLink",(function(){return ga})),n.d(a,"useClub",(function(){return ya})),n.d(a,"useVerify",(function(){return wa}));var i={};n.r(i),n.d(i,"useLink",(function(){return tr})),n.d(i,"handleSync",(function(){return nr}));var r={};n.r(r),n.d(r,"useFacebook",(function(){return ar}));var s=n(1),c=n(2),o=n.n(c),l=n(42),u=n.n(l),d=(n(405),n(86)),j=n(6),b=n(10),h=n.n(b),m=n(17),f=n(3),v=n(9),p=n(33),O=n(373),g=n.n(O),x=n(4),_=(n(407),n(228),n(408),n(409),n(410),n(11)),y=n(18),w=n(7),k=n.n(w),N=n(146),C=n(147),S={gamePoint:{name:"By game point total",func:function(e,t){return t.gamePoints-e.gamePoints}},rating:{name:"By rating",func:function(e,t){return t.rating-e.rating}},null:null,h2h:{name:"By head-to-head score",func:function(e,t){return t.scoreAgainst(e.id)-e.scoreAgainst(e.id)}},gamePointDiff:{name:"By net game points",func:function(e,t){return t.netGamePoint-e.netGamePoint}},whites:{name:"By times played black",func:function(e,t){return e.whiteTotal-t.whiteTotal}},progScore:{name:"By progressive score",func:function(e,t){return t.progressiveScore-e.progressiveScore}},wins:{name:"By most wins",func:function(e,t){return t.histories&&e.histories?t.histories.filter((function(e){return 1===(null===e||void 0===e?void 0:e.match)})).length-e.histories.filter((function(e){return 1===(null===e||void 0===e?void 0:e.match)})).length:0}},gameh2h:{name:"By head-to-head of game points",func:function(e,t){return t.gameScoreAgainst(e.id)-e.gameScoreAgainst(e.id)}},perfRating:{name:"By performance rating",func:function(e,t){return t.performanceRating-e.performanceRating}},oppRating:{name:"By average rating cut",func:function(e,t){var n,a;if(t.oppRatingSum!==e.oppRatingSum)return t.oppRatingSum-e.oppRatingSum;var i=null===(n=e.histories)||void 0===n?void 0:n.filter((function(e){return e})),r=null===(a=t.histories)||void 0===a?void 0:a.filter((function(e){return e}));if(!i||!r||!i.length||!r.length)return 0;for(var s=i.sort((function(e,t){return e.oppRating-t.oppRating})),c=r.sort((function(e,t){return e.oppRating-t.oppRating}));;){var o=[s.shift(),c.shift()],l=o[0],u=o[1];if(void 0==l||void 0===u)break;if(l||u){var d=s.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/s.length,j=c.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/c.length;if(d!==j)return j-d}}return 0}},alphabetical:{name:"Alphabetical",func:function(e,t){return t.firstName>e.firstName?-1:e.firstName>t.firstName?1:0}}};function L(e){var t=e.values,n=e.children;return t.reduce((function(e,t){var n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(s.jsx)(a.Provider,{value:i,children:e})}),n)}var M=Object(c.createContext)({}),R=Object(c.createContext)({isLoggedIn:void 0,profile:void 0,updateProfile:function(){return Promise.resolve()}}),P=Object(c.createContext)({isAuthed:void 0,authLevel:0}),B=Object(c.createContext)({}),E=Object(c.createContext)({}),A=Object(c.createContext)(Object.entries(S)),T=Object(c.createContext)((function(){return""})),I=Object(c.createContext)((function(){return null})),D=Object(c.createContext)((function(e){})),F=Object(c.createContext)("light"),W=n(374),U=n.n(W),G=n(375),H=n(60),z=["BGD","BLZ","GBR","GIB","FJI"];function V(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[""].concat(t).join("/")}function q(e){return e?e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase():e}function K(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function J(e,t){for(var n=["year","month","day","hour","minute","second"],a=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()],i=[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()],r=0;r<n.length;r++)if(a[r]!==i[r]){var s=i[r]-a[r],c=n[r];return s>=2&&(c+="s"),[s,c,"ago"].join(" ")}}function Y(e){if(!e)return null;var t=G[e],n=H.flags.replace("|",e);return z.includes(e)&&(n="/images/|.svg".replace("|",e)),Object(s.jsx)("img",{src:n,alt:e,title:t})}function Q(e,t){return 0===t?function(e){var t=e-1;return String.fromCharCode(65+t%26).repeat(Math.floor(t/26)+1)}(e):1===t?e:2===t?function(e){if(isNaN(e))return NaN;var t=e.toString().split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],a="",i=3;for(;i--;){a=(n[parseInt(t.pop())+10*i]||"")+a}return Array(+t.join("")+1).join("M")+a}(e):e}function X(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)}function Z(e){if(!e)return!1;var t=e.getBoundingClientRect();return!(window.innerHeight<t.top)&&!(t.y+t.height<0)}window.getDocumentHeight=X,window.isVisible=Z;var $=n(376),ee=n.n($);function te(e){var t,n=Object.keys(e.sections).find((function(t){return e.section===t}))||Object.keys(e.sections)[0];return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:[ee.a.switcher,null===(t=e.classNames)||void 0===t?void 0:t.switcher].join(" "),children:Object.entries(e.sections).sort((function(e,t){var n,a;return(null!==(n=e[1].index)&&void 0!==n?n:1/0)-(null!==(a=t[1].index)&&void 0!==a?a:1/0)})).map((function(t,a){var i=Object(f.a)(t,2),r=i[0],c=i[1];return c.hide?null:e.loaded?Object(s.jsx)(v.b,{to:c.link,className:["header-button",c.className,n===r?"selected":""].join(" "),children:Object(s.jsxs)("div",{children:["string"===typeof c.icon?Object(s.jsx)("img",{src:c.icon,alt:c.name}):c.icon,c.name||q(r)]})},["header-button",a].join(".")):Object(s.jsx)("div",{className:["header-button"].join(" "),children:"\u200b"},["header-button",a].join(" "))}))})})}var ne=n(13),ae=n.n(ne);function ie(e){var t=Object(c.useContext)(R).isLoggedIn,n=Object(c.useState)(""),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useCallback)((function(){return t?null:r("/login")}),[t,r]);return i?Object(s.jsx)(p.a,{to:i}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(te,Object(j.a)(Object(j.a)({},e),{},{loaded:e.loaded.all,sections:{dashboard:{name:"Dashboard",link:"/t/".concat(e.id,"/dashboard"),icon:Object(s.jsx)(x.db,{})},pairings:{name:"Pairings",link:"/t/".concat(e.id,"/pairings"),icon:Object(s.jsx)(x.a,{})},standings:{name:"Standings",link:"/t/".concat(e.id,"/standings"),icon:Object(s.jsx)(N.b,{}),index:"knockout"===e.settings.pairingSystem?0:void 0},stats:{name:"Stats",link:"/t/".concat(e.id,"/stats"),icon:Object(s.jsx)(C.a,{})}}})),e.settings.allowRegistration&&"closed"!==e.settings.allowRegistration?Object(s.jsx)("div",{className:["header-button",ae.a.join].join(" "),onClick:o,children:Object(s.jsxs)("div",{children:[Object(s.jsx)(x.T,{}),"Join this tournament"]})}):null]})}var re=n(148),se=n.n(re),ce=n(20),oe=n(21),le=new(n(394).a),ue=function(){function e(){Object(ce.a)(this,e)}return Object(oe.a)(e,[{key:"getAll",value:function(){var e=le.getAll();return Promise.resolve(e)}},{key:"get",value:function(e){return Promise.resolve(le.get(e)||"")}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/",maxAge:604800};return Promise.resolve(le.set(e,t,n))}},{key:"getLocal",value:function(e){if(!localStorage)return"";var t=localStorage.getItem(e)||"";return"true"===t||"false"!==t&&t}},{key:"setLocal",value:function(e,t){if(localStorage)return localStorage.setItem(e,t)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/"};return Promise.resolve(le.remove(e,t))}}]),e}(),de=n(224),je=n.n(de),be=function(){};console.log("isDev",false);var he=H.prodServer,me=(H.prodDomain,H.lichess),fe=H.lichessCallback,ve=se.a.create({baseURL:he});window.axios=ve;var pe=new ue;function Oe(e){return e=Object.assign(e,{method:"GET"}),ve(e).then((function(e){return e.data})).catch((function(e){throw console.error(e),e}))}function ge(e){return e=Object.assign(e,{method:"POST",headers:{"Content-Type":"application/json"}}),ve(e).then((function(e){return e.data})).catch((function(t){if(e.noCatch)throw t;throw t.response&&(400===t.response.status?be("Error:",t.response.data):be("".concat(t.response.status," ").concat(t.response.statusText,": /").concat(t.response.config.url.split("/").pop()),t.response.data)),t}))}function xe(e){e.preventDefault&&e.preventDefault(),e.persist&&e.persist();for(var t=e.target;"HTMLFormElement"!==t.constructor.name&&t.parentElement;)t=t.parentElement;if("HTMLFormElement"!==t.constructor.name)throw new Error("Couldn't find valid form");return ge({data:Array.from(t).reduce((function(e,t){return t.name?("submit"===t.name||("number"===t.type?e[t.name]=Number(t.value):e[t.name]=t.value),e):e}),{}),url:t.action})}window.devCookies=pe,ve.interceptors.request.use(function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=t,e.t2=Object,e.t3=t.headers,e.t4=JSON,e.next=7,pe.getAll();case 7:return e.t5=e.sent,e.t6=e.t4.stringify.call(e.t4,e.t5),e.t7={Authorization:e.t6},e.t8=e.t2.assign.call(e.t2,e.t3,e.t7),e.t9={headers:e.t8},e.abrupt("return",e.t0.assign.call(e.t0,e.t1,e.t9));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var _e=je()(he,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:1e5,reconnectionAttempts:5});function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e.ref),n=Object(f.a)(t,2),a=n[0],i=n[1];Object(c.useEffect)((function(){e.ref&&i(e.ref)}),[i,e.ref]);var r=Object(c.useCallback)((function(){if(!a)return[!1,!0];var e=!1,t=!1;return a.scrollLeft>10&&(e=!0),a.scrollLeft+a.offsetWidth<a.scrollWidth-10&&(t=!0),[e,t]}),[a]),o=Object(c.useReducer)(r,[!1,!0]),l=Object(f.a)(o,2),u=l[0],d=l[1];Object(c.useEffect)((function(){if(a)return d(),a.addEventListener("scroll",d),function(){return a.removeEventListener("scroll",d)}}),[a,d]);var j=Object(c.useCallback)((function(e){if(a){a.scrollBy({left:100*("left"===e?-1:1),behavior:"smooth"})}}),[a]),b=Object(c.useCallback)((function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"scroll",id:"scroll-left",onClick:function(){return j("left")},style:{opacity:u[0]?void 0:0},children:Object(s.jsx)(x.c,{})}),Object(s.jsx)("div",{className:"scroll",id:"scroll-right",onClick:function(){return j("right")},style:{opacity:u[1]?void 0:0},children:Object(s.jsx)(x.d,{})})]})}),[j,u]);return{canScroll:u,setStage:i,scroll:j,ScrollComponents:b}}function we(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useCallback)((function(){return Oe({url:"tournament/".concat(e.id,"/fetchRounds")}).then(i)}),[e.id,i]);Object(c.useEffect)((function(){r()}),[r]);for(var o=e.loaded.status&&"pairings"===e.section&&e.round&&!e.status.active,l=e.loaded.status&&"standings"===e.section&&"team"===e.settings.competitors,u=[],d=e.settings.totalRounds===1/0||"Infinity"===e.settings.totalRounds?1:e.settings.totalRounds,j=1;j<d+1;j++){var b=a[j]?new Date(a[j]).toString():"";u.push(Object(s.jsx)(v.b,{className:["header-button",ae.a.pairingRound,e.round===j?ae.a.roundSelected:"",j>e.status.round?ae.a.nullRound:""].join(" "),to:"/t/".concat(e.id,"/").concat(e.section,"/").concat(j),children:Object(s.jsx)("div",{className:"full-text",children:e.loaded.all?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h4",{children:[o?"":"Round ",j]}),a[j]?Object(s.jsx)("h5",{children:b.substring(0,11)+b.substring(16,21)}):null]}):"\u200b"})},["round",j].join(".")))}o&&u.push(Object(s.jsx)(v.b,{className:["header-button",ae.a.pairingRound,e.round===d+1?ae.a.roundSelected:""].join(" "),to:"/t/".concat(e.id,"/").concat(e.section,"/results"),children:Object(s.jsxs)("div",{className:"full-text",children:[Object(s.jsx)("h4",{children:"Results"}),a[d+1]?Object(s.jsx)("h5",{children:new Date(a[d+1]).toString().substring(0,11)+new Date(a[d+1]).toString().substring(16,21)}):null]})})),l&&u.push(Object(s.jsx)(v.b,{className:["header-button",ae.a.pairingRound,e.round===d+1?ae.a.roundSelected:""].join(" "),to:["","t",e.id,e.section,"individual"].join("/"),children:Object(s.jsx)("div",{className:"full-text",children:Object(s.jsx)("h4",{children:"Individual Scores"})})}));var h=ye(),m=h.setStage,p=h.ScrollComponents;return Object(s.jsxs)("section",{className:k()("container","bodyContainer"),children:[Object(s.jsx)(p,{}),u.length?Object(s.jsx)("div",{className:k()("button-list"),ref:function(e){return m(e)},children:u}):null]})}var ke=function(){return Object(s.jsxs)("div",{id:"main",children:[Object(s.jsxs)("div",{className:"container",style:{display:"flex",flexDirection:"column",alignItems:"center",width:"max-content",alignSelf:"center"},children:[Object(s.jsx)("img",{src:"/logo512.png",style:{width:256,height:256},alt:"Not-Found"}),Object(s.jsx)("div",{children:"PAGE NOT FOUND"})]}),Object(s.jsxs)("div",{className:"container",children:["Think this is a mistake? Check out our ",Object(s.jsx)("a",{href:"https://twitter.com/scorchchess",rel:"noopener noreferrer",target:"_blank",children:"Twitter page"})," for the latest maintenance notices. Tweet ",Object(s.jsx)("a",{href:"https://twitter.com/scorchchess",rel:"noopener noreferrer",target:"_blank",children:"@scorchchess"})," if you think there's an error."]})]})},Ne=n(23),Ce=n.n(Ne),Se=n(26),Le=n.n(Se),Me={score:0,gamePoints:0,played:0,gamesPlayed:0,gameDifference:0,expectedScore:0,expectedGameScore:0,whiteTotal:0,wins:0,draws:0,losses:0,matchPercentage:0,gamePercentage:0,ratingDifference:0},Re=function(){function e(t,n,a){Object(ce.a)(this,e),this.round=n,this.settings=a,this.rounds=void 0,this.tournamentId=void 0,this.id=void 0,this.firstName=void 0,this.lastName=void 0,this.rating=void 0,this.nationality=void 0,this.score=void 0,this.gamePoints=void 0,this.played=void 0,this.expectedScore=void 0,this.expectedGameScore=void 0,this.whiteTotal=void 0,this.isPlaying=void 0,this.active=void 0,this.performanceRating=void 0,this.histories=void 0,this.bonuses=void 0,this.clashList=void 0,this.contact=void 0,this.lichess=void 0,this.chessCom=void 0,this.meta=void 0,this.teamId=void 0,this.pool=void 0,this.createdAt=void 0,this.updatedAt=void 0,this._netGamePoint=void 0,this._progressiveScore=void 0,this._oppRatingSum=void 0;for(var i=Object.keys(Me),r=0,s=Object.keys(t);r<s.length;r++){var c=s[r];i.includes(c)||Object.defineProperty(this,c,{value:t[c]})}"bye"!==this.id&&this.compute(n,a)}return Object(oe.a)(e,[{key:"setRound",value:function(e){this.round=e,this.compute(e,this.settings)}},{key:"setSettings",value:function(e){this.settings=e,this.compute(this.round,e)}},{key:"setBonuses",value:function(e){var t=this;this.bonuses=e.filter((function(e){return e.id===t.id})),this.compute(this.round,this.settings)}},{key:"calcPool",value:function(e,t){var n=t?this.histories.slice(e,t):this.histories;return Number(function(e){var t=function(e){return e.reduce((function(e,t){if(null==t)return e;var n=t.toString();return n in e||(e[n]=0),e[n]++,e}),{})}(e);return(Object.entries(t).sort((function(e,t){return t[1]=e[1]}))[0]||[])[0]}(n.map((function(e){return null===e||void 0===e?void 0:e.pool}))))}},{key:"compute",value:function(e,t){for(var n=Object.assign({},Me),a=1;a<e+1;a++){var i=this.histories[a];i&&(null!==i.match&&(n.played++,"bye"!==i.id&&i.played&&(n.gamesPlayed+=i.played),0===i.match?(n.score+=t.lossReward,n.losses++):.5===i.match?(n.score+=t.drawReward,n.draws++):1===i.match&&(n.score+=t.winReward,n.wins++),i.game&&(n.gamePoints+=i.game),n.expectedScore+=i.expected,n.expectedGameScore+=i.expected*i.played),"W"===i.colour&&n.whiteTotal++)}if(Object.assign(n,{gameDifference:2*n.gamePoints-n.gamesPlayed,matchPercentage:n.played?100*n.score/n.played:-1,gamePercentage:n.gamesPlayed?100*n.gamePoints/n.gamesPlayed:-1,ratingDifference:this.performanceRating-this.rating}),this.bonuses){var r,s=Object(y.a)(this.bonuses);try{for(s.s();!(r=s.n()).done;){var c=r.value;c.round>e||(c.MP&&(n.score+=c.MP),c.GP&&(n.gamePoints+=c.GP))}}catch(b){s.e(b)}finally{s.f()}}for(var o=0,l=Object.keys(n);o<l.length;o++){var u=l[o];Object.defineProperty(this,u,{value:n[u],configurable:!0})}for(var d=[""],j=1;j<this.histories.length;j++)j>e||!this.histories[j]?d[j]="":(null===this.histories[j].match||void 0===this.histories[j].match?d[j]="*":d[j]=this.histories[j].match.toString(),"bye"===this.histories[j].id&&(d[j]+="b"));return this.rounds=d,this}},{key:"hasPlayed",value:function(e){return!!this.histories&&this.histories.some((function(t){return t.id&&t.id===e}))}},{key:"scoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.match?t+=n.match:t}),0):0}},{key:"gameScoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.game?t+=n.game:t}),0):0}},{key:"rank",get:function(){return 0}},{key:"name",get:function(){return"individual"===this.settings.competitors?[this.firstName,this.lastName].join(" "):this.firstName}},{key:"netGamePoint",get:function(){if(this._netGamePoint)return this._netGamePoint;if(!this.histories)return 0;var e=0,t=0;return this.histories.forEach((function(n){n&&(e+=n.game||0,t+=n.played)})),this._netGamePoint=2*e-t}},{key:"progressiveScore",get:function(){if(this._progressiveScore)return this._progressiveScore;if(!this.histories)return 0;var e,t=0,n=Object(y.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(a.match&&(t+=a.match))}}catch(i){n.e(i)}finally{n.f()}return this._progressiveScore=t}},{key:"oppRatingSum",get:function(){if(this._oppRatingSum)return this._oppRatingSum;if(!this.histories)return 0;var e,t=0,n=Object(y.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(t+=a.oppRating)}}catch(i){n.e(i)}finally{n.f()}return this._oppRatingSum=t}}],[{key:"bye",value:function(t,n,a){return new e({id:"bye",tournamentId:t,rating:0,name:"BYE",firstName:"",lastName:"",histories:[]},n,a)}}]),e}(),Pe=n(43),Be=n.n(Pe),Ee=[];function Ae(e){var t=Object(c.useState)(!1),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)([]),s=Object(f.a)(r,2),o=s[0],l=s[1],u=Object(c.useCallback)((function(t,n){switch(n){case"props":return e.players.length?e.players.map((function(t){return new Re(t,e.round,e.settings)})):t;case"round":if(!e.round)return t;if(!t.length)return t;var a,i=t.slice(0),r=Object(y.a)(i);try{for(r.s();!(a=r.n()).done;){a.value.setRound(e.round)}}catch(j){r.e(j)}finally{r.f()}return i;case"settings":return e.settings.winReward?e.players.map((function(t){return new Re(t,e.round,e.settings)})):t;case"bonuses":if(!o.length)return t;if(!t.length)return t;var s,c=!1,l=t.slice(0),u=Object(y.a)(o);try{var d=function(){var e=s.value,t=l.findIndex((function(t){return t.id===e.id}));if(t<0)return"continue";l[t].bonuses||(l[t].setBonuses(o),c=!0)};for(u.s();!(s=u.n()).done;)d()}catch(j){u.e(j)}finally{u.f()}return c?l:t;default:return t}}),[e.players,e.round,e.settings,o]),d=Object(c.useReducer)(u,Ee),j=Object(f.a)(d,2),b=j[0],h=j[1];Object(c.useEffect)((function(){h("props")}),[h,e.players]),Object(c.useEffect)((function(){h("settings")}),[h,e.settings]),Object(c.useEffect)((function(){h("round")}),[h,e.round]),Object(c.useEffect)((function(){o.length&&h("bonuses")}),[h,o]);var m=Object(c.useCallback)((function(){return e.status.id&&!a?Oe({url:Be.a.resolve(he,["tournament",e.status.id,"fetchBonuses"].join("/"))}).then(l).finally((function(){return i(!0)})):null}),[e.status.id,l,i,a]);return Object(c.useEffect)((function(){a||m()}),[m,a,i]),a?b:Ee}var Te={pre:{rank:{mobile:"Rank",name:"",className:"blank",sort:!1,postConvert:function(e,t){return(1+t).toString()}},nationality:{name:"Fed",mobile:"Federation",className:"flag",convert:Y},name:{name:"Name",className:"playerName left",id:function(e,t,n){return["","individual"===n.competitors?"player":"team",e.id].join("/")},sort:function(e,t){return e>t?1:e<t?-1:0}},rating:{name:"Rating",className:"locked",show:function(e,t,n){return n.showRatings}}},roundColumn:{name:function(e,t){return e.slice(-1)},id:function(e,t,n){if(!e.histories||!e.histories[t]||null===e.histories[t].match)return"";var a=e.histories[t],i=a.colour;"W"===i?e.id:a.id,"W"===i?a.id:e.id;return["","t",n.vanityURL||e.tournamentId,"pairings",t].join("/")+"#"+a.resultId},title:function(e,t,n){if(!e.histories||!e.histories[t])return"";var a=e.histories[t],i=n.find((function(e){return e.id===a.id}));if(!i)return"";var r=null!==a.game&&void 0!==a.game?"\n"+[a.game,a.played-a.game].join("-"):"",s="";if(e.bonuses){var c,o=Object(y.a)(e.bonuses);try{for(o.s();!(c=o.n()).done;){c.value.round===t&&(s="\nBonus granted by organiser")}}catch(l){o.e(l)}finally{o.f()}}return i.name+r+s},className:function(e,t,n){return"*"===e?"edit":""===e?"unset":"playerName"},convert:function(e,t,n,a){if(""===e)return"";if("*"===e)return"*";var i=!1,r=Number(a.slice(-1));if(t.bonuses){var s,c=Object(y.a)(t.bonuses);try{for(c.s();!(s=c.n()).done;){var o=s.value;o.round===r&&(e+=o.MP,i=!0)}}catch(d){c.e(d)}finally{c.f()}}var l,u=parseFloat(e);return l=.5===u?"\xbd":u.toString(),e.endsWith("b")&&(l="("+l+")"),i&&(l+="*"),l},sort:function(e,t){if(e===t)return 0;if(""===e)return 1;if(""===t)return-1;if("*"===e)return 1;if("*"===t)return-1;var n=[Number(e),Number(t)],a=n[0],i=n[1];return e.toString().endsWith("b")&&(a-=.001),t.toString().endsWith("b")&&(i-=.001),i-a}},post:{score:{mobile:"Match Points",name:"MP",className:"locked",convert:function(e,t){return Math.floor(e)===e?e.toFixed():.5===e?"\xbd":Math.floor(e).toFixed()+"\xbd"}},gamePoints:{mobile:"Game Points",name:"GP",className:"locked",convert:function(e,t){return Math.floor(e)===e?e.toFixed():.5===e?"\xbd":Math.floor(e).toFixed()+"\xbd"}},gameDifference:{mobile:"Game Point Difference",brief:"Game Point +/-",name:"G. +/-",className:"locked",convert:function(e){return e?e>0?"+"+e.toFixed(1):e.toFixed(1):""},more:!0},gamesPlayed:{mobile:"Games Played",name:"P",className:"locked",convert:function(e){return e.toString()},more:!0},matchPercentage:{mobile:"Match Point Percentage",brief:"Match Point +/-",name:"M. %",className:"rating",convert:function(e){return e.toFixed()},more:!0},gamePercentage:{mobile:"Game Point Percentage",brief:"Game Point %",name:"G. %",className:"rating",convert:function(e){return e.toFixed()},more:!0},performanceRating:{mobile:"Performance Rating",brief:"Perf. Rating",name:"Perf",className:"rating",convert:function(e){return e.toFixed()},show:function(e,t,n){return n.showRatings},more:!0},ratingDifference:{mobile:"Performance Rating Difference",brief:"Perf. Rating +/-",name:"P. +/-",className:"rating",convert:function(e){return e?e>0?"+"+e.toString():e.toString():""},show:function(e,t,n){return n.showRatings},more:!0},expectedScore:{mobile:"Expected Score",name:"Expected",className:"rating",convert:function(e,t){return e.toFixed(1)+" / "+t.played},show:function(e,t,n){return n.showRatings},more:!0},expectedDifference:{mobile:"Score to Expected",brief:"Expected +/-",name:"E. +/-",className:"rating",convert:function(e){return"undefined"===typeof e?"":e>0?"+"+e.toFixed(2):e.toFixed(2)},show:function(e,t,n){return n.showRatings},more:!0},wins:{mobile:"Wins",name:"W",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0},draws:{mobile:"Draws",name:"D",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0},losses:{mobile:"Losses",name:"L",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0},played:{mobile:"Played",name:"P",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0}}},Ie=/chess\.com\/(?:live#tm=|club\/matches\/live\/(?:[a-z-]+\/)?)([0-9]+)/,De=/(?:https:\/\/)?(?:www.)?(?:(twitch.tv|youtube.com))\/(.*)/,Fe=/^(?:https:\/\/)?(?:www.)?([a-z.]+\.[a-z.]+)\/?(?:.*)?$/,We=/[a-z0-9]*/gi,Ue=[/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i],Ge=/^[a-z0-9][\w-]{0,28}[a-z0-9]$/i;function He(){var e=navigator.userAgent||navigator.vendor||"";return!!Ue[0].test(e)||!!Ue[1].test(e.substr(0,4))}var ze=n(225),Ve=n.n(ze);function qe(e){var t=Object(c.useMemo)((function(){return null===e.upperLimit?null:void 0===e.upperLimit?10*window.innerHeight/100:e.upperLimit}),[e.upperLimit]),n=Object(c.useMemo)((function(){return null===e.lowerLimit?null:void 0===e.lowerLimit?275:e.lowerLimit}),[e.lowerLimit]),a=Object(c.useState)(null),i=Object(f.a)(a,2),r=i[0],s=i[1],l=Object(c.useState)(void 0),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(void 0),h=Object(f.a)(b,2),m=h[0],v=h[1],p=Object(c.useState)(void 0),O=Object(f.a)(p,2),g=O[0],x=O[1],y=Object(c.useState)(void 0),w=Object(f.a)(y,2),N=w[0],C=w[1],S=Object(c.useCallback)((function(e){if(!r)return!1;var a=r.getBoundingClientRect();if(e){if(N&&C(void 0),n&&X()-window.scrollY-a.height<n){var i=X()-a.height-n,s=function(e){for(var t=e;t&&(t=t.parentElement);)if("static"!==window.getComputedStyle(t).position)return e.getBoundingClientRect().top-t.getBoundingClientRect().top;return 0}(r);return C(i),v(s),!1}return!(g&&window.scrollY<g)}if(N){if(window.scrollY<N)return!0}else if(g&&x(void 0),m&&v(void 0),null===t||a.top<t)return j(a.left),x(window.scrollY),!0;return!1}),[r,t,m,n,j,v,g,N,x,C]),L=Object(c.useReducer)(S,null===t),M=Object(f.a)(L,2),R=M[0],P=M[1];Object(c.useEffect)((function(){return window.addEventListener("scroll",P),function(){return window.removeEventListener("scroll",P)}}),[P]);var B=Object(c.useMemo)((function(){var n=Object.assign({},e.children.props.style);return R?Object.assign(n,{left:d},null===t?{top:"8vh"}:void 0,e.fixedStyles):Object.assign(n,e.absoluteStyles,m?{top:m}:void 0)}),[R,e.absoluteStyles,e.fixedStyles,e.children.props.style,m,d,t]);return o.a.cloneElement(e.children,{className:k()(e.children.props.className,Ve.a.sticky,Object(_.a)({},Ve.a.absolute,!R)),style:B,ref:s})}function Ke(e){var t=Ae(e),n=Object(c.useState)(!1),a=Object(f.a)(n,2),i=a[0],r=(a[1],Object(c.useMemo)((function(){return e.finish?e.finish:e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds||e.settings.totalRounds===1/0?e.status.round:e.settings.totalRounds}),[e.finish,e.status.round,e.settings.totalRounds])),o=Object(c.useMemo)((function(){for(var t=[],n=null!==(a=e.start)&&void 0!==a?a:1;n<=r;n++){var a;t.push("round."+n.toString())}return t}),[r,e.start]),l=Object(c.useMemo)((function(){return[].concat(Object(d.a)(Object.keys(Te.pre)),Object(d.a)(o),Object(d.a)(Object.keys(Te.post)))}),[o]).filter((function(t,n){var a=Te.pre[t]||Te.post[t];return!a||!(a.show&&!a.show(null,n,e.settings))})),u=Object(c.useCallback)((function(e,t){return l.includes(t)?e[0]!==t?[t,0]:[t,e[1]+1]:["",0]}),[l]),j=Object(c.useReducer)(u,["score",0]),b=Object(f.a)(j,2),h=b[0],m=b[1],p=Object(c.useContext)(A),O=Object(c.useMemo)((function(){if(!t.length)return[];for(var n=[],a=function(a){var i,s=t[a];if((s.pool||e.pool)&&s.calcPool(e.start,r+1)!==e.pool)return"continue";if("bye"===s.id)return"continue";if(0!==e.searched.length&&!e.searched.find((function(e){return e.id===s.id})))return"continue";for(var c=[],o=0,l=Object.entries(Te.pre);o<l.length;o++){var u=Object(f.a)(l[o],2),j=u[0],b=u[1];b.show&&!b.show(s,a,e.settings)||c.push([s[j],b,s])}for(var h=s.rounds.slice(null!==(i=e.start)&&void 0!==i?i:1,r+1),m=h.length+1;m<=r;m++)h.push("");for(var v=h.map((function(e){return[e,Te.roundColumn,s]})),p=[],O=0,g=Object.entries(Te.post);O<g.length;O++){var x=Object(f.a)(g[O],2),_=x[0],y=x[1];y.show&&!y.show(s,a,e.settings)||p.push([s[_],y,s])}var w=[].concat(c,Object(d.a)(v),p);n.push(w)},c=0;c<t.length;c++)a(c);var o=function(e,t){return t-e},u=h[0].startsWith("round")?Te.roundColumn:Te.pre[h[0]]||Te.post[h[0]];if(u&&!1!==u.sort){u.sort&&(o=u.sort);var j=l.indexOf(h[0]);-1!==j&&(n=n.sort((function(t,n){var a;if(a=h[1]%2?o(n[j][0],t[j][0]):o(t[j][0],n[j][0]))return a;if(e.round===r)return e.state.indexOf(t[j][2].id)-e.state.indexOf(n[j][2].id);for(var i=p.slice(0),s=i.shift();s&&s[1];){var c=s[1].func(t[j][2],n[j][2]);if(c)return c;s=i.shift()}return 0})))}return n.map((function(n,a){return Object(s.jsxs)("tr",{className:k()(Le.a.tr,{even:a%2===0,odd:a%2}),children:[n.map((function(n,r){var c,o=Object(f.a)(n,3),u=o[0],d=o[1],j=o[2],b=u?u.toString():"";d.convert?b=d.convert(u,j,e.settings,l[r]):d.postConvert&&(b=d.postConvert(b,a)),"undefined"!==typeof b&&""!==b||(b="\u200b");var h="function"===typeof d.className?d.className("string"===typeof b?b:"",r,e.settings):d.className,m="function"===typeof d.name?d.name((l[r]||"").toString(),r):d.name,p=d.id?d.id(j,parseInt(m),e.settings):"",O=d.title?d.title(j,parseInt(m),t):"";return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("th",{className:[Le.a.cell,Le.a.headerCell].join(" "),children:Object(s.jsx)("div",{children:d.mobile?d.mobile:m})},["cellHeader",r].join(".")),Object(s.jsx)("td",{className:k()(Le.a.cell,(c={},Object(_.a)(c,Le.a.moreHidden,!i&&d.more&&!He()),Object(_.a)(c,"hidden",!1),c)),children:b?p?Object(s.jsx)(v.b,{to:p,className:[Le.a.cell,h,Le.a[h]].join(" "),title:O,children:b}):Object(s.jsx)("div",{className:[Le.a.cell,h,Le.a[h]].join(" "),title:O,children:b},[u,r].join(".")):null},["cellBody",r].join("."))]})})),i&&!He()?Object(s.jsx)("td",{className:k()(Le.a.cell,Le.a.spacer)}):null]},"row."+a)}))}),[t,h,l,e.round,e.state,r,e.settings,p,e.pool,i,e.searched,e.start,r]);return e.pool&&!O.length?null:Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("section",{className:Le.a.container,children:[e.pool?Object(s.jsxs)("div",{className:Le.a.pool,children:["Pool ",Q(e.pool,e.settings.poolDisplay)]}):null,Object(s.jsxs)("table",{className:k()("download-table full-width",Le.a.table,"standings"),children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[l.map((function(e,t){var n,a=e.startsWith("round")?Te.roundColumn:Te.pre[e]||Te.post[e];return Object(s.jsx)("th",{scope:"column",className:k()(Le.a.th,(n={},Object(_.a)(n,Le.a.round,e.startsWith("round")),Object(_.a)(n,Le.a.moreHidden,!i&&a.more&&!He()),n)),id:e,onClick:function(){return m(e)},children:Object(s.jsx)("div",{className:[Le.a.cell,Le.a.headerCell].join(" "),children:"function"===typeof a.name?a.name(e,t):a.name})},["column",t].join("."))})),i&&!He()?Object(s.jsx)("th",{className:k()(Le.a.cell,Le.a.spacer)}):null]})}),Object(s.jsx)("tbody",{children:O.length?O:Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:42,children:"No players entered yet"})})})]}),Object(s.jsx)(qe,{children:Object(s.jsx)("div",{className:Le.a.col2,children:He()||i?null:Object(s.jsx)("div",{className:Le.a.button,children:Object(s.jsx)(x.d,{})})})})]})})}var Je=n(57),Ye=n.n(Je);function Qe(e,t,n){var a=Object(c.useMemo)(e,t);return Object(c.useDebugValue)(n),a}function Xe(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useCallback)((function(){Oe({url:["","tournament",e.status.id,"getIndividualPlayers"].join("/")}).then(i)}),[e.status.id,i]);Object(c.useEffect)((function(){r()}),[r]);var o=Object(c.useReducer)((function(e){return!e}),!1),l=Object(f.a)(o,2),u=l[0],d=l[1],j=Qe((function(){return{rank:{name:"",value:function(e,t){return t+1},convert:function(e){return"#"+e},bold:!0},nationality:{name:"",value:function(e){return e.nationality}},name:{name:"Name",class:"playerName",value:function(e){return e.name||e.userId},bold:!0},username:{name:"Username",value:function(e){return e.username}},team:{name:"Team",value:function(e){return e.team}},score:{name:"Score",value:function(e){return e.histories.reduce((function(e,t){return t?e+=t.score:e}),0)},bold:!0},averageBoard:{name:"Av. Board",value:function(e){return e.histories.reduce((function(e,t){return t?e+=t.board:e}),0)/e.histories.slice(1).length},convert:function(e){return e.toFixed(2)}},scorePercentage:{name:"Score %",value:function(e){return e.histories.reduce((function(e,t){return t?e+=t.score:e}),0)/e.histories.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.score)})).length*100},convert:function(e){return Math.round(e)}},wins:{name:"W",value:function(e){return e.histories.filter((function(e){return 1===(null===e||void 0===e?void 0:e.score)})).length}},draws:{name:"D",value:function(e){return e.histories.filter((function(e){return.5===(null===e||void 0===e?void 0:e.score)})).length}},losses:{name:"L",value:function(e){return e.histories.filter((function(e){return 0===(null===e||void 0===e?void 0:e.score)})).length}},played:{name:"P",value:function(e){return e.histories.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.score)})).length}}}}),[],"headers"),b=Qe((function(){return a.filter((function(e){return u?e:e.userId})).sort((function(e,t){var n=j.score.value(t)-j.score.value(e);return 0!==n?n:j.averageBoard.value(e)-j.averageBoard.value(t)})).map((function(e,t){return Object(s.jsx)("tr",{children:Object.entries(j).map((function(n,a){var i=Object(f.a)(n,2),r=i[0],c=i[1];return Object(s.jsx)("td",{className:[Ye.a.th,c.bold?"bold":""].join(" "),children:"name"===r&&e.userId?Object(s.jsx)(v.b,{to:"/@/"+e.userId,className:[Ye.a.cell,Ye.a.headerCell,c.class].join(" "),children:c.convert?c.convert(c.value(e,t)):c.value(e,t)}):Object(s.jsx)("div",{className:[Ye.a.cell,Ye.a.headerCell,c.class].join(" "),children:c.convert?c.convert(c.value(e,t)):c.value(e,t)})},["cell",t,a].join("."))}))},k()("row",t))}))}),[j,a,u],"rows");return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("section",{children:Object(s.jsx)("div",{className:"optionsContainer container",children:Object(s.jsxs)("div",{className:["header-button",Ye.a.pairingRound,"switchContainer"].join(" "),children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("div",{children:u?"Hide unregistered":"Show unregistered"}),Object(s.jsx)("div",{children:u?"Hide all users without an account (default)":"Show all users who have played a game"})]}),Object(s.jsxs)("div",{className:"toggleSwitch",onClick:d,children:[Object(s.jsx)("input",{type:"checkbox",className:"check",checked:u}),Object(s.jsx)("div",{className:"toggleSlider round"})]})]})})}),Object(s.jsx)("section",{children:Object(s.jsxs)("table",{className:["download-table full-width",Ye.a.table,"standings"].join(" "),children:[Object(s.jsx)("thead",{className:Ye.a.headers,children:Object(s.jsx)("tr",{children:Object.entries(j).map((function(e,t){var n=Object(f.a)(e,2),a=(n[0],n[1]);return Object(s.jsx)("th",{scope:"column",className:[Ye.a.th].join(" "),children:Object(s.jsx)("div",{className:[Ye.a.cell,Ye.a.headerCell].join(" "),children:a.name})},["column",t].join("."))}))})}),Object(s.jsx)("tbody",{children:b})]})},"standings.1"),Object(s.jsx)("section",{children:Object(s.jsx)("h5",{children:"This feature is in beta. Please contact the tournament director if you believe are there any errors. These will be corrected when the functionality to do so has been added."})})]})}var Ze=n(27),$e=n.n(Ze);function et(e){var t=Object(c.useMemo)((function(){return e.results}),[e.results]),n=Object(c.useMemo)((function(){return"Infinity"===e.settings.totalRounds?t.reduce((function(e,t){return t.round>e?t.round:0}),0):e.settings.totalRounds}),[e.settings,t]),a=Object(c.useMemo)((function(){var t;return null!==(t=e.start)&&void 0!==t?t:1}),[e.start]),i=Object(c.useMemo)((function(){var t;return null!==(t=e.finish)&&void 0!==t?t:e.status.round}),[e.finish,e.status.round]),r=Object(c.useMemo)((function(){var e=[];if(!n)return e;for(var r=a;r<i+1;r++){e[r]||(e[r]=[]);var s,c=Object(y.a)(t);try{for(c.s();!(s=c.n()).done;){var o=s.value;o.round===r&&e[r].push(o)}}catch(l){c.e(l)}finally{c.f()}}return e}),[t,a,i]),o=Object(c.useState)(null),l=Object(f.a)(o,2),u=l[0],d=l[1],j=Object(c.useContext)(T),b=Object(c.useReducer)((function(e,t){for(var n=0;n<t.length;n++){if(!e[n])return t;for(var a=0;a<t[n].length;a++){var i=e[n][a],r=t[n][a];if(!i)return t;if(i[0].x!==r[0].x)return t;if(i[0].y!==r[0].y)return t;if(i[1].x!==r[1].x)return t;if(i[1].y!==r[1].y)return t}}return e}),[]),h=Object(f.a)(b,2),m=h[0],v=h[1],p=Object(c.useState)(!1),O=Object(f.a)(p,2),g=O[0],w=O[1],N=Object(c.useCallback)((function(){if(!g&&t.length){for(var n=Array.from(document.getElementsByClassName($e.a.winner)),a=[],i=[],r=0,s=Array.from(document.getElementsByClassName($e.a.all));r<s.length;r++){var c=s[r],o=(c.getAttribute("data-svg")||"").split("."),l=Object(f.a)(o,3),u=l[0],d=l[1],j=l[2];Number(u)===e.stage&&(i[Number(d)]||(i[Number(d)]={}),i[Number(d)][j]=c)}for(var b=!1,h=0,m=n;h<m.length;h++){var p=m[h],O=(p.getAttribute("data-svg")||"").split("."),x=Object(f.a)(O,3),_=x[0],y=x[1],k=x[2];if(Number(_)===e.stage&&i[Number(y)]){var N=i[Number(y)][k];p&&N&&(a[Number(y)]||(a[Number(y)]=[]),a[Number(y)].push([p.getBoundingClientRect(),N.getBoundingClientRect()]),b||(b=!0))}}v(a),w(b)}}),[t.length,n,v,g,w,e.start,e.finish,e.stage]),C=Object(c.useMemo)((function(){return m.flat(2).reduce((function(e,t){return[t.left<e[0]?t.left:e[0],t.top<e[1]?t.top:e[1]]}),[1e5,1e5])}),[m]),S=Object(c.useMemo)((function(){return m.flat(2).reduce((function(e,t){return[t.left>e[0]?t.left:e[0],t.top>e[1]?t.top:e[1]]}),[0,0])}),[m]),L=Object(c.useReducer)((function(){if(!u)return[0,0];var e=u.getBoundingClientRect();return[e.left,e.top]}),[0,0]),M=Object(f.a)(L,2),R=M[0],P=M[1];Object(c.useEffect)((function(){N()})),Object(c.useEffect)((function(){P()}),[P,u]),Object(c.useEffect)((function(){var e=function(){P(),w(!1)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[w,P]),Object(c.useEffect)((function(){var e=function(){return window.dispatchEvent(new Event("resize"))};e();var t=setTimeout(e,1e3);return function(){return clearTimeout(t)}}),[u]),Object(c.useEffect)((function(){var e=document.getElementById("root");e&&(u?(e.style.overflowY="",e.style.maxHeight=""):(e.style.overflowY="hidden",e.style.maxHeight="100vh"))}),[u]);var B=function(e){var t=e.settings;return{getScores:function(e){var n,a;return"match"===t.displayPoints?null!=e.matchW||null!=e.matchB?[e.matchW,e.matchB]:(null===(a=e.fetched)||void 0===a?void 0:a.scores)?e.fetched.scores:[null,null]:null!=e.resultWhite||null!=e.resultBlack?[e.resultWhite,e.resultBlack]:(null===(n=e.fetched)||void 0===n?void 0:n.scores)?e.fetched.scores:[null,null]}}}({settings:e.settings}).getScores,E=ye({ref:u}).ScrollComponents;return Object(s.jsxs)("section",{className:$e.a.container,"data-embed-id":"knockout",children:[Object(s.jsx)(E,{}),Object(s.jsxs)("div",{className:[$e.a.stage,"scrollable"].join(" "),ref:d,children:[Object(s.jsx)("div",{className:$e.a.columns,children:r.map((function(t,n,r){if(!t)return null;var c=r.slice(0,n+1).filter((function(e){return e})).length,o=t.length?45*Math.pow(2,c-1)-45+"px":0;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:$e.a.roundNumber,children:["Round ",n]}),Object(s.jsx)("div",{className:$e.a.column,style:{paddingTop:o,paddingBottom:o},children:t.map((function(r,o){var l,u;return Object(s.jsxs)(s.Fragment,{children:[r.pool&&r.pool!==(null===(l=t[o-1])||void 0===l?void 0:l.pool)?Object(s.jsx)("div",{className:k()($e.a.poolTitle,Object(_.a)({},$e.a.visible,c<=1)),children:e.poolNames&&null!==(u=e.poolNames[r.pool])&&void 0!==u?u:"Bracket "+r.pool}):null,Object(s.jsxs)("div",{className:$e.a.matchUp,children:[Object(s.jsxs)("div",{className:[$e.a.white].join(" "),children:[n>a?Object(s.jsx)("div",{"data-svg":[e.stage,n-1,r.idW].join("."),className:$e.a.all}):null,Object(s.jsx)(x.r,{style:{color:"white"}}),Object(s.jsx)("div",{className:["playerInfo",$e.a.playerInfo,"bye"===r.idW?$e.a.bye:""].join(" "),children:j(r.idW)}),Object(s.jsx)("div",{className:k()($e.a.score,Object(_.a)({},$e.a.win,r.matchW)),children:B(r)[0]}),r.matchW&&n<i?Object(s.jsx)("div",{"data-svg":[e.stage,n,r.idW].join("."),className:$e.a.winner}):null]}),Object(s.jsxs)("div",{className:[$e.a.black].join(" "),children:[n>a?Object(s.jsx)("div",{"data-svg":[e.stage,n-1,r.idB].join("."),className:$e.a.all}):null,Object(s.jsx)(x.r,{style:{color:"black"}}),Object(s.jsx)("div",{className:["playerInfo",$e.a.playerInfo,"bye"===r.idB?$e.a.bye:""].join(" "),children:j(r.idB)}),Object(s.jsx)("div",{className:k()($e.a.score,Object(_.a)({},$e.a.win,r.matchB)),children:B(r)[1]}),r.matchB&&n<i?Object(s.jsx)("div",{"data-svg":[e.stage,n,r.idB].join("."),className:$e.a.winner}):null]})]},["matchUp",o].join(".")),o<t.length-1?Object(s.jsx)("div",{className:$e.a.spacer}):null]})}))},["column",n].join("."))]})}))}),Object(s.jsx)("svg",{className:$e.a.connectors,style:{left:C[0]-R[0]+2.5,top:C[1]-R[1]+2.5},width:S[0]<C[0]?0:S[0]-C[0],height:S[1]<C[1]?0:S[1]-C[1],children:m.map((function(e,t){return Object(s.jsx)("g",{className:["ct-series","ct-series-"+String.fromCharCode(t+65-1)].join(" "),children:e.map((function(e,t){var n=Object(f.a)(e,2),a=n[0],i=n[1],r=1/3,c=[a.left-C[0],a.top-C[1]],o=[i.left-C[0],i.top-C[1]],l=[(c[0]+o[0])/2,(c[1]+o[1])/2],u=(c[0],c[0],c[1],c[1],c[0],c[0],c[1],c[1],o[0],o[1],[c[0]+.5*(o[0]-c[0]),c[1]+0*(o[1]-c[1])]),d=[c[0]+1*(o[0]-c[0]),c[1]+.5*(o[1]-c[1])];return Object(s.jsx)("path",{className:[$e.a.line,"ct-line"].join(" "),d:Object.entries({M:c.join(" "),C:[u,d,o].map((function(e){return e.join(" ")})).join(", ")}).map((function(e){var t=Object(f.a)(e,2);return t[0]+t[1]})).join(" ")},["path",t].join("."))}))},["lines",t].join("."))}))})]})]})}function tt(e){return{getName:function(t){if(!t||!t.id)return"\u200b";if("bye"===t.id)return"BYE";var n=[];return"individual"===e.competitors?n.push([t.firstName,t.lastName].join(" ")):n.push(t.firstName),e.showRatings&&n.push("(".concat(t.rating,")")),n.join(" ")}}}var nt=function(){function e(t,n){Object(ce.a)(this,e),this.round=n,this.id=void 0,this.w=void 0,this.b=void 0,this.tournamentId=void 0,this.board=void 0,this.teamID=void 0,this.link=void 0,this.linkSource=void 0,this.type=void 0,this.scores=void 0,this.aborted=void 0,this.bodyStatus=void 0,this.metaStatus=void 0,this.registrationTime=void 0,this.startTime=void 0,this.endTime=void 0,this.players=void 0,this.scored=void 0,this.teams=void 0,this.pool=void 0,this.isFeatured=void 0,this.games=void 0,this.debugStatus=void 0;for(var a=0,i=Object.keys(t);a<i.length;a++){var r=i[a];Object.defineProperty(this,r,{value:t[r]})}this.debugStatus=this.status}return Object(oe.a)(e,[{key:"status",get:function(){if(this.aborted)return"aborted";for(var e=0,t=["Confirmed","Finished","Live","Registered","Scheduled"];e<t.length;e++){var n=t[e];if("is"+n in this&&this["is"+n])return n.toLowerCase()}return"pending"}},{key:"isConfirmed",get:function(){return!!this.scored}},{key:"isFinished",get:function(){return!!this.isConfirmed||("finished"===this.bodyStatus||Date.now()>(this.endTime||1/0))}},{key:"isLive",get:function(){return"In Progress"===this.metaStatus||("in_progress"===this.bodyStatus||!!(!this.isFinished&&this.startTime&&Date.now()>this.startTime))}},{key:"isRegistered",get:function(){return Date.now()>(this.registrationTime||1/0)||(!!this.players||(!!this.isLive||!!this.isFinished))}},{key:"isScheduled",get:function(){return Date.now()>(this.startTime||1/0)||(!!this.startTime||("scheduled"===this.bodyStatus||(!!this.isRegistered||!!this.isFinished)))}}]),e}(),at=n(378),it=n.n(at),rt=n(34),st=n.n(rt),ct=(n(487),n(116)),ot=n(29),lt=n(28),ut=n(379),dt=n.n(ut),jt=n(380),bt=n.n(jt),ht=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],mt=n(50),ft=n.n(mt),vt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){return Object(ce.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"render",value:function(){var e=this.props.headerInfo;if(!e)return null;var t=e.Link,n=e.White,a=e.Black,i=e.WhiteTeam,r=e.BlackTeam,c=e.BlackElo,o=e.WhiteElo,l=e.Round,u=e.Game,d=e.Result,j=e.Event,b=e.Site,h=e.Date.split("."),m=h&&"".concat(h[2]," ").concat(ht[new Number(h[1])-1]," ").concat(h[0]);return Object(s.jsxs)("div",{className:k()(ft.a.pgnHeaderStyles,"pgnHeader"),children:[t?Object(s.jsxs)("a",{href:t,rel:"noopener noreferrer",target:"_blank",className:ft.a.link,children:[n," (",o,") - ",a," (",c,")   ",d]}):Object(s.jsxs)("div",{className:ft.a.link,children:[n," (",o,") vs. ",a," (",c,")"]}),i||r?Object(s.jsxs)("div",{className:ft.a.matchName,children:[i," vs. ",r]}):null,Object(s.jsxs)("div",{className:ft.a.matchinfo,children:[j?Object(s.jsx)("div",{className:ft.a.infoleft,children:j}):null,b?Object(s.jsx)("div",{className:ft.a.infoleft,children:b}):null,m?Object(s.jsx)("div",{className:ft.a.infocenter,children:m}):null,l?Object(s.jsxs)("div",{className:ft.a.inforight,children:["Round ",l]}):null,u?Object(s.jsxs)("div",{className:ft.a.inforight,children:["Game ",u]}):null]})]})}}]),n}(o.a.Component),pt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handleDownload=function(){var t=e.props.onDownload;"function"===typeof t&&t()},e}return Object(oe.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{onClick:this._handleDownload,style:this.props.iconStyles,children:Object(s.jsx)(x.z,{})})}}]),n}(o.a.Component),Ot=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handlePreviousMove=function(){var t=e.props.onPreviousMove;"function"===typeof t&&t()},e}return Object(oe.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{onClick:this._handlePreviousMove,style:this.props.iconStyles,children:Object(s.jsx)(x.c,{})})}}]),n}(o.a.Component),gt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handleNextMove=function(){var t=e.props.onNextMove;"function"===typeof t&&t()},e}return Object(oe.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{onClick:this._handleNextMove,style:this.props.iconStyles,children:Object(s.jsx)(x.d,{})})}}]),n}(o.a.Component),xt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handleLastMove=function(){var t=e.props.onLastMove;"function"===typeof t&&t()},e}return Object(oe.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{onClick:this._handleLastMove,style:this.props.iconStyles,children:Object(s.jsx)(x.bb,{})})}}]),n}(o.a.Component),_t=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handleReset=function(){var t=e.props.onReset;"function"===typeof t&&t()},e}return Object(oe.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{onClick:this._handleReset,style:this.props.iconStyles,children:Object(s.jsx)(x.ab,{})})}}]),n}(o.a.Component),yt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handleFlipBoard=function(){var t=e.props.onFlipBoard;"function"===typeof t&&t()},e}return Object(oe.a)(n,[{key:"render",value:function(){var e=this.props.iconStyles,t=JSON.parse(JSON.stringify(e));return Object(s.jsx)("div",{onClick:this._handleFlipBoard,style:t,children:Object(s.jsx)(x.lb,{})})}}]),n}(o.a.Component),wt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handlePlay=function(){var t=e.props.onPlay;"function"===typeof t&&t()},e}return Object(oe.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{onClick:this._handlePlay,style:this.props.iconStyles,children:this.props.isPlaying?Object(s.jsx)(x.Q,{}):Object(s.jsx)(x.S,{})})}}]),n}(o.a.Component),kt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){return Object(ce.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onDownload,n=e.onNextMove,a=e.onPreviousMove,i=e.onReset,r=e.onFlipBoard,c=e.width,o=e.onLastMove,l=e.onPlay,u=e.isPlaying,d=e.fenMove,j={cursor:"pointer",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:c,paddingBottom:"5px"},b={paddingLeft:"20px"};return Object(s.jsxs)("div",{className:"pgnViewerFooter",style:j,children:[!d&&Object(s.jsx)(_t,{onReset:i,iconStyles:b}),!d&&Object(s.jsx)(Ot,{onPreviousMove:a,iconStyles:b}),!d&&Object(s.jsx)(gt,{onNextMove:n,iconStyles:b}),!d&&Object(s.jsx)(xt,{onLastMove:o,iconStyles:b}),!d&&Object(s.jsx)(wt,{onPlay:l,iconStyles:b,isPlaying:u}),Object(s.jsx)(yt,{onFlipBoard:r,iconStyles:b}),Object(s.jsx)(pt,{onDownload:t,iconStyles:b})]})}}]),n}(o.a.Component),Nt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;Object(ce.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._handleChangeMove=function(){var t=e.props,n=t.onChangeMove,a=t.moveIndex;"function"===typeof n&&n(a)},e}return Object(oe.a)(n,[{key:"render",value:function(){var e=this.props,t=e.move,n=e.moveIndex,a=e.currentIndex,i=n%2!==0,r=Math.ceil(n/2)+".",c={cursor:"pointer",color:"black",display:"inline-block"};return a===n&&(c.fontWeight=700),Object(s.jsxs)("span",{onClick:this._handleChangeMove,style:c,children:[i&&r,"\xa0",t,"\xa0"]})}}]),n}(o.a.Component),Ct=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(){var e;return Object(ce.a)(this,n),(e=t.call(this)).moveList=Object(c.createRef)(),e}return Object(oe.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.props.moves){var t=e.moves||[];this.props.moves.length!==t.length&&this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}}},{key:"componentDidMount",value:function(){this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}},{key:"render",value:function(){var e=this.props,t=e.result,n=e.moves,a=e.currentIndex,i=e.onChangeMove,r=e.startAtMove,c=e.endAtMove,o=e.fenMove;return n?Object(s.jsxs)("div",{className:"pgnViewerMoveList",ref:this.moveList,children:[!o&&n.map((function(e,t){return t<r-1||t>c-1?null:Object(s.jsx)(Nt,{onChangeMove:i,currentIndex:a,move:e,moveIndex:t+1},t)})),o&&Object(s.jsxs)("div",{children:[o%2===0?"White":"Black"," to move"]}),Object(s.jsx)("span",{className:"bold",children:t})]}):null}}]),n}(o.a.Component),St={base:{display:"flex",justifyContent:"center",flexDirection:"row"},wrapper:{width:500,background:"white"}},Lt=function(e){var t,n=JSON.parse(JSON.stringify(St)),a=Object(y.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n[i.area][i.stylePair[0]]=i.stylePair[1]}}catch(r){a.e(r)}finally{a.f()}return n},Mt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(e){var a;return Object(ce.a)(this,n),(a=t.call(this,e))._updateDimensions=function(){a.setState({windowWidth:window&&window.innerWidth})},a._makeIncreasingMoves=function(e){for(var t=e.numberOfMoves,n=e.reset,i=a.state,r=i.chess,s=i.moves,c=i.index,o=n?0:new Number(c),l=0;l<t;l++)r.move(s[o]),o++;a.setState({chess:r,index:o})},a._handleNextMove=function(){var e=a.state,t=e.moves,n=e.chess,i=e.index,r=e.endAtMove,s=new Number(i);if(s>=t.length||i===r)return null;n.move(t[s]),s++,a.setState({chess:n,index:s})},a._handlePreviousMove=function(){var e=a.state,t=e.chess,n=e.index,i=e.startAtMove,r=new Number(n);r<=0||n===i||(t.undo(),r--,a.setState({chess:t,index:r}))},a._handleReset=function(){var e=a.state,t=e.chess,n=e.startAtMove;t.reset(),n?a._makeIncreasingMoves({numberOfMoves:n,reset:!0}):a.setState({chess:t,index:0})},a._handleLastMove=function(){var e=a.state,t=e.moves,n=e.index,i=e.endAtMove;if(!(n>=t.length||n===i)){var r=i?i-n:t.length-n;a._makeIncreasingMoves({numberOfMoves:r})}},a._handleFlipBoard=function(){a.setState({orientation:"w"===a.state.orientation?"b":"w"})},a._handlePlay=function(){var e=a.state,t=e.moves,n=(e.chess,e.index),i=e.isPlaying;i||(n>=t.length&&a._handleReset(),a._handleNextMove()),a.setState({isPlaying:!i})},a._handleChangeMove=function(e){var t=a.state,n=t.chess,i=t.index;if(e!==i)if(e<i){for(var r=0;r<i-e;r++)n.undo();a.setState({chess:n,index:e})}else{var s=e-i;a._makeIncreasingMoves({numberOfMoves:s})}},a._handleDownload=function(){var e=a.state,t=e.headerInfo,n=e.fenMove,i=e.chess,r=document.createElement("a"),s=n?i.fen():a.props.pgnInformation,c=n?"txt":"pgn",o=new Blob([s],{type:"text/plain"}),l=t.White.split(" ").pop(),u=t.Black.split(" ").pop();r.href=URL.createObjectURL(o),r.download="".concat(l,"_vs_").concat(u,"_").concat(t.Date,".").concat(c),r.click()},a._handleKeyPress=function(e){if(!a.pressed)switch(a.pressed=!0,console.log("pressed"),e.key){case"ArrowLeft":a._handlePreviousMove(),e.preventDefault();break;case"ArrowRight":a._handleNextMove(),e.preventDefault();break;case"ArrowUp":a._handleReset(),e.preventDefault();break;case"ArrowDown":a._handleLastMove(),e.preventDefault()}},a.state={chess:null,moves:null,index:null,headerInfo:null,isPlaying:null,isLoaded:null,startAtMove:null,fenMove:null,endAtMove:null,windowWidth:window&&window.innerWidth,orientation:a.props.orientation},a.pressed=!1,a}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.pgnInformation,t=new dt.a,n=0,a=e.trim().replace(/\[/g,"");if(!a)return null;var i=a.split("]").map((function(e){return e.trim()}));t.load_pgn(e);for(var r=0;r<i.length-2;r++){var s=i[r].split(' "');s[1]?t.header(s[0].replace(/\"/g,""),s[1].replace(/\"/g,"")):t.header(s[0].replace(/\"/g,""))}var c=t.header(),o=t.history();t.reset();var l=2*c.StartAtMove-1,u=2*c.EndAtMove,d=c.Fen&&c.Fen.split(""),j=d&&"b"===d.pop(),b=d&&d.join(""),h=j?2*b:2*b-1;if(l)for(var m=0;m<l;m++)t.move(o[n]),n++;else if(d)for(var f=0;f<h;f++)t.move(o[n]),n++;if(this.props.startAtLatest)for(var v=0;v<o.length;v++)t.move(o[n]),n++;this.setState({chess:t,moves:o,index:n,startAtMove:l,endAtMove:u,fenMove:d?h:null,headerInfo:c}),this._updateDimensions(),window.addEventListener("resize",this._updateDimensions),window.addEventListener("load",this._updateDimensions),window.addEventListener("orientationchange",this._updateDimensions)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.isPlaying?this.timeoutID=setTimeout((function(){return e._handleNextMove()}),1e3):clearTimeout(this.timeoutID)}},{key:"componentWillMount",value:function(){var e=this;document.addEventListener("keydown",this._handleKeyPress,!1),document.addEventListener("keyup",(function(){e.pressed=!1}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._updateDimensions),window.removeEventListener("load",this._updateDimensions),window.removeEventListener("orientationchange",this._updateDimensions),document.removeEventListener("keydown",this._handleKeyPress,!0)}},{key:"render",value:function(){var e=this.props,t=e.blackSquareColor,n=e.whiteSquareColor,a=e.width,i=e.backgroundColor,r=e.showCoordinates,c=this.state,o=c.chess,l=c.moves,u=c.index,d=c.headerInfo,j=c.orientation,b=c.isPlaying,h=c.windowWidth,m=c.startAtMove,f=c.endAtMove,v=c.fenMove,p=function(e){var t=e.windowWidth,n=e.backgroundColor,a=e.defaultWidth,i=t&&t<768,r=i?"100%":a,s=i?"column":"row",c=[];c.push({area:"base",stylePair:["width",r]}),c.push({area:"base",stylePair:["flexDirection",s]}),c.push({area:"wrapper",stylePair:["width",r]}),c.push({area:"wrapper",stylePair:["background",n]});var o=Lt(c);return{width:r,isMobile:i,baseStyles:o.base,wrapperStyles:o.wrapper}}({windowWidth:h,backgroundColor:i,defaultWidth:a}),O=(p.baseStyles,p.wrapperStyles),g=p.isMobile,x=p.width,_=function(e,t){var n=(t-1)%2===0,a=null;if(e&&t)switch(e[t-1]){case"O-O":a=n?"g1":"g8";break;case"O-O-O":a=n?"c1":"c8";break;default:a=e[t-1].match(/[a-z][1-8]/gm)[0]}return a}(l,u);return Object(s.jsxs)("div",{className:"pgnWrapper",style:O,children:[d&&Object(s.jsx)(vt,{headerInfo:d,width:x}),Object(s.jsxs)("div",{className:"pgnViewerMain",onWheel:function(e){e.stopPropagation()},children:[Object(s.jsx)("div",{className:ft.a.chessboard,children:Object(s.jsx)(bt.a,{blackSquareColour:t,fen:o&&o.fen()||"start",orientation:j,showCoordinates:r,activeSquare:_,style:{border:"2px solid lightgrey"},whiteSquareColour:n,width:g?x:2/3*x,height:g?x:2/3*x})}),!g&&Object(s.jsx)(Ct,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:l,width:1/3*x,startAtMove:m,endAtMove:f,fenMove:v,result:d?d.Result:null})]}),Object(s.jsx)(kt,{isPlaying:b,onPlay:this._handlePlay,onDownload:this._handleDownload,onFlipBoard:this._handleFlipBoard,onNextMove:this._handleNextMove,onPreviousMove:this._handlePreviousMove,onReset:this._handleReset,fenMove:v,onLastMove:this._handleLastMove,width:x}),g&&Object(s.jsx)(Ct,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:l,width:x,startAtMove:m,endAtMove:f,fenMove:v,result:d?d.Result:null})]})}}]),n}(o.a.Component),Rt=function(e){Object(ot.a)(n,e);var t=Object(lt.a)(n);function n(e){var a;return Object(ce.a)(this,n),(a=t.call(this,e)).makeViewer=function(e){var t=e.pgnInformation,n=a.props,i=n.blackSquareColor,r=n.whiteSquareColor,c=n.orientation,o=n.width,l=n.backgroundColor,u=n.showCoordinates,d=n.startAtLatest;return Object(s.jsx)(Mt,{pgnInformation:t,blackSquareColor:i,whiteSquareColor:r,width:o,orientation:c,backgroundColor:l,showCoordinates:u,startAtLatest:d})},a.createInnerHtml=function(){return{__html:a.props.children}},a.additionalHTMLModification=function(){var e=a.props,t=e.nodeToModify,n=e.nodeModification,i=u.a.findDOMNode(Object(ct.a)(a)).querySelectorAll(t);if("function"!==typeof n||!t)return null;for(var r=0;r<i.length;r++)n(i[r])},a.setPgn=function(e){for(var t=u.a.findDOMNode(Object(ct.a)(a)).querySelectorAll("pgn"),n=0;n<t.length;n++)u.a.render(a.makeViewer({pgnInformation:e[n]}),t[n])},a.state={pgns:null},a}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){for(var e=u.a.findDOMNode(this).querySelectorAll("pgn"),t=[],n=0;n<e.length;n++)t.push(e[n].innerHTML.slice(0));this.setState({pgns:t}),this.additionalHTMLModification(),this.setPgn(t)}},{key:"componentDidUpdate",value:function(){this.additionalHTMLModification(),this.setPgn(this.state.pgns)}},{key:"render",value:function(){var e=this.props,t=e.innerHTML,n=e.children;return Object(s.jsxs)("div",{children:[t&&Object(s.jsx)("div",{dangerouslySetInnerHTML:this.createInnerHtml()}),!t&&Object(s.jsx)("div",{children:this.makeViewer({pgnInformation:n})})]})}}]),n}(o.a.Component);Rt.defaultProps={backgroundColor:"#e1e5ed",blackSquareColor:"steelblue",orientation:"w",showCoordinates:!0,whiteSquareColor:"aliceblue",width:600};var Pt=Rt,Bt=n(149),Et=n.n(Bt),At={timeout:1,result:1,agreed:1},Tt={insufficient:1,agreed:1,repetition:1},It={win:1},Dt=new it.a({queue:!0});function Ft(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Dt.dispatch(Dt.getPlayer,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Dt.dispatch(Dt.getClub,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,t){return zt.apply(this,arguments)}function zt(){return(zt=Object(m.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){Dt.dispatch(Dt.getTeamLiveMatchBoard,(function(t,n){if(n)return a(n);e(t.body)}),[t,n])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e){return qt.apply(this,arguments)}function qt(){return(qt=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Dt.dispatch(Dt.getTeamLiveMatch,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e,t){if(e.chessCom){var n=e.chessCom.toLowerCase().split("/").pop(),a=t.url.toLowerCase().split("/").pop();if(n&&a&&n===a)return!0}var i,r=e.name||e.firstName;if(r&&function(e,t){var n=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(!n||!a)return 1;if(n===a)return 0;if(n.length>6){if(a.startsWith(n))return 0;if(a.endsWith(n))return 0;if(n.startsWith(a))return 0;if(n.endsWith(a))return 0}return U()(n,a)/n.length}(null===r||void 0===r?void 0:r.toLowerCase().replace("chess","").replace("club",""),null===(i=t.name)||void 0===i?void 0:i.replace("chess","").replace("club",""))<.45)return!0;return!1}function Jt(e){var t,n,a=function(e,t){var n=Object(c.useState)(e),a=Object(f.a)(n,2),i=a[0],r=a[1];return Object(c.useDebugValue)("".concat(t,": ").concat(i)),[i,r]}(20,"boards"),i=Object(f.a)(a,2),r=i[0],o=i[1];Object(c.useEffect)((function(){e.boards&&o(e.boards)}),[e.boards,o]);var l=Object(c.useCallback)((function(){return e.match.games?(Array.isArray(e.match.games)?e.match.games:Object.values(e.match.games)).reduce((function(e,t,n,a){var i,r,s,c,o,l,u=[null===(i=t.w)||void 0===i?void 0:i.username.toLowerCase(),null===(r=t.b)||void 0===r?void 0:r.username.toLowerCase()],d=e.findIndex((function(e){var t,n,a=[null===(t=e.games[0].white)||void 0===t?void 0:t.username.toLowerCase(),null===(n=e.games[0].black)||void 0===n?void 0:n.username.toLowerCase()];return u[0]===a[0]&&u[1]===a[1]||u[0]===a[1]&&u[1]===a[0]})),j=null===(s=t.w)||void 0===s?void 0:s.username.toLowerCase(),b=null===(c=t.b)||void 0===c?void 0:c.username.toLowerCase(),h={white:t.w,black:t.b,pgn:t.pgn,team:(null===(o=t.w)||void 0===o?void 0:o.team)===(null===(l=a[0].w)||void 0===l?void 0:l.team)?0:1};if(-1!==d){var m,f;if(e[d].games.push(h),j in e[d].boardScores)e[d].boardScores[j]+=null===(m=t.w)||void 0===m?void 0:m.result;if(b in e[d].boardScores)e[d].boardScores[b]+=null===(f=t.b)||void 0===f?void 0:f.result}else{var v,p,O;e.push({boardScores:(O={},Object(_.a)(O,j,null===(v=t.w)||void 0===v?void 0:v.result),Object(_.a)(O,b,null===(p=t.b)||void 0===p?void 0:p.result),O),games:[h]})}return e}),[]):[]}),[e.match.games]),u=Object(c.useReducer)((function(e,t){if(Array.isArray(t))return t;var n=e.slice(0),a=Array.isArray(t.games)?t.games:Object.values(t.games);return a.length?(n[t.board-1]={boardScores:t.boardScores,games:a},n):e}),[]),d=Object(f.a)(u,2),j=d[0],b=d[1];Object(c.useEffect)((function(){b(l())}),[b,l]);var p=Object(c.useState)(0),O=Object(f.a)(p,2),g=O[0],w=O[1],k=Qe((function(){var t,n;return e.teams.length?e.teams:e.match.games&&e.match.games[0]?[{name:null===(t=e.match.games[0].w)||void 0===t?void 0:t.team},{name:null===(n=e.match.games[0].b)||void 0===n?void 0:n.team}]:[]}),[e.teams,e.match.games],"teams"),C=Qe((function(){var t={};if(!e.match.teams)return t;for(var n=0;n<e.match.teams.length;n++){var a,i=e.match.teams[n],r=Object(y.a)(i.players);try{for(r.s();!(a=r.n()).done;){t[a.value.username.toLowerCase()]=n}}catch(s){r.e(s)}finally{r.f()}}return t}),[e.match.teams],"teamDict"),S=Qe((function(){return e.match.isFinished}),[e.match],"matchFinished"),L=Object(c.useReducer)((function(e,t){var n=e.slice(0);return n[t.board]=t.set,n}),[]),M=Object(f.a)(L,2),R=M[0],P=M[1],B=Object(c.useState)(0),E=Object(f.a)(B,2),A=E[0],T=E[1],I=Object(c.useCallback)(Object(m.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.match.link){t.next=2;break}return t.abrupt("return");case 2:if(n=e.match.link.match(Ie)){t.next=5;break}return t.abrupt("return",console.error("Invalid URL: ",e.match.link));case 5:if(a=Number(n[1])){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,Vt(a).catch((function(e){return e&&console.error(e),w(a),{}})).then((function(t){if(t&&t.teams){var n,i,r=Object.values(t.teams);if(((null===(n=e.match.w)||void 0===n?void 0:n.chessCom)||(null===(i=e.match.b)||void 0===i?void 0:i.chessCom))&&(Kt(e.match.w,r[1])||Kt(e.match.b,r[0]))&&r.reverse(),t.start_time&&Date.now()<1e3*t.start_time||"finished"===t.status){w(a);var s=e.match.scores,c=r.map((function(e){return e.score}));!e.match.endTime&&c.some((function(e){return e}))&&(s=c);var o=Object.assign({},e.match,{bodyStatus:t.status,startTime:1e3*t.start_time,endTime:t.end_time?1e3*t.end_time:void 0,players:t.boards,teams:r,scores:s});return e.setMatch(o),Promise.reject()}}return t})).then((function(t){Oe({url:"/tournament/"+e.match.tournamentId+"/scrapeChessComTeamPage",params:{url:e.match.link}}).then((function(n){var i,r;if(!n.Teams)throw null;var s=Object.values(n.Teams);if(((null===(i=e.match.w)||void 0===i?void 0:i.chessCom)||(null===(r=e.match.b)||void 0===r?void 0:r.chessCom))&&(Kt(e.match.w,s[1])||Kt(e.match.b,s[0]))&&s.reverse(),!n["Registration Open"]&&!n["Start Time"]&&!n["Finished On"])throw null;var c,o,l=Object.values(t.teams||{});!(t.teams&&l[0]&&l[0].players.length)||s[0]&&s[0].players.length||(s[0].players=(null===(c=l.find((function(e){return e["@id"]===s[0]["@id"]})))||void 0===c?void 0:c.players)||[],s[1].players=(null===(o=l.find((function(e){return e["@id"]===s[1]["@id"]})))||void 0===o?void 0:o.players)||[]);w(a);var u=e.match.scores,d=s.map((function(e){return e.score}));!e.match.endTime&&d.some((function(e){return e}))&&(u=d);var j=n["Players per Team"];e.setMatch(Object.assign({},e.match,{registrationTime:n["Registration Open"]?new Date(n["Registration Open"]).valueOf():void 0,metaStatus:n.Status,startTime:t&&t.start_time?1e3*t.start_time:n["Start Time"]?new Date(n["Start Time"]).valueOf():void 0,endTime:n["Finished On"]?new Date(n["Finished On"]).valueOf():void 0,players:"1-10000"===j?void 0:j,teams:s,scores:u}))})).catch((function(t){t&&console.error(t),e.setMatch(Object.assign({},e.match,{aborted:!0})),e.setFinished(e.match.id)}))})).catch((function(e){e&&console.error(e)}));case 10:case"end":return t.stop()}}),t)}))),[e.setMatch,e.match,w,e.setFinished]);Object(c.useEffect)((function(){g||(e.fetch&&I(),e.match.isFinished&&e.match.games||e.expanded&&I())}),[I,e.expanded,e.fetch,g,e.match]);var D=Object(c.useCallback)(Object(m.a)(h.a.mark((function t(){var n,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=2;break}return t.abrupt("return");case 2:n=h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!R[n]){t.next=2;break}return t.abrupt("return","continue");case 2:if(a=Ht(g,n).then((function(t){b({games:t.games.map((function(t,a){return t.pgn=Xt(t,C,e.teams.map((function(e){return e.name})),e.match.round,n,a+1),t})),boardScores:t.board_scores,board:n});var a=t.games[t.games.length-1];if(!a)throw new Error("No game data given");return t.games.length>A&&T(t.games.length),a.end_time&&P({board:n,set:!0}),!0})).catch((function(e){if(e.status)switch(e.status){case 429:return}if(1!==n||j.length>2){if(r<n)return!0;if(2!==n||j.length)return o(n-1),!1;o(n-2)}return!0})),t.t0=!e.boards,!t.t0){t.next=9;break}return t.next=7,a;case 7:t.t1=t.sent,t.t0=!1===t.t1;case 9:if(!t.t0){t.next=11;break}return t.abrupt("return","break");case 11:case"end":return t.stop()}}),t)})),a=1;case 4:if(!(a<r+1)){t.next=14;break}return t.delegateYield(n(a),"t0",6);case 6:if("continue"!==(i=t.t0)){t.next=9;break}return t.abrupt("continue",11);case 9:if("break"!==i){t.next=11;break}return t.abrupt("break",14);case 11:a++,t.next=4;break;case 14:case"end":return t.stop()}}),t)}))),[g,r,R,j.length,A,T,e.boards,e.match.players,e.teams,C]),F=Object(c.useCallback)(Object(m.a)(h.a.mark((function t(){var n,a,i,r,s,c,o,l,u,d,b,m,f,v,p,O,g,x,_,y,w;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.match).w.id&&a.b.id){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Et.a.hash([a.w.id,a.b.id,a.tournamentId,e.round].join("."),10);case 5:if(i=t.sent,r=[],C&&a.teams){t.next=9;break}return t.abrupt("return");case 9:s=0;case 10:if(!(s<j.length)){t.next=26;break}if(j[s]&&j[s].games){t.next=13;break}return t.abrupt("continue",23);case 13:c=0;case 14:if(!(c<j[s].games.length)){t.next=23;break}if(p=null===(o=j[s].games[c].white)||void 0===o?void 0:o.username.toLowerCase(),O=null===(l=j[s].games[c].black)||void 0===l?void 0:l.username.toLowerCase(),p&&O){t.next=19;break}return t.abrupt("continue",20);case 19:r.push({board:s,game:c+1,pgn:j[s].games[c].pgn,w:{username:null===(u=j[s].games[c].white)||void 0===u?void 0:u.username,result:Qt(null===(d=j[s].games[c].white)||void 0===d?void 0:d.result),team:null===(b=a.teams[C[p]])||void 0===b?void 0:b.name},b:{username:null===(m=j[s].games[c].black)||void 0===m?void 0:m.username,result:Qt(null===(f=j[s].games[c].black)||void 0===f?void 0:f.result),team:null===(v=a.teams[C[O]])||void 0===v?void 0:v.name}});case 20:c++,t.next=14;break;case 23:s++,t.next=10;break;case 26:if(g={startTime:a.startTime||a.registrationTime,endTime:a.endTime,scores:(null===(n=a.teams)||void 0===n?void 0:n.map((function(e){return e.score})))||[],isFinished:a.isFinished||a.isConfirmed},Object.values(g).some((function(e){return Array.isArray(e)?!!e.length&&!e.every((function(e){return!e})):!!e}))){t.next=30;break}return e.sync(!1),t.abrupt("return");case 30:x=20,_=Math.ceil(r.length/x),y=0;case 33:if(!(y<_)){t.next=40;break}return w={id:a.id,idW:a.w.id,idB:a.b.id,tournamentId:a.tournamentId,round:a.round,key:i,fetched:g,games:r.slice(y*x,y*x+x)},t.next=37,ge({url:"/submit/game",data:w,noCatch:!0}).catch(console.error);case 37:y++,t.next=33;break;case 40:e.setFinished(a.id),e.sync(!1);case 42:case"end":return t.stop()}}),t)}))),[g,j,e.match,e.round,e.setFinished,C,e.sync]),W=Object(c.useMemo)((function(){return j.filter((function(e){return e&&e})).length}),[j]);Object(c.useEffect)((function(){e.match.aborted?F():r?W>=r&&F():F()}),[e.match.aborted,W,r]),Object(c.useEffect)((function(){if(!S||!j.length||r){var e=setInterval(D,1e3);return function(){return clearInterval(e)}}}),[g,D,S,j.length,r]);var U=Object(c.useCallback)((function(t,n){var a,i,r=t.games,c=t.boardScores,o=r[r.length-1];if(!o)return null;var l=("team"in o?0===o.team:0===C[null===(a=o.white)||void 0===a?void 0:a.username.toLowerCase()])?o.white:o.black,u=("team"in o?0===o.team:1===C[null===(i=o.black)||void 0===i?void 0:i.username.toLowerCase()])?o.black:o.white;return l?[Object(s.jsx)("div",{className:st.a.username,children:l.username},"usernameW"),Object(s.jsx)("div",{className:st.a.score,children:c[l.username.toLowerCase()]},"scoreW"),Object(s.jsx)(v.b,{to:V("g",e.id,n+1),children:"#"+(n+1)},"board"),Object(s.jsx)("div",{className:st.a.score,children:c[u.username.toLowerCase()]},"scoreB"),Object(s.jsx)("div",{className:st.a.username,children:u.username},"usernameB")]:[]}),[C,e.id]),G=Object(c.useState)(0),H=Object(f.a)(G,2),z=H[0],q=H[1];if(!e.match.games){if(!j.length&&!r)return Object(s.jsx)("div",{children:"Match has not yet started!"});if(!j.filter((function(e){return e&&e.games.length})).length&&!r)return Object(s.jsx)("div",{children:"Still waiting for data from Chess.com. Check back later."});if(!j.length)return Object(s.jsx)("div",{className:st.a.loading,children:Object(s.jsx)(N.a,{})});if(!e.expanded)return null}return Object(s.jsxs)("div",{className:st.a.container,children:[Object(s.jsx)("div",{className:st.a.results,children:Object(s.jsxs)("table",{className:"download-table",children:[Object(s.jsxs)("thead",{children:[e.match.games||Object.keys(C).length?null:Object(s.jsx)("tr",{children:Object(s.jsxs)("th",{colSpan:5,children:[Object(s.jsx)(x.C,{})," Couldn't fetch player-team identifying data from Chess.com for this match",Object(s.jsx)("br",{}),"Check back later or contact a dev if this problem persists."]})}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{style:{width:"40%"},children:null===(t=k[0])||void 0===t?void 0:t.name}),Object(s.jsx)("th",{style:{width:"5%"}}),Object(s.jsx)("th",{style:{width:"10%"},children:"Board"}),Object(s.jsx)("th",{style:{width:"5%"}}),Object(s.jsx)("th",{style:{width:"40%"},children:null===(n=k[1])||void 0===n?void 0:n.name})]})]}),Object(s.jsx)("tbody",{children:j.map((function(e,t){var n;return Object(s.jsx)("tr",{children:null===(n=U(e,t))||void 0===n?void 0:n.map((function(e,n){return Object(s.jsx)("td",{children:e},["cell",t,n].join("."))}))},["row",t].join("."))}))})]})}),!1!==e.showButtons?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:[st.a.button,"button"].join(" "),onClick:function(){return e.sync()},children:[Object(s.jsx)(x.cb,{}),"Sync"]}),Object(s.jsxs)(v.b,{to:["","g",e.match.id].join("/"),className:[st.a.button,"button"].join(" "),children:[Object(s.jsx)(x.o,{}),"Analysis"]})]}):null,e.showBoards?j.map((function(t,n){return Object(s.jsx)(Yt,{id:e.id,pairing:t,teamDict:C,teams:e.teams.map((function(e){return e.name})),round:e.round,board:n+1,focused:z===n,setFocused:function(){return q(n)}},["game",n].join("."))})):null]})}function Yt(e){var t,n=Object(c.useMemo)((function(){return Object.entries(e.pairing.boardScores)}),[e.pairing.boardScores]),a=Object(c.useState)(e.pairing.games.length-1),i=Object(f.a)(a,2),r=i[0],o=i[1],l=Object(c.useRef)(null),u=Object(c.useMemo)((function(){return e.pairing.games.map((function(e,t){return Object(s.jsx)(Zt,{g:e},k()("singleGame",t))}))}),[e.pairing.games]),d=e.pairing.games[r],j=d&&e.teamDict[null===(t=d.black)||void 0===t?void 0:t.username.toLowerCase()]?n.reverse():n;Object(c.useEffect)((function(){window.dispatchEvent(new Event("resize"))}),[]);var b=Object(c.useMemo)((function(){var e=l.current;return e?Array.from(e.querySelectorAll(".visible .pgnViewerFooter > div")):[]}),[l]),h=(Object(c.useCallback)((function(e){var t=e;if(t.deltaY<0){var n=b[1];if(!n)return;n.click(),t.preventDefault()}else if(t.deltaY>0){var a=b[2];if(!a)return;a.click(),t.preventDefault()}}),[b]),Object(c.useCallback)((function(e){switch(e.key){case"ArrowLeft":var t=b[1];if(!t)break;t.click(),e.preventDefault();break;case"ArrowRight":var n=b[2];if(!n)break;n.click(),e.preventDefault();break;case"ArrowUp":var a=b[0];if(!a)break;a.click(),e.preventDefault();break;case"ArrowDown":var i=b[3];if(!i)break;i.click(),e.preventDefault();break;case" ":var r=b[4];if(!r)break;r.click(),l.current&&l.current.scrollIntoView({behavior:"smooth"}),e.preventDefault();break;case"f":var s=b[5];if(!s)break;s.click();break;case"d":var c=b[6];if(!c)break;c.click(),e.preventDefault()}}),[l,b]));Object(c.useEffect)((function(){if(e.focused)return document.addEventListener("keydown",h),function(){return document.removeEventListener("keydown",h)}}),[e.focused,h]);var m=Object(c.useCallback)((function(){l.current&&e.setFocused()}),[l,e.setFocused]);return r<0?null:Object(s.jsxs)("div",{id:[e.id,e.board].join("."),className:st.a.wrapper,onClick:m,ref:l,children:[Object(s.jsxs)("div",{className:st.a.boardLabel,children:[Object(s.jsx)(x.c,{className:[st.a.pan,r?st.a.active:st.a.null].join(" "),onClick:function(){return r?o(r-1):null}}),Object(s.jsx)("span",{className:"bold",children:j[0][1]}),Object(s.jsx)("a",{href:"https://www.chess.com/live/game/"+d.url.split("/").pop(),target:"_blank",rel:"noopener noreferrer",children:Object(s.jsx)(x.o,{})}),Object(s.jsx)("span",{className:"bold",children:j[1][1]}),Object(s.jsx)(x.d,{className:[st.a.pan,r===e.pairing.games.length-1?st.a.null:st.a.active].join(" "),onClick:function(){return r<e.pairing.games.length-1?o(r+1):null}})]}),u.map((function(e,t){return Object(s.jsx)("div",{className:[st.a.gameViewWrapper,t===r?"visible":"hidden"].join(" "),children:e},[st.a.gameViewWrapper,t].join("."))}))]})}function Qt(e){return Object.keys(It).includes(e)?1:Object.keys(Tt).includes(e)?.5:(Object.keys(At).includes(e),0)}function Xt(e,t,n,a,i,r){var s,c=t[null===(s=e.black)||void 0===s?void 0:s.username.toLowerCase()];return['[WhiteTeam "'.concat(c?n[0]:n[1],'"]'),'[BlackTeam "'.concat(c?n[1]:n[0],'"]'),'[Board "'.concat(i,'"]'),'[Game "'.concat(r+1,'"]'),e.pgn.replace('[Round "-"]','[Round "'.concat(a,'"]'))].join("\n")}function Zt(e){var t=e.g,n=Object(c.useState)(""),a=Object(f.a)(n,2),i=a[0],r=a[1];return Object(c.useEffect)((function(){r(""),t.pgn&&r(t.pgn)}),[t,r]),i?Object(s.jsx)(Pt,{innerHTML:!1,showCoordinates:!0,width:"100%",startAtLatest:!0,children:i}):null}function $t(e){var t=e.playerDict,n=e.results,a=e.settings,i=Object(c.useReducer)((function(e,t){var n=Object.assign({},e);if(null===t.scored)return n[t.id]=null,n;var a=t;return n[t.id]=new nt(a,a.round),n}),{}),r=Object(f.a)(i,2),s=r[0],o=r[1],l=Object(c.useMemo)((function(){return Object.values(s)}),[s]),u=Object(c.useCallback)(function(){var e=Object(m.a)(h.a.mark((function e(n,a){var i,r,s,c,l,u,d,j,b,m,v,p,O,g,x,_,w,k,N,C,S,L,M,R;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(y.a)(n),e.prev=1,i.s();case 3:if((r=i.n()).done){e.next=18;break}if(b=r.value,m=b.id,v=b.idW,p=b.idB,O=b.fetched,b.board,b.pool,g=t.get(v.trim()),x=t.get(p.trim()),g||x){e.next=11;break}return o({id:m,scored:null}),e.abrupt("continue",16);case 11:_=en(b,b.linkSource,b.type),w=Object(f.a)(_,2),k=w[0],N=w[1],C=b.fetched||{},S=C.startTime,L=C.endTime,M=Boolean((null===g||void 0===g||null===(s=g.histories[a])||void 0===s?void 0:s.match)||(null===x||void 0===x||null===(c=x.histories[a])||void 0===c?void 0:c.match)),R=Object.assign({},b,{teamID:N,link:k,w:g,b:x,scored:M,startTime:S,endTime:L,scores:(null===g||void 0===g||null===(l=g.histories[a])||void 0===l?void 0:l.game)||(null===x||void 0===x||null===(u=x.histories[a])||void 0===u?void 0:u.game)?[(null===g||void 0===g?void 0:g.histories)?null===g||void 0===g||null===(d=g.histories[a])||void 0===d?void 0:d.game:null,(null===x||void 0===x?void 0:x.histories)?null===x||void 0===x||null===(j=x.histories[a])||void 0===j?void 0:j.game:null]:(null===O||void 0===O?void 0:O.scores)||[null,null],bodyStatus:(null===O||void 0===O?void 0:O.isFinished)?"finished":""}),o(R);case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),i.e(e.t0);case 23:return e.prev=23,i.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}(),[o,t]),d=Object(c.useMemo)((function(){return"chessCom"===a.source&&"team"===a.competitors?Dt.clearQueue.bind(Dt):function(){}}),[a]),j=Object(c.useState)(null),b=Object(f.a)(j,2),v=b[0],p=b[1],O=Object(c.useReducer)((function(e,t){var n=e.slice(0);return n.push(t),n}),[]),g=Object(f.a)(O,2),x=g[0],_=g[1],w=Object(c.useMemo)((function(){var e=Object.values(s).length;return!!e&&(!!n.length&&!(e<n.length))}),[s,n]),k=Object(c.useCallback)((function(){if(w){if(v&&!x.includes(v.id))return p(v);var e=function(e){for(var t,n,a=e.length;0!==a;)n=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[n],e[n]=t;return e}(Object.values(s)).find((function(e){return!!e&&(!!e.link&&(!x.includes(e.id)&&(!e.startTime&&!e.endTime||(!(!e.games||Array.isArray(e.games))||(e.endTime?!(e.scores&&!e.scores.every((function(e){return!e})))||Math.random()<.01:!e.startTime||(Date.now()>e.startTime?Math.random()<.25:Math.random()<.01))))))}));p(e||null)}}),[s,v,p,x,w]);return{matches:l,matchDict:s,setMatch:o,populatematchDict:u,fetchedMatch:v,fetchNext:k,hasFetched:_,beforeSetResults:d}}function en(e,t,n){if("chessCom"===t&&"team"===n){var a,i=null===(a=e.link)||void 0===a?void 0:a.match(Ie);return i?["https://www.chess.com/club/matches/live/"+i[1].trim(),i[1]]:[void 0,void 0]}return[void 0,void 0]}function tn(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)("all"),r=Object(f.a)(i,2),s=r[0],o=r[1],l=Object(c.useReducer)((function(e,t){if(Array.isArray(t))return t;var n=e.slice(0)||[];return e.includes(t)?n.splice(n.indexOf(t),1):n.push(t),n}),[decodeURIComponent(window.location.hash.slice(1).split(".").slice(0,2).join("."))]),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(!1),h=Object(f.a)(b,2),m=h[0],v=h[1];return Object(c.useEffect)((function(){if(!m&&window.location.hash){var e=window.location.hash.slice(1),t=document.getElementById(e);t&&(t.scrollIntoView({behavior:"auto"}),v(!0))}})),{searched:n,setSearched:a,expanded:d,setExpanded:j,visible:s,setVisible:o}}function nn(e){var t,n,a=Object(c.createRef)(),i=Object(c.useState)(null),r=Object(f.a)(i,2),o=r[0],l=r[1],u=Object(c.useState)(!1),d=Object(f.a)(u,2),j=d[0];d[1];Object(c.useEffect)((function(){j&&a.current&&a.current.focus()}),[a,j]);var b=Object(c.useCallback)((function(){o&&e.onSubmit(o)}),[o,e.onSubmit]),h=Object(c.useCallback)((function(e){switch(e.keyCode){case 13:o&&(e.target.value="",b()),e.preventDefault()}}),[o,b]),m=Object(c.useCallback)((function(t){var n=t.nativeEvent,a=t.target,i=a.value,r=i.length,s=e.options.filter((function(t){return e.convert(t).toLowerCase().startsWith(i.toLowerCase())}));if(e.onChange(s),n.data)if(i.trim()){var c=s[0];if(l(c),c){var o=e.convert(c);a.value=o,a.select(),a.setSelectionRange(r,o.length,"forward")}}else l(null)}),[e.options]);return Object(s.jsx)("div",{className:null===(t=e.styles)||void 0===t?void 0:t.scoreSection,children:Object(s.jsx)("input",{type:"text",className:[null===(n=e.styles)||void 0===n?void 0:n.input].join(" "),name:"value",required:!0,placeholder:e.placeholder||"Search",onInput:m,onKeyDown:h,onSubmit:b,autoComplete:"off"})})}function an(e){var t=e.players,n=e.settings,a=e.status,i=e.state,r=e.rProps,o=(e.direction,tt(n).getName),l=Object(c.useState)([]),u=Object(f.a)(l,2),d=u[0],b=u[1],h=Object(c.useMemo)((function(){return Object(s.jsx)("section",{className:Le.a.container,children:Object(s.jsx)("div",{className:Le.a.searchBarDiv,children:Object(s.jsxs)("div",{className:Le.a.searchBar,children:[Object(s.jsx)(x.X,{}),Object(s.jsx)(nn,{onChange:b,onSubmit:Promise.resolve,action:"",options:t,convert:o,styles:Le.a,placeholder:"Search"})]})})})}),[b,t,o]),m=function(e){var t=e.status,n=Object(c.useState)([]),a=Object(f.a)(n,2),i=a[0],r=a[1];return{results:i,updateResults:Object(c.useCallback)((function(){if(t.id&&t.round)return Oe({url:"/tournament/"+t.id+"/getPairings",params:{round:null,withResults:!0}}).then(r)}),[r,t.id,t.round])}}({status:a}),v=m.results,O=m.updateResults;if(Object(c.useEffect)((function(){("knockout"===n.pairingSystem||a.systems.some((function(e){return"knockout"===e.system})))&&O()}),[O,n,a]),"final"===r.match.params.round)return Object(s.jsx)(p.a,{push:!0,to:{pathname:(r.match.url+(r.match.url.endsWith("/")?"":"/")).split("/").slice(0,-2).join("/")+"/"+n.totalRounds,state:r.history.location.state}});if("individual"===r.match.params.round)return Object(s.jsx)(Xe,{status:a});var g=parseInt(r.match.params.round);return isNaN(g)||g<0||g>n.totalRounds?null:(a.systems.length||a.systems.push({from:1,to:a.round+1,system:n.pairingSystem}),Object(s.jsx)(s.Fragment,{children:a.systems.slice(0).reverse().map((function(e,r,c){var o=e.from,l=e.to,u=e.system,b=e.poolNames;if("knockout"===u)return Object(s.jsx)(et,Object(j.a)(Object(j.a)({},{status:a,settings:n}),{},{stage:r+1,start:o,finish:l-1,results:v.filter((function(e){return!(e.round<o)&&!(e.round>l)})),poolNames:b}),k()("knockout",r+1));var m=t.reduce((function(e,t){var n=t.pool||0;return e[n]||(e[n]=0),e[n]++,e}),[]);return Object(s.jsxs)(s.Fragment,{children:[c.findIndex((function(e){return"knockout"!==e.system}))===r?h:null,m.map((function(e,r){return e?Object(s.jsx)(Ke,Object(j.a)({pool:r,start:o,finish:l-1},{status:a,players:t,settings:n,state:i,round:g,searched:d}),k()("standings",r)):null}))]})}))}))}var rn=n(15),sn=n.n(rn);function cn(e){var t;return Object(s.jsx)("div",{className:[sn.a.logo,null===(t=e.classNames)||void 0===t?void 0:t.logo].join(" "),children:Object(s.jsx)("img",{className:sn.a.staticLogo,src:"/favicon.png",alt:"swiss-logo.png"})})}function on(e){var t,n=Object(c.useState)(e.mode),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)(""),l=Object(f.a)(o,2),u=l[0],d=l[1],j=e.setSession,b=Object(c.useState)(""),v=Object(f.a)(b,2),O=v[0],g=v[1],_=Object(c.useCallback)(function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.set("sessionID",t);case 2:j(t),setTimeout((function(){return g("/me")}),2e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j,g]);Object(c.useEffect)((function(){"register"!==i&&"login"!==i&&"reset/password"!==i||window.history.pushState("",document.title,"/"+i+window.location.search)}),[i]);var y=Object(c.useCallback)((function(e){xe(e).then(_).catch((function(e){e&&e.response&&e.response.data&&d(e.response.data),console.error(e)}))}),[d,_]),w=Object(c.useContext)(D),k=Object(c.useCallback)((function(e){var t=e.style;return Object(s.jsxs)("div",{className:sn.a.forgottenContainer,style:t,children:[Object(s.jsx)("div",{className:["input",sn.a.forgotten].join(" "),onClick:function(){return r("reminder")},children:"username reminder"}),Object(s.jsx)("div",{className:["input",sn.a.forgotten].join(" "),onClick:function(){return r("reset")},children:"password reset"})]})}),[r]),N=Object(c.useCallback)((function(){var t,n,a=Object(c.useState)(""),i=Object(f.a)(a,2),r=i[0],o=i[1],l=null===(t=e.location.search.slice(1).split("&").find((function(e){return e.startsWith("code=")})))||void 0===t?void 0:t.slice("code=".length);return Object(c.useEffect)((function(){l&&Oe({url:"exchangeSession",params:{sid:l}}).then(o)}),[l]),l?Object(s.jsxs)("form",{className:sn.a.form,method:"POST",action:Be.a.resolve(he,"triggerPasswordReset"),onSubmit:function(e){var t=e.target;if(t.password.value!==t.passwordRepeat.value)return w({title:"Password reset",message:"Passwords must match!",type:"error"}),e.preventDefault();xe(e).then((function(){return g("/login")}))},children:[Object(s.jsx)("div",{className:["input",sn.a.input,sn.a.text].join(" "),children:r}),Object(s.jsx)("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,placeholder:"new password",className:["input",sn.a.input].join(" ")}),Object(s.jsx)("input",{type:"password",name:"passwordRepeat",required:!0,placeholder:"repeat password",className:["input",sn.a.input].join(" ")}),Object(s.jsx)("input",{type:"hidden",name:"sid",required:!0,value:null===(n=e.location.search.slice(1).split("&").find((function(e){return e.startsWith("code=")})))||void 0===n?void 0:n.slice("code=".length)}),Object(s.jsx)("button",{type:"submit",className:["input",sn.a.submit].join(" "),children:"RESET PASSWORD"})]}):(g("/login"),null)}),[w,e.location.search,g]),C=Object(c.useMemo)((function(){return Object(s.jsxs)("form",{className:sn.a.form,method:"POST",action:Be.a.resolve(he,"requestPasswordReset"),onSubmit:function(e){return xe(e).then((function(){return w({title:"Password reset",message:"Successfully sent a password reset link to the email on file. Check your inbox!"})}))},children:[Object(s.jsx)("div",{className:["input",sn.a.input,sn.a.back].join(" "),onClick:function(){return r("login")},children:"BACK"}),Object(s.jsx)("input",{type:"text",name:"username",autoComplete:"username",required:!0,placeholder:"username",className:["input",sn.a.input].join(" ")}),Object(s.jsx)(k,{}),Object(s.jsx)("button",{type:"submit",className:["input",sn.a.submit].join(" "),children:"REQUEST PASSWORD RESET"})]})}),[r,w]),S=Object(c.useMemo)((function(){return Object(s.jsxs)("form",{className:sn.a.form,method:"POST",action:Be.a.resolve(he,"requestUsernameReminder"),onSubmit:function(e){return xe(e).then((function(){return w({title:"Username reminder",message:"Successfully sent a username reminder. Check your inbox!"})}))},children:[Object(s.jsx)("div",{className:["input",sn.a.input,sn.a.back].join(" "),onClick:function(){return r("login")},children:"BACK"}),Object(s.jsx)("input",{type:"email",name:"email",autoComplete:"email",required:!0,placeholder:"email",className:["input",sn.a.input].join(" ")}),Object(s.jsx)(k,{}),Object(s.jsx)("button",{type:"submit",className:["input",sn.a.submit].join(" "),children:"REQUEST USERNAME REMINDER"})]})}),[r]),L=Object(c.useMemo)((function(){return Object(s.jsxs)("form",{className:sn.a.form,method:"POST",onSubmit:y,action:Be.a.resolve(he,"login"),children:[Object(s.jsx)("input",{type:"text",name:"username",autoComplete:"username",required:!0,placeholder:"username",className:["input",sn.a.input].join(" ")}),Object(s.jsx)("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,placeholder:"password",className:["input",sn.a.input].join(" ")}),Object(s.jsx)(k,{}),Object(s.jsx)("button",{type:"submit",className:["input",sn.a.submit].join(" "),children:"LOGIN"})]})}),[y]),M=Object(c.useMemo)((function(){return Object(s.jsxs)("form",{className:sn.a.form,method:"POST",onSubmit:y,action:Be.a.resolve(he,"register"),children:[Object(s.jsx)("input",{type:"text",minLength:4,name:"username",required:!0,placeholder:"username",className:["input",sn.a.input].join(" ")}),Object(s.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"password",minLength:8,className:["input",sn.a.input].join(" ")}),Object(s.jsx)("input",{type:"email",name:"email",autoComplete:"email",required:!0,placeholder:"email",className:["input",sn.a.input].join(" ")}),Object(s.jsx)("button",{type:"submit",className:["input",sn.a.submit].join(" "),onSubmit:function(e){e.target.parentElement.requestSubmit()},children:"REGISTER"})]})}),[y]),R=Object(c.useMemo)((function(){return Object(s.jsx)(cn,{})}),[]),P=Object(c.useMemo)((function(){return Object(s.jsxs)("div",{className:[sn.a.loginSection,sn.a.initialiseButton].join(" "),children:[Object(s.jsxs)("div",{className:[sn.a.flip,sn.a.loginButton].join(" "),onClick:function(){r("reset/password"===e.mode?"reset/password":"login"),d("")},children:[Object(s.jsx)("div",{children:"LOGIN"}),Object(s.jsx)("div",{children:He()?Object(s.jsx)(x.e,{}):Object(s.jsx)(x.c,{})})]}),Object(s.jsxs)("div",{className:["container",sn.a.foreground,"register"===i?sn.a.registerForeground:sn.a.loginForeground].join(" "),children:[R,"register"===i?M:"login"===i?L:"reminder"===i?S:"reset"===i?C:"reset/password"===i?Object(s.jsx)(N,{}):null]}),Object(s.jsxs)("div",{className:[sn.a.flip,sn.a.registerButton].join(" "),onClick:function(){r("register"),d("")},children:[Object(s.jsx)("div",{children:"REGISTER"}),Object(s.jsx)("div",{children:He()?Object(s.jsx)(x.b,{}):Object(s.jsx)(x.d,{})})]})]})}),[i,r,d,L,M,S,C,R,e.mode,N]);return O?("/login"===O&&(r("login"),g("")),Object(s.jsx)(p.a,{to:O})):Object(s.jsx)("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction),children:Object(s.jsxs)("div",{className:[sn.a.column].join(" "),children:[Object(s.jsx)("div",{className:[sn.a.frame,"container"].join(" "),children:P}),Object(s.jsx)("div",{className:sn.a.messageBar,children:u||"\u200b"})]})})}var ln=n.p+"static/media/watch.5465a8a5.svg",un=(n.p,n.p,n.p+"static/media/chessCom.4a959580.svg"),dn=n.p+"static/media/lichess.a2ce667c.svg",jn=(n.p,n.p,n.p+"static/media/zoom.a4580454.svg"),bn=[];function hn(e){var t,n,a,i,r,o,l,u=e.match,d=e.pool,j=Object(c.useState)(e.expanded||u.isLive),b=Object(f.a)(j,2),h=b[0],m=b[1];Object(c.useEffect)((function(){e.expanded&&m(!0)}),[e.expanded,m]);var p=tt(e.settings).getName,O=Object(c.useReducer)((function(e,t){return"undefined"===typeof t||t}),!1),g=Object(f.a)(O,2),y=g[0],w=g[1],N=Object(c.useMemo)((function(){var e,t,n,a,i,r,s=u.startTime||u.registrationTime,c=new Date(s||0).toString();return[p(u.w),null!==(e=u.scores[0])&&void 0!==e?e:(u.isLive||u.isFinished)&&u.teams&&((null===(t=u.w)||void 0===t?void 0:t.chessCom)||(null===(n=u.b)||void 0===n?void 0:n.chessCom))?u.teams[0].score:"",p(u.b),null!==(a=u.scores[1])&&void 0!==a?a:(u.isLive||u.isFinished)&&u.teams&&((null===(i=u.w)||void 0===i?void 0:i.chessCom)||(null===(r=u.b)||void 0===r?void 0:r.chessCom))?u.teams[1].score:"",s?c.slice(0,10)+"\n"+c.slice(16,21):"",u.link,u.w?u.w.nationality:"",u.b?u.b.nationality:""]}),[p,u]);return u?u.round!==e.round||(u.pool||d)&&u.pool!==d?null:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("tr",{id:u.id,className:k()(ae.a.row,{odd:e.i%2,even:e.i%2===0,collapsed:e.hidden,highlighted:e.highlight}),style:{visibility:e.hidden?"collapse":void 0},children:[Object(s.jsx)("td",{children:Object(s.jsx)("div",{className:ae.a.flag,children:Y(N[6])})}),Object(s.jsx)("td",{id:null===(t=u.w)||void 0===t?void 0:t.id,children:"bye"===(null===(n=u.w)||void 0===n?void 0:n.id)?Object(s.jsx)("div",{children:N[0]}):Object(s.jsx)(v.b,{to:V("individual"===e.settings.competitors?"player":"team",null===(a=u.w)||void 0===a?void 0:a.id),className:"playerName",children:N[0]})}),Object(s.jsx)("td",{className:ae.a.inner,id:null===(i=u.link)||void 0===i?void 0:i.split("/").slice(-1).join("/"),children:u.link?Object(s.jsxs)("a",{className:"button",href:u.link,target:"_blank",rel:"noopener noreferrer",children:[Object(s.jsx)(x.L,{}),Object(s.jsx)("div",{children:"chess.com"})]}):null}),Object(s.jsx)("td",{className:ae.a.inner,children:Object(s.jsx)("div",{className:k()(ae.a.score,ae.a[u.status],u.status),children:u.isFinished||u.isLive?N[1]:null})}),Object(s.jsx)("td",{style:{whiteSpace:"pre-line"},children:N[4]||"-"}),Object(s.jsx)("td",{className:ae.a.inner,children:Object(s.jsx)("div",{className:k()(ae.a.score,ae.a[u.status],u.status),children:u.isFinished||u.isLive?N[3]:null})}),Object(s.jsx)("td",{className:ae.a.inner,children:u.link&&u.isScheduled?Object(s.jsx)("div",{className:k()("button",Object(_.a)({},ae.a.watchLive,u.isLive)),onClick:function(){var t;u.isFinished&&((null===(t=u.games)||void 0===t?void 0:t.length)?e.setExpanded(u.id):e.fetchGames([u.id]).then((function(){return e.setExpanded(u.id)})),window.location.hash&&decodeURIComponent(window.location.hash).includes(u.id)?window.history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="#"+u.id)},children:u.isFinished?Object(s.jsx)("div",{children:"Scores"}):Object(s.jsxs)(s.Fragment,{children:[u.isLive?Object(s.jsx)("img",{className:"icon",src:ln,alt:"Watch games"}):Object(s.jsx)(x.o,{}),Object(s.jsx)("a",{className:ae.a.watchButton,href:"https://www.chess.com/live#tm="+u.teamID,target:"_blank",rel:"noopener noreferrer",children:u.isLive?"Watch live":"Join Game"})]})}):null}),Object(s.jsx)("td",{id:null===(r=u.b)||void 0===r?void 0:r.id,children:"bye"===(null===(o=u.b)||void 0===o?void 0:o.id)?Object(s.jsx)("div",{children:N[2]}):Object(s.jsx)(v.b,{to:V("individual"===e.settings.competitors?"player":"team",null===(l=u.b)||void 0===l?void 0:l.id),className:"playerName",children:N[2]})}),Object(s.jsx)("td",{children:Object(s.jsx)("div",{className:ae.a.flag,children:Y(N[7])})})]}),u.link?Object(s.jsx)("tr",{className:[e.hidden||!e.expanded?"collapsed":""].join(" "),style:e.hidden||!e.expanded?{visibility:"collapse"}:{},children:Object(s.jsx)("td",{colSpan:100,children:"chessCom"===u.linkSource&&"team"===u.type?Object(s.jsx)(Jt,{id:u.id,match:u,setMatch:e.setMatch,setFinished:e.setFinished,sync:w,fetch:e.fetch||y,expanded:h,boards:u.players?parseInt(u.players):0,round:e.round,teams:u.teams||bn}):null})},["row","dropdown"].join(".")):null]}):null}var mn=n(77),fn=n.n(mn),vn=n(51),pn=n.n(vn),On=n(99),gn=n.n(On);function xn(e){var t=Object(c.useReducer)((function(e){return!e}),!!e.expanded),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(0),o=Object(f.a)(r,2),l=o[0],u=o[1],d=Object(c.useRef)(),j=Object(c.useCallback)((function(){d.current&&u(a?d.current.getBoundingClientRect().height:0)}),[u,a,d]);return Object(c.useEffect)((function(){j()}),[j]),Object(s.jsxs)("div",{className:[gn.a.container,e.className].join(" "),children:[Object(s.jsxs)("div",{className:["button",gn.a.header].join(" "),onClick:function(){return i()},children:[e.headerIcon,q(e.current),Object(s.jsx)(x.c,{className:gn.a.toggle,style:{transform:a?"rotate(-90deg)":"rotate(0deg)"}})]}),Object(s.jsx)("div",{className:gn.a.wrapper,style:{height:l},children:Object(s.jsx)("ul",{className:gn.a.list,ref:d,children:e.options.map((function(t,n){return Object(s.jsx)("li",{onClick:function(){e.resolve(t),i()},children:q(t)},[t,n].join("."))}))})})]})}var _n=n(150),yn=n.n(_n),wn=n(70),kn=n.n(wn),Nn={aborted:0,pending:0,scheduled:0,registered:0,live:0,finished:0,confirmed:0};function Cn(e){var t=Object(c.useMemo)((function(){if(!e.matches)return Nn;var t=Object.assign({},Nn,{pending:e.total});return Object.values(e.matches).forEach((function(n){n&&n.round===e.round&&(t[n.status]++,t.pending--)})),t}),[e.matches,e.round,e.total]),n=Object(c.useMemo)((function(){return Object(s.jsx)(yn.a,{type:"Pie",data:{labels:Object.entries(t).map((function(t){var n=Object(f.a)(t,2),a=n[0],i=n[1];return"".concat(a," ").concat(Math.round(100*i/e.total),"% (").concat(i,")")})),series:Object.entries(t).map((function(e){var t=Object(f.a)(e,2);return{meta:t[0],value:t[1]}}))},options:{donut:!0,donutSolid:!0,donutWidth:e.donutWidth||60,startAngle:270,total:2*e.total,height:e.height||400,ignoreEmptyValues:!0,showLabel:!0,labelPosition:"inside"},listener:{draw:function(e){if("slice"===e.type){var t=e.element._node.getTotalLength(),n={"stroke-dashoffset":{id:"anim"+e.index,dur:1e3,from:-t+"px",to:"0px",easing:wn.Svg.Easing.easeOutQuint,fill:"freeze",begin:void 0}};0!==e.index&&(n["stroke-dashoffset"].begin="anim"+(e.index-1)+".end"),e.element.attr({"stroke-dashoffset":-t+"px"}),e.element.animate(n,!1)}}}})}),[t,e.total]);return Object(s.jsx)("div",{className:"gauge",children:n})}var Sn=n(381),Ln=n.n(Sn),Mn=n(219),Rn=new(n.n(Mn).a.ProcessNodeDefinitions)(o.a),Pn=Ln()({isValidNode:function(e){return"script"!==e.type},processingInstructions:[{shouldProcessNode:function(e){return!0},processNode:Rn.processDefaultNode}]});function Bn(e){return Fe.test(e.href)?Object(s.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:e.children}):e.href.startsWith("https://results.scorchapp.co.uk")?Object(s.jsx)(v.b,{to:e.href.slice("https://results.scorchapp.co.uk".length),children:e.children}):Object(s.jsx)(v.b,{to:e.href,children:e.children})}function En(e){var t,n,a=e.id,i=e.playerDict,r=e.fetchGames,o=e.matches,l=e.round,u=e.matchDict,d=e.results,j=e.announcements,b=e.getName,h=e.title,m=e.expanded,f=e.setExpanded,p=e.visible,O=e.setSearched,g=e.setVisible,_=(e.settings,Object(c.useContext)(R).isLoggedIn),y=j[j.length-1],w=Object(c.useMemo)((function(){return Object(s.jsx)(Cn,{matches:u,round:l,total:d.length,donutWidth:30,height:200})}),[u,l,d.length]),k=Object(c.useMemo)((function(){return Object(s.jsx)(xn,{current:p,options:["all","aborted","pending","scheduled","registered","live","finished","confirmed"].filter((function(e){return"all"===e||o.some((function(t){return t&&t.round===l&&t.status===e}))})),resolve:g,className:pn.a.statusPicker,headerIcon:Object(s.jsx)(x.G,{})})}),[p,o,g,l]);Object(c.useContext)(E).isLive;return Object(s.jsx)(qe,{absoluteStyles:{top:"400px"},fixedStyles:{top:"8vh"},upperLimit:10*window.innerHeight/100,lowerLimit:275,children:Object(s.jsxs)("div",{className:pn.a.sidebar,children:[Object(s.jsx)("div",{className:pn.a.name,children:h}),y?Object(s.jsxs)("div",{className:pn.a.announcement,children:[Object(s.jsxs)(v.b,{to:["","t",a,"announcements"].join("/")+"#latest",className:pn.a.title,children:[Object(s.jsx)(x.j,{}),"Latest News"]}),Object(s.jsx)("div",{className:pn.a.body,children:y?Object(s.jsx)(fn.a,{source:(t=y.announcement.trim().split("*").join("").split("\n").map((function(e){return e.trim()})).join(" "),n=200,!t.length||n<1?t:t.length>n?t.substring(0,n-3)+"...":t),escapeHtml:!1,astPlugins:[Pn],renderers:{link:Bn}}):null}),Object(s.jsx)("div",{className:pn.a.dates,children:new Date(y.createdAt).toString().slice(0,21)}),Object(s.jsxs)(v.b,{to:["","t",a,"announcements"].join("/"),className:pn.a.more,children:["View all",Object(s.jsx)(x.d,{})]})]}):null,w,k,Object(s.jsxs)("div",{className:pn.a.searchBar,children:[Object(s.jsx)(x.X,{}),Object(s.jsx)(nn,{onChange:O,onSubmit:Promise.resolve,action:"",options:Array.from(i.values()),convert:b,styles:pn.a,placeholder:"Search"})]}),Object(s.jsxs)("div",{className:["button",pn.a.expandAll].join(" "),onClick:function(){o.length===m.length&&f([]),r().then((function(){return f(o.map((function(e){return e.id})))}))},children:[Object(s.jsx)(x.D,{}),o.length===m.length?"Hide":"View"," all scores"]}),_?Object(s.jsxs)("div",{className:["button",pn.a.jumpTo].join(" "),onClick:function(){return document.getElementsByClassName("highlighted")[0].scrollIntoView()},children:[Object(s.jsx)(x.b,{}),"Find my pairing"]}):null,Object(s.jsx)("div",{className:["jumpToTop"].join(" "),onClick:function(){window.scrollTo(0,0),window.dispatchEvent(new Event("scroll"))},children:Object(s.jsx)(x.e,{})})]})})}var An=["White","White score","Black","Black score","Game link","Time"];function Tn(e){var t=Object(c.useState)(!1),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)([]),o=Object(f.a)(r,2),l=o[0],u=o[1],d=Object(c.useRef)(),b=Object(c.useReducer)((function(){var e,t;return(null!==(e=null===(t=d.current)||void 0===t?void 0:t.getBoundingClientRect().top)&&void 0!==e?e:1/0)<250}),!1),h=Object(f.a)(b,2),m=h[0],v=h[1];Object(c.useEffect)((function(){return window.addEventListener("scroll",v),function(){return window.removeEventListener("scroll",v)}}),[v]);var p=Object(c.useContext)(M),O=tt(e.settings).getName,g=$t({playerDict:e.playerDict,results:l,settings:p}),y=g.matchDict,w=g.populatematchDict,N=g.fetchNext,C=g.beforeSetResults,S=tn(),L=(S.searched,Object(c.useState)({})),R=Object(f.a)(L,2),P=R[0],B=R[1],E=Object(c.useCallback)((function(t){return Oe({url:V("tournament",e.id,"getPairings"),params:{round:e.round,ids:null===t||void 0===t?void 0:t.join(","),games:!0}}).then((function(e){return B(e.reduce((function(e,t){return e[t.id]=t.games,e}),{}))}))}),[e.id,e.round,B]);Object(c.useEffect)((function(){Oe({url:V("tournament",e.id,"getPairings"),params:{round:e.round}}).then((function(e){return u(e),i(!0),e})).then((function(t){window.location.hash||(e.round,e.status.round)})).catch((function(){}))}),[u,i,e.round,e.id,E,e.status.round]);var A=Qe((function(){return Object.values(y).sort((function(e,t){return e?t?e.board-t.board:1:-1})).map((function(t,n){var a,i,r,s,c,o;if(!t)return null;if(t.round!==e.round)return null;t.id in P&&(t.games=P[t.id]);var l=t.startTime||t.registrationTime,u=new Date(l||0).toString();return[O(t.w),null!==(a=t.scores[0])&&void 0!==a?a:(t.isLive||t.isFinished)&&t.teams&&((null===(i=t.w)||void 0===i?void 0:i.chessCom)||(null===(r=t.b)||void 0===r?void 0:r.chessCom))?t.teams[0].score:"",O(t.b),null!==(s=t.scores[1])&&void 0!==s?s:(t.isLive||t.isFinished)&&t.teams&&((null===(c=t.w)||void 0===c?void 0:c.chessCom)||(null===(o=t.b)||void 0===o?void 0:o.chessCom))?t.teams[1].score:"",l?u.slice(0,10)+"\n"+u.slice(16,21):"",t.link,t.w?t.w.nationality:"",t.b?t.b.nationality:""]}))}),[P,O,y,e.round],"csv");Object(c.useEffect)((function(){C(),u([])}),[u,C,e.round]),Object(c.useEffect)((function(){w(l,e.round)}),[w,l]),Object(c.useEffect)((function(){N()}),[N]);var T=Object(c.useCallback)((function(){var t=document.createElement("a"),n=An.join(",")+"\n"+A.map((function(e){return e.join(",")})).join("\n"),a=new Blob([n],{type:"text/csv"}),i=(e.status.name.match(We)||[]).join(""),r=new Date(Date.now()).toString().slice(4,15);t.href=URL.createObjectURL(a),t.download="".concat(i,"_").concat(r,"_").concat([e.round],".").concat("csv"),t.click()}),[A,e.round,e.status.name]),I=Object(c.useMemo)((function(){return l.reduce((function(e,t){var n=t.pool||0;return e[n]||(e[n]=0),e[n]++,e}),[])}),[l]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("section",{style:{display:l.length?void 0:"none"},"data-aos":"zoom-in","data-aos-once":!0,children:Object(s.jsxs)("div",{className:ae.a.pieMatrix,children:[Object(s.jsxs)("div",{className:["button",ae.a.timezone].join(" "),children:[Object(s.jsx)(x.s,{}),new Date(Date.now()).toString().slice(25)]}),Object(s.jsx)("div",{className:ae.a.pie,children:Object(s.jsx)(Cn,{matches:y,round:e.round,total:l.length})}),Object(s.jsxs)("div",{className:["button",ae.a.download].join(" "),onClick:T,children:[Object(s.jsx)(x.z,{}),"Download"]})]})}),Object(s.jsx)(En,Object(j.a)({},Object(j.a)(Object(j.a)({id:e.id,playerDict:e.playerDict,showSidebar:m,fetchGames:E,title:e.status.name,round:e.round,results:l,announcements:e.announcements,getName:O,settings:e.settings},g),S))),I.map((function(t,n){return t?Object(s.jsxs)("section",{className:k()(Object(_.a)({},"animated-"+e.direction,l.length),ae.a.table),children:[Object(s.jsxs)("div",{className:ae.a.pool,children:["Pool ",Q(n,e.settings.poolDisplay)]}),Object(s.jsxs)("table",{className:k()("download-table","full-width","pairings"),children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{ref:d,children:[Object(s.jsx)("td",{style:{width:"5%"},children:"Fed"}),Object(s.jsx)("td",{style:{width:"22.5%"},children:"White"}),Object(s.jsx)("td",{style:{width:"12.5%"},children:"Link"}),Object(s.jsx)("td",{style:{width:"5%"}}),Object(s.jsx)("td",{style:{width:"10%"},children:"Start Time"}),Object(s.jsx)("td",{style:{width:"5%"}}),Object(s.jsx)("td",{style:{width:"12.5%"},children:"Watch Live"}),Object(s.jsx)("td",{style:{width:"22.5%"},children:"Black"}),Object(s.jsx)("td",{style:{width:"5%"},children:"Fed"})]})}),Object(s.jsxs)("tbody",{children:[a&&!l.length?Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:100,children:"Draw has not yet taken place!"})}):null,Object(s.jsx)(In,Object(j.a)({pool:n,round:e.round},{MatchResult:g,ExpandedResult:S,gameDict:P,matchDict:y,fetchGames:E}))]})]})]},["table",n].join(".")):null}))]})}function In(e){var t=e.pool,n=e.gameDict,a=e.MatchResult,i=e.ExpandedResult,r=e.round,o=e.fetchGames,l=Object(c.useContext)(M),u=Object(c.useContext)(R),d=u.profile,b=u.isLoggedIn,h=(tt(l).getName,a.matchDict),m=a.setMatch,f=(a.populatematchDict,a.fetchedMatch),v=(a.fetchNext,a.hasFetched),p=(a.beforeSetResults,i.setExpanded),O=i.expanded,g=i.searched,x=i.visible;return Object(s.jsx)(s.Fragment,{children:Object.values(h).sort((function(e,t){return e?t?e.board-t.board:1:-1})).map((function(e,a){var i;return(null===e||void 0===e?void 0:e.id)&&(e.games=n[e.id]),e?Object(s.jsx)(hn,Object(j.a)(Object(j.a)({i:a},{match:e,pool:t,setMatch:m,setExpanded:p,fetchGames:o}),{},{setFinished:v,round:r,fetch:!!f&&f.id===e.id,expanded:O.includes(e.id),highlight:b&&e.w&&e.b&&(e.w.id===(null===d||void 0===d?void 0:d.username)||e.b.id===(null===d||void 0===d?void 0:d.username)||(null===d||void 0===d||null===(i=d.teams)||void 0===i?void 0:i.some((function(t){return t&&(t.id===e.w.teamId||t.id===e.b.teamId)})))),hidden:"all"!==x&&e.status!==x||!!g.length&&!g.some((function(t){var n,a;return t.id===(null===(n=e.w)||void 0===n?void 0:n.id)||t.id===(null===(a=e.b)||void 0===a?void 0:a.id)})),settings:l}),["row",e.board].join(".")):null}))})}var Dn=n(151),Fn=n(37),Wn=n.n(Fn),Un=n(71);function Gn(e){var t=e.ref,n=e.width,a=e.height;n||(n="100%");var i=Object(c.useRef)();t||(t=i);var r=Object(c.useContext)(E).channel,o=Object(c.useMemo)((function(){if(!r)return null;if(!n){var e,i;if(!(null===(e=t)||void 0===e?void 0:e.current))return null;var c=null===(i=t)||void 0===i?void 0:i.current.getBoundingClientRect();n=c.width}return Object(s.jsx)(Dn.b,Object(j.a)({id:Wn.a.twitchPlayer,autoplay:!1},{channel:r,width:n,height:a}))}),[r,a,n,t]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{id:Wn.a.twitchPlayer,ref:t,className:Wn.a.player,style:{width:n,height:a}}),Object(s.jsx)("div",{className:"hidden",children:o})]})}function Hn(e){var t=e.pop,n=Object(c.useRef)(null),a=Object(c.useCallback)((function(){n.current&&t(n.current)}),[t,n]),i=Object(c.useContext)(E),r=i.site,o=i.channel,l=Object(c.useMemo)((function(){return Math.min(window.innerWidth-40,1132)*(e.screenWidthProportion||1)}),[e.screenWidthProportion]);return e.streamURL?Object(s.jsxs)(s.Fragment,{children:["twitch"===r?Object(s.jsxs)("section",{className:[Wn.a.container].join(" "),children:[Object(s.jsxs)("div",{className:Wn.a.streamHeader,children:[Object(s.jsx)(x.jb,{}),Object(s.jsx)("span",{className:"bold",children:o}),Object(s.jsxs)("div",{className:k()("button",Wn.a.popOut),onClick:a,children:["Pop-out",Object(s.jsx)(Un.b,{})]})]}),Object(s.jsxs)("div",{className:Wn.a.streamContainer,children:[Object(s.jsx)(Gn,{ref:n,width:.66*l,height:.66*l*3/4}),Object(s.jsx)("div",{id:Wn.a.twitchChat,className:Wn.a.chat,style:{height:.66*l*3/4},children:Object(s.jsx)(Dn.a,{channel:o,width:.31*l,height:.66*l*3/4})})]})]}):null,"youtube"===r?Object(s.jsxs)("section",{className:[Wn.a.container].join(" "),children:[Object(s.jsxs)("div",{className:Wn.a.streamHeader,children:[Object(s.jsx)(x.qb,{}),Object(s.jsx)("span",{className:"bold",children:"chess-england"})]}),Object(s.jsxs)("div",{className:Wn.a.streamContainer,children:[Object(s.jsx)("div",{id:Wn.a.youtubePlayer,className:Wn.a.player,children:Object(s.jsx)("iframe",{title:"youtubePlayer",width:.66*l,height:l/2.73,src:"https://www.youtube.com/embed/R2v-XSRMOFo",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Object(s.jsx)("div",{id:Wn.a.youtubeChat,className:[Wn.a.chat,Wn.a.youtubeChat].join(" "),children:Object(s.jsx)("iframe",{title:"youtubeChat",width:.31*l,height:"315",src:"https://www.youtube.com/live_chat?v=R2v-XSRMOFo&embed_domain=localhost",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}):null,Object(s.jsx)("section",{className:Wn.a.footer,children:"(Live-Stream) If you're having problems viewing this player, try disabling any extensions or Brave Shields if you have them enabled."})]}):null}var zn=n(382),Vn=n.n(zn),qn=n(383),Kn=n.n(qn),Jn=(n(327),n(87)),Yn=n.n(Jn),Qn=n(386),Xn=n(65),Zn=n(153),$n=n.n(Zn);n(341);function ea(e){var t=Object(c.useState)(!1),n=Object(f.a)(t,2),a=n[0],i=n[1],r=e.useState||[a,i],o=Object(f.a)(r,2),l=o[0],u=o[1],d=Object(c.createRef)();return l?Object(s.jsx)(Xn.b,{children:Object(s.jsx)(Xn.a,{onClose:function(){return u(!1)},children:Object(s.jsxs)("div",{className:["chartContainer","rankings",$n.a.container,e.className].join(" "),ref:d,children:[Object(s.jsxs)("div",{className:[$n.a.fullScreenHeader,"header--isModal css-111ute9 css-1ycyyax"].join(" "),children:[Object(s.jsx)("span",{}),Object(s.jsxs)("span",{children:[Object(s.jsx)("button",{type:"button",title:"Enter fullscreen (f)",className:"header_button __header_button--fullscreen css-m6j0xf css-1ycyyax",onClick:function(){return!document.fullscreenElement&&d.current?d.current.requestFullscreen():document.exitFullscreen()},children:Object(s.jsx)("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh",children:Object(s.jsx)("path",{d:"M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z"})})}),Object(s.jsx)("button",{type:"button",title:"Close (esc)",className:"react-images__header_button react-images__header_button--close css-m6j0xf css-1ycyyax",onClick:function(){return u(!1)},children:Object(s.jsx)("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh",children:Object(s.jsx)("path",{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"})})})]})]}),Object(s.jsx)("div",{className:$n.a.stage,children:e.children})]})})}):null}function ta(e){var t=Object(c.useState)(15),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Ae(e),o=Object(c.useMemo)((function(){return{rating:{mobile:"Rating",name:"Rating",value:function(e){return e.rating},show:function(e){return!1}},score:{mobile:"Match Points",name:"MP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.match||0:e}),0)}},gamePoints:{mobile:"Game Points",name:"GP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.game||0:e}),0)},show:function(e){return 1!==e.gamePointTotal}},gameDifference:{mobile:"Game Point Difference",name:"G. +/-",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=null!==n?e.played:0)})),2*n-a},show:function(e){return 1!==e.gamePointTotal}},matchPercentage:{mobile:"Match Point Percentage",name:"M. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.match||0,a+=1)})),0===a?-1:100*n/a}},gamePercentage:{mobile:"Game Point Percentage",name:"G. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=e.played||0)})),0===a?-1:100*n/a},show:function(e){return 1!==e.gamePointTotal}},performanceRating:{mobile:"Performance Rating",name:"Perf",value:function(e){return e.performanceRating},show:function(e){return!1}},ratingDifference:{mobile:"Performance Rating Difference",name:"P. +/-",value:function(e){return e.performanceRating?e.performanceRating-e.rating:0},show:function(e){return!1}},expectedScore:{mobile:"Expected Score",name:"Expected",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected?e+=t.expected||0:e}),0)},show:function(e){return!1}},expectedDifference:{mobile:"Score to Expected",name:"E. +/-",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected&&"number"===typeof t.match?e+=t.match-t.expected||0:e}),0)},show:function(e){return e.showRatings}}}}),[]),l=Object(c.useMemo)((function(){return e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds?e.status.round:e.settings.totalRounds}),[e.status.round,e.settings.totalRounds]),u=Object(c.useReducer)((function(e,t){for(var n=[],a=0;a<Math.max(e.length,t.length);a++)t[a]?n.push(t[a]):e[a]&&n.push(e[a]);return n}),[]),d=Object(f.a)(u,2),b=d[0],h=d[1],m=Object(c.useMemo)((function(){for(var e={},t=new Array(l+1),n=r.filter((function(e){return"bye"!==e.id})),a=0;a<n.length;a++)for(var i=n[a],s=0,c=Object.entries(o);s<c.length;s++){var u=Object(f.a)(c[s],2),d=u[0],j=u[1];e[d]||(e[d]=[]);for(var b=[],m=1;m<l+1;m++)t[m-1]=m.toString(),m>=i.histories.length?b.push(void 0):b[m]=j.value(i,m);e[d][a]=b}return h(t),e}),[r,o,l]),v=Object(c.useContext)(A),p=Object(c.useState)(!0),O=Object(f.a)(p,2),g=O[0],_=O[1],y=Object(c.useState)(!0),w=Object(f.a)(y,2),k=w[0],N=w[1],C=Object(c.useState)(!1),S=Object(f.a)(C,2),L=S[0],M=S[1],R=Object(c.useCallback)((function(e,t){for(var n=e[0].length,a=[],i=[],s=1;s<n;s++){a[s]=[];for(var c=0;c<e.length;c++)a[s][c]={meta:r[c],value:e[c][s]};a[s]=a[s].sort((function(e,t){if(void 0===e.value)return 1;if(void 0===t.value)return-1;if(e.value!==t.value)return t.value-e.value;for(var n=v.slice(0),a=n.shift();a&&a[1];){var i=a[1].func(e.meta,t.meta);if(i)return i;a=n.shift()}return 0})),i[s]=a[s].map((function(e){return void 0!==e.value?[e.meta.id,e.value]:["",void 0]}))}for(var o=[],l=0;l<e.length;l++){o[l]=[];for(var u=function(e){var n=r[l],a=i[e].findIndex((function(e){return e[0]===n.id}));o[l][e-1]={meta:n.firstName+" "+n.lastName,value:n.histories[e]&&"number"===typeof n.histories[e].match&&a>=0?t?-a-1:i[e][a][1]:void 0}},d=1;d<n;d++)u(d)}return o}),[r,v]),P=Object(c.useState)([]),B=Object(f.a)(P,2),E=B[0],T=B[1],I=Object(c.useState)(!0),D=Object(f.a)(I,2),F=D[0],W=D[1],U=Object(c.useState)(1),G=Object(f.a)(U,2),H=G[0],z=G[1],V=Object(c.useState)("score"),q=Object(f.a)(V,2),J=q[0],Y=q[1],Q=Object(c.useMemo)((function(){return Object.entries(o).map((function(t,n){var a=Object(f.a)(t,2),i=a[0],r=a[1];return r.show&&!r.show(e.settings)?null:Object(s.jsx)("div",{className:["header-button",ae.a.pairingRound,J===i?ae.a.roundSelected:""].join(" "),onClick:function(){return Y(i)},children:Object(s.jsx)("div",{className:"full-text",children:Object(s.jsx)("h4",{children:r.mobile})})},["round",n].join("."))}))}),[o,J,Y,e.settings]),X=Object(c.useMemo)((function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:["header-button",ae.a.pairingRound,F?ae.a.roundSelected:""].join(" "),onClick:function(){return W(!0)},children:Object(s.jsx)("div",{className:"full-text",children:Object(s.jsx)("h4",{children:"Ranking"})})},["round","order"].join(".")),Object(s.jsx)("div",{className:["header-button",ae.a.pairingRound,F?"":ae.a.roundSelected].join(" "),onClick:function(){return W(!1)},children:Object(s.jsx)("div",{className:"full-text",children:Object(s.jsx)("h4",{children:"Points"})})},["round","unorder"].join("."))]})}),[F,W]),Z=Object(c.useCallback)((function(e,t){return[e,F?"#"+(-Number(t)).toString():""].join("\n")}),[F]),$=Object(c.useMemo)((function(){var t=J;if(!m[t])return null;for(var n=R(m[t],F),i=Math.ceil(n.length/2),r=function(t){if(n.reduce((function(n,a,i){var r,s;return t<e.status.round&&(null===(r=a[t-1])||void 0===r||r.value),"number"===typeof(null===(s=a[t])||void 0===s?void 0:s.value)?n+=1:n}),0)>i)return z(t),"break"},c=l;c>=0;c--){if("break"===r(c))break}var o=n.sort((function(e,t){var n,a;return((null===(n=t[H])||void 0===n?void 0:n.value)||-1/0)-((null===(a=e[H])||void 0===a?void 0:a.value)||-1/0)})).map((function(t,n){var a,i,r,c,o,l,u,d,j;if(!F)return Object(s.jsx)(s.Fragment,{children:null===(a=t[H])||void 0===a?void 0:a.meta});if(!H)return Object(s.jsx)(s.Fragment,{children:null===(i=t[H])||void 0===i?void 0:i.meta});if(H===e.status.round)return Object(s.jsxs)(s.Fragment,{children:["#",n," ",null===(r=t[H])||void 0===r?void 0:r.meta]});if(void 0===(null===(c=t[H])||void 0===c?void 0:c.value)||void 0===(null===(o=t[H])||void 0===o?void 0:o.value))return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("span",{className:["chartArrow"].join(" "),children:[Object(s.jsx)("div",{children:"\u200b"}),Object(s.jsx)("div",{children:"\u200b"})]}),null===(l=t[H])||void 0===l?void 0:l.meta]});var b=(null===(u=t[H])||void 0===u?void 0:u.value)-(null===(d=t[H-1])||void 0===d?void 0:d.value),h=b>0?Object(s.jsx)(x.l,{}):b<0?Object(s.jsx)(x.k,{}):Object(s.jsx)(x.M,{});return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("span",{className:["chartArrow",b>0?"chartPositive":b<0?"chartNegative":"chartNeutral"].join(" "),children:[Object(s.jsx)("div",{children:Math.abs(b)||"\u200b"}),h]}),null===(j=t[H])||void 0===j?void 0:j.meta]})}));return T(o),F&&n.push([{meta:"placeholder",value:-n.length}]),Vn()({tooltipFnc:Z}),kn.a.plugins.tooltip({tooltipFnc:Z}),Kn()(),Object(s.jsx)(yn.a,{data:{labels:b,series:n},options:{fullWidth:!0,divisor:.5,axisY:{offset:25,onlyInteger:F,labelInterpolationFnc:function(e){return F?e?"#"+(-e).toString():"":e}},width:L?.8*window.innerWidth:"100%",height:L?window.innerHeight-150:F&&g?a*(m[t].length+(a<21.7?4.2:0)):.8*window.innerHeight,plugins:[kn.a.plugins.tooltip({tooltipFnc:Z}),kn.a.plugins.ctAxisTitle({axisX:{axisTitle:"Round",axisClass:"ct-axis-title",textAnchor:"middle"}})]},type:"Line"})}),[m,J,H,R,b,l,F,Z,e.status.round,a,g,L]),ee=Object(c.useMemo)((function(){for(var e="",t="p".charCodeAt(0);t<"z".charCodeAt(0)+1;t++){var n=K(0,65536).toString(16);e+=".ct-series.ct-series-".concat(String.fromCharCode(t)," {\n\t\t\t\tstroke: #").concat("0".repeat(6-n.length)).concat(n,";\n\t\t\t}"),e+=".ct-series.ct-series-".concat(String.fromCharCode(t)," > path {\n\t\t\t\tstroke: #").concat("0".repeat(6-n.length)).concat(n,";\n\t\t\t}")}return e}),[]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("section",{className:["container","bodyContainer","animated-"+e.direction].join(" "),children:Object(s.jsx)("div",{className:"button-list",children:Q})}),Object(s.jsx)("section",{className:["container","bodyContainer","animated-"+e.direction].join(" "),children:Object(s.jsx)("div",{className:"button-list",children:X})}),Object(s.jsxs)("section",{className:"animated-"+e.direction,children:[Object(s.jsx)("style",{children:ee}),Object(s.jsxs)("div",{className:ae.a.description,children:["This chart shows the rankings for each team throughout the rounds, beginning with round 1 on the left.",Object(s.jsx)("br",{}),"Switch to 'Points' above to see each team's points progression.",Object(s.jsx)("br",{})]}),Object(s.jsxs)("div",{className:"sliderContainer container",children:[Object(s.jsx)("div",{children:"Size"}),Object(s.jsx)(Qn.a,{className:ae.a.slider,thumbClassName:ae.a.thumb,trackClassName:ae.a.track,min:5,max:g&&F?Math.max(30,window.innerHeight/r.length):void 0,step:k?.5:5,value:g&&F?a:.8*window.innerHeight/r.length,disabled:!g||!F,onChange:function(e){return"number"===typeof e?i(e):null},renderThumb:function(e,t){return Object(s.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{children:t.valueNow}))}}),Object(s.jsx)("div",{className:"increment",onClick:function(){return a>=6?i(a-1):null},children:Object(s.jsx)(x.b,{})}),Object(s.jsx)("div",{className:"increment",onClick:function(){return a<=29?i(a+1):null},children:Object(s.jsx)(x.e,{})})]}),Object(s.jsxs)("div",{className:"optionsContainer container",children:[Object(s.jsxs)("div",{className:["header-button",ae.a.pairingRound,"switchContainer"].join(" "),children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("div",{children:g&&F?"Detailed":"Fit"}),Object(s.jsx)("div",{children:g&&F?"Switch off to view on one screen":F?"Switch to view player names":"Detailed view is only available with Ranking"})]}),Object(s.jsxs)("div",{className:"toggleSwitch",onClick:function(){return _(!g)},children:[Object(s.jsx)("input",{type:"checkbox",className:"check",checked:g&&F}),Object(s.jsx)("div",{className:"toggleSlider round"})]})]}),Object(s.jsxs)("div",{className:["header-button",ae.a.pairingRound,"switchContainer"].join(" "),children:[Object(s.jsxs)("label",{children:[Object(s.jsxs)("div",{children:[k?"High":"Low"," Performance"]}),Object(s.jsx)("div",{children:"Switch off if slow on Size change"})]}),Object(s.jsxs)("div",{className:"toggleSwitch",onClick:function(){return N(!k)},children:[Object(s.jsx)("input",{type:"checkbox",className:"check",checked:k}),Object(s.jsx)("div",{className:"toggleSlider round"})]})]}),Object(s.jsxs)("div",{className:["header-button",ae.a.pairingRound,"switchContainer"].join(" "),children:[Object(s.jsx)("label",{children:Object(s.jsx)("div",{children:"Full Screen"})}),Object(s.jsxs)("div",{className:"toggleSwitch",onClick:function(){return M(!L)},children:[Object(s.jsx)("input",{type:"checkbox",className:"check",checked:L}),Object(s.jsx)("div",{className:"toggleSlider round"})]})]})]}),Object(s.jsx)("div",{className:ae.a.description,children:"Hover to view team names."}),Object(s.jsxs)("div",{className:["chartContainer","rankings"].join(" "),children:[$,F&&g?Object(s.jsx)("div",{className:"chartKey",style:He()?{}:{visibility:a<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(E.length,", ").concat(a,"px)"),left:"calc(".concat((H+0)/(l-1)," * 100%)"),fontSize:Math.min(a,25)-3+"px",marginTop:a>21.7?"2px":a+6+"px"},children:E.map((function(e,t){return Object(s.jsxs)("div",{className:"playerLabel",children:[Object(s.jsx)("hr",{style:{display:He()||H>=l-1?"none":"block",width:.8/(l+2)*(window.innerWidth-60)}}),Object(s.jsx)("div",{children:e})]},["id",t].join("."))}))}):null]})]}),Object(s.jsxs)(ea,{className:Yn.a.fsChart,useState:[L,M],children:[Object(s.jsxs)("div",{className:Yn.a.header,children:[Object(s.jsx)("div",{className:Yn.a.title,children:e.status.name}),Object(s.jsx)("div",{className:Yn.a.subtitle,children:o[J].mobile})]}),$,F&&g&&a>15?Object(s.jsx)("div",{className:"chartKey",style:He()?{}:{visibility:a<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(E.length,", ").concat(a,"px)"),left:"calc(".concat((H+0)/(l-1)," * 100%)"),fontSize:Math.min(a,25)-3+"px",marginTop:a>21.7?"2px":a+6+"px"},children:E.map((function(e,t){return Object(s.jsxs)("div",{className:"playerLabel",children:[Object(s.jsx)("hr",{style:{display:He()||H>=l-1?"none":"block",width:.8/(l+2)*(window.innerWidth-60)}}),Object(s.jsx)("div",{children:e})]},["id",t].join("."))}))}):null,Object(s.jsx)("div",{className:Yn.a.name,children:"Results by ScorchChess"}),Object(s.jsx)("div",{className:Yn.a.url,children:"https://scorchapp.co.uk"})]})]})}var na=n(78),aa=n.n(na),ia=n(30),ra=n.n(ia),sa={reddit:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.reddit},link:"https://reddit.com/r/|",icon:["svg",Object(s.jsx)(x.U,{},"reddit")]},lichess:{name:"Lichess.org",value:function(e){return e.lichess},link:"https://lichess.org/@/|",icon:["img",dn],authMessage:"Authentication via lichess.org is available to any admins of a linked lichess.org team account",canLink:!0},chessCom:{name:"Chess.com",value:function(e){return e.chessCom},link:"https://chess.com/club/|",idLink:"https://chess.com/members/|",icon:["img",un],authMessage:"Authentication via chess.com is available to any admins of a linked chess.com club account",canLink:!0},zoom:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.zoom},link:"https://us02web.zoom.us/user/|/profile",icon:["img",jn]},skype:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.skype},icon:["svg",Object(s.jsx)(x.Z,{},"skype")]},facebook:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.facebook},link:"https://facebook.com/|",icon:["svg",Object(s.jsx)(x.E,{},"facebook")],authMessage:"Authentication via Facebook is not available at this time",canLink:!0},twitter:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.facebook},link:"https://twitter.com/|",icon:["svg",Object(s.jsx)(x.kb,{},"twitter")]},phone:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.phone},icon:["svg",Object(s.jsx)(x.R,{},"phone")]},email:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.email},icon:["svg",Object(s.jsx)(x.B,{},"envelope")],link:"mailto:|",permanent:!0,authMessage:"Authentication via email requires a matching verified email address",canLink:!0}};function ca(e){switch(e){case"chess.com":return Object(s.jsx)("img",{src:sa.chessCom.icon[1],alt:"chessCom",className:ra.a.icon});case"facebook.com":return Object(s.jsx)(x.E,{style:{color:"#3b5998"}});case"twitter.com":return Object(s.jsx)(x.kb,{style:{color:"#00aced"}});case"twitch.tv":return Object(s.jsx)(x.jb,{style:{color:"#6441a5"}});case"github.com":return Object(s.jsx)(x.I,{style:{color:"#333"}});default:return Object(s.jsx)(Un.a,{})}}function oa(e){var t,n,a,i,r,o,l,u=Object(c.useContext)(D),d=Object(c.useCallback)((function(e){return u({title:"",message:e})}),[u]),b=Object(c.useReducer)((function(e){return!e}),!1),h=Object(f.a)(b,2),m=h[0],v=h[1],p=Object(c.useRef)(null),O=Object(c.useCallback)((function(){var t,n,a;if("confirm"===e.type&&e.resolve)return e.resolve("");var i=null===(t=p.current)||void 0===t?void 0:t.value.trim();if(i||(null===(n=e.prompt)||void 0===n?void 0:n.allowNull)){if((null===(a=e.prompt)||void 0===a?void 0:a.validate)&&!e.prompt.validate(i))return v();"prompt"===e.type&&e.resolve&&e.resolve(i),d("")}}),[p,e,d]),g=Object(c.useCallback)((function(e){var t;switch(e.keyCode){case 27:(null===(t=p.current)||void 0===t?void 0:t.value)&&(p.current.value="");break;case 13:O()}}),[O,p]);if(!e.message)return null;var _=(e.link||"").match(Fe),y="string"!==typeof e.icon?e.icon:e.icon?ca(e.icon):_?ca(_[1]):null;return Object(s.jsx)("div",{className:ra.a.shade,onClick:function(){return d("")},children:Object(s.jsxs)("div",{className:[ra.a.section].join(" "),children:[Object(s.jsxs)("div",{className:[ra.a.lightBoxTitle,"error"===e.type?ra.a.error:""].join(" "),onClick:function(){return d("")},children:[Object(s.jsx)("div",{children:e.link?Object(s.jsx)("a",{className:ra.a.iconLink,href:e.link,rel:"noopener noreferrer",target:"_blank",children:y}):Object(s.jsx)("div",{children:y})}),Object(s.jsx)("div",{children:e.title})]}),Object(s.jsxs)("div",{className:ra.a.lightBoxContent,onClick:function(e){return e.stopPropagation()},children:[e.message,e.link?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("a",{href:e.link,rel:"noopener noreferrer",target:"_blank",children:e.link})}):null,"prompt"===e.type?"textarea"===(null===(t=e.prompt)||void 0===t?void 0:t.type)?Object(s.jsx)("textarea",Object(j.a)({ref:p,onKeyDown:g,autoFocus:!0,defaultValue:null===(n=e.prompt)||void 0===n?void 0:n.defaultValue},null===(a=e.prompt)||void 0===a?void 0:a.additionalInputProps)):Object(s.jsx)("input",Object(j.a)({ref:p,onKeyDown:g,type:(null===(i=e.prompt)||void 0===i?void 0:i.type)||"text",autoFocus:!0,defaultValue:null===(r=e.prompt)||void 0===r?void 0:r.defaultValue},null===(o=e.prompt)||void 0===o?void 0:o.additionalInputProps)):null,m?Object(s.jsx)("div",{className:ra.a.error,children:null===(l=e.prompt)||void 0===l?void 0:l.errorMessage}):null]}),"confirm"===e.type||"prompt"===e.type?Object(s.jsxs)("div",{className:ra.a.dateTime,onClick:function(e){return e.stopPropagation()},children:[Object(s.jsx)("div",{className:ra.a.reject,onClick:function(){e.reject&&e.reject(),d("")},children:Object(s.jsx)(x.gb,{})}),Object(s.jsx)("div",{className:ra.a.resolve,onClick:O,children:Object(s.jsx)(x.m,{})})]}):Object(s.jsx)("div",{className:ra.a.dateTime,children:Object(s.jsx)("div",{className:ra.a.footer,children:new Date(Date.now()).toString().slice(0,21)})})]})})}function la(e){return e.notif.content?Object(s.jsx)("div",{className:ra.a.shade,onClick:function(){return e.select({})},children:Object(s.jsx)("div",{className:[ra.a.section].join(" "),children:Object(s.jsx)(ua,Object(j.a)(Object(j.a)({},e),{},{styles:ra.a}))})}):null}function ua(e){var t=e.styles||ra.a,n=e.notif;if(!n.content)return null;var a=Object(s.jsx)(Un.a,{}),i=(n.link||"").match(Fe);return i&&(a=ca(i[1])),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:k()(t.lightBoxTitle,t.title),children:[Object(s.jsx)("div",{children:n.link?Object(s.jsx)("a",{className:t.iconLink,href:n.link,rel:"noopener noreferrer",target:"_blank",children:a}):Object(s.jsx)("div",{children:a})}),Object(s.jsx)("div",{children:n.title})]}),Object(s.jsx)("div",{className:t.lightBoxContent,onClick:function(e){return e.stopPropagation()},children:Object(s.jsx)(fn.a,{source:n.content.trim()+(n.link?"\n\n[".concat(n.link,"](").concat(n.link,")"):""),escapeHtml:!1,astPlugins:[Pn],renderers:{link:Bn}})}),Object(s.jsx)("div",{className:t.dateTime,children:Object(s.jsxs)("div",{className:t.footer,children:[q(n.role)," Announcement | ",new Date(n.createdAt).toString().slice(0,21)]})})]})}function da(e){var t=e.announcements;return Object(c.useEffect)((function(){t.length&&window.location.hash&&"#latest"===window.location.hash&&(window.location.hash="#"+t[0].createdAt)}),[t]),Object(s.jsxs)("div",{className:aa.a.container,children:[t.length?Object(s.jsx)("div",{className:[aa.a.nav].join(" "),children:Object(s.jsx)("div",{className:[].join(" "),children:t.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return Object(s.jsx)("a",{href:"#"+e.createdAt,className:aa.a.date,children:new Date(e.createdAt).toString().slice(0,21)},k()("announcement",t))}))})}):null,t.length?t.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e){Un.a;var t=(e.link||"").match(Fe);return t&&ca(t[1]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("section",{className:aa.a.announcement,id:new Date(e.createdAt).valueOf().toString(),"data-aos":"fade-right",children:Object(s.jsx)(ua,{notif:e,select:function(){},styles:aa.a})}),Object(s.jsx)("hr",{className:aa.a.divider,"data-aos":"fade"})]})})):Object(s.jsx)("section",{className:aa.a.announcement,children:"This tournament has no announcements at this time."})]})}var ja=n(36),ba=n.n(ja),ha=(n(776),n(117));function ma(e){var t=Object(c.useContext)(T);function n(t){var n=t.id,a=e.playerDict.get(n);return a?Object(s.jsxs)("div",{className:ba.a.table,children:[a&&a.nationality?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:ba.a.key,children:"Nationality"}),Object(s.jsx)("div",{className:[ba.a.flag,ba.a.value].join(" "),children:Y(a.nationality)})]}):null,Object.entries(Te.post).map((function(t,n){var i,r=Object(f.a)(t,2),c=r[0],o=r[1];return o.show&&!o.show(a,n,e.settings,"results")?null:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:ba.a.key,children:o.mobile}),Object(s.jsx)("div",{className:ba.a.value,children:o.convert?o.convert(a[c],a,e.settings,"results"):null===(i=a[c])||void 0===i?void 0:i.toString()})]})}))]}):null}return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("section",{className:[ba.a.fireworksSection,"animated-"+e.direction].join(" "),children:[Object(s.jsxs)("div",{className:"pyro",children:[Object(s.jsx)("div",{className:"before"}),Object(s.jsx)("div",{className:"after"})]}),Object(s.jsxs)("div",{className:ba.a.resultsScreen,children:[Object(s.jsxs)("div",{id:"first",className:ba.a.place,children:[Object(s.jsx)(ha.c,{}),Object(s.jsxs)("div",{className:ba.a.position,children:["1",Object(s.jsx)("sup",{children:"st"})]}),Object(s.jsx)("div",{className:ba.a.teamName,children:t(e.state[0])}),Object(s.jsx)(n,{id:e.state[0]})]}),Object(s.jsxs)("div",{id:"second",className:ba.a.place,children:[Object(s.jsx)(ha.b,{}),Object(s.jsxs)("div",{className:ba.a.position,children:["2",Object(s.jsx)("sup",{children:"nd"})]}),Object(s.jsx)("div",{className:ba.a.teamName,children:t(e.state[1])}),Object(s.jsx)(n,{id:e.state[1]})]}),Object(s.jsxs)("div",{id:"third",className:ba.a.place,children:[Object(s.jsx)(C.b,{}),Object(s.jsxs)("div",{className:ba.a.position,children:["3",Object(s.jsx)("sup",{children:"rd"})]}),Object(s.jsx)("div",{className:ba.a.teamName,children:t(e.state[2])}),Object(s.jsx)(n,{id:e.state[2]})]})]})]}),Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:["container",ba.a.links].join(" "),children:["team"===e.settings.competitors?Object(s.jsx)(v.b,{to:"/t/".concat(e.id,"/standings/individual"),className:["header-button",ba.a.standingsButton].join(" "),children:"View Individual Results"}):null,Object(s.jsx)(v.b,{to:"/t/".concat(e.id,"/standings/final"),className:["header-button",ba.a.standingsButton].join(" "),children:"View Final Standings"})]})})]})}var fa=n(25),va=n.n(fa),pa=n(8),Oa=n.n(pa);function ga(e){var t=Object(c.useContext)(D);function n(e){return a.apply(this,arguments)}function a(){return(a=Object(m.a)(h.a.mark((function t(n){var a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Ft(n.trim());case 4:if(i=t.sent){t.next=7;break}return t.abrupt("return",console.error("Invalid username to link"));case 7:ge({url:"/profile/chessCom/link",data:{username:n,name:i.name,nationality:null===(a=i.country)||void 0===a?void 0:a.split("/").pop(),title:i.title}}).then(e.updateProfile);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{href:function(){t({title:"Link Chess.com account",message:"Enter Chess.com account to link:",type:"prompt",icon:"chess.com",resolve:n})},setWindow:function(){}}}var xa={"@id":"",name:""},_a={};function ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.elem,n=Object(c.useState)(""),a=Object(f.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(xa),o=Object(f.a)(s,2),l=o[0],u=o[1],d=Object(c.useState)(!1),j=Object(f.a)(d,2),b=j[0],h=j[1],m=Object(c.useCallback)((function(e,t){if(t.name)return t.name;if(t.username)return t.username;if(t.id)return t.id;if("chessCom"!==e.id)return q(e.id);if(l.name)return l.name;if(t.link){if(i in _a)return _a[i];!i&&b&&r(t.link)}return q(e.id)}),[i,l.name,r,b]);Object(c.useEffect)((function(){h(Z(t))}),[h,t]),Object(c.useEffect)((function(){var e=function(){return h(Z(t))};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[h,t]);var v=Object(p.g)();return Object(c.useEffect)((function(){return v.listen((function(e){e.pathname.startsWith("/teams")||Dt.clearQueue()}))}),[v]),Object(c.useEffect)((function(){i&&Ut(i.split("/").pop()).then(u)}),[i]),{getClubName:m,chessComClub:l}}function wa(e){var t=Object(c.useContext)(D),n=Object(c.useState)(""),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useCallback)((function(){return Oe({url:"/profile/chessCom/token"}).then(r)}),[r]),l=(e.profile.chessCom||{}).username;return Object(c.useEffect)((function(){l&&(i||o())}),[i,o,l]),function(){var n=Object(m.a)(h.a.mark((function n(){var a,r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(a=e.profile.chessCom)||void 0===a?void 0:a.verified)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,ge({url:"/profile/chessCom/verify"}).then(e.updateProfile).catch((function(){}));case 4:t({title:"Verify your chess.com account",icon:Object(s.jsx)("img",{src:sa.chessCom.icon[1],alt:"chessCom"}),link:sa.chessCom.idLink.replace("|",(null===(r=e.profile.chessCom)||void 0===r?void 0:r.username)||""),message:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"Head to your chess.com profile and click 'Enter a status here'. Copy and paste the following code into your status. Don't worry! You can change it back afterwards!"}),Object(s.jsxs)("span",{className:"mono",children:["SCORCH_TOKEN=",i]}),Object(s.jsxs)("p",{children:["Click ",Object(s.jsx)("button",{onClick:function(){return ge({url:"/profile/chessCom/verify"}).then((function(){return t({title:"",message:""})})).then(e.updateProfile)},children:"here"})," when done."]})]})});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}function ka(e){var t=e.profile,n=e.showVerified,a=e.validate,i=void 0===a?function(){return!0}:a,r=e.forceFacebook,l=ya({elem:e.elem}).getClubName,u=Object(c.useMemo)((function(){return t?Object.entries(sa).map((function(e,n){var a=Object(f.a)(e,2),r=a[0],s=a[1];if(!(s=Object.assign(sa[r],{id:r})))return null;var c=t[r];return"email"===r&&"string"===typeof t.email&&(c=t.email?Object.assign({},t.emailMeta,{id:t.email}):void 0),c&&"object"===typeof c&&i(c)?[s,c]:null})).filter((function(e){return e})):[]}),[t,i]),d=Object(c.useMemo)((function(){return u.map((function(e,t){var a=Object(f.a)(e,2),i=a[0],c=a[1];return c.link||i.idLink||i.link?Object(s.jsxs)("a",{id:i.id,href:c.link||("facebook"!==i.id||r?(i.idLink||i.link).replace("|",c.username||c.id||""):void 0),className:["button","link",Oa.a.account].join(" "),rel:"noopener noreferrer",target:"_blank",children:["string"===typeof i.icon[1]?Object(s.jsx)("img",{src:i.icon[1],alt:i.id,className:Oa.a.icon}):o.a.cloneElement(i.icon[1],{className:Oa.a.icon}),l(i,c),!1!==n&&c.verified?Object(s.jsx)(x.m,{className:"verified"}):null]},["a",t].join(".")):Object(s.jsxs)("div",{id:i.id,className:["button","link",Oa.a.account].join(" "),children:["string"===typeof i.icon[1]?Object(s.jsx)("img",{src:i.icon[1],alt:i.id,className:Oa.a.icon}):o.a.cloneElement(i.icon[1],{className:Oa.a.icon}),l(i,c).length>20?"":l(i,c),!1!==n&&c.verified?Object(s.jsx)(x.m,{className:"verified"}):null]},["div",t].join("."))}))}),[l,u,n,r]);return{fields:u,links:d}}function Na(e){var t,n,a,i,r,l,u,d,b,p,O,g,y,w,N,C=!e.updateProfile&&!1!==e.small,S=Object(c.useContext)(R).isLoggedIn,L=Object(c.useContext)(P).isAuthed,M=Object(c.useRef)(),B=ka({profile:e.profile,validate:function(t){return"user"===e.type||!t.verified},elem:M.current}),E=B.fields,A=B.links,T=function(e){var t=Object(c.useContext)(D),n=ya(),a=n.getClubName,i=n.chessComClub,r=e.fields,l=Object(c.useCallback)((function(){t({title:"",message:""}),ge({url:[e.type,e.id,"create"].join("/")}).then(e.updateProfile)}),[e.id,e.type,e.updateProfile,t]),u=Object(c.useRef)(null),d=Object(c.useCallback)((function(){var n;return u.current?ge({url:V(e.type,e.id,"createCode"),data:{code:null===(n=u.current)||void 0===n?void 0:n.value}}).then(e.updateProfile).then((function(){return t({title:"",message:""})})):Promise.resolve()}),[u,e.id,e.type,e.updateProfile,t]),j=Object(c.useState)(null),b=Object(f.a)(j,2),p=b[0],O=b[1],g=Object(c.useCallback)((function(){var t;return u.current?2!==u.current.value.split("-").length?(O(null),Promise.resolve()):ge({url:V(e.type,e.id,"validateCode"),data:{code:null===(t=u.current)||void 0===t?void 0:t.value}}).then(O):(O(null),Promise.resolve())}),[u,e.id,e.type,O]),y=Object(c.useCallback)((function(e){var t;switch(e.keyCode){case 27:(null===(t=u.current)||void 0===t?void 0:t.value)&&(u.current.value="");break;case 13:d();break;default:g()}}),[d,u]),w=Object(c.useCallback)(Object(m.a)(h.a.mark((function n(){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.profile){n.next=2;break}return n.abrupt("return");case 2:t({title:"Claim "+e.type,message:Object(s.jsxs)(s.Fragment,{children:[q(e.type)," ",Object(s.jsx)("b",{children:e.profile.name})," has the following available authentication methods:",Object(s.jsxs)("div",{className:Oa.a.auth,children:[Object(s.jsx)("input",{ref:u,onKeyDown:y,autoFocus:!0,spellCheck:!1,placeholder:"xxxx-xxxx"}),Object(s.jsxs)("div",{className:k()("button","link",Oa.a.submit,Oa.a.account,Object(_.a)({},Oa.a.null,!(null===(c=u.current)||void 0===c?void 0:c.value)||!p)),onClick:d,children:[Object(s.jsx)(x.t,{className:Oa.a.icon}),"Claim via code",Object(s.jsx)(x.d,{})]}),Object(s.jsx)("div",{className:k()(Oa.a.invalid,Object(_.a)({},Oa.a.showInvalid,!1===p)),children:"This code is invalid!"}),r.map((function(n,r){var c=Object(f.a)(n,2),u=c[0],d=c[1],j=e.profile&&e.profile["email"===u.id?"emailMeta":u.id],b=a(u,d),h=function(){var e;return j?!(!d.id||d.id!==j.id)||!(!d.username||d.username.toLowerCase()!==(null===(e=j.username)||void 0===e?void 0:e.toLowerCase()))||!!("chessCom"===u.id&&i&&i.admin&&i.admin.some((function(e){var t;return e.split("/").pop()===(null===j||void 0===j||null===(t=j.username)||void 0===t?void 0:t.toLowerCase())}))):null}();return null===h?Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsxs)(v.b,{to:"/me/accounts",id:u.id,className:["button","link",Oa.a.account].join(" "),onClick:function(){return t({title:"",message:""})},children:["string"===typeof u.icon[1]?Object(s.jsx)("img",{src:u.icon[1],alt:u.id,className:Oa.a.icon}):o.a.cloneElement(u.icon[1],{className:Oa.a.icon}),"Link ",u.name||q(u.id)," account",Object(s.jsx)(x.d,{})]}),Object(s.jsx)("div",{})]},k()("account",r)):Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsxs)("div",{id:u.id,className:["button","link",Oa.a.account,!1===h?Oa.a.null:""].join(" "),onClick:h?l:function(){},children:["string"===typeof u.icon[1]?Object(s.jsx)("img",{src:u.icon[1],alt:u.id,className:Oa.a.icon}):o.a.cloneElement(u.icon[1],{className:Oa.a.icon}),h?Object(s.jsxs)(s.Fragment,{children:["Claim via ",u.name||q(u.id)]}):b,h?Object(s.jsx)(x.d,{}):Object(s.jsx)(x.f,{})]}),Object(s.jsx)("div",{className:Oa.a.authMessage,children:h?null:!1===h?Object(s.jsx)("small",{children:u.authMessage}):Object(s.jsxs)("small",{children:["You need to link your ",u.name||q(u.id)," account to use it as an authentication method here."]})})]},k()("account",r))}))]})]})});case 3:case"end":return n.stop()}}),n)}))),[l,r,e,d,a,t,i,y,u]),N=Object(c.useState)(!1),C=Object(f.a)(N,2),S=C[0],L=C[1];return Object(c.useEffect)((function(){if(window.location.search){var e=new URLSearchParams(window.location.search).get("claim");e&&(S||(w(),u.current&&(u.current.value=e,L(!0))))}}),[w,u,S,L]),{handleCreate:w,fields:r}}(Object(j.a)(Object(j.a)({},e),{},{fields:E})).handleCreate,I=Object(c.useMemo)((function(){var t;return Object.entries((null===(t=e.profile)||void 0===t?void 0:t.meta)||{}).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return a?(n=n.trim()).startsWith("_")?null:(n.endsWith("?")&&(n=n.slice(0,-1)),"boolean"===typeof a?n:(n+=": ")+a.toString()):null})).filter((function(e){return e}))}),[e.profile]),F=Object(c.useMemo)((function(){return I.map((function(e,t){return e?Object(s.jsx)("div",{className:Oa.a.notes,children:Object(s.jsx)("div",{children:e},["line",t].join("."))}):null}))}),[I]),W=Object(c.useMemo)((function(){var t,n,a,i,r,c,o;return Object(s.jsxs)(s.Fragment,{children:["user"===e.type?Object(s.jsx)("div",{className:[va.a.status,(null===(t=e.profile)||void 0===t?void 0:t.online)?va.a.online:""].join(" "),children:(null===(n=e.profile)||void 0===n?void 0:n.isLicensed)?Object(s.jsx)(x.y,{title:"Licensed"}):Object(s.jsx)(x.r,{style:{fontSize:"0.5em"},title:(null===(a=e.profile)||void 0===a?void 0:a.online)?"Online":"Offline"})}):null,Object(s.jsx)(v.b,{to:V("user"===e.type?"@":e.type,(null===(i=e.profile)||void 0===i?void 0:i.username)||""),children:Object(s.jsxs)("h1",{children:[(null===(r=e.profile)||void 0===r?void 0:r.username)||(null===(c=e.profile)||void 0===c?void 0:c.name),(null===(o=e.profile)||void 0===o?void 0:o.verified)?Object(s.jsx)(x.m,{className:"verified"}):null]})})]})}),[e.profile,e.type]);return e.profile||!1!==e.renderNull?Object(s.jsxs)("div",{"data-aos":"fade-left","data-aos-delay":e.i?e.i%Math.min(4,Math.floor(window.innerWidth/300))*100:void 0,className:k()("container",va.a.info,Object(_.a)({},va.a.small,C),e.className),ref:M,children:[Object(s.jsx)("div",{className:va.a.flag,children:(null===(t=e.profile)||void 0===t?void 0:t.nationality)?Y(null===(n=e.profile)||void 0===n?void 0:n.nationality):null}),C||e.showLinks?Object(s.jsx)(v.b,{className:va.a.name,to:["","user"===e.type?"@":e.type,null===(a=e.profile)||void 0===a?void 0:a.id].join("/"),children:W}):Object(s.jsx)("div",{className:va.a.name,children:W}),(null===(i=e.profile)||void 0===i?void 0:i.bio)?Object(s.jsx)("div",{className:va.a.bio,children:null===(r=e.profile)||void 0===r?void 0:r.bio}):L?Object(s.jsxs)("div",{className:["button","link",va.a.account].join(" "),onClick:e.updateBio,children:["Add a ","team"!==e.type?"bio":"description","?",Object(s.jsx)(x.d,{})]}):Object(s.jsx)("div",{className:va.a.bio}),Object(s.jsxs)("div",{className:va.a.cols,children:[Object(s.jsxs)("div",{className:va.a.details,children:["team"===e.type&&(null===(l=e.profile)||void 0===l?void 0:l.founder)?Object(s.jsxs)("div",{className:va.a.detail,children:[Object(s.jsx)("div",{className:va.a.title,children:"Founder"}),Object(s.jsx)(v.b,{to:"/@/"+(null===(u=e.profile)||void 0===u?void 0:u.founder),className:"playerName",children:null===(d=e.profile)||void 0===d?void 0:d.founder})]}):null,"team"===e.type&&(null===(b=e.profile)||void 0===b?void 0:b.users)?Object(s.jsxs)("div",{className:va.a.detail,children:[Object(s.jsx)("div",{className:va.a.title,children:"Size"}),Object(s.jsx)(v.b,{to:["","team",e.id,"members"].join("/"),className:"playerName",children:null===(p=e.profile)||void 0===p?void 0:p.users.length})]}):null,Object(s.jsxs)("div",{className:va.a.detail,children:[Object(s.jsx)("div",{className:va.a.title,children:"team"===e.type?"Created":"Joined"}),Object(s.jsx)("div",{children:e.profile?new Date(e.profile.createdAt).toString().slice(0,15):null})]})]}),Object(s.jsxs)("div",{className:va.a.buttons,children:[e.updateProfile&&S&&!L&&"user"!==e.type?"team"===e.type&&!(null===(O=e.profile)||void 0===O?void 0:O.teamId)||"player"===e.type&&!(null===(g=e.profile)||void 0===g?void 0:g.userId)?Object(s.jsxs)("div",{className:["button","link",va.a.account].join(" "),onClick:T,children:["This ",e.type," is unclaimed. Register ",e.type,"?",Object(s.jsx)(x.d,{})]}):Object(s.jsx)("div",{className:["button","link",va.a.account,va.a.claim].join(" "),children:"Registered"}):null,S?Object.values(E).length||C?A:Object(s.jsx)("div",{className:va.a.row,children:"No contact details registered"}):Object(s.jsx)("div",{className:va.a.row,children:Object(s.jsxs)(v.b,{to:"/login",className:["button","link"].join(" "),children:["Sign in to view contact details","team"===e.type?" and members":""]})}),C?null:F.length&&F.some((function(e){return e}))?F.map((function(e,t){return Object(s.jsx)("div",{className:va.a.row,children:e},k()("note",t))})):null]})]}),(null===(y=e.profile)||void 0===y?void 0:y.users)?Object(s.jsxs)("div",{className:va.a.detail,children:[Object(s.jsx)("div",{className:va.a.title,children:"Members"}),Object(s.jsx)("div",{className:va.a.memberBox,children:null===(w=e.profile)||void 0===w?void 0:w.users.map((function(t,n){var a;return Object(s.jsx)(v.b,{to:"/@/"+(null===(a=e.profile)||void 0===a?void 0:a.founder),className:"playerName",children:t.username},k()("user",n.toString()))}))})]}):null,C||e.showLinks?Object(s.jsxs)(v.b,{className:["button",va.a.more].join(" "),to:["","user"===e.type?"@":e.type,null===(N=e.profile)||void 0===N?void 0:N.id].join("/"),children:["Profile ",Object(s.jsx)(x.d,{})]}):null]}):null}var Ca=n(119),Sa=n.n(Ca);function La(e){var t;if(!e.loaded.all)return null;var n=(t={format:q(e.settings.pairingSystem),created:new Date(e.status.createdAt).toString().slice(4,15),type:q(e.settings.competitors)+"s"},Object(_.a)(t,q("team"===e.settings.competitors?"Teams":"Players"),e.status.players),Object(_.a)(t,"games",1===e.settings.gamePointTotal?null:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:Math.ceil(e.players.reduce((function(e,t){return e+t.histories.reduce((function(e,t){return t?e+=t.played:e}),0)}),0)/2)})})),Object(_.a)(t,"location",e.settings.location),Object(_.a)(t,"Time control",e.settings.timeControl),Object(_.a)(t,"status",!1!==e.status.active?"Live":e.status.round?"Finished":"Not yet started"),t),a=Object.entries(n).map((function(e,t){var n=Object(f.a)(e,2),a=n[0],i=n[1];return i?Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsxs)("div",{className:Sa.a.infoKey,children:[q(a),":"]}),Object(s.jsx)("div",{className:Sa.a.infoValue,children:i})]},k()(a,t)):null}));return Object(s.jsxs)("div",{className:Sa.a.tournament_info,children:[Object(s.jsx)("div",{children:a}),e.settings.prizes?Object(s.jsx)("div",{className:Sa.a.tieBreakLink,onClick:function(){return e.setFloat("prizes")},children:"Prizes"}):null]})}var Ma=n(40),Ra=n.n(Ma);function Pa(e){var t=Object(c.useState)(0),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useCallback)((function(){i(Math.trunc(e.height/36)-3)}),[e.height,i]);Object(c.useEffect)((function(){r()}),[r]);var o=Object(c.useRef)(null),l=Object(c.useCallback)((function(e){return o.current?(o.current.focus(),!e):!e}),[]),u=Object(c.useReducer)(l,!1),d=Object(f.a)(u,2),j=d[0],b=d[1];Object(c.useEffect)((function(){o.current&&o.current.focus()}),[b]);var h=Object(c.useState)(!1),m=Object(f.a)(h,2),p=m[0];m[1];Object(c.useEffect)((function(){return window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[r]);var O=Object(c.useMemo)((function(){if(!e.players.length)return[];for(var t=[],n=e.players.length<a||j?e.players.length:a,i=0;i<n;i++){var r=e.players[i];"bye"!==r.id&&t.push([r.nationality,r.firstName,r.id?"/team/"+r.id:""])}return t.map((function(e,t,n){var a,i,r,c=Object(f.a)(e,3),l=c[0],u=c[1],d=c[2];return Object(s.jsxs)("tr",{id:t!==n.length-1||j?void 0:Ra.a.rowLast,ref:t!==n.length-1||j?void 0:o,className:k()(Ra.a.tr,{even:t%2===0,odd:t%2}),children:[Object(s.jsx)("td",{className:k()(Ra.a.cell,(a={},Object(_.a)(a,Ra.a.moreHidden,!p&&!He()),Object(_.a)(a,"hidden",!1),a)),children:t+1}),Object(s.jsx)("td",{className:k()(Ra.a.cell,Ra.a.flag,(i={},Object(_.a)(i,Ra.a.moreHidden,!p&&!He()),Object(_.a)(i,"hidden",!1),i)),children:Y(l)||l}),Object(s.jsx)("td",{className:k()(Ra.a.cell,(r={},Object(_.a)(r,Ra.a.moreHidden,!p&&!He()),Object(_.a)(r,"hidden",!1),r)),children:Object(s.jsx)(v.b,{to:d,children:u})})]},t)}))}),[e.players,a,j]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("table",{className:k()("download-table full-width",Ra.a.table,"standings"),children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[["Rank","Fed","Team"].map((function(e,t){return Object(s.jsx)("th",{scope:"column",className:k()(Ra.a.th,Ra.a.stickyheader),id:e,children:Object(s.jsx)("div",{className:[Ra.a.cell,Ra.a.headerCell].join(" "),children:e})},["column",t].join("."))})),p&&!He()?Object(s.jsx)("th",{className:k()(Ra.a.cell,Ra.a.spacer)}):null]})}),Object(s.jsx)("tbody",{children:e.players.length?O:Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:42,children:"No players entered yet"})})})]}),e.players.length>a?Object(s.jsx)("button",{onMouseDown:function(){b()},className:Ra.a.showAllButton,children:j?Object(s.jsx)(x.e,{}):Object(s.jsx)(x.b,{})}):null]})}var Ba=n(58),Ea=n.n(Ba);function Aa(e){var t=tt(e.settings).getName,n=Object(c.useState)([]),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)({}),l=Object(f.a)(o,2),u=l[0],d=l[1],b=Object(c.useContext)(R).isLoggedIn,h=Object(c.useState)(!1),m=Object(f.a)(h,2),v=m[0],p=m[1],O=Object(c.useRef)(),g=$t({playerDict:e.playerDict,results:i,settings:e.settings}),_=(g.matches,g.matchDict),y=g.setMatch,w=g.populatematchDict,N=g.fetchedMatch,C=g.fetchNext,S=g.hasFetched,L=g.beforeSetResults,M=tn(),P=M.searched,B=M.expanded,E=M.visible,A=(M.setSearched,M.setExpanded),T=(M.setVisible,Object(c.useCallback)((function(t){return Oe({url:V("tournament",e.id,"getPairings"),params:{round:e.round,ids:null===t||void 0===t?void 0:t.join(","),games:!0}}).then((function(e){return d(e.reduce((function(e,t){return e[t.id]=t.games,e}),{}))}))}),[e.id,e.round,d]));Object(c.useEffect)((function(){L(),r([])}),[r,L,e.round]),Object(c.useEffect)((function(){w(i,e.round)}),[w,i]),Object(c.useEffect)((function(){C()}),[C]),Object(c.useEffect)((function(){Oe({url:"/tournament/"+e.id+"/getPairings",params:{round:e.round}}).then((function(e){return r(e),p(!0),e})).then((function(t){window.location.hash||(e.round,e.status.round)})).catch((function(){}))}),[r,e.round,e.id,T,e.status.round]);var I=Object(c.useMemo)((function(){return i.reduce((function(e,t){var n=t.pool||0;return e[n]||(e[n]=0),e[n]++,e}),[])}),[i]),D=Object(c.useReducer)((function(e){return!e}),!1),F=Object(f.a)(D,2),W=F[0],U=F[1],G=Object(c.useState)(0),H=Object(f.a)(G,2),z=H[0],K=H[1],J=Object(c.useMemo)((function(){return Object.values(_).filter((function(e){return!!e&&!e.isFinished})).sort((function(e,t){return e?t?e.board-t.board:1:-1}))}),[_]),Y=Object(c.useCallback)((function(n){var a=n.pool;return Object(s.jsx)(s.Fragment,{children:J.map((function(n,i){var r,c,o,l,d,h,m,f,v,p;if(1===z&&!n.isFeatured)return null;if(!W&&i>10)return null;n.id in u&&(n.games=u[n.id]);var O=n.startTime||n.registrationTime,g=new Date(O||0).toString(),x=[t(n.w),null!==(r=n.scores[0])&&void 0!==r?r:(n.isLive||n.isFinished)&&n.teams&&((null===(c=n.w)||void 0===c?void 0:c.chessCom)||(null===(o=n.b)||void 0===o?void 0:o.chessCom))?n.teams[0].score:"",t(n.b),null!==(l=n.scores[1])&&void 0!==l?l:(n.isLive||n.isFinished)&&n.teams&&((null===(d=n.w)||void 0===d?void 0:d.chessCom)||(null===(h=n.b)||void 0===h?void 0:h.chessCom))?n.teams[1].score:"",O?g.slice(0,10)+"\n"+g.slice(16,21):"",n.link,n.w?n.w.nationality:"",n.b?n.b.nationality:""];return Object(s.jsx)(hn,Object(j.a)(Object(j.a)({i:i},{data:x,match:n,pool:a,setMatch:y,setExpanded:A,fetchGames:T}),{},{setFinished:S,round:e.round,fetch:!!N&&N.id===n.id,expanded:B.includes(n.id),highlight:b&&n.w&&n.b&&(n.w.id===(null===(m=e.profile)||void 0===m?void 0:m.username)||n.b.id===(null===(f=e.profile)||void 0===f?void 0:f.username)||(null===(v=e.profile)||void 0===v||null===(p=v.teams)||void 0===p?void 0:p.some((function(e){return e&&(e.id===n.w.teamId||e.id===n.b.teamId)})))),hidden:"all"!==E&&n.status!==E||!!P.length&&!P.some((function(e){var t,a;return e.id===(null===(t=n.w)||void 0===t?void 0:t.id)||e.id===(null===(a=n.b)||void 0===a?void 0:a.id)})),settings:e.settings}),["row",n.board].join("."))}))})}),[z,u,t,N,A,B,P,_,S,E,T,y,e.round,e.settings,e.profile,b]),X=[["Fed","5%"],["White","22.5%"],["Link","12.5%"],["","5%"],["Start Time","10%"],["","5%"],["Watch Live","12.5%"],["Black","22.5%"],["Fed","5%"]],Z=["upcoming","featured"],$=Object(c.useMemo)((function(){return Object(s.jsx)(s.Fragment,{children:Z.map((function(e,t){return Object(s.jsx)("div",{onClick:function(){return K(t)},className:["header-button",Ea.a.menuItems,z===t?Ea.a.selectedItem:""].join(" "),children:q(e)},t)}))})}),[K,z]);return J.length?0===Object.keys(_).length||_.constructor!==Object?null:Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:Ea.a.featured,children:[Object(s.jsx)("div",{className:["container","bodyContainer",Ea.a.headingContainer].join(" "),children:Object(s.jsx)("div",{className:[Ea.a.headerItems,"button-list"].join(" "),children:$})}),function(){for(var t=[],n=!1,a=0;a<I.length;a++)I[a]&&(t.push(Object(s.jsxs)("div",{className:k()(Ea.a.table,{still:P.length}),children:[a?Object(s.jsxs)("div",{className:Ea.a.pool,children:["Pool ",Q(a,e.settings.poolDisplay)]}):null,Object(s.jsxs)("table",{className:k()("download-table","full-width","pairings",Ea.a.featured_table),children:[Object(s.jsx)("thead",{children:Object(s.jsx)("tr",{ref:n?null:O,children:X.map((function(e,t){return Object(s.jsx)("td",{className:Ea.a.stickyheader,style:{width:e[1]},children:e[0]},t)}))})}),Object(s.jsxs)("tbody",{className:Ea.a.tbody,children:[v&&!i.length?Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:100,children:"Draw has not yet taken place!"})}):null,Object(s.jsx)(Y,{pool:a})]})]}),J.length>=10?Object(s.jsx)("button",{onClick:function(){return U()},className:Ea.a.showAllButton,children:W?Object(s.jsx)(x.e,{}):Object(s.jsx)(x.b,{})}):null]},["table",a].join("."))),n=!0);return t}()]})}):null}var Ta=n(44),Ia=n.n(Ta);function Da(e){var t=e.profile,n=e.updateProfile,a=Object(c.useContext)(D),i=Object(c.useCallback)((function(e,t){return ge({url:"/profile/updateAccount",data:{account:e,data:t}}).then(n)}),[n]);return{updateBio:Object(c.useCallback)((function(){a({title:"Add a description",message:"Keep it short and sweet. Maximum length 280 characters.",type:"prompt",prompt:{type:"textarea",defaultValue:(null===t||void 0===t?void 0:t.bio)||"",allowNull:!0,additionalInputProps:{maxLength:280}},resolve:function(e){return i("bio",e)}})}),[a,i,t])}}function Fa(){var e=Object(c.useContext)(M);return{tieBreaks:Object(c.useMemo)((function(){var t=Object.entries(S);if(e.tieBreaks){var n=e.tieBreaks.split(",");t=t.sort((function(e,t){return n.indexOf(e[0])-n.indexOf(t[0])}))}return t}),[e])}}function Wa(e){var t=Object(c.useState)(null),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useCallback)(Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ge.test(e.status.user)){t.next=2;break}return t.abrupt("return",i(null));case 2:Oe({url:V("user",e.status.user)}).then(i).catch((function(){return i(null)}));case 3:case"end":return t.stop()}}),t)}))),[e.status.user,i]);Object(c.useEffect)((function(){r()}),[r]);var o=Da({profile:a,updateProfile:r}).updateBio,l=Object(c.useReducer)((function(e,t){return e===t?"":t}),""),u=Object(f.a)(l,2),d=(u[0],u[1]),b=Fa().tieBreaks;Object(c.useEffect)((function(){r()}),[r]);var v=Object(c.useRef)(null),p=Object(c.useState)(0),O=Object(f.a)(p,2),g=O[0],x=O[1],_=Object(c.useCallback)((function(){if(v.current){var e=v.current.getBoundingClientRect().height;x(e)}}),[v,x]);Object(c.useEffect)((function(){_()}));var y=Object(c.useRef)(null),w=Object(c.useState)(0),N=Object(f.a)(w,2),C=N[0],S=N[1];Object(c.useEffect)((function(){if(y.current&&e.announcements.length){var t=y.current.getBoundingClientRect().height;S(t)}}),[e.announcements,y,S]);var L=Object(c.useState)(0),M=Object(f.a)(L,2),R=M[0],P=M[1];Object(c.useEffect)((function(){P(g-C)}),[C,g]);var B=Object(c.useMemo)((function(){return Object(s.jsxs)(s.Fragment,{children:[e.settings.description?Object(s.jsx)("div",{className:k()("container",Ia.a.description),children:e.settings.description}):null,Object(s.jsxs)("div",{className:Ia.a.info_organiser_container,children:[Object(s.jsx)(La,Object(j.a)(Object(j.a)({},e),{},{setFloat:d})),Object(s.jsx)(Na,{type:"user",id:e.status.user,profile:a,updateProfile:r,updateBio:o,className:Ia.a.organiser_container})]}),Object(s.jsx)("section",{className:Ia.a.tieBreakSection,children:Object(s.jsx)("div",{className:k()("container",Ia.a.tieBreakContainer),children:Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:Ia.a.tieBreakTitle,children:"Tie Breaks"}),Object(s.jsx)("div",{className:Ia.a.tieBreaks,children:b.slice(0,b.findIndex((function(e){return null===Object(f.a)(e,2)[1]}))).map((function(e,t){var n=Object(f.a)(e,2)[1];return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{children:["#",t+1]},[n,t,"1"].join(" ")),Object(s.jsx)("div",{children:n.name},[n,t,"2"].join(" "))]}):null}))})]})})}),Object(s.jsx)(Aa,{playerDict:e.playerDict,settings:e.settings,id:e.id,round:e.round,status:e.status,profile:a,direction:e.direction}),Object(s.jsx)("div",{id:"live",className:Ia.a.live,children:Object(s.jsx)(Hn,{streamURL:e.settings.streamURL,pop:e.pop,isLive:e.isLive,screenWidthProportion:5/8})})]})}),[e.status.user,a,r,o,e.status,e.settings,e.players,e.loaded]);return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("section",{className:Ia.a.container,children:[Object(s.jsx)("div",{className:Ia.a.left_column,ref:v,children:B}),Object(s.jsxs)("div",{className:Ia.a.teams_announcements,children:[Object(s.jsx)("h1",{className:Ia.a.header,children:"Registered Players"}),Object(s.jsx)("div",{className:k()(Ia.a.teams_list),children:Object(s.jsx)(Pa,{players:e.players,height:R})}),e.announcements.length?Object(s.jsxs)("div",{className:Ia.a.announcements,ref:y,children:[Object(s.jsx)("div",{className:Ia.a.header,children:" Announcements "}),Object(s.jsx)(da,{announcements:e.announcements.map((function(t,n){return Object(j.a)(Object(j.a)({},t),{},{content:t.announcement,id:n.toString(),tournamentId:e.status.id,author:"",role:"director",title:"",link:""})}))})]}):null]})]})})}function Ua(e){var t=Object(c.useState)(10),n=Object(f.a)(t,2),a=n[0];n[1];return e.children?Object(s.jsx)("div",{className:["popped",ra.a.draggable].join(" "),style:{bottom:a},children:e.children}):null}n(387),n(388);function Ga(e){var t=Object(c.useState)(!1),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("img",Object(j.a)(Object(j.a)({},e),{},{onClick:function(){return i(!a)},style:{cursor:"pointer"}})),Object(s.jsx)(Xn.b,{children:a?Object(s.jsx)(Xn.a,{onClose:function(){return i(!1)},children:Object(s.jsx)(Xn.c,{currentIndex:0,views:[Object.assign({},e,{source:e.src})]})}):null})]})}function Ha(e){return Object(s.jsx)("div",{style:{transform:"scale(".concat(e.diameter/254,")"),width:254,height:254},className:e.className,children:Object(s.jsxs)("svg",{width:254,height:254,children:[Object(s.jsxs)("linearGradient",{id:"linearColors1",x1:"0",y1:"0",x2:"1",y2:"1",children:[Object(s.jsx)("stop",{offset:"0%",stopColor:"#01E400"}),Object(s.jsx)("stop",{offset:"100%",stopColor:"#FEFF01"})]}),Object(s.jsxs)("linearGradient",{id:"linearColors2",x1:"0.5",y1:"0",x2:"0.5",y2:"1",children:[Object(s.jsx)("stop",{offset:"0%",stopColor:"#FEFF01"}),Object(s.jsx)("stop",{offset:"100%",stopColor:"#FF7E00"})]}),Object(s.jsxs)("linearGradient",{id:"linearColors3",x1:"1",y1:"0",x2:"0",y2:"1",children:[Object(s.jsx)("stop",{offset:"0%",stopColor:"#FF7E00"}),Object(s.jsx)("stop",{offset:"100%",stopColor:"#FB0300"})]}),Object(s.jsxs)("linearGradient",{id:"linearColors4",x1:"1",y1:"1",x2:"0",y2:"0",children:[Object(s.jsx)("stop",{offset:"0%",stopColor:"#FB0300"}),Object(s.jsx)("stop",{offset:"100%",stopColor:"#9B004A"})]}),Object(s.jsxs)("linearGradient",{id:"linearColors5",x1:"0.5",y1:"1",x2:"0.5",y2:"0",children:[Object(s.jsx)("stop",{offset:"0%",stopColor:"#9B004A"}),Object(s.jsx)("stop",{offset:"100%",stopColor:"#7D0022"})]}),Object(s.jsxs)("linearGradient",{id:"linearColors6",x1:"0",y1:"1",x2:"1",y2:"0",children:[Object(s.jsx)("stop",{offset:"0%",stopColor:"#7D0022"}),Object(s.jsx)("stop",{offset:"100%",stopColor:"#01E400"})]}),Object(s.jsx)("path",{d:"M126 10 a120 120 0 0 1 103.9230 60",fill:"none",stroke:"url(#linearColors1)",strokeWidth:e.width}),Object(s.jsx)("path",{d:"M229.9230 70 a120 120 0 0 1 0 120",fill:"none",stroke:"url(#linearColors2)",strokeWidth:e.width}),Object(s.jsx)("path",{d:"M229.9230 190 a120 120 0 0 1 -103.9230 60",fill:"none",stroke:"url(#linearColors3)",strokeWidth:e.width}),Object(s.jsx)("path",{d:"M126 250 a120 120 0 0 1 -103.9230 -60",fill:"none",stroke:"url(#linearColors4)",strokeWidth:e.width}),Object(s.jsx)("path",{d:"M22.077 190 a120 120 0 0 1 0 -120",fill:"none",stroke:"url(#linearColors5)",strokeWidth:e.width}),Object(s.jsx)("path",{d:"M22.077 70 a120 120 0 0 1 103.9230 -60",fill:"none",stroke:"url(#linearColors6)",strokeWidth:e.width})]})})}var za=n(389),Va=n.n(za),qa=n(24),Ka=n.n(qa);function Ja(e){return!e.to||Fe.test(e.to)||e.to.startsWith("#")?Object(s.jsx)("a",Object(j.a)(Object(j.a)({href:e.to||void 0,rel:"noopener noreferrer",target:"_blank"},e),{},{children:e.children})):Object(s.jsx)(v.b,Object(j.a)(Object(j.a)({},e),{},{href:e.to,children:e.children}))}var Ya=/^(?:rgb)?([0-9]{1,3})[,\s]+\s?([0-9]{1,3})[,\s]+?([0-9]{1,3})$/,Qa=function(){function e(t){Object(ce.a)(this,e),this.arr=t}return Object(oe.a)(e,[{key:"fromRGB",value:function(e){var t=e.match(Ya);return t?this.arr=t.slice(1).map((function(e){return Number(e)})):null}},{key:"fromHex",value:function(e){var t=e.match(Ya);if(!t)return null;var n=t[1],a=[n.slice(-6,-4),n.slice(-4,-2),n.slice(-2,0)];return this.arr=a.map((function(e){return parseInt(e,16)}))}},{key:"byDecimal",value:function(e){if(e<0||e>16777215)throw new RangeError("Numbers must be within 0 to 1677777215 range");return this.fromHex(e.toString(16))}},{key:"getText",value:function(){return this.arr&&this.arr.reduce((function(e,t){return e+t}),0)/3<127.5?"white":"black"}},{key:"toDecimal",value:function(){return this.arr?parseInt(this.arr.map((function(e){return e.toString(16)})).join(""),16):0}}],[{key:"randDecimal",value:function(){return parseInt(e.randHex().join(""),16)}},{key:"randHex",value:function(){return e.randRGB().map((function(e){return e.toString()}))}},{key:"randRGB",value:function(){for(var e=[],t=0;t<2;t++)e[t]=K(0,255);return e}}]),e}();function Xa(){return"dark"===pe.getLocal("theme")}function Za(){pe.setLocal("theme",Xa()?"light":"dark"),window.dispatchEvent(new Event("theme"))}function $a(e){var t=e.tournaments,n=Object(c.useState)({}),a=Object(f.a)(n,2),i=a[0],r=a[1],s=Object(c.useCallback)((function(){if(t.length){var e,n=[],a=[],i=Object(y.a)(t);try{for(i.s();!(e=i.n()).done;){var s=e.value;s.logoURL&&(s.name&&(n.push(Va.a.from(s.logoURL).getPalette().catch((function(){}))),a.push(s.id)))}}catch(c){i.e(c)}finally{i.f()}Promise.all(n).then((function(e){return e})).then((function(e){for(var t={},n=0;n<e.length;n++){var i=e[n];i&&(t[a[n]]=i)}r(t)}))}}),[t,r]);Object(c.useEffect)((function(){s()}),[s]);var o=Object(c.useMemo)((function(){for(var e={},t=0,n=Object.entries(i);t<n.length;t++){var a,r,s,c,o=Object(f.a)(n[t],2),l=o[0],u=o[1],d=[null===(a=u.DarkVibrant)||void 0===a?void 0:a.hex,null===(r=u.DarkMuted)||void 0===r?void 0:r.hex,null===(s=u.Vibrant)||void 0===s?void 0:s.hex,null===(c=u.Muted)||void 0===c?void 0:c.hex];e[l]="linear-gradient(160deg, ".concat(d.filter((function(e){return e})).join(", "),")")}return e}),[i]);return{palettes:i,gradients:o}}function ei(e){var t,n,a,i=e.id,r=e.gradients,c=e.withContainer,o=e.style,l=e.img;e.faded;return l?Object(s.jsxs)("div",{className:k()(Ka.a.parent,(t={},Object(_.a)(t,Ka.a.fixed,c),Object(_.a)(t,Ka.a.lighter,!Xa()),t)),style:Object(j.a)({},o),children:[Object(s.jsx)("div",{className:k()(Ka.a.logoBackground,Object(_.a)({},Ka.a.lighter,!Xa())),children:Object(s.jsx)("img",{src:l,alt:"\\u200b"})}),Object(s.jsx)("div",{className:k()(Ka.a.background,(n={},Object(_.a)(n,Ka.a.faded,Ka.a.faded),Object(_.a)(n,Ka.a.fixed,c),Object(_.a)(n,Ka.a.lighter,!Xa()),n)),style:{backgroundImage:r[i]}})]}):Object(s.jsx)("div",{className:k()(Ka.a.parent,Ka.a.background,(a={},Object(_.a)(a,Ka.a.faded,Ka.a.faded),Object(_.a)(a,Ka.a.fixed,c),Object(_.a)(a,Ka.a.lighter,!Xa()),a)),style:Object(j.a)({backgroundImage:r[i]},o)})}function ti(e){var t=e.tournaments,n=e.gradients,a=e.palettes,i=Object(c.useReducer)((function(e,t){return null!==t&&void 0!==t?t:e+1}),0),r=Object(f.a)(i,2),l=r[0],u=r[1];return t.length?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ni,{className:Ka.a.backContainer,index:l,showDots:!1,children:Object.keys(n).map((function(e,a){var i=t.find((function(t){return t.id===e}));return i&&i.active?Object(s.jsx)(ei,{id:e,gradients:n},["background",a].join(".")):null}))},"background"),Object(s.jsx)(ni,{setIndex:u,autoAdvance:8e3,children:Object.keys(n).map((function(e,n){var i,r,c,l,u,d,j,b,h,m=t.find((function(t){return t.id===e}));return m?Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsxs)("div",{className:Ka.a.curr,children:[Object(s.jsx)("div",{className:Ka.a.description,children:m.description?'"'.concat(m.description,'"'):"".concat(m.round," round").concat(1!==m.round?"s":"",". ").concat(m.players," player").concat(1!==m.players?"s":"",".")}),Object(s.jsx)("div",{className:Ka.a.title,children:m.name}),Object(s.jsxs)("div",{className:Ka.a.palette,children:[Object(s.jsx)("div",{className:Ka.a.box,style:{backgroundColor:null===(i=a[e].Vibrant)||void 0===i?void 0:i.hex}}),[null===(r=a[e].DarkVibrant)||void 0===r?void 0:r.hex,null===(c=a[e].DarkMuted)||void 0===c?void 0:c.hex,null===(l=a[e].Vibrant)||void 0===l?void 0:l.hex,null===(u=a[e].Muted)||void 0===u?void 0:u.hex,null===(d=a[e].LightVibrant)||void 0===d?void 0:d.hex,null===(j=a[e].LightMuted)||void 0===j?void 0:j.hex].map((function(e,t){return e?Object(s.jsx)("div",{className:Ka.a.box,style:{backgroundColor:e}},["box",t].join(".")):null}))]}),Object(s.jsx)(Ja,{to:m.href||["","t",m.id].join("/"),className:Ka.a.frame,children:Object(s.jsx)("img",{src:m.logoURL,alt:m.name,className:Ka.a.logo})})]}),Object(s.jsxs)(Ja,{to:m.href||["","t",m.id].join("/"),style:{backgroundColor:null===(b=a[e].Vibrant)||void 0===b?void 0:b.hex,color:new Qa(null===(h=a[e].Vibrant)||void 0===h?void 0:h.rgb).getText()},className:k()("button",Ka.a.new),children:[m.button||"View Tournament",Object(s.jsx)(x.d,{})]})]},k()("foreground",n)):null}))},"foreground")]}):null}function ni(e){var t,n=e.setIndex,a=Object(c.useReducer)((function(e,t){return null!==t&&void 0!==t?t:e+1}),0),i=Object(f.a)(a,2),r=i[0],o=i[1],l=Object(c.useState)(!1),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(0),h=Object(f.a)(b,2),m=h[0],v=h[1];Object(c.useEffect)((function(){if(d&&void 0===e.index){var t=setTimeout((function(){return j(!1)}),5*(e.autoAdvance||1e4));return function(){return clearTimeout(t)}}}),[e.autoAdvance,e.index,d,j]);var p=e.children?e.children.length:0,O=Object(c.useMemo)((function(){for(var e=[],t=function(t){e.push(Object(s.jsx)("span",{className:k()(Ka.a.dot,Object(_.a)({},Ka.a.dotSelected,t===r%p)),onClick:function(){o(t),n&&n(t),j(!0)}},["textGallery","dot",t].join(".")))},a=0;a<p;a++)t(a);return e}),[o,n,p,r,j]),g=Object(c.useCallback)((function(){if(e.autoAdvance){var t;return d||(t=setInterval((function(){o(void 0),n&&n(void 0)}),e.autoAdvance)),function(){return clearInterval(t)}}}),[e.autoAdvance,d,o,n]);Object(c.useEffect)(g,[g]),Object(c.useEffect)((function(){if(e.children){var t=Math.floor(K(0,e.children.length));o(t),n&&n(t)}}),[e.children,o,n]);var x=Object(c.useRef)(),y=Object(c.useCallback)((function(){x.current&&v(x.current.getBoundingClientRect().left)}),[x,v]);Object(c.useEffect)((function(){return y(),window.addEventListener("resize",y),function(){return window.removeEventListener("resize",y)}}),[y]);var w=Object(c.useMemo)((function(){var t;return"calc((-100vw * ".concat((null!==(t=e.index)&&void 0!==t?t:r)%p,") - ").concat(m,"px)")}),[e.index,r,p,m]);return Object(s.jsxs)("div",{className:k()(Ka.a.rotator,e.className),ref:x,children:[Object(s.jsx)("div",{className:Ka.a.stage,style:{left:w},children:null===(t=e.children)||void 0===t?void 0:t.map((function(e,t){return Object(s.jsx)("div",{className:Ka.a.child,children:e},k()("textGallery","child",t))}))}),!1!==e.showDots?Object(s.jsx)("div",{className:Ka.a.selection,children:O}):null]})}var ai=n(79),ii=n.n(ai),ri=function(){if(window.innerWidth<1080)return[window.innerWidth/(window.innerWidth*Math.pow(2,.5)),window.innerWidth];var e=.68*window.innerWidth;return[e/Math.pow(2,.5),e]}(),si=Object(f.a)(ri,2),ci=si[0],oi=si[1];function li(e){var t=parseInt(window.location.hash.slice(1)),n=Object(c.useReducer)((function(e,t){return"decrement"===t?(window.location.hash="#"+(e-1).toString(),e-1):"increment"===t?(window.location.hash="#"+(e+1).toString(),e+1):e}),isNaN(t)?1:t),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useMemo)((function(){var t=e.settings.rulesURL;return t?t.startsWith("https")?t:t.replace("http://","https://s3.eu-west-2.amazonaws.com/"):""}),[e.settings.rulesURL]);return Object(s.jsxs)("section",{className:ii.a.columns,children:[Object(s.jsx)("embed",{src:o+(i?"#page="+i:""),type:"application/pdf",title:"UK University Chess League Rules",height:ci,width:oi},i),Object(s.jsxs)("div",{className:ii.a.controls,children:[Object(s.jsx)("div",{className:ii.a.title,children:"Quick Navigation"}),Object(s.jsxs)("div",{className:ii.a.arrows,children:[Object(s.jsx)("div",{className:ii.a.arrow,onClick:function(){return r("decrement")},children:Object(s.jsx)(x.c,{})}),Object(s.jsx)("div",{className:ii.a.arrow,onClick:function(){return r("increment")},children:Object(s.jsx)(x.d,{})})]}),Object(s.jsx)("div",{className:ii.a.link,children:Object(s.jsx)("input",{value:window.location.href})})]})]})}function ui(e){var t,n=e.match.params.id,a=Object(c.useState)(null),i=Object(f.a)(a,2),r=i[0],o=i[1],l=Fa().tieBreaks,u=function(e){var t=e.id,n=Object(c.useReducer)((function(e,t){var n=t.action,a=t.set,i=Object.assign({},e);return i[n]=void 0===a||a,Object.values(i).length>=4&&(i.all=!0),i}),{}),a=Object(f.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)({}),o=Object(f.a)(s,2),l=o[0],u=o[1],d=Object(c.useState)({}),j=Object(f.a)(d,2),b=j[0],h=j[1],m=Object(c.useState)([]),v=Object(f.a)(m,2),p=v[0],O=v[1],g=Object(c.useState)([]),x=Object(f.a)(g,2),_=x[0],y=x[1],w=Object(c.useState)(!1),k=Object(f.a)(w,2),N=k[0],C=k[1],S=Object(c.useState)([]),L=Object(f.a)(S,2),M=L[0],R=L[1];return Object(c.useEffect)((function(){Oe({url:"/tournament/"+t+"/fetchPlayers"}).then(y).then((function(){return r({action:"players"})})).catch((function(){return r({action:"players",set:!1})}))}),[y,t,r]),Object(c.useEffect)((function(){Oe({url:"/tournament/"+t+"/getSettings"}).then(u).then((function(){return r({action:"settings"})})).catch((function(){return r({action:"settings",set:!1})}))}),[u,t,r]),Object(c.useEffect)((function(){Oe({url:"/tournament/"+t+"/getState"}).then((function(e){var t=e.players,n=Object.entries(t).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return[Number(n),a]})).sort((function(e,t){return t[0]-e[0]})).reduce((function(e,t){return e.concat(t[1])}),[]);O(n)})).then((function(){return r({action:"state"})})).catch((function(){return r({action:"state",set:!1})}))}),[O,t,r]),Object(c.useEffect)((function(){Oe({url:"/tournament/"+t+"/getStatus"}).then(h).then((function(){return r({action:"status"})})).catch((function(){return r({action:"sattus",set:!1})}))}),[h,r,t]),Object(c.useEffect)((function(){Oe({url:["","tournament",t,"getAnnouncements"].join("/")}).then(R)}),[t,R]),Object(c.useEffect)((function(){Oe({url:["","tournament",t,"isLive"].join("/")}).then((function(e){return C(e.isLive)}))}),[t,C]),{loaded:i,settings:l,status:b,state:p,rawPlayers:_,isLive:N,announcements:M}}({id:n}),d=u.loaded,b=u.settings,h=u.status,m=u.state,O=u.rawPlayers,g=u.isLive,w=u.announcements,N=Ae({status:h,players:O,settings:b,round:h.round}),C=Object(c.useMemo)((function(){if(!N.length)return new Map;var e,t=new Map,n=Object(y.a)(N);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.set(a.id,a)}}catch(i){n.e(i)}finally{n.f()}return t}),[N]),S=h.round||0,R=$a({tournaments:Object(c.useMemo)((function(){return[Object.assign({},h,b)]}),[h,b])}).gradients,P=Object(c.useMemo)((function(){var e,t=((null===(e=b.streamURL)||void 0===e?void 0:e.match(De))||[]).slice(1),n=Object(f.a)(t,2),a=n[0],i=n[1],r=null===a||void 0===a?void 0:a.split(".").shift();return{isLive:g,channel:i,site:r}}),[b,g]);Object(c.useEffect)((function(){if(S){for(var e=new Array(S+1),t=1;t<S+1;t++)e[t]={match:0,game:0};var a=Re.bye(n,S,b);a.histories=e,C.set("bye",a)}}),[C,S,n,b]);var B=Object(c.useState)(""),I=Object(f.a)(B,2),D=I[0],F=I[1],W=Object(c.useCallback)((function(e){if(!e)return"\u200b";if("bye"===e)return"BYE";if("string"!==typeof e){var t=e;return"individual"===b.competitors?[t.firstName,t.lastName].join(" "):t.firstName}var n=C.get(e);return n?"individual"===b.competitors?[n.firstName,n.lastName].join(" "):n.firstName:e}),[C,b.competitors]);return Object(c.useEffect)((function(){var e=window.location.pathname.split("/")[2];b.vanityURL&&b.vanityURL!==e&&window.history.pushState("",document.title,window.location.toString().replace(e,b.vanityURL))}),[b.vanityURL]),!1===d.state?Object(s.jsx)(ke,{}):Object(s.jsx)(L,{values:[[M,b]],children:Object(s.jsxs)("div",{id:"main",className:k()({still:pe.getLocal("noAnimations")}),children:[Object(s.jsx)(ei,{faded:!0,gradients:R,id:h.id,withContainer:!0,img:b.logoURL}),Object(s.jsx)("section",{className:k()("container",Ce.a.nav),children:Object(s.jsxs)("div",{className:Ce.a.stage,children:[Object(s.jsx)("div",{className:Ce.a.profileWrapper,children:Object(s.jsx)("div",{className:k()(Ce.a.profilePicture,Object(_.a)({},Ce.a.preload,!d.all)),children:d.all&&b.logoURL?Object(s.jsx)(Ga,{src:b.logoURL,alt:"profile_picture"}):Object(s.jsx)("div",{className:Ce.a.defaultProfilePicture,children:d.all&&h.name?null===(t=h.name.match(We))||void 0===t?void 0:t.map((function(e){return e.substring(0,1).toUpperCase()})).join(""):"\u200b"})})}),d.all&&g?Object(s.jsxs)(v.b,{to:window.location.href.includes("dashboard")?"#live":V("t",b.vanityURL||n,"dashboard")+"#live",className:Ce.a.live,children:[Object(s.jsx)(Ha,{diameter:180,width:10,className:Ce.a.liveRing}),Object(s.jsx)(x.S,{className:[Ce.a.livePlay].join(" ")})]}):null,Object(s.jsxs)("div",{className:[Ce.a.extra,d.all?"/":Ce.a.preload].join(" "),children:[d.all?b.profileURL?Object(s.jsx)("a",{className:[Ce.a.website].join(" "),href:b.profileURL,target:"_blank",rel:"noopener noreferrer",title:"Website",children:Object(s.jsx)(x.J,{})}):null:Object(s.jsx)("div",{className:[Ce.a.website].join(" "),children:"\u200b"}),d.all?b.rulesURL?b.rulesURL.endsWith(".pdf")&&!He()?Object(s.jsx)(v.b,{to:["","t",n,"rules"].join("/"),className:Ce.a.rules,title:"Rules",children:Object(s.jsx)(x.i,{})}):Object(s.jsx)("a",{className:[Ce.a.rules].join(" "),href:b.rulesURL,target:"_blank",rel:"noopener noreferrer",title:"Rules",children:Object(s.jsx)(x.i,{})}):null:Object(s.jsx)("div",{className:[Ce.a.rules].join(" "),children:"\u200b"})]}),Object(s.jsx)("div",{className:Ce.a.nameContainer,children:Object(s.jsx)("div",{className:Ce.a.name,title:h.id,children:h.name||"\u200b"})}),Object(s.jsxs)("div",{className:Ce.a.linkButtons,children:[d.all?Object(s.jsxs)(v.b,{className:[Ce.a.linkButton,"header-button"].join(" "),to:["","t",n,"announcements"].join("/"),children:[Object(s.jsx)(x.j,{}),"Announcements"]}):Object(s.jsx)("div",{className:[Ce.a.linkButton].join(" "),children:"\u200b"}),d.all?h.user?Object(s.jsxs)("div",{className:[Ce.a.linkButton,"header-button"].join(" "),onClick:function(){return F("description"===D?"":"description")},children:[Object(s.jsx)(x.F,{}),"Description"]}):null:Object(s.jsx)("div",{className:[Ce.a.linkButton].join(" "),children:"\u200b"}),d.all?h.user?Object(s.jsxs)(v.b,{className:[Ce.a.linkButton,"header-button"].join(" "),to:"/@/"+h.user,children:[Object(s.jsx)(x.mb,{}),h.user]}):null:Object(s.jsx)("div",{className:[Ce.a.linkButton].join(" "),children:"\u200b"})]}),Object(s.jsx)("div",{className:Ce.a.infoBox,children:d.all?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:"Format: "}),Object(s.jsx)("div",{children:q(b.pairingSystem)}),Object(s.jsx)("div",{children:"Created: "}),Object(s.jsx)("div",{children:new Date(h.createdAt).toString().slice(4,15)}),Object(s.jsx)("div",{children:"Type: "}),Object(s.jsx)("div",{children:q(b.competitors)+"s"}),Object(s.jsxs)("div",{children:[q("team"===b.competitors?"Teams":"Players"),":"]}),Object(s.jsx)("div",{children:h.players}),1===b.gamePointTotal?null:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{children:"Games:"}),Object(s.jsx)("div",{children:Math.ceil(N.reduce((function(e,t){return e+t.histories.reduce((function(e,t){return t?e+=t.played:e}),0)}),0)/2)})]})]},"rules.1"),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:"Location: "}),Object(s.jsx)("div",{children:b.location||"-"}),Object(s.jsx)("div",{children:"Time control: "}),Object(s.jsx)("div",{children:b.timeControl||"-"}),Object(s.jsx)("div",{children:"Status: "}),Object(s.jsx)("div",{children:!1!==h.active?"Live":h.round?"Finished":"Not yet started"}),b.prizes?Object(s.jsx)("div",{className:Ce.a.tieBreakLink,onClick:function(){return F("prizes"===D?"":"prizes")},children:"Prizes"}):b.description?Object(s.jsx)("div",{children:"\u200b"}):"",Object(s.jsx)("div",{className:Ce.a.tieBreakLink,onClick:function(){return F("tie breaks"===D?"":"tie breaks")},children:"Tie breaks"})]},"rules.2")]}):null}),Object(s.jsx)(p.b,{path:"/t/:id/:section?/:round?/",render:function(t){var n=parseInt(t.match.params.round);return isNaN(n)&&(n=h.round),n<0||n>b.totalRounds?null:Object(s.jsx)(ie,{id:e.match.params.id,settings:b,section:t.match.params.section,round:n,loaded:d})}})]})}),Object(s.jsx)("section",{className:k()(Ce.a.tieBreakSection,Object(_.a)({},Ce.a.visible,D)),children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:Ce.a.tieBreakTitle,onClick:function(){return F("")},children:D.toUpperCase()}),Object(s.jsx)("div",{className:Ce.a.tieBreaks,children:"tie breaks"===D?l.map((function(e,t){var n=Object(f.a)(e,2)[1];return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{children:["#",t+1]},[n,t,"1"].join(" ")),Object(s.jsx)("div",{children:n.name},[n,t,"2"].join(" "))]}):null})):"description"===D?b.description:null})]})})}),Object(s.jsx)(p.b,{path:"/t/:id/:section?/:round?/",render:function(t){var n;if(n="results"===t.match.params.round||"individual"===t.match.params.round?h.round+1:parseInt(t.match.params.round),isNaN(n)&&(n=h.round),"Infinity"===b.totalRounds&&(b.totalRounds=1/0),n<=0||n>b.totalRounds+1)return null;var a=t.match.params.section;if(a||(a="pairings"),"pairings"!==a&&"standings"!==a)return null;switch(a){case"standings":if("knockout"===b.pairingSystem)return null}return Object(s.jsx)(we,{direction:e.location.state.direction.slice(6),section:t.match.params.section,round:n,id:e.match.params.id,playerDict:C,status:h,settings:b,loaded:d})}}),Object(s.jsx)(p.b,{render:function(t){var a=t.location;return d.status?Object(s.jsx)(T.Provider,{value:W,children:Object(s.jsx)(A.Provider,{value:l,children:Object(s.jsx)(E.Provider,{value:P,children:Object(s.jsxs)(p.d,{location:a,children:[Object(s.jsx)(p.b,{exact:!0,path:"/t/:id/",render:function(){var t=b.vanityURL||e.match.params.id;return Object(s.jsx)(p.a,{push:!0,to:{pathname:"/t/".concat(t,"/dashboard"),state:e.history.location.state}})}}),Object(s.jsx)(p.b,{path:"/t/:id/stats/",render:function(){return Object(s.jsx)(ta,{direction:e.location.state.direction.slice(6),round:h.round,status:h,players:Array.from(C.values()),settings:b})}}),Object(s.jsx)(p.b,{path:"/t/:id/announcements/",render:function(){return Object(s.jsx)(da,{announcements:w.map((function(e,t){return Object(j.a)(Object(j.a)({},e),{},{content:e.announcement,id:t.toString(),tournamentId:n,author:"",role:"director",title:"",link:""})}))})}}),Object(s.jsx)(p.b,{path:"/t/:id/tv/",render:function(){return Object(s.jsx)(Hn,{streamURL:b.streamURL,pop:o,isLive:g})}}),Object(s.jsx)(p.b,{path:"/t/:id/rules/",render:function(e){return Object(s.jsx)(li,{id:e.match.params.id,settings:b})}}),Object(s.jsx)(p.b,{path:"/t/:id/dashboard/",render:function(t){return Object(s.jsx)(Wa,{status:h,settings:b,players:N,loaded:d,pop:o,isLive:g,announcements:w,direction:e.location.state.direction.slice(6),id:e.match.params.id,profile:e.profile,playerDict:C,round:S})}}),Object(s.jsx)(p.b,{path:"/t/:id/leaderboard",render:function(t){return Object(s.jsx)(p.a,{push:!0,to:{pathname:["","t",t.match.params.id,"standings","individual"].join("/"),state:e.history.location.state}})}}),Object(s.jsx)(p.b,{exact:!0,path:"/t/:id/(pairings|standings)/",render:function(t){if(void 0===h.round)return null;var n=t.match.url.includes("pairings")&&h.round&&!h.active,a=t.match.url.endsWith("/")?"":"/";return Object(s.jsx)(p.a,{push:!0,to:{pathname:t.match.url+a+(n?"results":h.round),state:e.history.location.state}})}}),Object(s.jsx)(p.b,{path:"/t/:id/pairings/:round",render:function(t){if("results"===t.match.params.round)return Object(s.jsx)(ma,{direction:e.location.state.direction.slice(6),state:m,playerDict:C,settings:b,id:t.match.params.id});var n=parseInt(t.match.params.round);return isNaN(n)||n<0||n>b.totalRounds?null:Object(s.jsx)(Tn,Object(j.a)({direction:e.location.state.direction.slice(6),id:e.match.params.id,profile:e.profile},{announcements:w,status:h,settings:b,playerDict:C,round:n}))}}),Object(s.jsx)(p.b,{path:"/t/:id/standings/:round",render:function(t){return Object(s.jsx)(an,Object(j.a)({},{players:N,status:h,settings:b,state:m,rProps:t,direction:e.location.state.direction}))}}),Object(s.jsx)(p.b,{path:"/t/:id/*",component:ke,status:404})]})})})}):null}}),Object(s.jsxs)(Ua,{margin:10,children:[r?Object(s.jsx)("div",{onClick:function(){return o(null)},children:Object(s.jsx)(x.pb,{})}):null,Object(s.jsx)("div",{dangerouslySetInnerHTML:{__html:(null===r||void 0===r?void 0:r.outerHTML)||""}})]})]})})}var di=n(19),ji=n.n(di),bi=(n(897),n(390));function hi(e){var t=e.n,n=e.i,a=Object(c.useContext)(I),i=Object(s.jsx)(Un.a,{}),r=(t.link||"").match(Fe);return r&&(i=ca(r[1])),Object(s.jsx)("tr",{className:ji.a.notificationRow,children:Object(s.jsx)("td",{children:Object(s.jsxs)("div",{onClick:function(){return a(t)},children:[t.link?Object(s.jsx)("a",{className:ji.a.iconLink,href:t.link,rel:"noopener noreferrer",target:"_blank",children:i}):Object(s.jsx)("div",{children:"icon"}),Object(s.jsx)("div",{children:Object(s.jsx)("span",{className:"bold",children:t.title})}),Object(s.jsx)("div",{className:ji.a.notifContent,children:t.content}),Object(s.jsx)("div",{className:ji.a.expando,children:Object(s.jsx)(x.d,{})})]})})},["notification",n].join("."))}var mi=[{id:"ecf-award",logoURL:"/images/ecf.jpg",name:"English Chess Federation: Online Contribution of the Year",description:"ScorchChess is proud to be announced the winner of English Chess Federation's award for 'Online Chess Contribution of the Year' 2020. As the national federation in our home country, the ECF's recognition is quite the honour.",button:"View More",active:!0,href:"https://www.englishchess.org.uk/ecf-awards-2020-citations/"}];function fi(e){var t=Object(c.useReducer)((function(){return!0}),!1),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(0),o=Object(f.a)(r,2),l=o[0],u=o[1],d=Object(c.useState)([]),b=Object(f.a)(d,2),h=b[0],m=b[1],p=Object(c.useState)([]),O=Object(f.a)(p,2),g=O[0],_=O[1],w=Object(c.useCallback)((function(){return Oe({url:"/announcements"}).then(_)}),[_]),k=Object(c.useCallback)((function(){return Oe({url:"/tournaments"}).then(m).catch((function(){return i()}))}),[i,m]);Object(c.useEffect)((function(){k(),w()}),[k,w]),Object(c.useEffect)((function(){_e.on("connected_count",(function(e){return u(e)}))}),[u]),Object(c.useEffect)((function(){if(!l){var e=setTimeout((function(){return _e.emit("request_online")}),1e3);return function(){return clearTimeout(e)}}}),[l]);var N=Object(c.useMemo)((function(){var e,t=Object(f.a)([[],[],[]],3),n=t[0],a=t[1],i=t[2],r=Object(y.a)(h);try{for(r.s();!(e=r.n()).done;){var s=e.value;s.round?s.active?a.push(s):i.push(s):n.push(s)}}catch(c){r.e(c)}finally{r.f()}return[n,a,i]}),[h]),C=Object(f.a)(N,3),S=C[0],L=C[1],M=C[2],R=Object(c.useMemo)((function(){return mi.concat(h)}),[h]),P=$a({tournaments:R}),B=P.gradients,E=P.palettes;return a?Object(s.jsx)(ke,{}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{id:"main",children:Object(s.jsxs)("div",{className:ji.a.container,children:[Object(s.jsx)(ti,Object(j.a)({},{gradients:B,palettes:E,tournaments:R})),Object(s.jsxs)("div",{className:ji.a.col1,children:[Object(s.jsxs)("div",{className:["container",ji.a.title].join(" "),"data-aos":"fade-right",children:[Object(s.jsxs)("h1",{children:[Object(s.jsx)("b",{children:"Scorch"}),"Results",Object(s.jsx)("small",{className:ji.a.tiny,children:" from ScorchChess"})]}),Object(s.jsx)("h3",{children:"Your universal platform for results and pairings. Attractive. Automated. Effortless."}),Object(s.jsxs)("div",{className:ji.a.wrapper,children:[Object(s.jsxs)("div",{className:_e.connected?ji.a.connected:ji.a.disconnected,children:[Object(s.jsx)(bi.a,{})," ",null!==l&&void 0!==l?l:"-"," user",1!==l?"s":""," online"]}),Object(s.jsxs)("a",{href:"https://beta.scorchapp.co.uk",rel:"noopener noreferrer",target:"_blank",className:[ji.a.new].join(" "),children:["Create New Tournament",Object(s.jsx)(x.d,{})]})]})]}),Object(s.jsxs)("div",{className:"container","data-aos":"fade-right",children:["How are you liking our new changes?",Object(s.jsx)("br",{}),Object(s.jsx)(v.b,{to:"/contact#feedback",children:"Write some feedback here"})]}),Object(s.jsx)("div",{className:["container",ji.a.announcements].join(" "),"data-aos":"fade-right",children:Object(s.jsxs)("table",{className:[ji.a.tableAnnounce].join(" "),children:[Object(s.jsx)("thead",{children:Object(s.jsx)("tr",{children:Object(s.jsx)("th",{className:ji.a.sectionHeader,children:"Announcements"})})}),Object(s.jsx)("tbody",{children:g.map((function(e,t){return Object(s.jsx)(hi,{n:e,i:t},[e.id,t].join("."))}))})]})})]}),Object(s.jsxs)("div",{className:ji.a.col2,children:[Object(s.jsx)("div",{className:["container",ji.a.tournaments].join(" "),"data-aos":"fade-left",children:Object(s.jsxs)("table",{className:[ji.a.tableAnnounce].join(" "),children:[Object(s.jsxs)("thead",{children:[Object(s.jsxs)("tr",{className:ji.a.sizer,children:[Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{})]}),Object(s.jsx)("tr",{children:Object(s.jsx)("th",{colSpan:5,className:[ji.a.sectionHeader,ji.a.live].join(" "),children:"Live Tournaments"})}),Object(s.jsxs)("tr",{className:ji.a.sectionHeader,children:[Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Started"}),Object(s.jsx)("th",{children:"Round"}),Object(s.jsx)("th",{children:"Players"}),Object(s.jsx)("th",{})]})]}),Object(s.jsx)("tbody",{children:L.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return Object(s.jsx)(vi,{t:e,i:t},[e.id,t].join("."))}))})]})}),Object(s.jsx)("div",{className:["container",ji.a.tournaments].join(" "),"data-aos":"fade-right",children:Object(s.jsxs)("table",{className:[ji.a.tableAnnounce].join(" "),children:[Object(s.jsxs)("thead",{children:[Object(s.jsxs)("tr",{className:ji.a.sizer,children:[Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{})]}),Object(s.jsx)("tr",{children:Object(s.jsx)("th",{colSpan:5,className:ji.a.sectionHeader,children:"Upcoming Tournaments"})}),Object(s.jsxs)("tr",{className:ji.a.sectionHeader,children:[Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Started"}),Object(s.jsx)("th",{children:"Round"}),Object(s.jsx)("th",{children:"Players"}),Object(s.jsx)("th",{})]})]}),Object(s.jsx)("tbody",{children:S.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return Object(s.jsx)(vi,{t:e,i:t},[e.id,t].join("."))}))})]})}),Object(s.jsx)("div",{className:["container",ji.a.tournaments].join(" "),"data-aos":"fade-left",children:Object(s.jsxs)("table",{className:[ji.a.tableAnnounce].join(" "),children:[Object(s.jsxs)("thead",{children:[Object(s.jsxs)("tr",{className:ji.a.sizer,children:[Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{})]}),Object(s.jsx)("tr",{children:Object(s.jsx)("th",{colSpan:5,className:ji.a.sectionHeader,children:"Finished Tournaments"})}),Object(s.jsxs)("tr",{className:ji.a.sectionHeader,children:[Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Started"}),Object(s.jsx)("th",{children:"Round"}),Object(s.jsx)("th",{children:"Players"}),Object(s.jsx)("th",{})]})]}),Object(s.jsx)("tbody",{children:M.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(e,t){return Object(s.jsx)(vi,{t:e,i:t},[e.id,t].join("."))}))})]})})]})]})})})}function vi(e){var t=e.t,n=e.i,a=new Date(t.createdAt).toString();return Object(s.jsx)("tr",{className:ji.a.rowLink,children:[t.name||t.id,a.slice(0,11),t.round,t.players,Object(s.jsx)(x.d,{},"angle-right")].map((function(e,a){return Object(s.jsx)("td",{children:Object(s.jsx)(v.b,{className:ji.a.tournamentLink,to:"/t/"+t.id,children:e})},["elem",n,a].join("."))}))},[t.id,n].join("."))}var pi=n(88),Oi=n.n(pi);function gi(e){var t,n=Object(c.useState)([]),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useCallback)((function(){return Oe({url:"/users"}).then(r)}),[r]);return Object(c.useEffect)((function(){o()}),[o]),Object(s.jsx)("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction),children:Object(s.jsx)("div",{className:Oi.a.container,children:Object(s.jsxs)("section",{className:"container",children:[Object(s.jsxs)("div",{className:Oi.a.title,children:[Object(s.jsx)("div",{children:Object(s.jsx)("b",{children:"Users"})}),Object(s.jsx)("div",{className:"light",children:i.length})]}),Object(s.jsx)("div",{className:Oi.a.userTable,children:i.map((function(e,t){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:[Oi.a.status,e.online?Oi.a.online:""].join(" "),children:e.isLicensed?Object(s.jsx)(x.y,{title:"Licensed"}):Object(s.jsx)(x.r,{style:{fontSize:"0.5em"},title:e.online?"Online":"Offline"})},["status",t].join(".")),Object(s.jsx)(v.b,{className:Oi.a.profile,to:"/@/"+e.username,children:e.username},["username",t].join("."))]})}))})]})})})}var xi=n(89),_i=n.n(xi);function yi(e){var t=e.match.params.id,n=Object(c.useState)({}),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useCallback)((function(){return Oe({url:V("result",t)}).then(r)}),[t,r]);Object(c.useEffect)((function(){o()}),[o]);var l=Object(c.useMemo)((function(){return Object.values(i.games||{})}),[i.games]),u=Object(c.useRef)(),d=(Object(c.useCallback)((function(e){var t=u.current;if(t){var n=t.getBoundingClientRect().width+100;t.scrollBy({top:n*("up"===e?-1:1),behavior:"smooth"})}}),[u]),Object(c.useState)([])),b=Object(f.a)(d,2),h=(b[0],b[1]),m=Object(c.useState)(void 0),O=Object(f.a)(m,2),g=(O[0],O[1]),x=Object(c.useCallback)((function(){var e=i.idW,t=i.idB,n=i.tournamentId;e&&t&&(i.chessComTeamLink||i.lichessTeamLink?g(!0):(i.chessComLink||i.lichessLink)&&g(!1),Oe({url:V("tournament",n,"fetchPlayers"),params:{ids:[e,t].join(",")}}).then(h))}),[i]);Object(c.useEffect)((function(){x()}),[x]);var _=Object(c.useMemo)((function(){return l.sort((function(e,t){return e.board!==t.board?e.board-t.board:e.game!==t.game?e.game-t.game:0}))}),[l]);return Object(s.jsx)("div",{id:"main",children:Object(s.jsxs)("div",{className:[_i.a.stage].join(" "),children:[Object(s.jsx)(p.b,{path:"/g/:id",render:function(e){return i?Object(s.jsx)(p.a,{to:{pathname:V("g",e.match.params.id,1),search:e.location.search,state:e.history.location.state}}):null}}),Object(s.jsx)("div",{className:[_i.a.viewer,st.a.wrapper].join(" "),children:Object(s.jsx)("div",{className:st.a.gameViewWrapper,children:Object(s.jsx)(p.b,{path:"/g/:id/:index",render:function(e){return Object(s.jsx)(wi,Object(j.a)(Object(j.a)({},e),{},{games:l}))}})})}),Object(s.jsx)("div",{className:_i.a.rightCol,children:Object(s.jsx)("div",{className:[_i.a.more].join(" "),ref:u,children:_.map((function(e,n){return Object(s.jsx)(v.b,{to:"/g/"+t+"/"+(n+1).toString(),className:_i.a.gamelink,children:Object(s.jsx)("span",{className:_i.a.linktext,children:"".concat(e.board+1,"-").concat(e.game,"     ").concat(e.w.username," - ").concat(e.b.username)})},k()("gameLink",n))}))})})]})})}function wi(e){var t=Number(e.match.params.index)-1;return Object(c.useEffect)((function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),100)}),[]),e.games[t]?Object(s.jsx)(Zt,{g:e.games[t]}):null}function ki(e){var t=e.page,n=Object(c.useState)(""),a=Object(f.a)(n,2),i=a[0],r=a[1];return Object(c.useEffect)((function(){se.a.get("/pages/".concat(t,".md")).then((function(e){return e.data})).then(r)}),[r,t]),Object(s.jsx)("div",{id:"main",children:Object(s.jsx)("section",{children:Object(s.jsx)(fn.a,{source:i.trim(),escapeHtml:!1,astPlugins:[Pn],renderers:{link:Bn}})})})}var Ni=n(45),Ci=n.n(Ni),Si=n(120),Li=n.n(Si);function Mi(e){return Object(s.jsx)("div",{"data-aos":"fade-left","data-aos-delay":e.i?e.i%4*100:void 0,className:Li.a.matchUp,children:Object(s.jsxs)("div",{className:[Li.a.white].join(" "),children:[Object(s.jsx)("div",{className:Li.a.flag,children:e.profile.nationality?Y(e.profile.nationality):null}),Object(s.jsx)("div",{className:["playerInfo",Li.a.playerInfo].join(" "),onClick:e.onClick,children:e.profile.name})]})})}function Ri(){var e=Object(c.useState)("grid"),t=Object(f.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),r=Object(f.a)(i,2),o=r[0],l=r[1],u=Object(c.useState)([]),d=Object(f.a)(u,2),j=d[0],b=d[1],h=Object(c.useMemo)((function(){return Object(s.jsx)("div",{className:Ci.a.searchBarDiv,children:Object(s.jsxs)("div",{className:Ci.a.searchBar,children:[Object(s.jsx)(x.X,{className:Ci.a.searchIcon}),Object(s.jsx)(nn,{onChange:b,onSubmit:Promise.resolve,action:"",options:o,convert:function(e){return e.name},styles:Ci.a,placeholder:"Search"})]})})}),[o,b]),m=Object(c.useReducer)((function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)?null:t}),null),v=Object(f.a)(m,2),p=v[0],O=v[1],g=Object(c.useCallback)((function(){return Oe({url:"/teams"}).then(l)}),[l]);Object(c.useEffect)((function(){g()}),[g]);var _=Object(c.useMemo)((function(){return o.sort((function(e,t){var n,a;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().charCodeAt(0))-(null===(a=t.name)||void 0===a?void 0:a.toLowerCase().charCodeAt(0))})),"compact"===n?o.filter((function(e){return 0===j.length||j.find((function(t){return t.id===e.id}))})).map((function(e,t){return Object(s.jsx)(Mi,{profile:e,i:t,type:"team",onClick:function(){return O(e)}},["team",t].join("."))})):o.filter((function(e){return 0===j.length||j.find((function(t){return t.id===e.id}))})).map((function(e,t){return Object(s.jsx)(Na,{id:e.id,profile:e,type:"team",i:t},["team",t].join("."))}))}),[o,n,j,O]),y=Object(c.useRef)();return Object(s.jsx)("div",{id:"main",children:Object(s.jsxs)("section",{className:Ci.a.container,children:[Object(s.jsxs)("div",{className:Ci.a.title,children:[Object(s.jsx)("div",{children:Object(s.jsx)("b",{children:"Teams"})}),Object(s.jsx)("div",{className:"light",children:o.length}),h,Object(s.jsxs)("div",{className:Ci.a.menu,children:[Object(s.jsx)("label",{children:"Display"}),Object(s.jsx)(x.v,{onClick:function(){return a("compact")},className:"compact"===n?Ci.a.inactive:Ci.a.active}),Object(s.jsx)(x.eb,{onClick:function(){return a("grid")},className:"grid"===n?Ci.a.inactive:Ci.a.active})]})]}),"compact"===n?Object(s.jsxs)("div",{className:Ci.a.compactContainer,children:[Object(s.jsx)("div",{className:Ci.a.compact,children:_}),Object(s.jsx)(qe,{absoluteStyles:{top:"-40px"},fixedStyles:{top:"8vh"},upperLimit:10*window.innerHeight/100,lowerLimit:275,children:Object(s.jsx)("div",{className:[Ci.a.preview].join(" "),children:p?Object(s.jsx)(Na,{id:p.id,profile:p,type:"team",small:!1,showLinks:!0}):null})})]}):Object(s.jsxs)("div",{className:Ci.a.userTable,ref:y,children:[" ",_]})]})})}function Pi(e){var t,n=Object(c.useState)(null===(t=e.expanded)||void 0===t||t),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useRef)(null),l=o.current;return Object(c.useEffect)((function(){"boolean"===typeof e.expanded&&r(e.expanded)}),[e.expanded,r]),Object(c.useEffect)((function(){if(l)for(var e=l.nextElementSibling;e&&e.className.includes("container");){if(!e)return;e.style.overflow||(e.style.overflow="hidden"),e.style.transition||(e.style.transition="all 0.333s ease"),i?e.removeAttribute("style"):Object.assign(e.style,{maxHeight:"0px",paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"0px"}),e=e.nextElementSibling}})),Object(s.jsxs)("div",{ref:o,className:[ra.a.divide,i?"":ra.a.collapsed].join(" "),onClick:function(){return r(!i)},children:[Object(s.jsx)("hr",{}),e.name,Object(s.jsx)(x.q,{}),Object(s.jsx)("hr",{})]})}var Bi=n(121),Ei=n.n(Bi),Ai=n(22),Ti=n.n(Ai);function Ii(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?null!==(t=a[0])&&void 0!==t?t:"On":!1===e?null!==(n=a[1])&&void 0!==n?n:"Off":""}var Di={source:{name:"Source",enum:["","lichess","chessCom"],convert:function(e){return"lichess"===e?"Lichess.org":"chessCom"===e?"Chess.com":"None"},show:{media:"online"},defaultValue:"",level:1,description:'This setting enables ScorchChess\' state-of-the-art integration features. Select a website where games will be played to begin. ScorchChess currently has support for  <span id="lichess" className="switcher">Lichess.org</span> and  <span id="chessCom" className="switcher">Chess.com</span>. This setting controls your ability to submit game links.'},pullResults:{name:"Pull results",show:{source:["lichess","chessCom"]},enum:[0,1,2],type:"number",highlight:!0,level:1,convert:function(e){return 0===e?"Off":1===e?"Ask me first":"Pull and save all"},defaultValue:1,description:'This setting enables ScorchChess\' state-of-the-art integration features. This setting enables ScorchChess to sync the results with the results found on Lichess.org or Chess.com. There are 3 settings:\n\t\t\t\t- <span id="0" className="switcher">Off</span>: Don\'t sync. Let me submit the results myself manually.\n\t\t\t\t- <span id="1" className="switcher">Ask me first</span>: Sync, but don\'t confirm any results. Make all synced results provisional and I\'ll confirm them.\n\t\t\t\t- <span id="2" className="switcher">Pull and save all</span>: Sync and save all the results. If there any results that need correcting, you can edit results by clicking on the _Dropdown_ for a pairing and _Undo result_.'},allowSelfLinks:{name:"Let users submit links?",lockOnInit:!1,enum:[0,1,2,3],type:"number",defaultValue:1,highlight:!0,level:1,show:{source:["lichess","chessCom"]},convert:function(e){return 0===e?"Off":1===e?"Ask me first":2===e?"Save if both players confirm":"Save if either player confirms"},description:'This setting lets users submit game links to either Lichess.org or Chess.com. If running a team tournament, team admins are allowed to do this. There are 4 options with this setting:\n\t\t\t\t- <span id="0" className="switcher">Off</span>: Don\'t allow users to submit game links. You can add a game link to any pairing yourself by clicking on the _Pairing Dropdown_.\n\t\t\t\t- <span id="1" className="switcher">Ask me first</span>: Provisionally add links. I will then confirm them using the _Pairing Dropdown_.\n\t\t\t\t- <span id="2" className="switcher">Save if both players confirm</span>: If any player adds a link, make it provisional. Show a confirmation dialogue to the the player and save it if they accept.\n\t\t\t\t- <span id="3" className="switcher">Save if either player confirms</span>: If any player adds a link, save it to the pairing.'},allowSelfSubmissions:{name:"Let users submit results?",convert:Ii,locked:!0,lockOnInit:!1,type:"boolean",defaultValue:!1},allowRegistration:{name:"Let users register online?",convert:q,enum:["closed","approve","open"],onInit:!1,locked:!0,defaultValue:"closed"}};function Fi(e){var t=e.p,n=e.className,a=Object(c.useState)({}),i=Object(f.a)(a,2),r=i[0],o=i[1],l=Object(c.useState)([]),u=Object(f.a)(l,2),d=u[0],j=u[1];Object(c.useEffect)((function(){Oe({url:["tournament",t.tournamentId,"fetchPlayers"].join("/"),params:{ids:d.join(",")}}).then((function(e){var t,n={},a=Object(y.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n[i.id]=i.name}}catch(r){a.e(r)}finally{a.f()}o(n)}))}),[t.tournamentId,d,o]);var b=new Re(t,t.tournament.round,t.tournament.setting),h="string"!==typeof t.tournament.setting.totalRounds&&t.tournament.setting.totalRounds!==1/0?t.tournament.setting.totalRounds:t.histories.length+1,m=t.histories.slice(0);Object(c.useEffect)((function(){var e=[];t.histories.forEach((function(t,n){if(!n)return null;t||(t={});var a=t.id;a&&"bye"!==a.toLowerCase()&&!(a in r)&&e.push(a)})),e.length&&j(e)}),[t.histories,r,j]);for(var p=0;p<=h;p++)m[p]||(m[p]=null);for(var O=Object(f.a)([null,null],2),g=O[0],_=O[1],w=1;w<m.length;w++){if(!m[w]){_=null;break}var k=Object.assign(m[w],{round:w,w:"W"===m[w].colour?t.id:m[w].id,b:"W"===m[w].colour?m[w].id:t.id});if(null===k.match){_=k;break}g=k}return Object(s.jsx)("section",{className:["container",Ti.a.background,n].join(" "),children:Object(s.jsxs)("div",{className:Ti.a.stage,children:[Object(s.jsx)(v.b,{to:"/t/".concat(t.tournament.setting.vanityURL||t.tournament.id),className:[Ti.a.name,Ti.a.box].join(" "),children:t.tournament.name}),Object(s.jsx)("div",{className:[Ti.a.scores,Ti.a.box].join(" "),children:Object.entries(Te.post).map((function(e,n){var a,i=Object(f.a)(e,2),r=i[0],c=i[1];return c.show&&!c.show(b,n,t.tournament.setting,"results")?null:Object(s.jsxs)("div",{className:Ti.a.row,children:[Object(s.jsx)("div",{className:Ti.a.key,children:c.brief||c.mobile}),Object(s.jsx)("div",{className:Ti.a.value,children:c.convert?c.convert(b[r],b,t.tournament.setting,"results"):null===(a=b[r])||void 0===a?void 0:a.toString()})]},["row",n].join("."))}))}),Object(s.jsxs)("div",{className:Ti.a.midButtons,children:[Object(s.jsxs)(v.b,{to:"/t/".concat(t.tournament.setting.vanityURL||t.tournament.id),className:[Ti.a.currRound,Ti.a.box,"header-button"].join(" "),children:["Round: ",t.tournament.round]}),Object(s.jsxs)("div",{className:[Ti.a.nextRound,Ti.a.box,"header-button"].join(" "),children:["Time: ",t.tournament.setting.timeControl]}),Object(s.jsxs)("div",{className:[Ti.a.nextRound,Ti.a.box,"header-button"].join(" "),children:["Started: ",new Date(t.tournament.createdAt).toString().slice(0,15)]})]}),Object(s.jsxs)("div",{className:[Ti.a.history,Ti.a.box].join(" "),style:t.tournament.setting.totalRounds<10?{gridTemplateRows:"1.5em repeat(".concat(t.tournament.setting.totalRounds,", auto)")}:{},children:[Object(s.jsx)("div",{className:Ti.a.subtitle,children:"Results"}),m.map((function(e,n){if(!n)return null;e||(e={});var a=e,i=a.id,c=a.colour,o=e.game,l=e.match,u=null!==e.game&&"game"===t.tournament.setting.displayPoints,j="W"===c?t.id:e.id,b="W"===c?e.id:t.id;i&&"bye"!==i.toLowerCase()&&!(i in r)&&d.push(i);var h=[n,r[i]||("bye"===i?"BYE":i),c||"\u200b",null!==o?o:Object(s.jsx)(x.A,{}),null!==l?l:Object(s.jsx)(x.A,{})];return Object(s.jsx)("div",{className:[Ti.a.resultsRow,u?"":Ti.a.small].join(" "),children:h.map((function(e,a){var r=1===a?Ti.a.playerName:Ti.a.fieldBox,c=1===a?"/".concat("team"===t.tournament.setting.competitors?"team":"player","/").concat(i):"/".concat(t.tournament.id,"/pairings/").concat(n,"#").concat(j,".").concat(b);return"bye"===i&&(c=""),3!==a||u?i?Object(s.jsx)(v.b,{to:c,className:r,children:e},["entry",a].join(".")):Object(s.jsx)("div",{className:r,children:e},["entry",a].join(".")):null}))},["row","history",n].join("."))}))]}),t.active&&t.tournament.active?Object(s.jsxs)("div",{className:Ti.a.action,children:[g?Object(s.jsxs)(v.b,{className:"header-button",to:"/".concat(t.tournament.id,"/pairings/").concat(g.round,"#").concat(g.w,".").concat(g.b),children:[Object(s.jsx)("img",{src:ln,alt:"watch"}),"Analyse last game"]}):null,_?Object(s.jsxs)(v.b,{className:"header-button",to:"/".concat(t.tournament.id,"/pairings/").concat(_.round,"#").concat(_.w,".").concat(_.b),children:[Object(s.jsx)(x.D,{}),"View next game"]}):null]}):null]})},["section",t.id].join("."))}function Wi(e){return Object(s.jsx)("section",{className:["container",Ti.a.background].join(" "),children:Object(s.jsxs)("div",{className:Ti.a.teamStage,children:[Object(s.jsx)(v.b,{to:"/team/".concat(e.id),className:[Ti.a.name,Ti.a.box].join(" "),children:e.name}),Object(s.jsxs)("div",{className:Ti.a.action,children:[Object(s.jsxs)("div",{className:"header-button",children:[Object(s.jsx)(x.H,{style:{color:"var(--col-alert1)"}}),"Founded: ",new Date(e.createdAt).toString().slice(4,15)]}),Object(s.jsxs)("div",{className:"header-button",children:[Object(s.jsx)(x.p,{}),"Last online: ",new Date(e.updatedAt).toString().slice(4,15)]})]})]})})}function Ui(e){var t,n,a=e.u,i=e.update,r=e.className,o=Object(c.useContext)(D),l=Object(c.useContext)(P).authLevel,u=a.prop,d=a.opp,b=a.colour,p=a.round,O=a.id,g=a.result,_=a.startTime,y=a.endTime,w=a.games,k="B"===b&&1===u.tournament.setting.gamePointTotal,N=(k?d:u)||Re.bye(u.tournamentId,a.round,u.tournament.setting),C=(k?u:d)||Re.bye(u.tournamentId,a.round,u.tournament.setting),S="individual"===u.tournament.setting.competitors?"player":"team",L=g.link,M=Object(c.useState)(new nt(Object(j.a)({w:N,b:C,tournamentId:u.tournamentId,scores:N&&C?[null===(t=N.histories[p])||void 0===t?void 0:t.game,null===(n=C.histories[p])||void 0===n?void 0:n.game]:[0,0],teams:[],id:O,round:p,link:L,startTime:_,endTime:y,games:w},g.fetched),p)),R=Object(f.a)(M,2),B=R[0],E=R[1],A=u.tournament.setting.source?Di.source.convert(u.tournament.setting.source):"",T=Object(c.useCallback)((function(){o({title:"Remove game link",message:Object(s.jsxs)(s.Fragment,{children:["Remove this game link for match: ",u.name," vs ",d.name,"?"]}),type:"confirm",resolve:function(){return ge({url:["","submit","removeGameLink"].join("/"),data:{id:g.id,playerId:u.id,team:"team"===u.tournament.setting.competitors}})}})}),[o,u.id,u.name,d.name,g.id,u.tournament.setting.competitors]),I=Object(c.useCallback)((function(){o({title:"Add game link",message:"Input your ".concat(S," game link").concat(A?" from "+A:"",":"),icon:"chessCom"===u.tournament.setting.source?"chess.com":void 0,type:"prompt",resolve:function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="B"===b?d:u,a="B"===b?u:d,e.next=4,Et.a.hash([n.id,a.id,B.tournamentId,p].join("."),10);case 4:r=e.sent,ge({url:"/submit/gameLink",data:{idW:n.id,idB:a.id,tournamentId:B.tournamentId,round:p,key:r,link:t}}).then(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),prompt:{validate:function(e){return"chessCom"!==u.tournament.setting.source||("team"!==S||Ie.test(e))},errorMessage:"team"===S?"Link must be a valid from "+A:"",additionalInputProps:{autoComplete:"game-link",spellCheck:!1}}})}),[o,S,B,p,i,b,d,u,A]);return Object(s.jsx)("section",{className:["container",Oa.a.upcomingBattle,r].join(" "),children:Object(s.jsxs)("div",{className:[Oa.a.stage,k?Oa.a.reversed:" "].join(" "),children:[Object(s.jsx)(v.b,{to:"bye"===N.id?"#":"/".concat(S,"/").concat(N.id),className:Oa.a.name,style:{gridArea:"wName"},children:N.name}),(null===N||void 0===N?void 0:N.nationality)?Object(s.jsx)("div",{className:Ti.a.flag,style:{gridArea:"wFlag"},children:Y(N.nationality)}):null,Object(s.jsx)(v.b,{to:["","t",u.tournament.setting.vanityURL||u.tournamentId,"pairings",p].join("/"),className:[Oa.a.vs,Oa.a.round].join(" "),children:p}),Object(s.jsx)("div",{className:Oa.a.vs,children:"VS"}),(null===C||void 0===C?void 0:C.nationality)?Object(s.jsx)("div",{className:Ti.a.flag,style:{gridArea:"bFlag"},children:Y(C.nationality)}):null,Object(s.jsx)(v.b,{to:"bye"===C.id?"#":"/".concat(S,"/").concat(C.id),className:Oa.a.name,style:{gridArea:"bName"},children:C.name}),Object(s.jsx)("div",{className:Oa.a.scoreBox,children:B.isFinished&&B.games?Object(s.jsx)(Jt,{id:B.id,match:B,setMatch:E,setFinished:function(){},sync:function(){},fetch:!1,expanded:!0,boards:B.players?Number(B.players):0,round:p,teams:B.teams,showButtons:!1}):Object(s.jsx)("div",{className:Oa.a.warning,children:B.startTime?"Match is scheduled to start at "+new Date(B.startTime).toString().slice(0,15):"Match has not yet started"})}),Object(s.jsxs)("div",{className:Oa.a.infoBox,children:[u.histories&&u.histories[p]&&B.scores.some((function(e){return e}))?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{children:"Result:"}),Object(s.jsx)("div",{style:{fontWeight:700},children:function(){switch(u.histories[p].match){case 1:return"Win";case.5:return"Draw";case 0:return"Loss"}}()})]}):null,Object(s.jsx)("div",{children:"Scores:"}),Object(s.jsx)("div",{children:B.scores.join("-")}),Object(s.jsx)("div",{children:B.startTime&&new Date(B.startTime).valueOf()<Date.now()?"Started:":"Starting:"}),B.startTime?new Date(B.startTime).toString().slice(0,10)+" "+new Date(B.startTime).toString().slice(16,21):Object(s.jsx)("div",{className:[Oa.a.null,Oa.a.clickButton].join(" "),children:"No starting time added"})]}),Object(s.jsxs)("div",{className:Oa.a.buttons,children:[B.isFinished?Object(s.jsxs)(v.b,{to:["","t",u.tournament.setting.vanityURL||u.tournamentId,"pairings",p].join("/")+"#"+O,className:["header-button","link",Oa.a.join].join(" "),children:[Object(s.jsx)(x.o,{}),"Scores"]}):B.link?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("a",{href:B.link,rel:"noopener noreferrer",target:"_blank",className:["header-button","link",Oa.a.join].join(" "),children:[Object(s.jsx)(x.L,{}),"Join game on ",A]}),l>=2?Object(s.jsx)("div",{className:["header-button","link",Oa.a.remove].join(" "),onClick:T,children:"Remove link"}):null]}):l?Object(s.jsxs)("div",{className:["header-button","link",Oa.a.join,Oa.a.gameLink].join(" "),onClick:I,children:[Object(s.jsx)(x.T,{}),"Add game link"]}):Object(s.jsx)("div",{className:["header-button",Oa.a.join,Oa.a.null].join(" "),children:"No game link added"}),Object(s.jsxs)(v.b,{to:["","t",u.tournament.setting.vanityURL||u.tournamentId].join("/"),className:["header-button","link"].join(" "),children:[Object(s.jsx)(x.n,{}),u.tournament.name]}),B.startTime&&Date.now()<B.startTime?Object(s.jsxs)("div",{className:["header-button","link",Oa.a.null].join(" "),children:[Object(s.jsx)(x.h,{}),"Set reminder"]}):null]})]})})}function Gi(e){var t=Object(c.useContext)(P).isAuthed,n=Object(c.useState)([]),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useCallback)((function(){return Oe({url:"/profile/tournaments"}).then(r)}),[r]);Object(c.useEffect)((function(){t&&"player"===e.type&&o()}),[o,t,e.type]);var l=Object(c.useMemo)((function(){var t=[[],[]];if(!e.profile)return t;var n,a=Object(y.a)(e.profile.tournaments.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})));try{for(a.s();!(n=a.n()).done;){var i=n.value;i.active&&i.tournament.active?t[0].push(i):t[1].push(i)}}catch(r){a.e(r)}finally{a.f()}return t}),[e.profile]),u=Object(f.a)(l,2),d=u[0],j=u[1];return Object(s.jsxs)(s.Fragment,{children:[i.length?Object(s.jsxs)("section",{children:[Object(s.jsx)(Pi,{name:"MANAGED TOURNAMENTS"}),Object(s.jsx)("div",{className:["container"].join(" "),children:Object(s.jsxs)("table",{className:[Ei.a.tableAnnounce].join(" "),children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{style:{width:"20px"},children:"Manage"}),Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Started"}),Object(s.jsx)("th",{children:"Round"}),Object(s.jsx)("th",{children:"View"})]})}),Object(s.jsx)("tbody",{children:i.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(e,t){var n=new Date(e.createdAt).toString();return Object(s.jsxs)("tr",{className:Ei.a.rowLink,children:[Object(s.jsx)("td",{children:Object(s.jsx)("a",{className:Ei.a.tournamentLink,href:"https://beta.scorchapp.co.uk",children:Object(s.jsx)(x.c,{})})}),Object(s.jsx)("td",{children:e.name||e.id}),Object(s.jsx)("td",{children:n.slice(0,11)}),Object(s.jsx)("td",{children:e.round}),Object(s.jsx)("td",{children:e.setting&&e.setting.public?Object(s.jsx)(v.b,{className:Ei.a.tournamentLink,to:"/"+e.id,children:Object(s.jsx)(x.d,{})}):null})]},[e.id,t].join("."))}))})]})})]},"standings.1"):null,Object(s.jsx)(Pi,{name:"ACTIVE TOURNAMENTS"}),d.map((function(e,t){return Object(s.jsx)(Fi,{p:e},k()("active",t))})),Object(s.jsx)(Pi,{name:"INACTIVE TOURNAMENTS"}),j.map((function(e,t){return Object(s.jsx)(Fi,{p:e},k()("inactive",t))})),Object(s.jsx)("section",{})]})}function Hi(e){var t=Object(c.useState)(!1),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){a||ge({url:"/profile/email/authenticate",data:e.location.search.slice(1).split("&").reduce((function(e,t){var n=t.split("="),a=Object(f.a)(n,2),i=a[0],r=a[1];return e[i]=r,e}),{})}).then((function(){return i(!0)}))}),[a,i,e.location.search]),a?(e.updateProfile(),Object(s.jsx)(p.a,{push:!0,to:{pathname:"/@/".concat(e.id,"/accounts"),state:e.history.location.state}})):null}function zi(e){var t=Object(c.useContext)(R).isLoggedIn,n=Object(c.useContext)(P),a=n.isAuthed,i=n.authLevel;return"individual"===e.type?Object(s.jsx)(te,{section:e.section,loaded:!0,sections:{tournaments:{link:"/@/".concat(e.profile.username,"/tournaments"),icon:Object(s.jsx)(x.n,{})},teams:{link:"/@/".concat(e.profile.username,"/teams"),icon:Object(s.jsx)(x.ob,{})},accounts:{hide:!a,link:"/@/".concat(e.profile.username,"/accounts"),icon:Object(s.jsx)(x.nb,{})},settings:{hide:!a,link:"/@/".concat(e.profile.username,"/settings"),icon:Object(s.jsx)(x.u,{})}}}):Object(s.jsx)(te,{section:e.section||"play",loaded:!0,sections:{play:{name:"Play",link:"/".concat(e.type,"/").concat(e.id,"/"),icon:Object(s.jsx)(ha.a,{})},tournaments:{link:"/".concat(e.type,"/").concat(e.id,"/tournaments"),icon:Object(s.jsx)(x.n,{})},members:{hide:!t||!e.profile.players&&!e.profile.teamId,link:"/".concat(e.type,"/").concat(e.id,"/members"),icon:Object(s.jsx)(x.ob,{})},accounts:{hide:i<2||!0,link:"/".concat(e.type,"/").concat(e.id,"/accounts"),icon:Object(s.jsx)(x.nb,{})},settings:{hide:i<2,link:"/".concat(e.type,"/").concat(e.id,"/settings"),icon:Object(s.jsx)(x.u,{})}}})}function Vi(e){var t=Object(c.useState)(void 0),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useMemo)((function(){return(null===a||void 0===a?void 0:a.username)||e.id}),[e.id,a]),o=Object(c.useCallback)(Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ge.test(e.id)){t.next=2;break}return t.abrupt("return",i(null));case 2:Oe({url:"/user/"+e.id}).then(i).catch((function(){return i(null)}));case 3:case"end":return t.stop()}}),t)}))),[e.id,i]);Object(c.useEffect)((function(){o()}),[o]);var l=Da({profile:a,updateProfile:o}).updateBio,u=e.id.toLowerCase()===e.profile.uniqueID,d=u?2:0;return void 0===a?null:a?Object(s.jsx)(P.Provider,{value:{isAuthed:u,authLevel:d},children:Object(s.jsx)("div",{id:"main",children:Object(s.jsxs)("div",{className:Oa.a.container,children:[Object(s.jsx)("div",{className:Oa.a.col1,children:Object(s.jsx)(qe,{upperLimit:null,children:Object(s.jsx)("div",{className:Oa.a.infoWrapper,children:Object(s.jsx)(Na,Object(j.a)(Object(j.a)({},e),{},{profile:a,updateProfile:o,updateBio:l,type:"user"}))})})}),Object(s.jsxs)("div",{className:Oa.a.col2,children:[Object(s.jsx)(p.b,{path:"/@/:id/:section?",render:function(e){return Object(s.jsx)(zi,Object(j.a)(Object(j.a)({},e.match.params),{},{type:"individual",profile:a}))}}),Object(s.jsx)(p.b,{render:function(t){var n=t.location;return Object(s.jsxs)(p.d,{location:n,children:[Object(s.jsx)(p.b,{exact:!0,path:"/@/".concat(r),render:function(){return Object(s.jsx)(Gi,Object(j.a)(Object(j.a)({},e),{},{profile:a,type:"player"}))}}),Object(s.jsx)(p.b,{exact:!0,path:"/@/".concat(r,"/verify/:account?"),render:function(t){return u?Object(s.jsx)(Hi,Object(j.a)(Object(j.a)({},e),{},{id:r,updateProfile:o})):null}}),Object(s.jsx)(p.b,{exact:!0,path:"/@/".concat(r,"/tournaments"),render:function(){return Object(s.jsx)(Gi,Object(j.a)(Object(j.a)({},e),{},{profile:a,type:"player"}))}}),Object(s.jsx)(p.b,{exact:!0,path:"/@/".concat(r,"/teams"),render:function(){return Object(s.jsx)(Ji,Object(j.a)(Object(j.a)({},e),{},{profile:a,updateProfile:o}))}}),Object(s.jsx)(p.b,{exact:!0,path:"/@/".concat(r,"/accounts"),render:function(){return u?Object(s.jsx)(sr,Object(j.a)(Object(j.a)({},e),{},{profile:a,updateProfile:o})):null}}),Object(s.jsx)(p.b,{exact:!0,path:"/@/".concat(r,"/settings"),render:function(){return u?Object(s.jsx)(Xi,Object(j.a)(Object(j.a)({},e),{},{updateProfile:e.updateProfile,updateBio:l})):null}})]})}})]})]})})}):Object(s.jsx)(ke,{})}var qi=n(59),Ki=n.n(qi);function Ji(e){var t;return(null===(t=e.profile.teams)||void 0===t?void 0:t.length)?Object(s.jsx)(s.Fragment,{children:(e.profile.teams||[]).map(Wi)}):Object(s.jsx)("section",{className:"container",children:"This user is not in any teams"})}function Yi(e){var t=Object(c.useContext)(P).authLevel,n=Object(c.useState)([]),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useCallback)((function(){return Oe({url:"/users"}).then(r)}),[r]);Object(c.useEffect)((function(){o()}),[o]);var l=Object(c.useState)([]),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)([]),h=Object(f.a)(b,2),m=h[0],p=h[1];Object(c.useEffect)((function(){if(e.team.users){var t,n=[],a=[],i=Object(y.a)(e.team.users);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.level?n.push(r):a.push(r)}}catch(s){i.e(s)}finally{i.f()}j(n),p(a)}}),[j,p,e.team]);var O=Object(c.useCallback)((function(t){return ge({url:["team",e.team.id,"addUser"].join("/"),data:{username:t.username}}).then(e.updateProfile)}),[e.updateProfile,e.team.id]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:Ki.a.columns,children:[Object(s.jsxs)("section",{className:"container",children:[Object(s.jsx)("h1",{children:Object(s.jsx)("b",{children:"Admins"})}),Object(s.jsx)("div",{className:Ki.a.userTable,children:d.map((function(e,t){return Object(s.jsxs)(v.b,{className:Ki.a.row,to:"/@/"+e.username,draggable:!0,children:[Object(s.jsx)("div",{className:Ki.a.status,children:e.isLicensed?Object(s.jsx)(x.y,{title:"Licensed"}):Object(s.jsx)(x.r,{style:{fontSize:"0.5em"},title:e.online?"Online":"Offline"})}),Object(s.jsx)("div",{className:Ki.a.profile,children:e.username})]},["admin",t].join("."))}))})]}),Object(s.jsxs)("section",{className:"container",children:[Object(s.jsx)("h1",{children:Object(s.jsx)("b",{children:"Members"})}),Object(s.jsxs)("div",{className:Ki.a.userTable,children:[m.map((function(e,t){return Object(s.jsxs)(v.b,{className:Ki.a.row,to:"/team/"+e.username,draggable:!0,children:[Object(s.jsx)("div",{className:Ki.a.status,children:e.isLicensed?Object(s.jsx)(x.y,{title:"Licensed"}):Object(s.jsx)(x.r,{style:{fontSize:"0.5em"},title:e.online?"Online":"Offline"})}),Object(s.jsx)("div",{className:Ki.a.profile,children:e.username})]},["member",t].join("."))})),t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{}),Object(s.jsxs)("div",{className:Ki.a.searchBar,children:[Object(s.jsx)(x.T,{}),Object(s.jsx)(nn,{onChange:function(){},onSubmit:O,action:"",options:i,convert:function(e){return e.username},styles:Ki.a,placeholder:"Add new member"})]})]}):null]})]})]}),Object(s.jsx)("section",{})]})}function Qi(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)([]),o=Object(f.a)(r,2),l=o[0],u=o[1],d=Object(c.useCallback)(Object(m.a)(h.a.mark((function t(){var n,a,r,s,c,o,l,d,j,b,m,f,v,p,O,g,x,_,w,k,N,C,S,L,M;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],a=[],r=e.profile.tournaments.filter((function(e){return e.active})).sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})),s={},c={},o=[],l=Object(y.a)(r),t.prev=7,l.s();case 9:if((d=l.n()).done){t.next=30;break}if(j=d.value,b=[],!j.histories){t.next=23;break}m=1;case 14:if(!(m<j.histories.length)){t.next=23;break}if(f=j.histories[m]){t.next=18;break}return t.abrupt("continue",20);case 18:b.push(f.id),o.push(f.resultId);case 20:m++,t.next=14;break;case 23:return t.next=25,Oe({url:["tournament",j.tournamentId,"fetchPlayers"].join("/"),params:{ids:b.join(",")}}).catch((function(e){return console.error(e),[]}));case 25:v=t.sent,p=Object(y.a)(v);try{for(p.s();!(O=p.n()).done;)g=O.value,s[g.id]=g}catch(h){p.e(h)}finally{p.f()}case 28:t.next=9;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(7),l.e(t.t0);case 35:return t.prev=35,l.f(),t.finish(35);case 38:return t.next=40,Oe({url:"/results",params:{ids:o.join(",")}}).catch((function(e){return console.error(e),[]}));case 40:for(x=t.sent,_=0;_<x.length;_++)w=x[_].id,c[w]=x[_];return t.next=44,Oe({url:"/results",params:{ids:o.join(","),games:!0}});case 44:k=t.sent,N=Object(y.a)(r),t.prev=46,N.s();case 48:if((C=N.n()).done){t.next=63;break}if((S=C.value).histories){t.next=52;break}return t.abrupt("continue",61);case 52:L=function(e){var t,i,r,o=S.histories[e];if(!o)return"continue";var l=c[S.histories[e].resultId];if(!l)return"continue";var u={prop:S,opp:s[o.id],id:l.id,round:e,colour:o.colour,result:l,games:null===(t=k.find((function(e){return e.id===l.id})))||void 0===t?void 0:t.games,startTime:null===(i=l.fetched)||void 0===i?void 0:i.startTime,endTime:null===(r=l.fetched)||void 0===r?void 0:r.endTime};if(!u.result)return"continue";null===o.match?n.push(u):a.push(u)},M=S.histories.length-1;case 54:if(!(M>=0)){t.next=61;break}if("continue"!==L(M)){t.next=58;break}return t.abrupt("continue",58);case 58:M--,t.next=54;break;case 61:t.next=48;break;case 63:t.next=68;break;case 65:t.prev=65,t.t1=t.catch(46),N.e(t.t1);case 68:return t.prev=68,N.f(),t.finish(68);case 71:i(n),u(a);case 73:case"end":return t.stop()}}),t,null,[[7,32,35,38],[46,65,68,71]])}))),[e.profile,i,u]);Object(c.useEffect)((function(){d()}),[d]);var j=Object(c.useState)(!1),b=Object(f.a)(j,2),v=(b[0],b[1],Object(c.useState)({})),p=Object(f.a)(v,2),O=(p[0],p[1]);Object(c.useCallback)((function(e){return Oe({url:"/results",params:{round:0,ids:null===e||void 0===e?void 0:e.join(","),games:!0}}).then((function(e){return O(e.reduce((function(e,t){return e[t.id]=t.games,e}),{}))}))}),[O]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Pi,{name:"UPCOMING MATCHES"}),a.map((function(e,t){return Object(s.jsx)(Ui,{u:e,update:d},k()(e.id,t))})),Object(s.jsx)(Pi,{name:"PAST MATCHES"}),l.map((function(e,t){return Object(s.jsx)(Ui,{u:e,update:d,className:Ti.a.inactive},k()(e.id,t))})),Object(s.jsx)("section",{})]})}function Xi(e){var t=Object(c.useContext)(R).profile,n=Object(c.useContext)(D),a=Object(c.useCallback)((function(t){return ge({url:"/profile/updateSetting",data:{backgroundURL:t}}).then(e.updateProfile)}),[e.updateProfile]),i=Object(c.useCallback)((function(){n({title:"Add background image",message:"Add a link to the background image you want to use. Leave empty to clear.",type:"prompt",resolve:a,prompt:{validate:function(e){return!e||Fe.test(e)},errorMessage:"Must be a valid link to an image",allowNull:!0,defaultValue:null===t||void 0===t?void 0:t.backgroundURL}})}),[n,a,t]),r=Object(c.useState)(!!pe.getLocal("noAnimations")),o=Object(f.a)(r,2),l=o[0],u=o[1],d=Object(c.useCallback)((function(){pe.setLocal("noAnimations",!l),u(!l)}),[l,u]),j="dark"===Object(c.useContext)(F);return t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("section",{className:["container",Oa.a.wrapper].join(" "),children:[Object(s.jsxs)("div",{className:["header-button",Oa.a.darkMode,"switchContainer"].join(" "),children:[Object(s.jsx)("label",{children:Object(s.jsx)("div",{children:j?"Dark Mode":"Light Mode"})}),Object(s.jsx)("div",{className:"toggleSwitch",onClick:Za,children:j?Object(s.jsx)(x.ib,{}):Object(s.jsx)(x.hb,{})})]}),Object(s.jsx)("div",{className:["header-button",Oa.a.darkMode,"switchContainer"].join(" "),onClick:i,children:t.backgroundURL?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("a",{href:t.backgroundURL,target:"_blank",rel:"noopener noreferrer",children:"Background set"}),"\u200b"," | Change"]}):"Add background image"}),Object(s.jsxs)("div",{className:["header-button",Oa.a.darkMode,"switchContainer"].join(" "),children:[Object(s.jsx)("label",{children:Object(s.jsx)("div",{children:"Animations"})}),Object(s.jsx)("div",{className:"toggleSwitch",onClick:d,children:l?Object(s.jsx)(x.hb,{}):Object(s.jsx)(x.ib,{})})]})]}),Object(s.jsx)("section",{className:["container"].join(" "),children:Object(s.jsx)("div",{className:["header-button",Oa.a.darkMode,"switchContainer"].join(" "),onClick:e.updateBio,children:"Update bio"})})]}):null}function Zi(e){var t=Object(c.useContext)(R).profile,n=Object(c.useContext)(D),a=Object(c.useReducer)((function(e){return!e}),!1),i=Object(f.a)(a,2),r=i[0],o=i[1],l=Object(c.useState)(""),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)([]),v=Object(f.a)(b,2),O=v[0],g=v[1],x=Object(c.useCallback)((function(){return Oe({url:"/user/"+(null===t||void 0===t?void 0:t.username)}).then((function(e){return g(e.teams)}))}),[t,g]);Object(c.useEffect)((function(){x()}),[x]);var _=Object(c.useReducer)((function(e,t){var n=e.slice(0);return t.set&&!n.includes(t.k)?n.push(t.k):t.set||n.includes(t.k)&&n.splice(n.indexOf(t.k),1),n}),[]),y=Object(f.a)(_,2),w=y[0],N=y[1],C=Object(c.useCallback)(function(){var t=Object(m.a)(h.a.mark((function t(a){var i,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.profile,t.next=3,Oe({url:["","team",a.id].join("/")});case 3:r=t.sent,c=["description","ecf","fide"].filter((function(e){return i[e]})),n({title:"Confirm the merger of ".concat(i.name," into ").concat(r.name,"?"),message:Object(s.jsxs)(s.Fragment,{children:[c.length?"Please select which fields to keep":"",c.map((function(e,t){return i[e]===r[e]?null:Object(s.jsxs)(s.Fragment,{children:["Which ",q(e)," to keep?",Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{onClick:function(){return N({k:e,set:!0})},children:i[e]}),Object(s.jsx)("div",{onClick:function(){return N({k:e,set:!1})},children:r[e]})]},[e,t].join("."))]})}))]}),type:"confirm",resolve:function(){return ge({url:["","team",i.id,"merge"].join("/"),data:{to:r.id,keepFields:w}}).then((function(){return n({message:"",title:""})})).then((function(){return j("/team/"+r.id)}))}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[n,e.profile,w,N,j]);return t?d?Object(s.jsx)(p.a,{to:d}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("section",{className:["container",Oa.a.wrapper].join(" "),children:[Object(s.jsx)("div",{className:["header-button",Oa.a.merge].join(" "),onClick:o,children:"Merge team into..."}),r?O.length?O.map((function(t,n){return t.id===e.profile.id?null:Object(s.jsx)("div",{className:["header-button",Oa.a.teamMerge].join(" "),onClick:function(){return C(t)},children:t.name},k()(t.id,n))})):"No teams available into which to merge. You must be admin of both teams to create a merge request.":null]}),Object(s.jsx)("section",{className:["container"].join(" "),children:Object(s.jsx)("div",{className:["header-button",Oa.a.darkMode,"switchContainer"].join(" "),onClick:e.updateBio,children:"Update description"})})]}):null}function $i(e){var t=Object(c.useState)(void 0),n=Object(f.a)(t,2),a=n[0],i=n[1],r=Object(c.useCallback)((function(){return Oe({url:V(e.type,e.id)}).then((function(e){return i(e),e})).then((function(t){return t.teamId?window.history.pushState("",document.title,window.location.pathname.replace(e.id,t.teamId)+window.location.search):t.userId&&window.history.pushState("",document.title,window.location.pathname.replace(e.id,t.userId).replace("/player/","/@/")+window.location.search),t})).catch((function(){return i(null)}))}),[i,e.id,e.type]);Object(c.useEffect)((function(){r()}),[r]);var o=Da({profile:a,updateProfile:r}).updateBio,l=Object(c.useMemo)((function(){return"player"===e.type?e.id.toLowerCase()===e.profile.uniqueID?2:0:"number"===typeof(null===a||void 0===a?void 0:a.permissions)?a.permissions+1:0}),[e.type,e.id,e.profile,a]),u=2===l;return void 0===a?null:null===a?Object(s.jsx)(ke,{}):Object(s.jsx)(P.Provider,{value:{isAuthed:u,authLevel:l},children:Object(s.jsx)("div",{id:"main",children:Object(s.jsxs)("div",{className:Oa.a.container,children:[Object(s.jsx)("div",{className:Oa.a.col1,children:Object(s.jsx)(qe,{upperLimit:null,children:Object(s.jsx)("div",{className:Oa.a.infoWrapper,children:Object(s.jsx)(Na,Object(j.a)(Object(j.a)({},e),{},{profile:a,updateProfile:r,updateBio:o,type:e.type}))})})}),Object(s.jsxs)("div",{className:Oa.a.col2,children:[Object(s.jsx)(p.b,{path:"/:type/:id/:section?",render:function(e){return Object(s.jsx)(zi,Object(j.a)(Object(j.a)({},e.match.params),{},{profile:a}))}}),Object(s.jsx)(p.b,{render:function(t){var n=t.location;return Object(s.jsxs)(p.d,{location:n,children:[Object(s.jsx)(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id),render:function(){return Object(s.jsx)(Qi,Object(j.a)(Object(j.a)({},e),{},{profile:a,type:e.type}))}}),Object(s.jsx)(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id,"/tournaments"),render:function(){return Object(s.jsx)(Gi,Object(j.a)(Object(j.a)({},e),{},{profile:a,type:e.type}))}}),Object(s.jsx)(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id,"/members"),render:function(){return Object(s.jsx)(Yi,Object(j.a)(Object(j.a)({},e),{},{team:a,updateProfile:r}))}}),Object(s.jsx)(p.b,{exact:!0,path:"/team/".concat(e.id,"/settings"),render:function(){return u?Object(s.jsx)(Zi,Object(j.a)(Object(j.a)({},e),{},{user:e.profile,profile:a,updateProfile:r,updateBio:o})):null}})]})}})]})]})})})}function er(e){return Object(s.jsxs)("div",{className:["header-button","switchContainer"].join(" "),children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("div",{children:e.on?e.main.on:e.main.off}),e.sub?Object(s.jsx)("div",{children:e.on?e.sub.on:e.sub.off}):null]}),Object(s.jsxs)("div",{className:"toggleSwitch",onClick:function(){return e.onSwitch(!e.on)},children:[Object(s.jsx)("input",{type:"checkbox",className:"check",checked:e.on}),Object(s.jsx)("div",{className:"toggleSlider round"})]})]})}function tr(e){var t=e.updateProfile,n=Object(c.useState)(""),a=Object(f.a)(n,2),i=a[0],r=a[1];Object(c.useEffect)((function(){Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.getAll();case 2:t=e.sent,r(t.sessionID);case 4:case"end":return e.stop()}}),e)})))()}),[r]);var s=Object(c.useMemo)((function(){var t={response_type:"code",client_id:me,redirect_uri:fe,scope:[["email","read"],["challenge","read"],["challenge","write"]].map((function(e){return e.join(":")})).join(" "),state:"".concat(null===i||void 0===i?void 0:i.slice(0,8),".referrer=").concat(e.currentPath)};return"".concat("https://oauth.lichess.org/oauth/authorize","?").concat(Object.entries(t).map((function(e){return e.join("=")})).join("&"))}),[i,e.currentPath]),o=Object(c.useState)(null),l=Object(f.a)(o,2),u=l[0],d=l[1],j=Object(c.useCallback)((function(e){e.closed&&(d(null),t())}),[t,d]);return Object(c.useEffect)((function(){if(u){var e=setInterval((function(){return j(u)}),1e3);return function(){return clearInterval(e)}}}),[u,j]),{href:s,setWindow:d}}function nr(e){return ge({url:["profile","lichess","updateFrom"].join("/")}).finally(e)}function ar(e){return Object(c.useCallback)((function(t){t&&t.id&&ge({url:"/profile/facebook/link",data:{id:t.userID,name:t.name,email:t.id,accessToken:t.accessToken}}).then(e.updateProfile)}),[e.updateProfile])}var ir=n(391),rr=n.n(ir);function sr(e){var t,n=Object(c.useState)(e.profile),l=Object(f.a)(n,2),u=l[0],d=l[1];Object(c.useEffect)((function(){d(e.profile)}),[d,e.profile]);Object(c.useCallback)((function(){return Oe({url:"/user/"+e.profile.username+"/getAccounts"}).then(d)}),[d,e.profile.username]);var b=Object(c.useCallback)((function(e,t){ge({url:"/profile/updateAccount",data:{account:"email"===e?"emailMeta":e,data:t}}).then(d)}),[d]),h=Object(c.useState)([]),m=Object(f.a)(h,2),v=m[0],p=m[1],O=Object(c.useState)([]),g=Object(f.a)(O,2),y=g[0],w=g[1],k=Object(c.useState)([]),N=Object(f.a)(k,2),C=N[0],S=N[1];Object(c.useEffect)((function(){for(var e=[],t=[],n=[],a=0,i=Object.entries(sa);a<i.length;a++){var r=Object(f.a)(i[a],2),s=r[0],c=r[1];if(s in u){var o,l,d,j=u[s];"email"===s&&(j=Object.assign(u.emailMeta||{},{id:j,username:j})),Object.assign(c,{id:s}),(null===(o=j)||void 0===o?void 0:o.verified)?e.push([c,j]):((null===(l=j)||void 0===l?void 0:l.id)||(null===(d=j)||void 0===d?void 0:d.username))&&t.push([c,j]),j&&!c.hasMultiple||n.push([c,j])}else c.canLink&&n.push([c,{}])}p(e),w(t),S(n)}),[u,p,w,S]);var L=e.updateProfile,M=Object(c.useContext)(B).state.currentPath,R=i.useLink({currentPath:M,updateProfile:L}),P=a.useVerify({profile:e.profile,updateProfile:L}),E=a.useLink({updateProfile:function(){L(),P()}}),A=r.useFacebook({updateProfile:L}),T=(t={},Object(_.a)(t,"lichess",R),Object(_.a)(t,"chessCom",E),Object(_.a)(t,"facebook",{href:A,setWindow:function(){}}),t),I=Object(c.useContext)(D),F=Object(c.useMemo)((function(){return{chessCom:P,email:function(t){return ge({url:"/profile/email/verify",data:{force:t}}).then((function(){return I({title:"Verify email account",message:"An email has been sent to "+e.profile.email+". Check your inbox!"})})).then(L)}}}),[P,I,e.profile.email,L]),W=Object(c.useMemo)((function(){return{lichess:function(){return i.handleSync(L)}}}),[L]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Pi,{name:"VERIFIED ACCOUNTS"}),v.map((function(e,t){var n=Object(f.a)(e,2),a=n[0],i=n[1];return Object(s.jsx)("section",{className:["container",Oa.a.accountSection].join(" "),children:Object(s.jsxs)("div",{className:["optionsContainer",Oa.a.optionsContainer].join(" "),children:[Object(s.jsxs)("a",{id:a.id,href:(a.idLink||a.link).replace("|",i.username||i.id),className:["button","link",Oa.a.account,Oa.a.inline].join(" "),rel:"noopener noreferrer",target:"_blank",children:["string"===typeof a.icon[1]?Object(s.jsx)("img",{src:a.icon[1],alt:a.id,className:Oa.a.icon}):o.a.cloneElement(a.icon[1],{className:Oa.a.icon}),a.name||q(a.id),Object(s.jsx)(x.m,{className:"verified"})]}),Object(s.jsx)(er,{on:!1!==i.public,onSwitch:function(e){return b(a.id,{public:e})},main:{on:"Public",off:"Hidden"},sub:{on:"Switch to hide your account from public view",off:"Switch on to make visible to all signed-in users"}}),a.id in W?Object(s.jsx)("div",{className:["header-button",Oa.a.accountButton].join(" "),onClick:W[a.id],children:Object(s.jsxs)("div",{children:[Object(s.jsx)(x.cb,{}),"Sync data"]})}):null,a.permanent?null:Object(s.jsx)("div",{className:["header-button",Oa.a.accountButton,Oa.a.remove].join(" "),onClick:function(){return ge({url:"/profile/removeAccount",data:{account:a.id}}).then(d)},children:Object(s.jsxs)("div",{children:[Object(s.jsx)(x.Y,{}),"Remove integration"]})})]})},["section",t].join(" "))})),Object(s.jsx)(Pi,{name:"PENDING VERIFICATION"}),y.map((function(e,t){var n=Object(f.a)(e,2),a=n[0],i=n[1];return Object(s.jsx)("section",{className:["container",Oa.a.accountSection].join(" "),children:Object(s.jsxs)("div",{className:["optionsContainer",Oa.a.pendingContainer].join(" "),children:[Object(s.jsxs)("div",{id:a.id,onClick:function(){a.id&&(a.id in F&&(i.sent||(0,F[a.id])()))},className:["button","link",Oa.a.account,Oa.a.inline,i.sent?"sent":""].join(" "),children:["string"===typeof a.icon[1]?Object(s.jsx)("img",{src:a.icon[1],alt:a.id,className:Oa.a.icon}):o.a.cloneElement(a.icon[1],{className:Oa.a.icon}),i.sent?"":"Verify"," ",i.username||a.name||q(a.id),i.sent?null:Object(s.jsx)(x.d,{})]}),i.sent?Object(s.jsx)("div",{className:["header-button",Oa.a.accountButton].join(" "),onClick:function(){a.id&&(a.id in F&&(0,F[a.id])(!0))},children:Object(s.jsxs)("div",{children:[Object(s.jsx)(x.P,{}),"Resend email"]})}):null,Object(s.jsx)(er,{on:!1!==i.public,onSwitch:function(e){return b(a.id,{public:e})},main:{on:"Public",off:"Hidden"},sub:{on:"Switch to hide your account from public view",off:"Switch on to make visible to all signed-in users"}}),a.permanent?null:Object(s.jsx)("div",{className:["header-button",Oa.a.accountButton,Oa.a.remove].join(" "),onClick:function(){return ge({url:"/profile/removeAccount",data:{account:a.id}}).then(d)},children:Object(s.jsxs)("div",{children:[Object(s.jsx)(x.fb,{}),"Cancel"]})})]})},["section",t].join(" "))})),Object(s.jsx)(Pi,{name:"AVAILABLE"}),C.length?Object(s.jsx)("section",{className:["container",Oa.a.accountSection].join(" "),children:Object(s.jsx)("div",{className:["optionsContainer",Oa.a.availableContainer].join(" "),children:C.map((function(e,t){var n=Object(f.a)(e,2),a=n[0];n[1];if(a.id&&"facebook"===a.id){var i={render:function(e){return Object(s.jsxs)("div",{id:a.id,onClick:e.onClick,className:["button","link",Oa.a.account,Oa.a.inline].join(" "),children:["string"===typeof a.icon[1]?Object(s.jsx)("img",{src:a.icon[1],alt:a.id,className:Oa.a.icon}):o.a.cloneElement(a.icon[1],{className:Oa.a.icon}),"Link ",a.name||q(a.id),Object(s.jsx)(x.d,{})]},["entry",t].join(" "))}};return Object(s.jsxs)("div",{id:a.id,onClick:function(){if(a.id&&a.id in T){var e=T[a.id],t=e.href,n=e.setWindow;"function"===typeof t?t():n(window.open(t,"_blank"))}},className:["button","link",Oa.a.account,Oa.a.inline].join(" "),children:["string"===typeof a.icon[1]?Object(s.jsx)("img",{src:a.icon[1],alt:a.id,className:Oa.a.icon}):o.a.cloneElement(a.icon[1],{className:Oa.a.icon}),Object(s.jsx)(rr.a,Object(j.a)({appId:"3423958477620478",fields:"name,email",scope:"public_profile",cssClass:Oa.a.facebookLink,callback:T.facebook.href},i)),Object(s.jsx)(x.d,{})]},["entry",t].join(" "))}return Object(s.jsxs)("div",{id:a.id,onClick:function(){if(a.id&&a.id in T){var e=T[a.id],t=e.href,n=e.setWindow;"function"===typeof t?t():n(window.open(t,"_blank"))}},className:["button","link",Oa.a.account,Oa.a.inline].join(" "),children:["string"===typeof a.icon[1]?Object(s.jsx)("img",{src:a.icon[1],alt:a.id,className:Oa.a.icon}):o.a.cloneElement(a.icon[1],{className:Oa.a.icon}),"Link ",a.name||q(a.id),Object(s.jsx)(x.d,{})]},["entry",t].join(" "))}))})}):Object(s.jsx)("section",{})]})}var cr=n(31),or=n.n(cr),lr={draw:Object(s.jsx)(x.a,{}),announcement:Object(s.jsx)(x.j,{})},ur={"/login":"login","/register":"login","/me":"login","/@/":"community","/teams":"teams","/community":"community","/news":"news","/team/":"teams","/player/":"community"};function dr(e){var t=Object(c.useMemo)((function(){return Object(j.a)(Object(_.a)({},"/@/"+e.profile.username,"login"),ur)}),[e.profile.username]),n=Object(c.useContext)(R).isLoggedIn,a=Object(c.useState)(!1),i=Object(f.a)(a,2),r=i[0],l=i[1],u=Object(c.useState)(!0),d=Object(f.a)(u,2),b=d[0],h=d[1],m=Object(c.useState)([]),v=Object(f.a)(m,2),p=v[0],O=v[1],g=Object(c.useReducer)((function(e){return!e}),!1),y=Object(f.a)(g,2),w=y[0],N=y[1],C=Object(c.useMemo)((function(){return p.filter((function(e){return e&&!e.seen})).length}),[p]);Object(c.useEffect)((function(){document.title=C?"("+C+") "+document.title:"Results | ScorchChess"}),[C]);var S="dark"===Object(c.useContext)(F),L=Object(c.useMemo)((function(){return[{name:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("strong",{children:"Scorch"}),"Results"]}),className:or.a.title,mobile:"Home",url:"/",selected:!Object.entries(t).some((function(t){var n=Object(f.a)(t,1)[0];return e.currentPath.startsWith(n)}))},{name:"Teams",icon:x.ob,url:"/teams",selected:"teams"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))]},{name:"News",icon:x.O,url:"/news",selected:"news"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))]},{name:"About",icon:x.K,url:"https://scorchapp.co.uk",mobileIgnore:!0},{name:S?Object(s.jsx)(x.N,{}):Object(s.jsx)(x.W,{}),mobileIgnore:!0,color:"yellow",onClick:Za,native:!0,show:!1},{name:Object(s.jsx)(x.E,{}),url:"https://facebook.com/scorchchess",mobile:"Facebook",native:!0,color:"#4267B2"},{name:Object(s.jsx)(x.kb,{}),url:"https://twitter.com/scorchchess",mobile:"Twitter",color:"#00aced",native:!0},{name:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(x.h,{}),C?Object(s.jsx)("div",{className:or.a.unseen,children:C}):null]}),onClick:N,native:!0,inactive:!n,mobileIgnore:!0,color:"#43853d"},{name:n?e.profile.username||"PROFILE":"SIGN IN",url:n?"/@/"+e.profile.username:"/login",selected:"login"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))],native:!0}]}),[n,e.profile,e.currentPath,t,N,C,S]),M=Object(c.useCallback)((function(){window.innerWidth===window.screen.width&&window.innerHeight===window.screen.height?h(!1):h(!0)}),[h]);Object(c.useEffect)((function(){return document.addEventListener("fullscreenchange",M),function(){return document.removeEventListener("fullscreenchange",M)}}),[M]);var P=Object(c.useCallback)((function(e){122===e.keyCode&&(window.innerWidth>window.screen.width-10&&window.innerHeight>window.screen.height-10?h(!1):h(!0))}),[h]);Object(c.useEffect)((function(){return document.addEventListener("keydown",P),function(){return document.removeEventListener("keydown",P)}}),[M,P]);var B=Object(c.useState)(!1),E=Object(f.a)(B,2),A=E[0],T=E[1],I=Object(c.useCallback)((function(){window.scrollY?T(!0):T(!1)}),[T]);return Object(c.useEffect)((function(){return document.addEventListener("scroll",I),function(){return document.removeEventListener("scroll",I)}}),[I]),Object(c.useEffect)((function(){if(e.profile.id){_e.on("notifs",O),_e.emit("request_notifs");var t=setInterval((function(){return _e.emit("request_notifs")}),6e4);return function(){return clearInterval(t)}}}),[O,e.profile.id]),Object(c.useEffect)((function(){_e.emit("request_notifs")}),[O]),Object(c.useEffect)((function(){var e=function(){return _e.emit("request_notifs")};return window.addEventListener("focus",e),function(){return window.removeEventListener("focus",e)}}),[]),Object(c.useEffect)((function(){var e=function(){return _e.emit("request_notifs")};return window.addEventListener("blur",e),function(){return window.removeEventListener("blur",e)}}),[]),b?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:[or.a.header,!A||or.a.small].join(" "),children:[Object(s.jsx)(Ja,{to:"/",className:or.a.logoWrapper,children:Object(s.jsx)("img",{src:"/favicon.png",className:or.a.logo,alt:"logo"})}),He()?Object(s.jsx)("div",{className:or.a.menuButton,onClick:function(){return l(!r)},children:Object(s.jsx)(x.g,{})}):Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:or.a.buttonContainer,children:[Object(s.jsx)("div",{}),L.map((function(e,t){var n;return Object(s.jsxs)(o.a.Fragment,{children:[Object(s.jsx)("div",{className:k()(or.a.headerButton,e.className,(n={},Object(_.a)(n,or.a.selected,e.selected),Object(_.a)(n,or.a.inactive,e.inactive),Object(_.a)(n,or.a.hidden,!1===e.show),n)),children:Object(s.jsx)(Ja,{className:k()(or.a.button,Object(_.a)({},or.a.native,e.native)),onClick:e.onClick,to:e.url,children:e.icon?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(e.icon,{className:or.a.icon}),Object(s.jsx)("div",{className:k()(Object(_.a)({},or.a.label,!!e.icon)),children:e.name})]}):e.name})}),t?null:Object(s.jsx)("div",{})]},k()("headerLink",t))})),Object(s.jsxs)("div",{className:[or.a.notifications,"scrollable"].join(" "),style:{opacity:w?1:0,visibility:w?"visible":"hidden"},children:[Object(s.jsx)("div",{className:or.a.inlineNotifTitle,children:Object(s.jsx)("strong",{children:"Notifications"})}),Object(s.jsx)("hr",{}),p.length?p.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return Object(s.jsxs)(Ja,{to:e.link,className:[or.a.inlineNotif,e.seen?"":or.a.unseenN].join(" "),onClick:function(){return ge({url:"/profile/readNotification",data:{id:e.id},noCatch:!0}).then((function(){return _e.emit("request_notifs")})).then((function(){return N()}))},children:[lr[e.role]||Object(s.jsx)("div",{}),Object(s.jsx)("div",{className:[or.a.inlineNotifContent].join(" "),children:Object(s.jsx)(fn.a,{source:e.content.trim(),escapeHtml:!1,astPlugins:[Pn],renderers:{link:Bn}})}),Object(s.jsx)("div",{className:or.a.inlineNotifDate,children:J(new Date(e.createdAt),new Date(Date.now()))})]},["notif",t].join("."))})):"You have no new notifications at this time."]})]})})]}),He()?Object(s.jsx)("div",{className:or.a.mobileMenu,style:{paddingTop:r?void 0:"0px",maxHeight:r?"100%":"0px"},children:L.map((function(e,t){if(e.mobileIgnore)return null;var n=e.mobile||e.name;return"string"===typeof n&&(n=n.toLowerCase()),Object(s.jsx)(Ja,{className:or.a.button,onClick:function(){return l(!1)},to:e.url,children:n},[e,t].join("."))}))}):null]}):null}var jr=n(66),br=n.n(jr),hr=n(392);function mr(){return Object(s.jsxs)("footer",{className:br.a.footer,"data-aos":"fade-up","data-aos-offset":5,children:[Object(s.jsxs)("div",{className:br.a.col1,children:[Object(s.jsx)("div",{onClick:function(){return window.scrollTo({top:0})},className:br.a.logoWrapper,children:Object(s.jsx)("img",{src:"/favicon.png",className:br.a.logo,alt:"logo"})}),Object(s.jsxs)("div",{onClick:function(){return window.scrollTo({top:0})},className:br.a.text,children:[Object(s.jsx)("b",{children:"Scorch"}),"Results"]}),Object(s.jsxs)("div",{className:br.a.copyright,children:["ScorchChess ",Object(s.jsx)(x.x,{})," 2020 All Rights Reserved"]}),Object(s.jsx)("div",{className:br.a.version,children:Object(s.jsxs)("small",{children:["Website v.",hr.version]})})]}),Object(s.jsx)("div",{className:br.a.col2,children:Object(s.jsxs)("div",{className:br.a.shortcuts,children:[Object(s.jsx)(v.b,{to:"/contact#feedback",children:"Feedback"}),Object(s.jsx)(v.b,{to:"/community",children:"Community"}),Object(s.jsx)(v.b,{to:"/privacy",children:"Privacy"}),Object(s.jsx)(v.b,{to:"/tos",children:"Terms of Service"})]})})]})}var fr=n(393),vr=n.n(fr);function pr(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],i=Object(c.useCallback)((function(){return Oe({url:"/announcements"}).then(a)}),[a]);return Object(c.useEffect)((function(){i()}),[i]),Object(s.jsx)("div",{id:"main",children:Object(s.jsx)("div",{className:vr.a.news,children:Object(s.jsx)(da,{announcements:n.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{createdAt:1e3*new Date(e.createdAt).valueOf(),updatedAt:1e3*new Date(e.updatedAt).valueOf()})}))})})})}var Or=n(72),gr=n.n(Or);function xr(){var e=Object(c.useContext)(D),t=Object(c.useContext)(R),n=t.isLoggedIn,a=t.profile,i=ka({profile:{reddit:{name:"/r/scorchchess",username:"scorchchess"},facebook:{name:"/scorchchess",username:"scorchchess"},twitter:{name:"/@/scorchchess",username:"scorchchess"},email:{name:"Aloysius Lip, Founder",username:"aloysius.lip@gmail.com"}},forceFacebook:!0}).links;return Object(s.jsxs)("div",{id:"main",children:[Object(s.jsxs)("section",{id:"contact",children:[Object(s.jsx)("h1",{children:"Contact"}),Object(s.jsxs)("div",{className:gr.a.content,children:["ScorchChess Developers are available at the following links:",Object(s.jsx)("div",{className:gr.a.list,children:i})]})]}),Object(s.jsxs)("section",{id:"feedback",children:[Object(s.jsx)("h1",{children:"Feedback"}),Object(s.jsxs)("div",{className:gr.a.content,children:["You can go to our ",Object(s.jsx)(v.b,{to:"https://reddit.com/r/scorchchess",children:"subreddit"})," and leave a post there to give feedback. Alternatively, fill in the following form:"]}),n?Object(s.jsx)("div",{className:gr.a.formContainer,children:Object(s.jsx)("form",{className:gr.a.form,method:"POST",action:Be.a.resolve(he,"profile/submitFeedback"),onSubmit:function(t){return xe(t).then((function(n){e({title:"Submitted feedback",message:Object(s.jsxs)(s.Fragment,{children:["Thanks for submitting feedback, it's much appreciated! View your post here: ",Object(s.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:n})]})}),t.target.reset()}))},children:Object(s.jsxs)("fieldset",{className:gr.a.fieldSet,children:[Object(s.jsx)("legend",{children:"Your feedback"}),Object(s.jsx)("input",{name:"title",type:"text",required:!0,placeholder:"Your title",maxLength:a?300-"[".concat(a.username,"]: ").length:300}),Object(s.jsxs)("select",{name:"type",id:"type",children:[Object(s.jsx)("option",{value:"suggestion",children:"Suggestion"}),Object(s.jsx)("option",{value:"bug",children:"Bug"}),Object(s.jsx)("option",{value:"other",children:"Other"})]}),Object(s.jsx)("textarea",{name:"content",className:gr.a.textArea,placeholder:"Your text",required:!0,maxLength:4e4}),Object(s.jsx)("input",{className:k()(gr.a.submit,"button"),type:"submit",value:"Submit"})]})})}):Object(s.jsx)(v.b,{to:"/login",children:"Log in or register to send feedback"})]})]})}var _r=n(38),yr=n.n(_r);function wr(){var e=Object(c.useReducer)((function(e){return!e}),!1),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(s.jsxs)("div",{className:k()(yr.a.floated,yr.a.bottom,yr.a.left),children:[Object(s.jsx)("div",{className:yr.a.dotExpando,onClick:a,children:Object(s.jsx)(x.w,{})}),Object(s.jsxs)("div",{className:yr.a.wrapper,style:{maxWidth:n?void 0:"0px"},children:[Object(s.jsx)(v.b,{className:yr.a.link,to:"/contact#feedback",children:"Like the new design? Leave feedback here"}),Object(s.jsx)("div",{className:k()(yr.a.expando),onClick:a,children:"Not now"})]})]})}function kr(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],i=Object(c.useCallback)(Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.search.includes("refresh")){e.next=4;break}return e.next=3,pe.remove("linkHidden").catch((function(){}));case 3:a(!1);case 4:return e.next=6,pe.get("linkHidden").catch((function(){}));case 6:(t=e.sent)&&!isNaN(Number(t))||a(!1),Date.now()-Number(t)<432e5&&a(!0);case 9:case"end":return e.stop()}}),e)}))),[a]);Object(c.useEffect)((function(){i()}),[i]);var r=Object(c.useCallback)(function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,pe.set("linkHidden",Date.now()).catch((function(){}));case 3:a(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),o=Object(c.useContext)(R),l=o.isLoggedIn,u=o.profile,d=Object(c.useState)(void 0),j=Object(f.a)(d,2),b=j[0],p=j[1],O=Object(c.useCallback)(Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&u.username){e.next=2;break}return e.abrupt("return");case 2:if(Ge.test(u.username)){e.next=4;break}return e.abrupt("return",p(null));case 4:Oe({url:"/user/"+u.username,params:{fetchGameLinks:!0}}).then(p);case 5:case"end":return e.stop()}}),e)}))),[p,u]);Object(c.useEffect)((function(){l&&O()}),[O,l]);var g=Object(c.useMemo)((function(){return b?b.teams.map((function(e){return e.gameLinks.map((function(t){return Object.assign({},t,{team:e.name})}))})).flat():[]}),[b]),_=Object(c.useState)(0),y=Object(f.a)(_,2),w=y[0],N=y[1],C=Object(c.useMemo)((function(){return void 0===w?null:g[w]}),[g,w]),S=Object(c.useState)(!0),L=Object(f.a)(S,2),M=(L[0],L[1]),P=Object(c.useContext)(D),B=Object(c.useCallback)((function(e){e.preventDefault(),M(!0);for(var t=e.target;t.parentElement&&"HTMLFormElement"!==t.constructor.name;)t=t.parentElement;var n=t.link,a=null===n||void 0===n?void 0:n.value.trim();if(a)return"chessCom"!==(null===C||void 0===C?void 0:C.source)||Ie.test(a)?void xe(e).then((function(){return p(void 0)})).then(O).finally((function(){return M(!1)})):(M(!1),void P({title:"Link error",message:"Link does not match format for a chess.com link",type:"error"}));M(!1)}),[O,C,M,P]),E=Object(c.useMemo)((function(){return"chessCom"===(null===C||void 0===C?void 0:C.source)?"Ex: https://chess.com/live#tm=xxxxx":""}),[C]),A=Object(c.useMemo)((function(){for(var e=[],t=function(t){t===w?e.push(Object(s.jsx)(x.r,{className:k()(yr.a.dot),onClick:function(){return N(void 0)}},k()("circle",t))):e.push(Object(s.jsx)(x.V,{className:k()(yr.a.dot),onClick:function(){return N(t)}},k()("circle",t)))},n=0;n<g.length;n++)t(n);return e}),[g,w]);return u&&g.length?n?null:Object(s.jsxs)("div",{className:k()(yr.a.top,yr.a.right,yr.a.container),"data-aos":"fade-left",children:[Object(s.jsx)("div",{className:k()(yr.a.linkSwitcher),children:A}),C?Object(s.jsxs)("div",{className:k()("container"),"data-aos":"fade-left",children:[Object(s.jsxs)("div",{className:yr.a.title,children:["You have one link from ",Object(s.jsx)("b",{children:C.name})," waiting for team ",Object(s.jsx)("b",{children:C.team})]}),Object(s.jsxs)("form",{className:yr.a.formWrapper,method:"POST",action:Be.a.resolve(he,"submit/gameLink"),onSubmit:B,children:[Object(s.jsxs)("div",{className:yr.a.input,children:[Object(s.jsx)("input",{type:"hidden",name:"id",value:C.id}),Object(s.jsx)("input",{type:"hidden",name:"tournamentId",value:C.tournamentId}),Object(s.jsx)("input",{type:"text",name:"link",placeholder:E})]}),Object(s.jsxs)("div",{className:yr.a.buttons,children:[Object(s.jsx)("button",{className:"button",onClick:r,children:"Later"}),Object(s.jsx)(v.b,{className:k()("button",yr.a.viewTournament),to:"/t/"+C.tournamentId,children:Object(s.jsx)(x.D,{})}),Object(s.jsx)("button",{className:"button",children:"Submit"})]})]})]}):null]}):null}var Nr=n(154),Cr=n.n(Nr);function Sr(e){var t=Object(c.useRef)(),n=Object(c.useReducer)((function(e){return e+1}),0),a=Object(f.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)([]),l=Object(f.a)(o,2),u=l[0],d=l[1],j=Object(c.useMemo)((function(){var t=e.search.get("iteration");return t&&isNaN(parseInt(t))?parseInt(t):0}),[e.search]),b=Object(c.useMemo)((function(){return u[j]}),[u,j]),h=Object(c.useState)({}),m=Object(f.a)(h,2),v=m[0],p=m[1];Object(c.useEffect)((function(){if(b){var e=function(){return p(b.getBoundingClientRect())};e();for(var t=[],n=0;n<10;n++)t.push(setTimeout(e,500*n));return function(){var e,n=Object(y.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;clearTimeout(a)}}catch(i){n.e(i)}finally{n.f()}}}}),[b]);var O=Object(c.useMemo)((function(){var t=e.search.get("width");return t?parseInt(t)/v.width:1}),[e.search,v]),g=Object(c.useCallback)((function(){var t='[data-embed-id="'.concat(e.search.get("embed"),'"]'),n=document.querySelectorAll(t);d(Array.from(n))}),[e.search]);return Object(c.useEffect)((function(){if(!u.length&&!(i>10)){var e=function(){g(),r()};i||e();var t=setTimeout(e,1e3);return function(){return clearTimeout(t)}}}),[u,g,r,i]),Object(c.useEffect)((function(){t.current&&b&&t.current.appendChild(b)}),[t,b]),Object(s.jsx)("div",{className:k()(Cr.a.cover,"scrollable"),children:Object(s.jsx)("div",{className:Cr.a.canvas,ref:t,style:{height:v.height,width:v.width,transform:"scale(".concat(O,")")},children:Object(s.jsx)("a",{className:Cr.a.brand,href:window.location.href.replace("?"+window.location.search,""),target:"_blank",rel:"noopener noreferrer",children:Object(s.jsx)("img",{src:"/images/brand.png"})})})})}g.a.init();var Lr=Date.now(),Mr=["/","pairings","standings","stats","tv","community","team","player","@","login"];function Rr(e){var t,n=function(e){for(var t=0;t<Mr.length;t++)if(Mr[t]===e)return t;for(var n=Mr.length;n>0;n--)if(e.includes(Mr[n]))return n;return.5}(e);t=.5===n?"home":Mr[n],_e.connected&&_e.emit("public_page",{section:t,tournament:n>0&&n<5?e.split("/")[1]:e.split("/")[2],time:(Date.now()-Lr)/6e4,mobile:He()}),Lr=Date.now()}function Pr(e,t){var n="";var a=[e,t].map((function(e){return Number(e.split("/").pop())})),i=Object(f.a)(a,2),r=i[0],s=i[1];return r&&s&&!isNaN(r)&&!isNaN(s)&&(s>r?n="right":r>s&&(n="left")),n}var Br={direction:"",referrer:"",currentPath:""};var Er=function(){var e=Object(c.useState)({}),t=Object(f.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)({}),r=Object(f.a)(i,2),o=r[0],l=r[1],u=Object(c.useState)(void 0),b=Object(f.a)(u,2),O=b[0],g=b[1],_=Object(c.useMemo)((function(){return void 0===O?void 0:!!O}),[O]),y=Object(c.useCallback)(Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge({url:"/endSession"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.prev=8,e.next=11,pe.remove("sessionID");case 11:return g(""),e.finish(8);case 13:case"end":return e.stop()}}),e,null,[[0,5,8,13]])}))),[g]),w=Object(c.useState)(Xa()),k=Object(f.a)(w,2),N=k[0],C=k[1],S=Object(c.useCallback)((function(){C(Xa())}),[C]);Object(c.useEffect)((function(){return window.addEventListener("theme",S),function(){return window.removeEventListener("theme",S)}}),[S]);var M=Object(c.useCallback)((function(){var e=document.getElementById("root");e&&(N||o.backgroundURL?e.classList.add("dark"):e.classList.remove("dark"),o.backgroundURL?e.style.backgroundImage="url(".concat(o.backgroundURL,")"):e.style.backgroundImage="")}),[o.backgroundURL,N]);Object(c.useEffect)((function(){M()}),[M]);var P=Object(c.useCallback)((function(){return Oe({url:"/profile",timeout:5e3}).then(l).catch(function(){var e=Object(m.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(404!==(null===(n=t.response)||void 0===n?void 0:n.status)){e.next=4;break}y(),e.next=6;break;case 4:return e.next=6,pe.remove("sessionID");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[l,y]),E=Object(c.useCallback)(Object(m.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.getAll();case 2:if(t=e.sent,n=t.sessionID){e.next=6;break}throw t;case 6:g(n);case 7:case"end":return e.stop()}}),e)}))),[g]);Object(c.useEffect)((function(){E().catch((function(){return g("")}))}),[E]),Object(c.useEffect)((function(){var e;e=O,_e.close(),_e=je()(he,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:1e5,reconnectionAttempts:5,query:{sessionID:e}})}),[O]),Object(c.useEffect)((function(){O&&P().catch(console.error)}),[O,P]);var A=Object(c.useState)({title:"",message:""}),T=Object(f.a)(A,2),W=T[0],U=T[1];return Object(c.useEffect)((function(){be=function(e,t){U({icon:Object(s.jsx)(x.C,{}),title:e,message:"string"===typeof t?t.startsWith("<!DOCTYPE html>")?Object(s.jsx)("div",{dangerouslySetInnerHTML:{__html:t}}):t:JSON.stringify(t,null,4),type:"error"})}}),[U]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(v.a,{basename:"",children:Object(s.jsxs)(L,{values:[[D,U],[R,{isLoggedIn:_,profile:o,updateProfile:P}],[I,a],[F,N?"dark":"light"]],children:[Object(s.jsx)(p.b,{render:function(e){var t,n=e.location;e.history;Br.currentPath.split("?").shift()!==n.pathname&&(Br=Object.assign(Br||{},{direction:Pr(Br.currentPath||n.pathname+n.search,n.pathname+n.search)||Br.direction,referrer:Br.currentPath||n.pathname+n.search,currentPath:n.pathname+n.search})||{}),n.state=Br,Rr(Br.referrer);var a=new URLSearchParams(n.search);return Object(s.jsxs)(L,{values:[[B,n]],children:[a.get("embed")?Object(s.jsx)(Sr,Object(j.a)({},{search:a})):null,Object(s.jsx)(dr,{setID:function(){},profile:o,referrer:null===(t=Br)||void 0===t?void 0:t.referrer,currentPath:n.pathname}),Object(s.jsxs)(p.d,{location:n,children:[Object(s.jsx)(p.b,{exact:!0,path:"/",render:function(e){return Object(s.jsx)(fi,Object(j.a)({},e))}}),Object(s.jsx)(p.b,{exact:!0,path:"/teams",component:Ri}),Object(s.jsx)(p.b,{exact:!0,path:"/news",component:pr}),Object(s.jsx)(p.b,{exact:!0,path:"/contact",component:xr}),Object(s.jsx)(p.b,{exact:!0,path:"/community",render:function(e){return Object(s.jsx)(gi,Object(j.a)({},e))}}),Object(s.jsx)(p.b,{path:"/me/",render:function(e){return!1===_?Object(s.jsx)(p.a,{to:{pathname:"/login",search:e.location.search,state:e.history.location.state}}):o.username?Object(s.jsx)(p.a,{push:!0,to:{pathname:e.location.pathname.replace("/me","/@/"+o.username),search:e.location.search,state:e.history.location.state}}):null}}),Object(s.jsx)(p.b,{path:"/@/:id",render:function(e){return Object(s.jsx)(Vi,Object(j.a)(Object(j.a)({},e),{},{id:e.match.params.id,profile:o,updateProfile:P,endSession:y}))}}),Object(s.jsx)(p.b,{path:"/reset/password",render:function(e){return Object(s.jsx)(on,Object(j.a)(Object(j.a)({},e),{},{isLoggedIn:_,mode:"reset/password",setSession:g,updateProfile:P}))}}),Object(s.jsx)(p.b,{path:"/login",render:function(e){var t=Br.referrer.split("?"),n=Object(f.a)(t,2),a=n[0],i=n[1];return _?Object(s.jsx)(p.a,{push:!0,to:{pathname:"/login"===a?"/me":a,search:i,state:e.history.location.state}}):Object(s.jsx)(on,Object(j.a)(Object(j.a)({},e),{},{isLoggedIn:_,mode:"login",setSession:g,updateProfile:P}))}}),Object(s.jsx)(p.b,{path:"/register",render:function(e){var t=Br.referrer.split("?"),n=Object(f.a)(t,2),a=n[0],i=n[1];return _?Object(s.jsx)(p.a,{push:!0,to:{pathname:"/register"===a?"/me":a,search:i,state:e.history.location.state}}):Object(s.jsx)(on,Object(j.a)(Object(j.a)({},e),{},{isLoggedIn:_,mode:"register",setSession:g,updateProfile:P}))}}),Object(s.jsx)(p.b,{path:"/player/:id/",render:function(e){return Object(s.jsx)($i,Object(j.a)(Object(j.a)({},e),{},{id:e.match.params.id,profile:o,type:"player"}))}}),Object(s.jsx)(p.b,{path:"/team/:id/",render:function(e){return Object(s.jsx)($i,Object(j.a)(Object(j.a)({},e),{},{id:e.match.params.id,profile:o,type:"team"}))}}),Object(s.jsx)(p.b,{path:"/g/:id",render:function(e){return Object(s.jsx)(yi,Object(j.a)({},e))}}),Object(s.jsx)(p.b,{path:"/t/:id/",render:function(e){return Object(s.jsx)(ui,Object(j.a)(Object(j.a)({},e),{},{profile:o}))}}),Object(s.jsx)(p.b,{path:"/tournament/:id/",render:function(e){var t=Br.referrer.split("?"),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(s.jsx)(p.a,{push:!0,to:{pathname:"/t/"+a.slice("/tournament/".length),search:i,state:e.history.location.state}})}}),["privacy","tos"].map((function(e,t){return Object(s.jsx)(p.b,{exact:!0,path:"/"+e,render:function(){return Object(s.jsx)(ki,{page:e})}},[e,t].join("."))})),Object(s.jsx)(p.b,{path:"/:id/",render:function(e){return[].concat(Object(d.a)(Object.keys(ur).map((function(e){return e.split("/")[1]}))),["tournament"]).includes(e.match.params.id)?Object(s.jsx)(p.b,{path:"*",component:ke,status:404}):Object(s.jsx)(p.a,{push:!0,to:{pathname:"/t"+e.location.pathname,search:Br.referrer.split("?")[1],state:e.history.location.state}})}}),Object(s.jsx)(p.b,{path:"*",component:ke,status:404})]}),Object(s.jsx)(mr,{})]})}}),Object(s.jsx)(wr,{}),Object(s.jsx)(kr,{}),Object(s.jsx)(oa,Object(j.a)({},W)),Object(s.jsx)(la,{notif:n,select:a})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(Er,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports={container:"dropdown_container__1hKRx",header:"dropdown_header__1BLxu",sent:"dropdown_sent__1kGzj",wrapper:"dropdown_wrapper__1ecPY",list:"dropdown_list__3lWIJ"}}},[[898,1,2]]]);
//# sourceMappingURL=main.9d8460ee.chunk.js.map