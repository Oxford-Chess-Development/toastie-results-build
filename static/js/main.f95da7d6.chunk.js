(this["webpackJsonpscorch-whiplash"]=this["webpackJsonpscorch-whiplash"]||[]).push([[0],{10:function(e,t,n){e.exports={score:"pairings_score__jjzQc",confirmed:"pairings_confirmed__3JGB8",finished:"pairings_finished__3bXeo",live:"pairings_live__2FsMM",watchLive:"pairings_watchLive__1AXzy",registered:"pairings_registered__3HdoN",scheduled:"pairings_scheduled__KBDmy",pending:"pairings_pending__3Geg4",aborted:"pairings_aborted__3FarP",pairingRound:"pairings_pairingRound__1LPA4",roundSelected:"pairings_roundSelected__3u_UO",nullRound:"pairings_nullRound__PaO8W",inner:"pairings_inner__1dqLU",subheader:"pairings_subheader__2Howu",searchBar:"pairings_searchBar__1ruUx",description:"pairings_description__1Wwzz",buttonList:"pairings_buttonList__3R6LZ",modeSwitcher:"pairings_modeSwitcher__1N9i1",flag:"pairings_flag__ddtBP",join:"pairings_join__1hsO8"}},114:function(e,t,n){e.exports={container:"fullscreen_container__2tyD_",fullScreenHeader:"fullscreen_fullScreenHeader__Sk0XW",stage:"fullscreen_stage__3CBkW"}},17:function(e,t,n){e.exports={draggable:"components_draggable__rJSIu","move-to-corner":"components_move-to-corner__CbSvi",shade:"components_shade__oaV5H",section:"components_section__3L2EN","vertical-split":"components_vertical-split__1eL-F",lightBoxContent:"components_lightBoxContent__2-Td2",lightBoxTitle:"components_lightBoxTitle__1fG59",error:"components_error__nRzRn",dateTime:"components_dateTime__JY3-8",footer:"components_footer__3wxjM",resolve:"components_resolve__2VQRP",reject:"components_reject__3WL-m",divide:"components_divide__YssXY",collapsed:"components_collapsed__460RI"}},18:function(e,t,n){e.exports={stage:"nav_stage__1vB7T",profilePicture:"nav_profilePicture__141LM",nameContainer:"nav_nameContainer__2_YKB",name:"nav_name__1IBcg",infoBox:"nav_infoBox__2e2-O",preload:"nav_preload__1GOdN",extra:"nav_extra__1qxiB",rules:"nav_rules__1WSvv",website:"nav_website__2OLjk",buttonContainer:"nav_buttonContainer__2SIed",linkButtons:"nav_linkButtons__2b24N",linkButton:"nav_linkButton__XGxZ6",defaultProfilePicture:"nav_defaultProfilePicture__2vO-7",tieBreakLink:"nav_tieBreakLink__2Uo-v",tieBreakSection:"nav_tieBreakSection__1Ub8g",tieBreakContainer:"nav_tieBreakContainer__1wYkK",visible:"nav_visible__2r8FP",tieBreakTitle:"nav_tieBreakTitle__HTdz5",tieBreaks:"nav_tieBreaks__1hSeL","slide-in-from-left":"nav_slide-in-from-left__tJEaU"}},187:function(e,t,n){e.exports=n.p+"static/media/watch.ddf443c3.svg"},188:function(e,t,n){e.exports=n.p+"static/media/twitch.e1f7813a.svg"},189:function(e,t,n){e.exports=n.p+"static/media/youtube.46bc6904.svg"},19:function(e,t,n){e.exports={container:"profile_container__27sVG",title:"profile_title__Ak4SC",grid:"profile_grid__2kEJv",details:"profile_details__C2wH5",flag:"profile_flag__2tAkt",info:"profile_info__3Ui0W",contact:"profile_contact__cYLQ9",notes:"profile_notes__2hXjx",background:"profile_background__2GT4H",stage:"profile_stage__3V8AX",teamStage:"profile_teamStage___fyFg",box:"profile_box__2_rbN",name:"profile_name__zfYEs",history:"profile_history__1hRUG",resultsRow:"profile_resultsRow__2MHM2",small:"profile_small__1Nesz",fieldBox:"profile_fieldBox__1KRg3",subtitle:"profile_subtitle__1eHdZ",scores:"profile_scores__EovBc",row:"profile_row__1x0hb",key:"profile_key__kxLXO",value:"profile_value__3x0Cs",currRound:"profile_currRound__3rmKa",nextRound:"profile_nextRound__DNlHe",action:"profile_action__2AM0r"}},190:function(e,t,n){e.exports=n.p+"static/media/chessCom.228db28e.svg"},191:function(e,t,n){e.exports=n.p+"static/media/lichess.9ff6e305.svg"},192:function(e,t,n){e.exports=n.p+"static/media/ecf.68e0df94.svg"},193:function(e,t,n){e.exports=n.p+"static/media/fide.03cb669d.svg"},194:function(e,t,n){e.exports=n.p+"static/media/zoom.83081771.svg"},196:function(e,t,n){},211:function(e,t,n){},22:function(e,t,n){e.exports={container:"home_container__1Uj13",section:"home_section__1RrkC",title:"home_title__1fMaE",announcements:"home_announcements__3hzqx",tableAnnounce:"home_tableAnnounce__1fX3a",yourTournaments:"home_yourTournaments__2L6My",tournaments:"home_tournaments__2sp_F",sectionHeader:"home_sectionHeader__29bWV",sizer:"home_sizer__133Km",notificationRow:"home_notificationRow__Vijgj",expando:"home_expando__3ZujP",rowLink:"home_rowLink__17Iz9",tournamentLink:"home_tournamentLink__23A_D",iconLink:"home_iconLink__1VqvH",connected:"home_connected__2PQfY",disconnected:"home_disconnected__2Dr6p",logout:"home_logout__3KF14",info:"home_info__3gxo5",buttons:"home_buttons__3nVeI",row:"home_row__3ZIK1",details:"home_details__2Xzci",account:"home_account__1cCrT",sync:"home_sync__bMQ5B",new:"home_new__2ecUP"}},23:function(e){e.exports=JSON.parse('{"server":"http://192.168.1.225:8080/","prodServer":"https://api.scorchapp.co.uk/","useProd":true,"prodDomain":"scorchapp.co.uk","flags":"https://ratings.fide.com/svg/|.svg","lichess":"QbFvChDTNzA9oLse","lichessBeta":"pdUYlK2nMo6sL2Tc","lichessCallback":"https://api.scorchapp.co.uk/callback/lichess","lichessCallbackBeta":"http://localhost:8080/callback/lichess"}')},24:function(e,t,n){e.exports={header:"header_header__he_1K",buttonContainer:"header_buttonContainer__2xYiA",button:"header_button__2n59F",nameWrapper:"header_nameWrapper__1bAW5",logoWrapper:"header_logoWrapper__3v8Kd",headerButton:"header_headerButton__2xRWH",selected:"header_selected__1xEF_",installer:"header_installer__3DfuB",icons:"header_icons__1W-ol",native:"header_native__1iD8X",notifications:"header_notifications__2g07F",mobileMenu:"header_mobileMenu__3dnCC",menuButton:"header_menuButton__28Um6",unseen:"header_unseen__1Yqcb",inlineNotif:"header_inlineNotif__B6wgl",inlineNotifContent:"header_inlineNotifContent__3wqe7",inlineNotifDate:"header_inlineNotifDate__1CmXu"}},27:function(e,t,n){e.exports={container:"streams_container__2JvcN",streamHeader:"streams_streamHeader__DKPjP",streamContainer:"streams_streamContainer__2IUUF",player:"streams_player__2DTT5",twitchChat:"streams_twitchChat__46a4m","move-to-corner":"streams_move-to-corner__HBHbb",chat:"streams_chat__34Cjy",footer:"streams_footer__1nnZ3",twitchPlayer:"streams_twitchPlayer__3qnZh"}},29:function(e,t,n){e.exports={fireworksSection:"results_fireworksSection__2fXqz",resultsScreen:"results_resultsScreen__26gN-",place:"results_place__1N8zz",position:"results_position__2gVin",teamName:"results_teamName__2MtlJ",table:"results_table__3xXKH",key:"results_key__34g-2",standingsButton:"results_standingsButton__2cV32",value:"results_value__1l55_",flag:"results_flag__2dIeV"}},290:function(e){e.exports=JSON.parse('{"AFG":"Afghanistan","ALA":"Aland Islands","ALB":"Albania","DZA":"Algeria","ASM":"American Samoa","AND":"Andorra","AGO":"Angola","AIA":"Anguilla","ATA":"Antarctica","ATG":"Antigua and Barbuda","ARG":"Argentina","ARM":"Armenia","ABW":"Aruba","AUS":"Australia","AUT":"Austria","AZE":"Azerbaijan","BHS":"Bahamas","BHR":"Bahrain","BGD":"Bangladesh","BRB":"Barbados","BLR":"Belarus","BEL":"Belgium","BLZ":"Belize","BEN":"Benin","BMU":"Bermuda","BTN":"Bhutan","BOL":"Bolivia","BIH":"Bosnia and Herzegovina","BWA":"Botswana","BVT":"Bouvet Island","BRA":"Brazil","VGB":"British Virgin Islands","IOT":"British Indian Ocean Territory","BRN":"Brunei Darussalam","BUL":"Bulgaria","BFA":"Burkina Faso","BDI":"Burundi","KHM":"Cambodia","CMR":"Cameroon","CAN":"Canada","CPV":"Cape Verde","CYM":"Cayman Islands","CAF":"Central African Republic","TCD":"Chad","CHI":"Chile","CHN":"China","HKG":"Hong Kong, SAR China","MAC":"Macao, SAR China","CXR":"Christmas Island","CCK":"Cocos (Keeling) Islands","COL":"Colombia","COM":"Comoros","COG":"Congo (Brazzaville)","COD":"Congo, (Kinshasa)","COK":"Cook Islands","CRI":"Costa Rica","CIV":"C\xf4te d\'Ivoire","HRV":"Croatia","CUB":"Cuba","CYP":"Cyprus","CZE":"Czech Republic","DNK":"Denmark","DJI":"Djibouti","DMA":"Dominica","DOM":"Dominican Republic","ECU":"Ecuador","EGY":"Egypt","SLV":"El Salvador","GNQ":"Equatorial Guinea","ERI":"Eritrea","EST":"Estonia","ETH":"Ethiopia","FLK":"Falkland Islands (Malvinas)","FAI":"Faroe Islands","FJI":"Fiji","FIN":"Finland","FRA":"France","GUF":"French Guiana","PYF":"French Polynesia","ATF":"French Southern Territories","GAB":"Gabon","GMB":"Gambia","GEO":"Georgia","GER":"Germany","GHA":"Ghana","GIB":"Gibraltar","GRE":"Greece","GRL":"Greenland","GRD":"Grenada","GLP":"Guadeloupe","GUM":"Guam","GTM":"Guatemala","GGY":"Guernsey","GIN":"Guinea","GNB":"Guinea-Bissau","GUY":"Guyana","HTI":"Haiti","HMD":"Heard and Mcdonald Islands","VAT":"Holy See (Vatican City State)","HND":"Honduras","HUN":"Hungary","ISL":"Iceland","IND":"India","IDN":"Indonesia","IRN":"Iran, Islamic Republic of","IRQ":"Iraq","IRL":"Ireland","IMN":"Isle of Man","ISR":"Israel","ITA":"Italy","JAM":"Jamaica","JPN":"Japan","JEY":"Jersey","JOR":"Jordan","KAZ":"Kazakhstan","KEN":"Kenya","KIR":"Kiribati","PRK":"Korea (North)","KOR":"Korea (South)","KWT":"Kuwait","KGZ":"Kyrgyzstan","LAO":"Lao PDR","LVA":"Latvia","LBN":"Lebanon","LSO":"Lesotho","LBR":"Liberia","LBY":"Libya","LIE":"Liechtenstein","LTU":"Lithuania","LUX":"Luxembourg","MKD":"Macedonia, Republic of","MDG":"Madagascar","MWI":"Malawi","MAS":"Malaysia","MDV":"Maldives","MLI":"Mali","MLT":"Malta","MHL":"Marshall Islands","MTQ":"Martinique","MRT":"Mauritania","MUS":"Mauritius","MYT":"Mayotte","MEX":"Mexico","FSM":"Micronesia, Federated States of","MDA":"Moldova","MCO":"Monaco","MNG":"Mongolia","MNE":"Montenegro","MSR":"Montserrat","MAR":"Morocco","MOZ":"Mozambique","MMR":"Myanmar","NAM":"Namibia","NRU":"Nauru","NPL":"Nepal","NLD":"Netherlands","ANT":"Netherlands Antilles","NCL":"New Caledonia","NZL":"New Zealand","NIC":"Nicaragua","NER":"Niger","NGA":"Nigeria","NIU":"Niue","NFK":"Norfolk Island","MNP":"Northern Mariana Islands","NOR":"Norway","OMN":"Oman","PAK":"Pakistan","PLW":"Palau","PSE":"Palestinian Territory","PAN":"Panama","PNG":"Papua New Guinea","PRY":"Paraguay","PER":"Peru","PHI":"Philippines","PCN":"Pitcairn","POL":"Poland","POR":"Portugal","PRI":"Puerto Rico","QAT":"Qatar","REU":"R\xe9union","ROU":"Romania","RUS":"Russian Federation","RWA":"Rwanda","BLM":"Saint-Barth\xe9lemy","SHN":"Saint Helena","KNA":"Saint Kitts and Nevis","LCA":"Saint Lucia","MAF":"Saint-Martin (French part)","SPM":"Saint Pierre and Miquelon","VCT":"Saint Vincent and Grenadines","WSM":"Samoa","SMR":"San Marino","STP":"Sao Tome and Principe","SAU":"Saudi Arabia","SEN":"Senegal","SRB":"Serbia","SYC":"Seychelles","SLE":"Sierra Leone","SGP":"Singapore","SVK":"Slovakia","SLO":"Slovenia","SLB":"Solomon Islands","SOM":"Somalia","RSA":"South Africa","SGS":"South Georgia and the South Sandwich Islands","SSD":"South Sudan","ESP":"Spain","LKA":"Sri Lanka","SDN":"Sudan","SUR":"Suriname","SJM":"Svalbard and Jan Mayen Islands","SWZ":"Swaziland","SWE":"Sweden","CHE":"Switzerland","SYR":"Syrian Arab Republic (Syria)","TWN":"Taiwan, Republic of China","TJK":"Tajikistan","TZA":"Tanzania, United Republic of","THA":"Thailand","TLS":"Timor-Leste","TGO":"Togo","TKL":"Tokelau","TON":"Tonga","TTO":"Trinidad and Tobago","TUN":"Tunisia","TUR":"Turkey","TKM":"Turkmenistan","TCA":"Turks and Caicos Islands","TUV":"Tuvalu","UGA":"Uganda","UKR":"Ukraine","ARE":"United Arab Emirates","ENG":"England","SCO":"Scotland","WLS":"Wales","USA":"United States of America","UMI":"US Minor Outlying Islands","URY":"Uruguay","UZB":"Uzbekistan","VUT":"Vanuatu","VEN":"Venezuela (Bolivarian Republic)","VNM":"Viet Nam","VIR":"Virgin Islands, US","WLF":"Wallis and Futuna Islands","ESH":"Western Sahara","YEM":"Yemen","ZMB":"Zambia","ZWE":"Zimbabwe"}')},300:function(e,t,n){e.exports=n(656)},305:function(e,t,n){},31:function(e,t,n){e.exports={container:"community_container__2CFR0",userTable:"community_userTable__aEYHO",status:"community_status__3tqhb",profile:"community_profile__3LLZ3",title:"community_title__h6wJa",searchBar:"community_searchBar__32G7B"}},32:function(e,t,n){e.exports={container:"chesscom_container__vhkD8",results:"chesscom_results__zjsIz",score:"chesscom_score__3jmhK",wrapper:"chesscom_wrapper__35uxX",boardlabel:"chesscom_boardlabel__394gP",boardLabel:"chesscom_boardLabel__2ThNI",gameViewWrapper:"chesscom_gameViewWrapper__1ninU",board:"chesscom_board__2DH3-","fade-in":"chesscom_fade-in__13dOU",row:"chesscom_row__dxX_z",square:"chesscom_square__HiFz4",W:"chesscom_W__3aJdG",B:"chesscom_B__2iwwI",null:"chesscom_null__1h49B",active:"chesscom_active__GV4qN",loading:"chesscom_loading__W8sFc",spin:"chesscom_spin__3DATj"}},350:function(e,t){},38:function(e,t,n){e.exports={th:"crosstable_th__pj-Am",round:"crosstable_round__3EoJh",headerCell:"crosstable_headerCell__1aQ1w",tr:"crosstable_tr__3f5JF",footer:"crosstable_footer__2YrnX"}},447:function(e,t,n){},452:function(e,t){},454:function(e,t){},485:function(e,t){},486:function(e,t){},5:function(e,t,n){e.exports={container:"user_container__1mr9O",section:"user_section__3RTS8",title:"user_title__29Qs0",sectionHeader:"user_sectionHeader__3Idz6",expando:"user_expando__3T4Fc",info:"user_info__1o03g",buttons:"user_buttons__TdIPh",row:"user_row__2p2ZJ",details:"user_details__3X4fl",bio:"user_bio__YxjVn",flag:"user_flag__fc4z8",accountSection:"user_accountSection__2J_XZ",optionsContainer:"user_optionsContainer__51sAJ",pendingContainer:"user_pendingContainer__1f5o_",account:"user_account__1fQ8n",claim:"user_claim__2RZYl",inline:"user_inline__3tW_H",icon:"user_icon__2KLvB",active:"user_active__13iZR",facebookLink:"user_facebookLink__9BYQJ",accountButton:"user_accountButton__2sbSy",remove:"user_remove__2nepm",notes:"user_notes__3RQc6",sync:"user_sync__NRl3v",auth:"user_auth__1Ro4q",null:"user_null__3mPjs",authMessage:"user_authMessage__382B3",upcomingBattle:"user_upcomingBattle__1r7wk",stage:"user_stage__H3FCv",reversed:"user_reversed__14Jih",name:"user_name__1LV0D",vs:"user_vs__1OuA6",round:"user_round__3Zh5N",join:"user_join__f-7Wk",gameLink:"user_gameLink__3MLUz",infoBox:"user_infoBox__12Gk1",clickButton:"user_clickButton__R6BS-",darkMode:"user_darkMode__2a4PT",merge:"user_merge__2w0hW",teamMerge:"user_teamMerge__uzblo"}},529:function(e,t,n){},59:function(e,t,n){e.exports={container:"meta_container__3XHHO",nav:"meta_nav__2SWL6",divider:"meta_divider__3qVgx",announcement:"meta_announcement__2yo4r"}},647:function(e,t){},65:function(e,t,n){e.exports={fsChart:"stats_fsChart__1bkCZ",title:"stats_title__1RyDZ",subtitle:"stats_subtitle__cJGON",name:"stats_name__VnA4Q",url:"stats_url__oDPQ0",header:"stats_header__2EQDA"}},656:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"useLink",(function(){return Yn})),n.d(a,"useClub",(function(){return Zn})),n.d(a,"useVerify",(function(){return Xn}));var r={};n.r(r),n.d(r,"useLink",(function(){return la})),n.d(r,"handleSync",(function(){return sa}));var i={};n.r(i),n.d(i,"useFacebook",(function(){return ua}));var o=n(1),c=n.n(o),l=n(30),s=n.n(l),u=(n(305),n(7)),m=n.n(u),d=n(13),f=n(2),h=n(6),p=n(58),v=n(16),b=n(106),g=n.n(b),E=n(23),j=n(14),y=n(15),_=new(n(293).a),k=function(){function e(){Object(j.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=_.getAll();return Promise.resolve(e)}},{key:"get",value:function(e){return Promise.resolve(_.get(e)||"")}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/",maxAge:604800};return Promise.resolve(_.set(e,t,n))}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/"};return Promise.resolve(_.remove(e,t))}}]),e}(),w=n(158),O=n.n(w),N=/chess\.com\/(?:live#tm=|club\/matches\/live\/(?:[a-z-]+\/)?)([0-9]+)/,C=/dark/gi,S=/(?:https:\/\/)?(?:www.)?(?:(twitch.tv|youtube.com))\/(.*)/,x=/(?:https:\/\/)?(?:www.)?([a-z.]*)\/?(?:.*)?/,M=/[a-z0-9]*/gi,R=[/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i],P=/^[a-z0-9][\w-]{0,28}[a-z0-9]$/i;function L(){var e=navigator.userAgent||navigator.vendor||"";return!!R[0].test(e)||!!R[1].test(e.substr(0,4))}var A=function(){};console.log("isDev",!1);var T=E.prodServer,B=(E.prodDomain,E.lichess),I=E.lichessCallback,D=g.a.create({baseURL:T}),F=new k;function U(e){return e=Object.assign(e,{method:"GET"}),D(e).then((function(e){return e.data})).catch((function(e){throw console.error(e),e}))}function W(e){return e=Object.assign(e,{method:"POST",headers:{"Content-Type":"application/json"}}),D(e).then((function(e){return e.data})).catch((function(t){if(e.noCatch)throw t;throw t.response&&(400===t.response.status?A("Error:",t.response.data):A("".concat(t.response.status," ").concat(t.response.statusText,": /").concat(t.response.config.url.split("/").pop()),t.response.data)),t}))}function G(e){e.preventDefault&&e.preventDefault(),e.persist&&e.persist();for(var t=e.target;"HTMLFormElement"!==t.constructor.name&&t.parentElement;)t=t.parentElement;if("HTMLFormElement"!==t.constructor.name)throw new Error("Couldn't find valid form");return W({data:Array.from(t).reduce((function(e,t){return t.name?("submit"===t.name||("number"===t.type?e[t.name]=Number(t.value):e[t.name]=t.value),e):e}),{}),url:t.action})}L()||D.interceptors.request.use(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=t,e.t2=Object,e.t3=t.headers,e.t4=JSON,e.next=7,F.getAll();case 7:return e.t5=e.sent,e.t6=e.t4.stringify.call(e.t4,e.t5),e.t7={Authorization:e.t6},e.t8=e.t2.assign.call(e.t2,e.t3,e.t7),e.t9={headers:e.t8},e.abrupt("return",e.t0.assign.call(e.t0,e.t1,e.t9));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var H=O()(T,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:1e5,reconnectionAttempts:5});var z=n(10),V=n.n(z),q=n(4),K=n(107),Y=n(108),J=n(187),Z=n.n(J),X=(n(188),n(189),n(190)),Q=n.n(X),$=n(191),ee=n.n($),te=(n(192),n(193),n(194)),ne=n.n(te),ae=n(275),re=n.n(ae);function ie(e){return e?e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase():e}function oe(e){var t,n=Object.keys(e.sections).find((function(t){return e.section===t}))||Object.keys(e.sections)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:[V.a.modeSwitcher,null===(t=e.classNames)||void 0===t?void 0:t.switcher].join(" ")},Object.entries(e.sections).map((function(t,a){var r=Object(f.a)(t,2),i=r[0],o=r[1];return o.hide?null:e.loaded?c.a.createElement(h.b,{to:o.link,key:["header-button",a].join("."),className:["header-button",n===i?"selected":""].join(" ")},c.a.createElement("div",null,o.icon,o.name||ie(i))):c.a.createElement("div",{className:["header-button"].join(" "),key:["header-button",a].join(" ")},"\u200b")}))))}function ce(e){var t=Object(o.useContext)(ga),n=Object(o.useState)(""),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return t?null:i("/login")}),[t,i]);return r?c.a.createElement(p.a,{to:r}):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:[V.a.modeSwitcher].join(" ")},e.loaded.all?e.round?c.a.createElement(h.b,{to:"/t/".concat(e.id,"/pairings"),className:["header-button","pairings"===e.section?"selected":""].join(" ")},c.a.createElement("div",null,c.a.createElement(q.a,null),"Pairings")):null:c.a.createElement("div",{className:"header-button"},"\u200b"),e.loaded.all?c.a.createElement(h.b,{to:"/t/".concat(e.id,"/standings"),className:["header-button","standings"===e.section?"selected":""].join(" ")},c.a.createElement("div",null,c.a.createElement(K.b,null)," Standings")):c.a.createElement("div",{className:"header-button"},"\u200b"),e.loaded.all?c.a.createElement(h.b,{to:"/t/".concat(e.id,"/stats"),className:["header-button","stats"===e.section?"selected":""].join(" ")},c.a.createElement("div",null,c.a.createElement(Y.a,null)," Stats")):c.a.createElement("div",{className:"header-button"},"\u200b"),e.loaded.all?e.settings.streamURL?c.a.createElement(h.b,{to:"/t/".concat(e.id,"/tv"),className:["header-button","stream-link","stats"===e.section?"selected":"","twitch-link"].join(" ")},c.a.createElement("div",null,c.a.createElement("img",{src:Z.a,alt:"tv"})," TV")):null:c.a.createElement("div",{className:["header-button","stream-link","twitch-link"].join(" ")},"\u200b")),e.settings.allowRegistration&&"closed"!==e.settings.allowRegistration?c.a.createElement("div",{className:["header-button",V.a.join].join(" "),onClick:l},c.a.createElement("div",null,c.a.createElement(q.K,null),"Join this tournament")):null)}function le(e){var t=Object(o.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)((function(){return U({url:"tournament/".concat(e.id,"/fetchRounds")}).then(r)}),[e.id,r]);Object(o.useEffect)((function(){i()}),[i]);for(var l=e.loaded.status&&"pairings"===e.section&&e.round&&!e.status.active,s=[],u=e.settings.totalRounds===1/0||"Infinity"===e.settings.totalRounds?1:e.settings.totalRounds,m=1;m<u+1;m++){var d=a[m]?new Date(a[m]).toString():"";s.push(c.a.createElement(h.b,{className:["header-button",V.a.pairingRound,e.round===m?V.a.roundSelected:"",m>e.status.round?V.a.nullRound:""].join(" "),to:"/t/".concat(e.id,"/").concat(e.section,"/").concat(m),key:["round",m].join(".")},c.a.createElement("div",{className:"full-text"},e.loaded.all?c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",null,l?"":"Round ",m),a[m]?c.a.createElement("h5",null,d.substring(0,11)+d.substring(16,21)):null):"\u200b")))}return l&&s.push(c.a.createElement(h.b,{className:["header-button",V.a.pairingRound,e.round===u+1?V.a.roundSelected:""].join(" "),to:"/t/".concat(e.id,"/").concat(e.section,"/results")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,"Results"),a[u+1]?c.a.createElement("h5",null,new Date(a[u+1]).toString().substring(0,11)+new Date(a[u+1]).toString().substring(16,21)):null))),c.a.createElement("div",{className:["container","bodyContainer"].join(" ")},s.length?c.a.createElement("div",{className:"button-list"},s):null)}var se=n(64),ue={score:0,gamePoints:0,played:0,gamesPlayed:0,gameDifference:0,expectedScore:0,expectedGameScore:0,whiteTotal:0,wins:0,draws:0,losses:0,matchPercentage:0,gamePercentage:0,ratingDifference:0},me=function(){function e(t,n,a){Object(j.a)(this,e),this.round=n,this.settings=a,this.rounds=void 0,this.tournamentId=void 0,this.id=void 0,this.firstName=void 0,this.lastName=void 0,this.rating=void 0,this.nationality=void 0,this.score=void 0,this.gamePoints=void 0,this.played=void 0,this.expectedScore=void 0,this.expectedGameScore=void 0,this.whiteTotal=void 0,this.isPlaying=void 0,this.active=void 0,this.performanceRating=void 0,this.histories=void 0,this.bonuses=void 0,this.clashList=void 0,this.contact=void 0,this.lichess=void 0,this.chessCom=void 0,this.meta=void 0,this.teamId=void 0,this.createdAt=void 0,this.updatedAt=void 0,this._netGamePoint=void 0,this._progressiveScore=void 0,this._oppRatingSum=void 0;for(var r=Object.keys(ue),i=0,o=Object.keys(t);i<o.length;i++){var c=o[i];r.includes(c)||Object.defineProperty(this,c,{value:t[c]})}"bye"!==this.id&&this.compute(n,a)}return Object(y.a)(e,[{key:"setRound",value:function(e){this.round=e,this.compute(e,this.settings)}},{key:"setSettings",value:function(e){this.settings=e,this.compute(this.round,e)}},{key:"setBonuses",value:function(e){var t=this;this.bonuses=e.filter((function(e){return e.id===t.id})),this.compute(this.round,this.settings)}},{key:"compute",value:function(e,t){for(var n=Object.assign({},ue),a=1;a<e+1;a++){var r=this.histories[a];r&&(null!==r.match&&("bye"!==r.id&&(n.played++,r.played&&(n.gamesPlayed+=r.played)),0===r.match?(n.score+=t.lossReward,n.losses++):.5===r.match?(n.score+=t.drawReward,n.draws++):1===r.match&&(n.score+=t.winReward,n.wins++),r.game&&(n.gamePoints+=r.game),n.expectedScore+=r.expected,n.expectedGameScore+=r.expected*r.played),"W"===r.colour&&n.whiteTotal++)}if(Object.assign(n,{gameDifference:2*n.gamePoints-n.gamesPlayed,matchPercentage:n.played?100*n.score/n.played:-1,gamePercentage:n.gamesPlayed?100*n.gamePoints/n.gamesPlayed:-1,ratingDifference:this.performanceRating-this.rating}),this.bonuses){var i,o=Object(v.a)(this.bonuses);try{for(o.s();!(i=o.n()).done;){var c=i.value;c.round>e||(c.MP&&(n.score+=c.MP),c.GP&&(n.gamePoints+=c.GP))}}catch(f){o.e(f)}finally{o.f()}}for(var l=0,s=Object.keys(n);l<s.length;l++){var u=s[l];Object.defineProperty(this,u,{value:n[u],configurable:!0})}for(var m=[""],d=1;d<this.histories.length;d++)d>e||!this.histories[d]?m[d]="":(null===this.histories[d].match||void 0===this.histories[d].match?m[d]="*":m[d]=this.histories[d].match.toString(),"bye"===this.histories[d].id&&(m[d]+="b"));return this.rounds=m.slice(1),this}},{key:"hasPlayed",value:function(e){return!!this.histories&&this.histories.some((function(t){return t.id&&t.id===e}))}},{key:"scoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.match?t+=n.match:t}),0):0}},{key:"gameScoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.game?t+=n.game:t}),0):0}},{key:"rank",get:function(){return 0}},{key:"name",get:function(){return"individual"===this.settings.competitors?[this.firstName,this.lastName].join(" "):this.firstName}},{key:"netGamePoint",get:function(){if(this._netGamePoint)return this._netGamePoint;if(!this.histories)return 0;var e=0,t=0;return this.histories.forEach((function(n){n&&(e+=n.game||0,t+=n.played)})),this._netGamePoint=2*e-t}},{key:"progressiveScore",get:function(){if(this._progressiveScore)return this._progressiveScore;if(!this.histories)return 0;var e,t=0,n=Object(v.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(a.match&&(t+=a.match))}}catch(r){n.e(r)}finally{n.f()}return this._progressiveScore=t}},{key:"oppRatingSum",get:function(){if(this._oppRatingSum)return this._oppRatingSum;if(!this.histories)return 0;var e,t=0,n=Object(v.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(t+=a.oppRating)}}catch(r){n.e(r)}finally{n.f()}return this._oppRatingSum=t}}],[{key:"bye",value:function(t,n,a){return new e({id:"bye",tournamentId:t,rating:0,firstName:"",lastName:"",histories:[]},n,a)}}]),e}(),de=n(45),fe=n.n(de),he=[];function pe(e){var t=Object(o.useState)(!1),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)([]),c=Object(f.a)(i,2),l=c[0],s=c[1],u=Object(o.useCallback)((function(t,n){switch(n){case"props":return e.players.length?e.players.map((function(t){return new me(t,e.round,e.settings)})):t;case"round":if(!e.round)return t;if(!t.length)return t;var a,r=t.slice(0),i=Object(v.a)(r);try{for(i.s();!(a=i.n()).done;){a.value.setRound(e.round)}}catch(d){i.e(d)}finally{i.f()}return r;case"settings":return e.settings.winReward?e.players.map((function(t){return new me(t,e.round,e.settings)})):t;case"bonuses":if(!l.length)return t;if(!t.length)return t;var o,c=!1,s=t.slice(0),u=Object(v.a)(l);try{var m=function(){var e=o.value,t=s.findIndex((function(t){return t.id===e.id}));if(t<0)return"continue";s[t].bonuses||(s[t].setBonuses(l),c=!0)};for(u.s();!(o=u.n()).done;)m()}catch(d){u.e(d)}finally{u.f()}return c?s:t;default:return t}}),[e.players,e.round,e.settings,l]),m=Object(o.useReducer)(u,he),d=Object(f.a)(m,2),h=d[0],p=d[1];Object(o.useEffect)((function(){p("props")}),[p,e.players]),Object(o.useEffect)((function(){p("settings")}),[p,e.settings]),Object(o.useEffect)((function(){p("round")}),[p,e.round]),Object(o.useEffect)((function(){l.length&&p("bonuses")}),[p,l]);var b=Object(o.useCallback)((function(){return e.status.id&&!a?U({url:fe.a.resolve(T,["tournament",e.status.id,"fetchBonuses"].join("/"))}).then(s).finally((function(){return r(!0)})):null}),[e.status.id,s,r,a]);return Object(o.useEffect)((function(){a||b()}),[b,a,r]),a?h:he}var ve=n(38),be=n.n(ve),ge={pre:{rank:{mobile:"Rank",name:"",className:"blank",sort:!1,postConvert:function(e,t){return(1+t).toString()}},name:{name:"Name",className:"playerName",id:function(e,t,n){return["","individual"===n.competitors?"player":"team",e.id].join("/")},sort:function(e,t){return e>t?1:e<t?-1:0}},nationality:{name:"Fed",mobile:"Federation",className:"flag",convert:function(e){return e?c.a.createElement("img",{src:E.flags.replace("|",e),alt:e}):null}},rating:{name:"Rating",className:"locked",show:function(e,t,n){return n.showRatings}}},roundColumn:{name:function(e,t){return e.slice(-1)},id:function(e,t,n){if(!e.histories||!e.histories[t]||null===e.histories[t].match)return"";var a=e.histories[t],r=a.colour,i="W"===r?e.id:a.id,o="W"===r?a.id:e.id;return["","t",n.vanityURL||e.tournamentId,"pairings",t].join("/")+"#"+[i,o].join(".")},className:function(e,t,n){return"*"===e?"edit":""===e?"unset":"playerName"},convert:function(e,t,n,a){if(""===e)return"";if("*"===e)return"*";var r=!1,i=Number(a.slice(-1));if(t.bonuses){var o,c=Object(v.a)(t.bonuses);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.round===i&&(e+=l.MP,r=!0)}}catch(m){c.e(m)}finally{c.f()}}var s,u=parseFloat(e);return s=.5===u?"\xbd":u.toString(),e.endsWith("b")&&(s+="b"),r&&(s+="*"),s},sort:function(e,t){if(e===t)return 0;if(""===e)return 1;if(""===t)return-1;if("*"===e)return 1;if("*"===t)return-1;var n=[parseInt(e),parseInt(t)],a=n[0],r=n[1];return e.toString().endsWith("b")&&(a-=.001),t.toString().endsWith("b")&&(r-=.001),r-a}},post:{score:{mobile:"Match Points",name:"MP",className:"locked",convert:function(e,t){return Math.floor(e)===e?e.toFixed():.5===e?"\xbd":Math.floor(e).toFixed()+"\xbd"}},gamePoints:{mobile:"Game Points",name:"GP",className:"locked",convert:function(e,t){return Math.floor(e)===e?e.toFixed():.5===e?"\xbd":Math.floor(e).toFixed()+"\xbd"}},gameDifference:{mobile:"Game Point Difference",brief:"Game Point +/-",name:"G. +/-",className:"locked",convert:function(e){return e?e>0?"+"+e.toFixed(1):e.toFixed(1):""}},gamesPlayed:{mobile:"Games Played",name:"P",className:"locked",convert:function(e){return e.toString()}},matchPercentage:{mobile:"Match Point Percentage",brief:"Match Point +/-",name:"M. %",className:"rating",convert:function(e){return e.toFixed()}},gamePercentage:{mobile:"Game Point Percentage",brief:"Game Point %",name:"G. %",className:"rating",convert:function(e){return e.toFixed()}},performanceRating:{mobile:"Performance Rating",brief:"Perf. Rating",name:"Perf",className:"rating",convert:function(e){return e.toFixed()},show:function(e,t,n){return n.showRatings}},ratingDifference:{mobile:"Performance Rating Difference",brief:"Perf. Rating +/-",name:"P. +/-",className:"rating",convert:function(e){return e?e>0?"+"+e.toString():e.toString():""},show:function(e,t,n){return n.showRatings}},expectedScore:{mobile:"Expected Score",name:"Expected",className:"rating",convert:function(e,t){return e.toFixed(1)+" / "+t.played},show:function(e,t,n){return n.showRatings}},expectedDifference:{mobile:"Score to Expected",brief:"Expected +/-",name:"E. +/-",className:"rating",convert:function(e){return"undefined"===typeof e?"":e>0?"+"+e.toFixed(2):e.toFixed(2)},show:function(e,t,n){return n.showRatings}},wins:{mobile:"Wins",name:"W",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}},draws:{mobile:"Draws",name:"D",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}},losses:{mobile:"Losses",name:"L",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}},played:{mobile:"Played",name:"P",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}}}},Ee={h2h:{name:"By head-to-head score",func:function(e,t){return t.scoreAgainst(e.id)-e.scoreAgainst(e.id)}},gamePoint:{name:"By game point total",func:function(e,t){return t.gamePoints-e.gamePoints}},gamePointDiff:{name:"By net game points",func:function(e,t){return t.netGamePoint-e.netGamePoint}},whites:{name:"By times played black",func:function(e,t){return e.whiteTotal-t.whiteTotal}},progScore:{name:"By progressive score",func:function(e,t){return t.progressiveScore-e.progressiveScore}},wins:{name:"By most wins",func:function(e,t){return t.histories&&e.histories?t.histories.filter((function(e){return e&&1===e.match})).length-e.histories.filter((function(e){return e&&1===e.match})).length:0}},gameh2h:{name:"By head-to-head of game points",func:function(e,t){return t.gameScoreAgainst(e.id)-e.gameScoreAgainst(e.id)}},perfRating:{name:"By performance rating",func:function(e,t){return t.performanceRating-e.performanceRating}},rating:{name:"By rating",func:function(e,t){return t.rating-e.rating}},oppRating:{name:"By average rating cut",func:function(e,t){var n,a;if(t.oppRatingSum!==e.oppRatingSum)return t.oppRatingSum-e.oppRatingSum;var r=null===(n=e.histories)||void 0===n?void 0:n.filter((function(e){return e})),i=null===(a=t.histories)||void 0===a?void 0:a.filter((function(e){return e}));if(!r||!i||!r.length||!i.length)return 0;for(var o=r.sort((function(e,t){return e.oppRating-t.oppRating})),c=i.sort((function(e,t){return e.oppRating-t.oppRating}));;){var l=[o.shift(),c.shift()],s=l[0],u=l[1];if(void 0===s||void 0===u)break;if(s||u){var m=o.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/o.length,d=c.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/c.length;if(m!==d)return d-m}}return 0}},alphabetical:{name:"Alphabetical",func:function(e,t){return t.firstName>e.firstName?-1:e.firstName>t.firstName?1:0}}},je=Object(o.createContext)(Object.entries(Ee)),ye=Object(o.createContext)((function(){return""})),_e=Object(o.createContext)((function(){return null})),ke=Object(o.createContext)((function(e){}));function we(e){var t=pe(e),n=Object(o.useMemo)((function(){return e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds||e.settings.totalRounds===1/0?e.status.round:e.settings.totalRounds}),[e.status.round,e.settings.totalRounds]),a=Object(o.useMemo)((function(){for(var e=[],t=1;t<=n;t++)e.push("round."+t.toString());return e}),[n]),r=Object(o.useMemo)((function(){return[].concat(Object(se.a)(Object.keys(ge.pre)),Object(se.a)(a),Object(se.a)(Object.keys(ge.post)))}),[a]).filter((function(t,n){var a=ge.pre[t]||ge.post[t];return!a||!(a.show&&!a.show(null,n,e.settings))})),i=Object(o.useCallback)((function(e,t){return r.includes(t)?e[0]!==t?[t,0]:[t,e[1]+1]:["",0]}),[r]),l=Object(o.useReducer)(i,["score",0]),s=Object(f.a)(l,2),u=s[0],m=s[1],d=Object(o.useContext)(je),p=Object(o.useMemo)((function(){if(!t.length)return[];for(var a=[],i=function(r){var i=t[r];if("bye"===i.id)return"continue";for(var o=[],c=0,l=Object.entries(ge.pre);c<l.length;c++){var s=Object(f.a)(l[c],2),u=s[0],m=s[1];m.show&&!m.show(i,r,e.settings)||o.push([i[u],m,i])}for(var d=i.rounds,h=d.length+1;h<=n;h++)d.push("");for(var p=d.map((function(e){return[e,ge.roundColumn,i]})),v=[],b=0,g=Object.entries(ge.post);b<g.length;b++){var E=Object(f.a)(g[b],2),j=E[0],y=E[1];y.show&&!y.show(i,r,e.settings)||v.push([i[j],y,i])}var _=[].concat(o,Object(se.a)(p),v);a.push(_)},o=0;o<t.length;o++)i(o);var l=function(e,t){return t-e},s=u[0].startsWith("round")?ge.roundColumn:ge.pre[u[0]]||ge.post[u[0]];if(s&&!1!==s.sort){s.sort&&(l=s.sort);var m=r.indexOf(u[0]);-1!==m&&(a=a.sort((function(t,a){var r;if(r=u[1]%2?l(a[m][0],t[m][0]):l(t[m][0],a[m][0]))return r;if(e.round===n)return e.state.indexOf(t[m][2].id)-e.state.indexOf(a[m][2].id);for(var i=d.slice(0),o=i.shift();o;){var c=o[1].func(t[m][2],a[m][2]);if(c)return c;o=i.shift()}return 0})))}return a.map((function(t,n){return c.a.createElement("tr",{key:"row."+n,className:be.a.tr},t.map((function(t,a){var i=Object(f.a)(t,3),o=i[0],l=i[1],s=i[2],u=o?o.toString():"";l.convert?u=l.convert(o,s,e.settings,r[a]):l.postConvert&&(u=l.postConvert(u,n)),"undefined"!==typeof u&&""!==u||(u="\u200b");var m="function"===typeof l.className?l.className("string"===typeof u?u:"",a,e.settings):l.className,d="function"===typeof l.name?l.name((r[a]||"").toString(),a):l.name,p=l.id?l.id(s,parseInt(d),e.settings):"";return c.a.createElement(c.a.Fragment,null,c.a.createElement("th",{className:[be.a.cell,be.a.headerCell].join(" "),key:["cellHeader",a].join(".")},c.a.createElement("div",null,l.mobile?l.mobile:d)),c.a.createElement("th",{key:["cellBody",a].join(".")},p?c.a.createElement(h.b,{to:p,className:[be.a.cell,m,be.a[m]].join(" ")},u):c.a.createElement("div",{key:[o,a].join("."),className:[be.a.cell,m,be.a[m]].join(" ")},u)))})))}))}),[t,u,r,e.round,e.state,n,e.settings,d]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"animated-"+e.direction,key:"standings.1"},c.a.createElement("table",{className:["download-table full-width",be.a.table,"standings"].join(" ")},c.a.createElement("thead",{className:be.a.headers},c.a.createElement("tr",null,r.map((function(e,t){var n=e.startsWith("round")?ge.roundColumn:ge.pre[e]||ge.post[e];return c.a.createElement("th",{scope:"column",key:["column",t].join("."),className:[be.a.th,e.startsWith("round")?be.a.round:""].join(" "),id:e,onClick:function(){return m(e)}},c.a.createElement("div",{className:[be.a.cell,be.a.headerCell].join(" ")},"function"===typeof n.name?n.name(e,t):n.name))})))),c.a.createElement("tbody",null,p.length?p:c.a.createElement("tr",null,c.a.createElement("th",{colSpan:42},"No players entered yet"))))),c.a.createElement("section",{className:"animated-"+e.direction,key:"footer.1"},c.a.createElement("div",{className:be.a.footer},"* denotes bonuses or requested byes granted.")))}var Oe=n(109),Ne=n.n(Oe),Ce=n(53),Se=n.n(Ce),xe=n(278),Me=n.n(xe),Re=n(279),Pe=n.n(Re),Le=(n(196),n(65)),Ae=n.n(Le),Te=n(282),Be=n(52),Ie=n(114),De=n.n(Ie);n(210);function Fe(e){var t=Object(o.useState)(!1),n=Object(f.a)(t,2),a=n[0],r=n[1],i=e.useState||[a,r],l=Object(f.a)(i,2),s=l[0],u=l[1],m=Object(o.createRef)();return s?c.a.createElement(Be.b,null,c.a.createElement(Be.a,{onClose:function(){return u(!1)}},c.a.createElement("div",{className:["chartContainer","rankings",De.a.container,e.className].join(" "),ref:m},c.a.createElement("div",{className:[De.a.fullScreenHeader,"header--isModal css-111ute9 css-1ycyyax"].join(" ")},c.a.createElement("span",null),c.a.createElement("span",null,c.a.createElement("button",{type:"button",title:"Enter fullscreen (f)",className:"header_button __header_button--fullscreen css-m6j0xf css-1ycyyax",onClick:function(){return!document.fullscreenElement&&m.current?m.current.requestFullscreen():document.exitFullscreen()}},c.a.createElement("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh"},c.a.createElement("path",{d:"M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z"}))),c.a.createElement("button",{type:"button",title:"Close (esc)",className:"react-images__header_button react-images__header_button--close css-m6j0xf css-1ycyyax",onClick:function(){return u(!1)}},c.a.createElement("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh"},c.a.createElement("path",{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"}))))),c.a.createElement("div",{className:De.a.stage},e.children)))):null}function Ue(e){var t=Object(o.useState)(15),n=Object(f.a)(t,2),a=n[0],r=n[1],i=pe(e),l=Object(o.useMemo)((function(){return{rating:{mobile:"Rating",name:"Rating",value:function(e){return e.rating},show:function(e){return!1}},score:{mobile:"Match Points",name:"MP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.match||0:e}),0)}},gamePoints:{mobile:"Game Points",name:"GP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.game||0:e}),0)},show:function(e){return 1!==e.gamePointTotal}},gameDifference:{mobile:"Game Point Difference",name:"G. +/-",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=null!==n?e.played:0)})),2*n-a},show:function(e){return 1!==e.gamePointTotal}},matchPercentage:{mobile:"Match Point Percentage",name:"M. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.match||0,a+=1)})),0===a?-1:100*n/a}},gamePercentage:{mobile:"Game Point Percentage",name:"G. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=e.played||0)})),0===a?-1:100*n/a},show:function(e){return 1!==e.gamePointTotal}},performanceRating:{mobile:"Performance Rating",name:"Perf",value:function(e){return e.performanceRating},show:function(e){return!1}},ratingDifference:{mobile:"Performance Rating Difference",name:"P. +/-",value:function(e){return e.performanceRating?e.performanceRating-e.rating:0},show:function(e){return!1}},expectedScore:{mobile:"Expected Score",name:"Expected",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected?e+=t.expected||0:e}),0)},show:function(e){return!1}},expectedDifference:{mobile:"Score to Expected",name:"E. +/-",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected&&"number"===typeof t.match?e+=t.match-t.expected||0:e}),0)},show:function(e){return e.showRatings}}}}),[]),s=Object(o.useMemo)((function(){return e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds?e.status.round:e.settings.totalRounds}),[e.status.round,e.settings.totalRounds]),u=Object(o.useState)([]),m=Object(f.a)(u,2),d=m[0],h=m[1],p=Object(o.useMemo)((function(){for(var e={},t=d.slice(0),n=i.filter((function(e){return"bye"!==e.id})),a=0;a<n.length;a++)for(var r=n[a],o=0,c=Object.entries(l);o<c.length;o++){var u=Object(f.a)(c[o],2),m=u[0],p=u[1];e[m]||(e[m]=[]);for(var v=[],b=1;b<s+1;b++)t[b-1]=b.toString(),b>=r.histories.length?v.push(void 0):v[b]=p.value(r,b);e[m][a]=v}return h(t),e}),[i,l,s]),v=Object(o.useContext)(je),b=Object(o.useState)(!0),g=Object(f.a)(b,2),E=g[0],j=g[1],y=Object(o.useState)(!0),_=Object(f.a)(y,2),k=_[0],w=_[1],O=Object(o.useState)(!1),N=Object(f.a)(O,2),C=N[0],S=N[1],x=Object(o.useCallback)((function(e,t){for(var n=e[0].length,a=[],r=[],o=1;o<n;o++){a[o]=[];for(var c=0;c<e.length;c++)a[o][c]={meta:i[c],value:e[c][o]};a[o]=a[o].sort((function(e,t){if(void 0===e.value)return 1;if(void 0===t.value)return-1;if(e.value!==t.value)return t.value-e.value;for(var n=v.slice(0),a=n.shift();a;){var r=a[1].func(e.meta,t.meta);if(r)return r;a=n.shift()}return 0})),r[o]=a[o].map((function(e){return void 0!==e.value?[e.meta.id,e.value]:["",void 0]}))}for(var l=[],s=0;s<e.length;s++){l[s]=[];for(var u=function(e){var n=i[s],a=r[e].findIndex((function(e){return e[0]===n.id}));l[s][e-1]={meta:n.firstName+" "+n.lastName,value:n.histories[e]&&"number"===typeof n.histories[e].match&&a>=0?t?-a-1:r[e][a][1]:void 0}},m=1;m<n;m++)u(m)}return l}),[i,l]),M=Object(o.useState)([]),R=Object(f.a)(M,2),P=R[0],A=R[1],T=Object(o.useState)(!0),B=Object(f.a)(T,2),I=B[0],D=B[1],F=Object(o.useState)(1),U=Object(f.a)(F,2),W=U[0],G=U[1],H=Object(o.useState)("score"),z=Object(f.a)(H,2),K=z[0],Y=z[1],J=Object(o.useMemo)((function(){return Object.entries(l).map((function(t,n){var a=Object(f.a)(t,2),r=a[0],i=a[1];return i.show&&!i.show(e.settings)?null:c.a.createElement("div",{className:["header-button",V.a.pairingRound,K===r?V.a.roundSelected:""].join(" "),onClick:function(){return Y(r)},key:["round",n].join(".")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,i.mobile)))}))}),[l,K,Y,e.settings]),Z=Object(o.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:["header-button",V.a.pairingRound,I?V.a.roundSelected:""].join(" "),onClick:function(){return D(!0)},key:["round","order"].join(".")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,"Ranking"))),c.a.createElement("div",{className:["header-button",V.a.pairingRound,I?"":V.a.roundSelected].join(" "),onClick:function(){return D(!1)},key:["round","unorder"].join(".")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,"Points"))))}),[I,D]),X=Object(o.useCallback)((function(e,t){return[e,I?"#"+(-Number(t)).toString():""].join("\n")}),[I]),Q=Object(o.useMemo)((function(){var t=K;if(!p[t])return null;for(var n=x(p[t],I),r=Math.ceil(n.length/2),i=function(t){if(n.reduce((function(n,a,r){var i,o;return t<e.status.round&&(null===(i=a[t-1])||void 0===i||i.value),"number"===typeof(null===(o=a[t])||void 0===o?void 0:o.value)?n+=1:n}),0)>r)return G(t),"break"},o=s;o>=0;o--){if("break"===i(o))break}var l=n.sort((function(e,t){var n,a;return((null===(n=t[W])||void 0===n?void 0:n.value)||-1/0)-((null===(a=e[W])||void 0===a?void 0:a.value)||-1/0)})).map((function(t,n){var a,r,i,o,l,s,u,m,d;if(!I)return c.a.createElement(c.a.Fragment,null,null===(a=t[W])||void 0===a?void 0:a.meta);if(!W)return c.a.createElement(c.a.Fragment,null,null===(r=t[W])||void 0===r?void 0:r.meta);if(W===e.status.round)return c.a.createElement(c.a.Fragment,null,"#",n," ",null===(i=t[W])||void 0===i?void 0:i.meta);if(void 0===(null===(o=t[W])||void 0===o?void 0:o.value)||void 0===(null===(l=t[W])||void 0===l?void 0:l.value))return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:["chartArrow"].join(" ")},c.a.createElement("div",null,"\u200b"),c.a.createElement("div",null,"\u200b")),null===(s=t[W])||void 0===s?void 0:s.meta);var f=(null===(u=t[W])||void 0===u?void 0:u.value)-(null===(m=t[W-1])||void 0===m?void 0:m.value),h=f>0?c.a.createElement(q.l,null):f<0?c.a.createElement(q.k,null):c.a.createElement(q.F,null);return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:["chartArrow",f>0?"chartPositive":f<0?"chartNegative":"chartNeutral"].join(" ")},c.a.createElement("div",null,Math.abs(f)||"\u200b"),h),null===(d=t[W])||void 0===d?void 0:d.meta)}));return A(l),I&&n.push([{meta:"placeholder",value:-n.length}]),Me()({tooltipFnc:X}),Se.a.plugins.tooltip({tooltipFnc:X}),Pe()(),c.a.createElement(Ne.a,{data:{labels:d,series:n},options:{fullWidth:!0,divisor:.5,axisY:{offset:25,onlyInteger:I,labelInterpolationFnc:function(e){return I?e?"#"+(-e).toString():"":e}},width:C?.8*window.innerWidth:"100%",height:C?window.innerHeight-150:I&&E?a*(p[t].length+(a<21.7?4.2:0)):.8*window.innerHeight,plugins:[Se.a.plugins.tooltip({tooltipFnc:X}),Se.a.plugins.ctAxisTitle({axisX:{axisTitle:"Round",axisClass:"ct-axis-title",textAnchor:"middle"}})]},type:"Line"})}),[p,K,W,x,d,s,I,X,e.status.round,a,E,C]),$=Object(o.useMemo)((function(){for(var e,t,n="",a="p".charCodeAt(0);a<"z".charCodeAt(0)+1;a++){var r=(e=0,t=65536,Math.floor(Math.random()*(t-e+1)+e)).toString(16);n+=".ct-series.ct-series-".concat(String.fromCharCode(a)," {\n\t\t\t\tstroke: #").concat("0".repeat(6-r.length)).concat(r,";\n\t\t\t}"),n+=".ct-series.ct-series-".concat(String.fromCharCode(a)," > path {\n\t\t\t\tstroke: #").concat("0".repeat(6-r.length)).concat(r,";\n\t\t\t}")}return n}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:["container","bodyContainer","animated-"+e.direction].join(" ")},c.a.createElement("div",{className:"button-list"},J)),c.a.createElement("div",{className:["container","bodyContainer","animated-"+e.direction].join(" ")},c.a.createElement("div",{className:"button-list"},Z)),c.a.createElement("section",{className:"animated-"+e.direction},c.a.createElement("style",null,$),c.a.createElement("div",{className:V.a.description},"This chart shows the rankings for each team throughout the rounds, beginning with round 1 on the left.",c.a.createElement("br",null),"Switch to 'Points' above to see each team's points progression.",c.a.createElement("br",null)),c.a.createElement("div",{className:"sliderContainer container"},c.a.createElement("div",null,"Size"),c.a.createElement(Te.a,{className:V.a.slider,thumbClassName:V.a.thumb,trackClassName:V.a.track,min:5,max:E&&I?Math.max(30,window.innerHeight/i.length):void 0,step:k?.5:5,value:E&&I?a:.8*window.innerHeight/i.length,disabled:!E||!I,onChange:function(e){return"number"===typeof e?r(e):null},renderThumb:function(e,t){return c.a.createElement("div",e,t.valueNow)}}),c.a.createElement("div",{className:"increment",onClick:function(){return a>=6?r(a-1):null}},c.a.createElement(q.b,null)),c.a.createElement("div",{className:"increment",onClick:function(){return a<=29?r(a+1):null}},c.a.createElement(q.e,null))),c.a.createElement("div",{className:"optionsContainer container"},c.a.createElement("div",{className:["header-button",V.a.pairingRound,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,E&&I?"Detailed":"Fit"),c.a.createElement("div",null,E&&I?"Switch off to view on one screen":I?"Switch to view player names":"Detailed view is only available with Ranking")),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return j(!E)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:E&&I}),c.a.createElement("div",{className:"toggleSlider round"}))),c.a.createElement("div",{className:["header-button",V.a.pairingRound,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,k?"High":"Low"," Performance"),c.a.createElement("div",null,"Switch off if slow on Size change")),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return w(!k)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:k}),c.a.createElement("div",{className:"toggleSlider round"}))),c.a.createElement("div",{className:["header-button",V.a.pairingRound,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,"Full Screen")),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return S(!C)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:C}),c.a.createElement("div",{className:"toggleSlider round"})))),c.a.createElement("div",{className:V.a.description},"Hover to view team names."),c.a.createElement("div",{className:["chartContainer","rankings"].join(" ")},Q,I&&E?c.a.createElement("div",{className:"chartKey",style:L()?{}:{visibility:a<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(P.length,", ").concat(a,"px)"),left:"calc(".concat((W+0)/(s-1)," * 100%)"),fontSize:Math.min(a,25)-3+"px",marginTop:a>21.7?"2px":a+6+"px"}},P.map((function(e,t){return c.a.createElement("div",{key:["id",t].join("."),className:"playerLabel"},c.a.createElement("hr",{style:{display:L()||W>=s-1?"none":"block",width:.8/(s+2)*(window.innerWidth-60)}}),c.a.createElement("div",null,e))}))):null)),c.a.createElement(Fe,{className:Ae.a.fsChart,useState:[C,S]},c.a.createElement("div",{className:Ae.a.header},c.a.createElement("div",{className:Ae.a.title},e.status.name),c.a.createElement("div",{className:Ae.a.subtitle},l[K].mobile)),Q,I&&E&&a>15?c.a.createElement("div",{className:"chartKey",style:L()?{}:{visibility:a<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(P.length,", ").concat(a,"px)"),left:"calc(".concat((W+0)/(s-1)," * 100%)"),fontSize:Math.min(a,25)-3+"px",marginTop:a>21.7?"2px":a+6+"px"}},P.map((function(e,t){return c.a.createElement("div",{key:["id",t].join("."),className:"playerLabel"},c.a.createElement("hr",{style:{display:L()||W>=s-1?"none":"block",width:.8/(s+2)*(window.innerWidth-60)}}),c.a.createElement("div",null,e))}))):null,c.a.createElement("div",{className:Ae.a.name},"Results by ScorchChess"),c.a.createElement("div",{className:Ae.a.url},"https://scorchapp.co.uk")))}n(211);var We=function(){return c.a.createElement("div",{id:"main"},c.a.createElement("div",{className:"container",style:{display:"flex",flexDirection:"column",alignItems:"center",width:"max-content",alignSelf:"center"}},c.a.createElement("img",{src:"/logo512.png",style:{width:256,height:256},alt:"Not-Found"}),c.a.createElement("div",null,"PAGE NOT FOUND")),c.a.createElement("div",{className:"container"},"Think this is a mistake? Check out our ",c.a.createElement("a",{href:"https://twitter.com/scorchchess",rel:"noopener noreferrer",target:"_blank"},"Twitter page")," for the latest maintenance notices. Tweet ",c.a.createElement("a",{href:"https://twitter.com/scorchchess",rel:"noopener noreferrer",target:"_blank"},"@scorchchess")," if you think there's an error."))},Ge=n(18),He=n.n(Ge),ze=n(283),Ve=n.n(ze),qe=n(32),Ke=n.n(qe),Ye=(n(447),n(86)),Je=n(21),Ze=n(20),Xe=n(284),Qe=n.n(Xe),$e=n(285),et=n.n($e),tt=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],nt=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props.headerInfo;if(!e)return null;var t=e.Link,n=e.White,a=e.Black,r=e.WhiteTeam,i=e.BlackTeam,o=e.BlackElo,l=e.WhiteElo,s=e.Round,u=e.Game,m=e.Result,d=e.Event,f=e.Site,h=e.Date.split("."),p=h&&"".concat(h[2]," ").concat(tt[new Number(h[1])-1]," ").concat(h[0]),v=d&&f?" ".concat(d," | ").concat(f," | ").concat(m," "):null,b=p&&s&&u?" ".concat(p," | Round ").concat(s," | Game ").concat(u," "):null,g={fontWeight:"bold",marginBottom:"0.25rem"},E={fontSize:"14px"};return c.a.createElement("div",{className:"pgnHeader",style:{padding:"5px"}},t?c.a.createElement("a",{href:t,rel:"noopener noreferrer",target:"_blank",style:g},n," (",l,") vs. ",a," (",o,")"):c.a.createElement("div",{style:g},n," (",l,") vs. ",a," (",o,")"),r||i?c.a.createElement("div",{style:g},r," vs. ",i):null,c.a.createElement("div",{style:E},v),c.a.createElement("div",{style:E},b))}}]),n}(c.a.Component),at=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleDownload=function(){var t=e.props.onDownload;"function"===typeof t&&t()},e}return Object(y.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleDownload,style:this.props.iconStyles},c.a.createElement(q.u,null))}}]),n}(c.a.Component),rt=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handlePreviousMove=function(){var t=e.props.onPreviousMove;"function"===typeof t&&t()},e}return Object(y.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handlePreviousMove,style:this.props.iconStyles},c.a.createElement(q.c,null))}}]),n}(c.a.Component),it=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleNextMove=function(){var t=e.props.onNextMove;"function"===typeof t&&t()},e}return Object(y.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleNextMove,style:this.props.iconStyles},c.a.createElement(q.d,null))}}]),n}(c.a.Component),ot=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleLastMove=function(){var t=e.props.onLastMove;"function"===typeof t&&t()},e}return Object(y.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleLastMove,style:this.props.iconStyles},c.a.createElement(q.P,null))}}]),n}(c.a.Component),ct=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleReset=function(){var t=e.props.onReset;"function"===typeof t&&t()},e}return Object(y.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleReset,style:this.props.iconStyles},c.a.createElement(q.O,null))}}]),n}(c.a.Component),lt=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleFlipBoard=function(){var t=e.props.onFlipBoard;"function"===typeof t&&t()},e}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props.iconStyles,t=JSON.parse(JSON.stringify(e));return c.a.createElement("div",{onClick:this._handleFlipBoard,style:t},c.a.createElement(q.X,null))}}]),n}(c.a.Component),st=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handlePlay=function(){var t=e.props.onPlay;"function"===typeof t&&t()},e}return Object(y.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handlePlay,style:this.props.iconStyles},this.props.isPlaying?c.a.createElement(q.H,null):c.a.createElement(q.J,null))}}]),n}(c.a.Component),ut=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onDownload,n=e.onNextMove,a=e.onPreviousMove,r=e.onReset,i=e.onFlipBoard,o=e.width,l=e.onLastMove,s=e.onPlay,u=e.isPlaying,m=e.fenMove,d={cursor:"pointer",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:o,paddingTop:"10px",paddingBottom:"5px"},f={paddingLeft:"20px"};return c.a.createElement("div",{className:"pgnViewerFooter",style:d},!m&&c.a.createElement(ct,{onReset:r,iconStyles:f}),!m&&c.a.createElement(rt,{onPreviousMove:a,iconStyles:f}),!m&&c.a.createElement(it,{onNextMove:n,iconStyles:f}),!m&&c.a.createElement(ot,{onLastMove:l,iconStyles:f}),!m&&c.a.createElement(st,{onPlay:s,iconStyles:f,isPlaying:u}),c.a.createElement(lt,{onFlipBoard:i,iconStyles:f}),c.a.createElement(at,{onDownload:t,iconStyles:f}))}}]),n}(c.a.Component),mt=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleChangeMove=function(){var t=e.props,n=t.onChangeMove,a=t.moveIndex;"function"===typeof n&&n(a)},e}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.move,n=e.moveIndex,a=e.currentIndex,r=n%2!==0,i=Math.ceil(n/2)+".",o={cursor:"pointer",color:"black",display:"inline-block"};return a===n&&(o.fontWeight=700),c.a.createElement("span",{onClick:this._handleChangeMove,style:o},r&&i,"\xa0",t,"\xa0")}}]),n}(c.a.Component),dt=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).moveList=Object(o.createRef)(),e}return Object(y.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.props.moves){var t=e.moves||[];this.props.moves.length!==t.length&&this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}}},{key:"componentDidMount",value:function(){this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}},{key:"render",value:function(){var e=this.props,t=e.result,n=e.moves,a=e.currentIndex,r=e.onChangeMove,i=e.startAtMove,o=e.endAtMove,l=e.fenMove;return n?c.a.createElement("div",{className:"pgnViewerMoveList",ref:this.moveList},!l&&n.map((function(e,t){return t<i-1||t>o-1?null:c.a.createElement(mt,{onChangeMove:r,key:t,currentIndex:a,move:e,moveIndex:t+1})})),l&&c.a.createElement("div",null,l%2===0?"White":"Black"," to move"),c.a.createElement("span",{className:"bold"},t)):null}}]),n}(c.a.Component),ft={base:{display:"flex",justifyContent:"center",flexDirection:"row"},wrapper:{width:500,background:"white"}},ht=function(e){var t,n=JSON.parse(JSON.stringify(ft)),a=Object(v.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.area][r.stylePair[0]]=r.stylePair[1]}}catch(i){a.e(i)}finally{a.f()}return n},pt=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e))._updateDimensions=function(){a.setState({windowWidth:window&&window.innerWidth})},a._makeIncreasingMoves=function(e){for(var t=e.numberOfMoves,n=e.reset,r=a.state,i=r.chess,o=r.moves,c=r.index,l=n?0:new Number(c),s=0;s<t;s++)i.move(o[l]),l++;a.setState({chess:i,index:l})},a._handleNextMove=function(){var e=a.state,t=e.moves,n=e.chess,r=e.index,i=e.endAtMove,o=new Number(r);if(o>=t.length||r===i)return a._handleReset();n.move(t[o]),o++,a.setState({chess:n,index:o})},a._handlePreviousMove=function(){var e=a.state,t=e.chess,n=e.index,r=e.startAtMove,i=new Number(n);i<=0||n===r||(t.undo(),i--,a.setState({chess:t,index:i}))},a._handleReset=function(){var e=a.state,t=e.chess,n=e.startAtMove;t.reset(),n?a._makeIncreasingMoves({numberOfMoves:n,reset:!0}):a.setState({chess:t,index:0})},a._handleLastMove=function(){var e=a.state,t=e.moves,n=e.index,r=e.endAtMove;if(!(n>=t.length||n===r)){var i=r?r-n:t.length-n;a._makeIncreasingMoves({numberOfMoves:i})}},a._handleFlipBoard=function(){a.setState({orientation:"w"===a.state.orientation?"b":"w"})},a._handlePlay=function(){var e=a.state,t=e.moves,n=(e.chess,e.index),r=e.isPlaying;r||(n>=t.length&&a._handleReset(),a._handleNextMove()),a.setState({isPlaying:!r})},a._handleChangeMove=function(e){var t=a.state,n=t.chess,r=t.index;if(e!==r)if(e<r){for(var i=0;i<r-e;i++)n.undo();a.setState({chess:n,index:e})}else{var o=e-r;a._makeIncreasingMoves({numberOfMoves:o})}},a._handleDownload=function(){var e=a.state,t=e.headerInfo,n=e.fenMove,r=e.chess,i=document.createElement("a"),o=n?r.fen():a.props.pgnInformation,c=n?"txt":"pgn",l=new Blob([o],{type:"text/plain"}),s=t.White.split(" ").pop(),u=t.Black.split(" ").pop();i.href=URL.createObjectURL(l),i.download="".concat(s,"_vs_").concat(u,"_").concat(t.Date,".").concat(c),i.click()},a.state={chess:null,moves:null,index:null,headerInfo:null,isPlaying:null,isLoaded:null,startAtMove:null,fenMove:null,endAtMove:null,windowWidth:window&&window.innerWidth,orientation:a.props.orientation},a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.pgnInformation,t=new Qe.a,n=0,a=e.trim().replace(/\[/g,"");if(!a)return null;var r=a.split("]").map((function(e){return e.trim()}));t.load_pgn(e);for(var i=0;i<r.length-2;i++){var o=r[i].split(' "');o[1]?t.header(o[0].replace(/\"/g,""),o[1].replace(/\"/g,"")):t.header(o[0].replace(/\"/g,""))}var c=t.header(),l=t.history();t.reset();var s=2*c.StartAtMove-1,u=2*c.EndAtMove,m=c.Fen&&c.Fen.split(""),d=m&&"b"===m.pop(),f=m&&m.join(""),h=d?2*f:2*f-1;if(s)for(var p=0;p<s;p++)t.move(l[n]),n++;else if(m)for(var v=0;v<h;v++)t.move(l[n]),n++;if(this.props.startAtLatest)for(var b=0;b<l.length;b++)t.move(l[n]),n++;this.setState({chess:t,moves:l,index:n,startAtMove:s,endAtMove:u,fenMove:m?h:null,headerInfo:c}),this._updateDimensions(),window.addEventListener("resize",this._updateDimensions),window.addEventListener("load",this._updateDimensions),window.addEventListener("orientationchange",this._updateDimensions)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.isPlaying?this.timeoutID=setTimeout((function(){return e._handleNextMove()}),1e3):clearTimeout(this.timeoutID)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._updateDimensions),window.removeEventListener("load",this._updateDimensions),window.removeEventListener("orientationchange",this._updateDimensions)}},{key:"render",value:function(){var e=this.props,t=e.blackSquareColor,n=e.whiteSquareColor,a=e.width,r=e.backgroundColor,i=e.showCoordinates,o=this.state,l=o.chess,s=o.moves,u=o.index,m=o.headerInfo,d=o.orientation,f=o.isPlaying,h=o.windowWidth,p=o.startAtMove,v=o.endAtMove,b=o.fenMove,g=function(e){var t=e.windowWidth,n=e.backgroundColor,a=e.defaultWidth,r=t&&t<768,i=r?"100%":a,o=r?"column":"row",c=[];c.push({area:"base",stylePair:["width",i]}),c.push({area:"base",stylePair:["flexDirection",o]}),c.push({area:"wrapper",stylePair:["width",i]}),c.push({area:"wrapper",stylePair:["background",n]});var l=ht(c);return{width:i,isMobile:r,baseStyles:l.base,wrapperStyles:l.wrapper}}({windowWidth:h,backgroundColor:r,defaultWidth:a}),E=(g.baseStyles,g.wrapperStyles),j=g.isMobile,y=g.width,_=function(e,t){var n=(t-1)%2===0,a=null;if(e&&t)switch(e[t-1]){case"O-O":a=n?"g1":"g8";break;case"O-O-O":a=n?"c1":"c8";break;default:a=e[t-1].match(/[a-z][1-8]/gm)[0]}return a}(s,u);return c.a.createElement("div",{className:"pgnWrapper",style:E},m&&c.a.createElement(nt,{headerInfo:m,width:y}),c.a.createElement("div",{className:"pgnViewerMain",onWheel:function(e){e.stopPropagation()}},c.a.createElement(et.a,{blackSquareColour:t,fen:l&&l.fen()||"start",orientation:d,showCoordinates:i,activeSquare:_,style:{border:"2px solid lightgrey"},whiteSquareColour:n,width:j?y:2/3*y,height:j?y:2/3*y}),!j&&c.a.createElement(dt,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:s,width:1/3*y,startAtMove:p,endAtMove:v,fenMove:b,result:m?m.Result:null})),c.a.createElement(ut,{isPlaying:f,onPlay:this._handlePlay,onDownload:this._handleDownload,onFlipBoard:this._handleFlipBoard,onNextMove:this._handleNextMove,onPreviousMove:this._handlePreviousMove,onReset:this._handleReset,fenMove:b,onLastMove:this._handleLastMove,width:y}),j&&c.a.createElement(dt,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:s,width:y,startAtMove:p,endAtMove:v,fenMove:b,result:m?m.Result:null}))}}]),n}(c.a.Component),vt=function(e){Object(Je.a)(n,e);var t=Object(Ze.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).makeViewer=function(e){var t=e.pgnInformation,n=a.props,r=n.blackSquareColor,i=n.whiteSquareColor,o=n.orientation,l=n.width,s=n.backgroundColor,u=n.showCoordinates,m=n.startAtLatest;return c.a.createElement(pt,{pgnInformation:t,blackSquareColor:r,whiteSquareColor:i,width:l,orientation:o,backgroundColor:s,showCoordinates:u,startAtLatest:m})},a.createInnerHtml=function(){return{__html:a.props.children}},a.additionalHTMLModification=function(){var e=a.props,t=e.nodeToModify,n=e.nodeModification,r=s.a.findDOMNode(Object(Ye.a)(a)).querySelectorAll(t);if("function"!==typeof n||!t)return null;for(var i=0;i<r.length;i++)n(r[i])},a.setPgn=function(e){for(var t=s.a.findDOMNode(Object(Ye.a)(a)).querySelectorAll("pgn"),n=0;n<t.length;n++)s.a.render(a.makeViewer({pgnInformation:e[n]}),t[n])},a.state={pgns:null},a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){for(var e=s.a.findDOMNode(this).querySelectorAll("pgn"),t=[],n=0;n<e.length;n++)t.push(e[n].innerHTML.slice(0));this.setState({pgns:t}),this.additionalHTMLModification(),this.setPgn(t)}},{key:"componentDidUpdate",value:function(){this.additionalHTMLModification(),this.setPgn(this.state.pgns)}},{key:"render",value:function(){var e=this.props,t=e.innerHTML,n=e.children;return c.a.createElement("div",null,t&&c.a.createElement("div",{dangerouslySetInnerHTML:this.createInnerHtml()}),!t&&c.a.createElement("div",null,this.makeViewer({pgnInformation:n})))}}]),n}(c.a.Component);vt.defaultProps={backgroundColor:"#e1e5ed",blackSquareColor:"steelblue",orientation:"w",showCoordinates:!0,whiteSquareColor:"aliceblue",width:600};var bt=vt,gt=n(111),Et=n.n(gt);function jt(e,t,n){var a=Object(o.useMemo)(e,t);return Object(o.useDebugValue)(n),a}var yt=new Ve.a({queue:!0});function _t(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){yt.dispatch(yt.getPlayer,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){yt.dispatch(yt.getClub,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){yt.dispatch(yt.getTeamLiveMatchBoard,(function(t,n){if(n)return a(n);e(t.body)}),[t,n])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e){return xt.apply(this,arguments)}function xt(){return(xt=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){yt.dispatch(yt.getTeamLiveMatch,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mt(e,t){if(e.chessCom){var n=e.chessCom.toLowerCase().split("/").pop(),a=t.url.toLowerCase().split("/").pop();if(n&&a&&n===a)return!0}var r,i=e.name||e.firstName;if(i&&function(e,t){var n=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(!n||!a)return 1;if(n===a)return 0;if(n.length>6){if(a.startsWith(n))return 0;if(a.endsWith(n))return 0;if(n.startsWith(a))return 0;if(n.endsWith(a))return 0}return re()(n,a)/n.length}(null===i||void 0===i?void 0:i.toLowerCase().replace("chess","").replace("club",""),null===(r=t.name)||void 0===r?void 0:r.replace("chess","").replace("club",""))<.45)return!0;return!1}function Rt(e){var t,n,a=Object(o.useState)(20),r=Object(f.a)(a,2),i=r[0],l=r[1];Object(o.useEffect)((function(){e.match.players?l("string"===typeof e.match.players?parseInt(e.match.players):e.match.players):e.enforceBoards&&l(e.enforceBoards)}),[e.enforceBoards,l,e.match.players]);var s=Object(o.useReducer)((function(e,t){var n=e.slice(0);return n[t.board]={boardScores:t.boardScores,games:t.games},n}),[]),u=Object(f.a)(s,2),h=u[0],p=u[1],b=Object(o.useState)(0),g=Object(f.a)(b,2),E=g[0],j=g[1],y=jt((function(){var t={};if(!e.match.teams)return t;for(var n=0;n<e.match.teams.length;n++){var a,r=e.match.teams[n],i=Object(v.a)(r.players);try{for(i.s();!(a=i.n()).done;){t[a.value.username.toLowerCase()]=n}}catch(o){i.e(o)}finally{i.f()}}return t}),[e.match.teams],"teamDict"),_=jt((function(){return e.match.isFinished}),[e.match],"matchFinished"),k=Object(o.useReducer)((function(e,t){var n=e.slice(0);return n[t.board]=t.set,n}),[]),w=Object(f.a)(k,2),O=w[0],C=w[1],S=Object(o.useState)(0),x=Object(f.a)(S,2),M=x[0],R=x[1],P=Object(o.useCallback)(Object(d.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.match.link){t.next=2;break}return t.abrupt("return");case 2:if(n=e.match.link.match(N)){t.next=5;break}return t.abrupt("return",console.error("Invalid URL: ",e.match.link));case 5:if(a=Number(n[1])){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,St(a).catch((function(e){return e&&console.error(e),{}})).then((function(t){if(t&&t.teams){var n=Object.values(t.teams);if((e.match.w.chessCom||e.match.b.chessCom)&&(Mt(e.match.w,n[1])||Mt(e.match.b,n[0]))&&n.reverse(),t.start_time&&Date.now()<1e3*t.start_time||"finished"===t.status){j(a);var r=e.match.scores;return e.match.endTime||(r=n.map((function(e){return e.score}))),e.setMatch(Object.assign(e.match,{bodyStatus:t.status,startTime:1e3*t.start_time,endTime:t.end_time?1e3*t.end_time:void 0,players:t.boards,teams:n,scores:r})),Promise.reject()}}return t})).then((function(t){U({url:"/tournament/"+e.match.tournamentId+"/scrapeChessComTeamPage",params:{url:e.match.link}}).then((function(n){if(!n.Teams)throw null;var r=Object.values(n.Teams);if((e.match.w.chessCom||e.match.b.chessCom)&&(Mt(e.match.w,r[1])||Mt(e.match.b,r[0]))&&r.reverse(),!n["Registration Open"]&&!n["Start Time"]&&!n["Finished On"])throw null;var i,o,c=Object.values(t.teams||{});!(t.teams&&c[0]&&c[0].players.length)||r[0]&&r[0].players.length||(r[0].players=(null===(i=c.find((function(e){return e["@id"]===r[0]["@id"]})))||void 0===i?void 0:i.players)||[],r[1].players=(null===(o=c.find((function(e){return e["@id"]===r[1]["@id"]})))||void 0===o?void 0:o.players)||[]);j(a);var l=e.match.scores;e.match.endTime||(l=r.map((function(e){return e.score}))),e.setMatch(Object.assign(e.match,{registrationTime:n["Registration Open"]?new Date(n["Registration Open"]).valueOf():void 0,metaStatus:n.Status,startTime:t&&t.start_time?1e3*t.start_time:n["Start Time"]?new Date(n["Start Time"]).valueOf():void 0,endTime:n["Finished On"]?new Date(n["Finished On"]).valueOf():void 0,players:n["Players per Team"],teams:r,scores:l}))})).catch((function(t){t&&console.error(t),e.setMatch(Object.assign(e.match,{aborted:!0})),e.setFinished(e.match.id)}))})).catch((function(e){e&&console.error(e)}));case 10:case"end":return t.stop()}}),t)}))),[E,e.setMatch,e.match,j,e.setFinished]);Object(o.useEffect)((function(){E||(e.expanded||e.loadData)&&P()}),[P,e.expanded,e.loadData,E]);var L=Object(o.useCallback)(Object(d.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E){t.next=2;break}return t.abrupt("return");case 2:n=m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O[n]){t.next=2;break}return t.abrupt("return","continue");case 2:if(a=Nt(E,n).then((function(e){p({games:e.games,boardScores:e.board_scores,board:n});var t=e.games[e.games.length-1];if(!t)throw new Error("No game data given");return e.games.length>M&&R(e.games.length),t.end_time&&C({board:n,set:!0}),!0})).catch((function(e){if(e.status)switch(e.status){case 429:return}if(1!==n||h.length>2){if(i<n)return!0;if(2!==n||h.length)return l(n-1),!1;l(n-2)}return!0})),t.t0=!e.enforceBoards&&!e.match.players,!t.t0){t.next=9;break}return t.next=7,a;case 7:t.t1=t.sent,t.t0=!1===t.t1;case 9:if(!t.t0){t.next=11;break}return t.abrupt("return","break");case 11:case"end":return t.stop()}}),t)})),a=1;case 4:if(!(a<i+1)){t.next=15;break}return t.delegateYield(n(a),"t0",6);case 6:r=t.t0,t.t1=r,t.next="continue"===t.t1?10:"break"===t.t1?11:12;break;case 10:return t.abrupt("continue",12);case 11:return t.abrupt("break",15);case 12:a++,t.next=4;break;case 15:case"end":return t.stop()}}),t)}))),[E,i,O,h.length,M,R,e.enforceBoards,e.match.players]),A=Object(o.useCallback)(Object(d.a)(m.a.mark((function t(){var n,a,r,i,o,c,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.match,t.next=3,Et.a.hash([a.w.id,a.b.id,a.tournamentId,e.round].join("."),10);case 3:r=t.sent,i=[],o=0;case 6:if(!(o<h.length)){t.next=13;break}if(h[o]&&h[o].games){t.next=9;break}return t.abrupt("continue",10);case 9:for(c=0;c<h[o].games.length;c++)i.push({board:o,game:c+1,pgn:h[o].games[c].pgn});case 10:o++,t.next=6;break;case 13:return l={idW:a.w.id,idB:a.b.id,tournamentId:a.tournamentId,round:e.round,key:r,fetched:{startTime:a.startTime||a.registrationTime,endTime:a.endTime,scores:(null===(n=a.teams)||void 0===n?void 0:n.map((function(e){return e.score})))||[],isFinished:a.isFinished||a.isConfirmed},games:i,noCatch:!0},t.next=16,W({url:"/submit/game",data:l});case 16:e.setFinished(a.id);case 17:case"end":return t.stop()}}),t)}))),[h,e.match,e.round,e.setFinished]),T=Object(o.useMemo)((function(){return h.filter((function(e){return e&&e})).length}),[h]);Object(o.useEffect)((function(){e.match.aborted?A():i?T>=i&&A():A()}),[e.match.aborted,T,i]),Object(o.useEffect)((function(){if(!_||!h.length||i){var e=setInterval(L,1e3);return function(){return clearInterval(e)}}}),[E,L,_,h.length,i]);var B=Object(o.useCallback)((function(t,n){var a=t.games,r=t.boardScores,i=a[a.length-1];if(!i)return null;var o=0===y[i.white.username.toLowerCase()]?i.white:i.black,l=1===y[i.black.username.toLowerCase()]?i.black:i.white;return[c.a.createElement("div",{className:Ke.a.username},o.username),c.a.createElement("div",{className:Ke.a.score},r[o.username.toLowerCase()]),c.a.createElement("a",{href:"#".concat(e.id,".").concat(n)},"#"+n),c.a.createElement("div",{className:Ke.a.score},r[l.username.toLowerCase()]),c.a.createElement("div",{className:Ke.a.username},l.username)]}),[y,e.id]),I=Object(o.useState)(0),D=Object(f.a)(I,2),F=D[0],G=D[1],H=h.length?{}:{gridTemplateColumns:"1fr"};return h.length||i?h.filter((function(e){return e&&e.games.length})).length||i?h.length?e.expanded?c.a.createElement("div",{className:Ke.a.container,style:H},c.a.createElement("div",{className:Ke.a.results},c.a.createElement("table",{className:"download-table"},c.a.createElement("thead",null,Object.keys(y).length?null:c.a.createElement("tr",null,c.a.createElement("th",{colSpan:5},c.a.createElement(q.x,null)," Couldn't fetch player-team identifying data from Chess.com for this match",c.a.createElement("br",null),"Check back later or contact a dev if this problem persists.")),c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"40%"}},(null===(t=e.teams[0])||void 0===t?void 0:t.name)&&Object.values(y).includes(0)?e.teams[0].name:""),c.a.createElement("th",{style:{width:"5%"}}),c.a.createElement("th",{style:{width:"10%"}},"Link"),c.a.createElement("th",{style:{width:"5%"}}),c.a.createElement("th",{style:{width:"40%"}},(null===(n=e.teams[1])||void 0===n?void 0:n.name)&&Object.values(y).includes(1)?e.teams[1].name:""))),c.a.createElement("tbody",null,h.map((function(e,t){var n;return c.a.createElement("tr",{key:["row",t].join(".")},null===(n=B(e,t))||void 0===n?void 0:n.map((function(e,n){return c.a.createElement("td",{key:["cell",t,n].join(".")},e)})))}))))),h.map((function(t,n){return c.a.createElement(Pt,{id:e.id,key:["game",n].join("."),pairing:t,teamDict:y,teams:e.teams.map((function(e){return e.name})),round:e.round,board:n,focused:F===n,setFocused:function(){return G(n)}})}))):null:c.a.createElement("div",{className:Ke.a.loading},c.a.createElement(K.a,null)):c.a.createElement("div",null,"Still waiting for data from Chess.com. Check back later."):c.a.createElement("div",null,"Match has not yet started!")}function Pt(e){var t=Object(o.useMemo)((function(){return Object.entries(e.pairing.boardScores)}),[e.pairing.boardScores]),n=Object(o.useState)(e.pairing.games.length-1),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useRef)(null),s=Object(o.useMemo)((function(){return e.pairing.games.map((function(t,n){return c.a.createElement(Lt,{g:t,round:e.round,board:e.board,nb:n,teams:e.teams,teamDict:e.teamDict})}))}),[e.pairing.games,e.board,e.round,e.teams,e.teamDict]),u=e.pairing.games[r],m=u&&e.teamDict[u.black.username.toLowerCase()]?t.reverse():t;Object(o.useEffect)((function(){window.dispatchEvent(new Event("resize"))}),[]);var d=Object(o.useMemo)((function(){var e=l.current;return e?Array.from(e.querySelectorAll(".visible .pgnViewerFooter > div")):[]}),[l]),h=(Object(o.useCallback)((function(e){var t=e;if(t.deltaY<0){var n=d[1];if(!n)return;n.click(),t.preventDefault()}else if(t.deltaY>0){var a=d[2];if(!a)return;a.click(),t.preventDefault()}}),[d]),Object(o.useCallback)((function(e){switch(e.keyCode){case 37:var t=d[1];if(!t)break;t.click(),e.preventDefault();break;case 39:var n=d[2];if(!n)break;n.click(),e.preventDefault();break;case 38:var a=d[0];if(!a)break;a.click(),e.preventDefault();break;case 40:var r=d[3];if(!r)break;r.click(),e.preventDefault();break;case 32:var i=d[4];if(!i)break;i.click(),l.current&&l.current.scrollIntoView({behavior:"smooth"}),e.preventDefault();break;case 70:var o=d[5];if(!o)break;o.click();break;case 68:var c=d[6];if(!c)break;c.click(),e.preventDefault()}}),[l,d]));Object(o.useEffect)((function(){if(e.focused)return document.addEventListener("keydown",h),function(){return document.removeEventListener("keydown",h)}}),[e.focused,h]);var p=Object(o.useCallback)((function(){l.current&&e.setFocused()}),[l,e.setFocused]);return r<0?null:c.a.createElement("div",{id:[e.id,e.board].join("."),className:Ke.a.wrapper,onClick:p,ref:l},c.a.createElement("div",{className:Ke.a.boardLabel},c.a.createElement(q.c,{className:[Ke.a.pan,r?Ke.a.active:Ke.a.null].join(" "),onClick:function(){return r?i(r-1):null}}),c.a.createElement("span",{className:"bold"},m[0][1]),c.a.createElement("a",{href:"https://www.chess.com/live/game/"+u.url.split("/").pop(),target:"_blank",rel:"noopener noreferrer"},c.a.createElement(q.o,null)),c.a.createElement("span",{className:"bold"},m[1][1]),c.a.createElement(q.d,{className:[Ke.a.pan,r===e.pairing.games.length-1?Ke.a.null:Ke.a.active].join(" "),onClick:function(){return r<e.pairing.games.length-1?i(r+1):null}})),s.map((function(e,t){return c.a.createElement("div",{key:[Ke.a.gameViewWrapper,t].join("."),className:[Ke.a.gameViewWrapper,t===r?"visible":"hidden"].join(" ")},e)})))}function Lt(e){var t=e.g,n=e.round,a=e.board,r=e.nb,i=e.teams,o=e.teamDict[t.black.username.toLowerCase()];if(!t.pgn)return null;var l=['[WhiteTeam "'.concat(o?i[0]:i[1],'"]'),'[BlackTeam "'.concat(o?i[1]:i[0],'"]'),'[Board "'.concat(a,'"]'),'[Game "'.concat(r+1,'"]'),t.pgn.replace('[Round "-"]','[Round "'.concat(n,'"]'))].join("\n");return c.a.createElement(bt,{innerHTML:!1,showCoordinates:!0,width:"100%",startAtLatest:!0},l)}function At(e){var t,n,a=Object(o.createRef)(),r=Object(o.useState)(null),i=Object(f.a)(r,2),l=i[0],s=i[1],u=Object(o.useState)(!1),m=Object(f.a)(u,2),d=m[0];m[1];Object(o.useEffect)((function(){d&&a.current&&a.current.focus()}),[a,d]);var h=Object(o.useCallback)((function(){l&&e.onSubmit(l)}),[l,e.onSubmit]),p=Object(o.useCallback)((function(e){switch(e.keyCode){case 13:l&&(e.target.value="",h()),e.preventDefault()}}),[l,h]),v=Object(o.useCallback)((function(t){var n=t.nativeEvent,a=t.target,r=a.value,i=r.length,o=e.options.filter((function(t){return e.convert(t).toLowerCase().startsWith(r.toLowerCase())}));if(e.onChange(o),n.data)if(r.trim()){var c=o[0];if(s(c),c){var l=e.convert(c);a.value=l,a.select(),a.setSelectionRange(i,l.length,"forward")}}else s(null)}),[e.options]);return c.a.createElement("div",{className:null===(t=e.styles)||void 0===t?void 0:t.scoreSection},c.a.createElement("input",{type:"text",className:[null===(n=e.styles)||void 0===n?void 0:n.input].join(" "),name:"value",required:!0,placeholder:e.placeholder||"Search",onInput:v,onKeyDown:p,onSubmit:h,autoComplete:"off"}))}var Tt={aborted:0,pending:0,scheduled:0,registered:0,live:0,finished:0,confirmed:0};function Bt(e){var t=Object(o.useMemo)((function(){if(!e.matches)return Tt;var t=Object.assign({},Tt,{pending:e.total});return Object.values(e.matches).forEach((function(n){n&&n.round===e.round&&(t[n.status]++,t.pending--)})),t}),[e.matches,e.round,e.total]),n=Object(o.useMemo)((function(){return c.a.createElement(Ne.a,{type:"Pie",data:{labels:Object.entries(t).map((function(t){var n=Object(f.a)(t,2),a=n[0],r=n[1];return"".concat(a," ").concat(Math.round(100*r/e.total),"% (").concat(r,")")})),series:Object.entries(t).map((function(e){var t=Object(f.a)(e,2);return{meta:t[0],value:t[1]}}))},options:{donut:!0,donutSolid:!0,donutWidth:60,startAngle:270,total:2*e.total,height:400,ignoreEmptyValues:!0,showLabel:!0,labelPosition:"outside"},listener:{draw:function(e){if("slice"===e.type){var t=e.element._node.getTotalLength(),n={"stroke-dashoffset":{id:"anim"+e.index,dur:1e3,from:-t+"px",to:"0px",easing:Ce.Svg.Easing.easeOutQuint,fill:"freeze",begin:void 0}};0!==e.index&&(n["stroke-dashoffset"].begin="anim"+(e.index-1)+".end"),e.element.attr({"stroke-dashoffset":-t+"px"}),e.element.animate(n,!1)}}}})}),[t,e.total]);return c.a.createElement("div",{className:"gauge"},n)}var It=function(){function e(t,n){Object(j.a)(this,e),this.round=n,this.id=void 0,this.w=void 0,this.b=void 0,this.tournamentId=void 0,this.teamID=void 0,this.link=void 0,this.linkSource=void 0,this.linkType=void 0,this.scores=void 0,this.aborted=void 0,this.bodyStatus=void 0,this.metaStatus=void 0,this.registrationTime=void 0,this.startTime=void 0,this.endTime=void 0,this.players=void 0,this.scored=void 0,this.teams=void 0,this.debugStatus=void 0;for(var a=0,r=Object.keys(t);a<r.length;a++){var i=r[a];Object.defineProperty(this,i,{value:t[i]})}this.debugStatus=this.status}return Object(y.a)(e,[{key:"status",get:function(){if(this.aborted)return"aborted";for(var e=0,t=["Confirmed","Finished","Live","Registered","Scheduled"];e<t.length;e++){var n=t[e];if("is"+n in this&&this["is"+n])return n.toLowerCase()}return"pending"}},{key:"isConfirmed",get:function(){return!!this.scored}},{key:"isFinished",get:function(){return!!this.isConfirmed||("finished"===this.bodyStatus||Date.now()>(this.endTime||1/0))}},{key:"isLive",get:function(){return"In Progress"===this.metaStatus||("in_progress"===this.bodyStatus||!!(!this.isFinished&&this.startTime&&Date.now()>this.startTime))}},{key:"isRegistered",get:function(){return Date.now()>(this.registrationTime||1/0)||(!!this.players||(!!this.isLive||!!this.isFinished))}},{key:"isScheduled",get:function(){return Date.now()>(this.startTime||1/0)||(!!this.startTime||("scheduled"===this.bodyStatus||(!!this.isRegistered||!!this.isFinished)))}}]),e}();function Dt(e){var t=Object(o.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(o.useReducer)((function(e,t){var n=e.slice(0);return e.includes(t)?n.splice(n.indexOf(t)):n.push(t),n}),[decodeURIComponent(window.location.hash.slice(1).split(".").slice(0,2).join("."))]),l=Object(f.a)(i,2),s=l[0],u=l[1],h=Object(o.useState)(!1),p=Object(f.a)(h,2),v=p[0],b=p[1],g=Object(o.useReducer)((function(e,t){var n=e.slice(0);return n.push(t),n}),[]),E=Object(f.a)(g,2),j=E[0],y=E[1],_=Object(o.useReducer)((function(e,t){var n=Object.assign({},e);if(null===t.scored)return n[t.id]=null,n;var a=t;return n[t.id]=new It(a,a.round),n}),{}),k=Object(f.a)(_,2),w=k[0],O=k[1];Object(o.useEffect)((function(){b(!1),U({url:"/tournament/"+e.id+"/getPairings",params:{round:e.round}}).then(r).then((function(){return b(!0)})).catch((function(){}))}),[r,e.round,e.id]);var C=Object(o.useState)([]),S=Object(f.a)(C,2),x=S[0],R=S[1],P=["White","White score","Black","Black score","Game link","Time"],L=Object(o.useState)([]),A=Object(f.a)(L,2),T=A[0],B=A[1],I=Object(o.useCallback)(function(){var t=Object(d.a)(m.a.mark((function t(n,a){var r,i,o,c,l,s,u,d,h,p,v,b,g,E,j,y,_,k,w,C,S,x,M,R;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.length){t.next=2;break}return t.abrupt("return");case 2:r=0;case 3:if(!(r<n.length)){t.next=21;break}if(g=n[r],E=[g[0].trim(),g[1].trim()].join("."),j=e.playerDict.get(g[0].trim()),y=e.playerDict.get(g[1].trim()),j||y){t.next=11;break}return O({id:E,scored:null}),t.abrupt("continue",18);case 11:_=Object.entries(g[2]).find((function(e){return e}))||[void 0,void 0],k=Object(f.a)(_,2),w=k[0],C=k[1],(S=null===(i=C)||void 0===i?void 0:i.match(N))&&(C="https://www.chess.com/club/matches/live/"+S[1].trim()),x=S?Number(S[1]):void 0,M=(null===j||void 0===j||null===(o=j.histories[a])||void 0===o?void 0:o.match)||(null===y||void 0===y||null===(c=y.histories[a])||void 0===c?void 0:c.match),R={tournamentId:e.status.id,id:E,teamID:x,link:C,w:j,b:y,round:a,scores:(null===j||void 0===j||null===(l=j.histories[a])||void 0===l?void 0:l.game)||(null===y||void 0===y||null===(s=y.histories[a])||void 0===s?void 0:s.game)?[(null===j||void 0===j?void 0:j.histories)?null===j||void 0===j||null===(u=j.histories[a])||void 0===u?void 0:u.game:null,(null===y||void 0===y?void 0:y.histories)?null===y||void 0===y||null===(d=y.histories[a])||void 0===d?void 0:d.game:null]:(null===(h=g[3])||void 0===h?void 0:h.scores)||[null,null],scored:!!M,linkSource:w?w.startsWith("lichess")?"lichess":"chessCom":"",linkType:w?w.includes("Team")?"team":"individual":"",startTime:null===(p=g[3])||void 0===p?void 0:p.startTime,endTime:null===(v=g[3])||void 0===v?void 0:v.endTime,bodyStatus:(null===(b=g[3])||void 0===b?void 0:b.isFinished)?"finished":""},O(R);case 18:r++,t.next=3;break;case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[O,e.playerDict,e.status.id]);Object(o.useEffect)((function(){yt.clearQueue(),r([])}),[r,e.round]),Object(o.useEffect)((function(){I(a,e.round)}),[I,a]);var D=Object(o.useCallback)((function(t){return t&&t.id?"bye"===t.id?"BYE":(n="individual"===e.settings.competitors?[t.firstName,t.lastName].join(" "):t.firstName,e.settings.showRatings&&(n+=" ("+t.rating+")"),n):"\u200b";var n}),[e.settings.competitors,e.settings.showRatings]),F=Object(o.useState)(null),W=Object(f.a)(F,2),G=W[0],H=W[1];Object(o.useEffect)((function(){var e=Object.values(w).length;if(e&&a.length&&!(e<a.length)){if(G&&!j.includes(G.id))return H(G);var t=function(e){for(var t,n,a=e.length;0!==a;)n=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[n],e[n]=t;return e}(Object.values(w)).find((function(e){return!!e&&(!!e.link&&(!j.includes(e.id)&&(!e.startTime&&!e.endTime||(e.endTime?!(e.scores&&!e.scores.every((function(e){return!e})))||Math.random()<.01:!e.startTime||(Date.now()>e.startTime?Math.random()<.25:Math.random()<.01)))))}));H(t||null)}}),[w,a,H,G,j]);var z=Object(o.useMemo)((function(){var t=[],n=Object.values(w).map((function(n,a){var r,i,o,l,m,d;if(!n)return null;if(n.round!==e.round)return null;var f=n.startTime||n.registrationTime,h=new Date(f||0).toString(),p=[D(n.w),null!==(r=n.scores[0])&&void 0!==r?r:(n.isLive||n.isFinished)&&n.teams&&((null===(i=n.w)||void 0===i?void 0:i.chessCom)||(null===(o=n.b)||void 0===o?void 0:o.chessCom))?n.teams[0].score:"",D(n.b),null!==(l=n.scores[1])&&void 0!==l?l:(n.isLive||n.isFinished)&&n.teams&&((null===(m=n.w)||void 0===m?void 0:m.chessCom)||(null===(d=n.b)||void 0===d?void 0:d.chessCom))?n.teams[1].score:"",f?h.slice(0,10)+"\n"+h.slice(16,21):"",n.link,n.w?n.w.nationality:"",n.b?n.b.nationality:""];return t[a+1]=p,c.a.createElement(Ut,{key:["row",a].join("."),data:p,match:n,setMatch:O,setFinished:y,round:e.round,loadData:!!G&&G.id===n.id,expanded:s.includes(n.id),setExpanded:u,hidden:!!x.length&&!x.some((function(e){return e.id===n.w.id||e.id===n.b.id})),settings:e.settings})}));return B(t),n}),[D,G,u,B,s,x,w,e.round,e.settings,y]),K=Object(o.useState)(!1),Y=Object(f.a)(K,2),J=Y[0],Z=Y[1];Object(o.useEffect)((function(){if(!J&&window.location.hash){var e=window.location.hash.slice(1);if(e.includes(".")){var t=document.getElementById(e);t&&(t.scrollIntoView({behavior:"auto"}),Z(!0))}}}));var X=Object(o.useCallback)((function(){var t=document.createElement("a"),n=P.join(",")+"\n"+T.map((function(e){return e.join(",")})).join("\n"),a=new Blob([n],{type:"text/csv"}),r=(e.status.name.match(M)||[]).join(""),i=new Date(Date.now()).toString().slice(4,15);t.href=URL.createObjectURL(a),t.download="".concat(r,"_").concat(i,"_").concat([e.round],".").concat("csv"),t.click()}),[T,e.round,P,e.status.name]),Q=Object(o.useMemo)((function(){return c.a.createElement(Bt,{matches:w,round:e.round,total:a.length})}),[w,e.round,a]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:a.length?"animated-"+e.direction:"",style:{display:a.length?void 0:"none"}},Q),c.a.createElement("section",{className:a.length?"animated-"+e.direction:""},c.a.createElement("div",{className:V.a.subheader},c.a.createElement("div",null,"All times in ",new Date(Date.now()).toString().slice(25)),c.a.createElement("div",{className:["button"].join(" "),onClick:X},c.a.createElement("div",null,c.a.createElement(q.u,null)),c.a.createElement("div",null,"Download")),c.a.createElement("div",null,c.a.createElement("div",{className:V.a.searchBar},c.a.createElement(q.L,null),c.a.createElement(At,{onChange:function(e){return R(e)},onSubmit:function(){return Promise.resolve()},action:"",options:Array.from(e.playerDict.values()),convert:function(e){return D(e)},styles:V.a,placeholder:"Search"})))),c.a.createElement("table",{className:"download-table full-width pairings"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",{style:{width:"5%"}},"Fed"),c.a.createElement("td",{style:{width:"22.5%"}},"White"),c.a.createElement("td",{style:{width:"12.5%"}},"Link"),c.a.createElement("td",{style:{width:"5%"}}),c.a.createElement("td",{style:{width:"10%"}},"Start Time"),c.a.createElement("td",{style:{width:"5%"}}),c.a.createElement("td",{style:{width:"12.5%"}},"Watch Live"),c.a.createElement("td",{style:{width:"22.5%"}},"Black"),c.a.createElement("td",{style:{width:"5%"}},"Fed"))),c.a.createElement("tbody",null,v&&!a.length?c.a.createElement("tr",null,c.a.createElement("td",{colSpan:100},"Draw has not yet taken place!")):null,z))))}var Ft=[];function Ut(e){var t,n,a,r,i,l,s=e.match,u=e.data,m=Object(o.useState)(s.isLive),d=Object(f.a)(m,2),p=d[0],v=d[1];Object(o.useEffect)((function(){e.expanded&&!p&&v(!0)}),[e.expanded,p,v]);var b=[null===(t=s.w)||void 0===t?void 0:t.id,null===(n=s.b)||void 0===n?void 0:n.id].join(".");return c.a.createElement(c.a.Fragment,null,c.a.createElement("tr",{id:b,className:[V.a.row,e.hidden?"collapsed":""].join(" "),style:{visibility:e.hidden?"collapse":void 0}},c.a.createElement("td",null,c.a.createElement("div",{className:V.a.flag},u[6]?c.a.createElement("img",{src:E.flags.replace("|",u[6]),alt:u[6]}):null)),c.a.createElement("td",{id:null===(a=s.w)||void 0===a?void 0:a.id},c.a.createElement(h.b,{to:["","individual"===e.settings.competitors?"player":"team",null===(r=s.w)||void 0===r?void 0:r.id].join("/"),className:"playerName"},u[0])),c.a.createElement("td",{className:V.a.inner},s.link?c.a.createElement("a",{className:"button",href:s.link,target:"_blank",rel:"noopener noreferrer"},c.a.createElement(q.E,null),c.a.createElement("div",null,"chess.com")):null),c.a.createElement("td",{className:V.a.inner},c.a.createElement("div",{className:[V.a.score,V.a[s.status],s.status].join(" ")},s.isFinished||s.isLive?u[1]:null)),c.a.createElement("td",{style:{whiteSpace:"pre-line"}},u[4]||"-"),c.a.createElement("td",{className:V.a.inner},c.a.createElement("div",{className:[V.a.score,V.a[s.status],s.status].join(" ")},s.isFinished||s.isLive?u[3]:null)),c.a.createElement("td",{className:V.a.inner},s.link&&s.isScheduled?c.a.createElement("div",{className:["button",s.isLive?V.a.watchLive:""].join(" "),onClick:function(){s.isFinished&&(e.setExpanded(s.id),window.location.hash&&decodeURIComponent(window.location.hash).includes(s.id)?window.history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="#"+s.id)}},s.isFinished?c.a.createElement("div",null,"Scores"):c.a.createElement(c.a.Fragment,null,s.isLive?c.a.createElement("img",{className:"icon",src:Z.a,alt:"Watch games"}):c.a.createElement(q.o,null),c.a.createElement("a",{href:"https://www.chess.com/live#tm="+s.teamID,target:"_blank",rel:"noopener noreferrer"},s.isLive?" Watch live":"Join Game"))):null),c.a.createElement("td",{id:null===(i=s.b)||void 0===i?void 0:i.id},c.a.createElement(h.b,{to:["","individual"===e.settings.competitors?"player":"team",null===(l=s.b)||void 0===l?void 0:l.id].join("/"),className:"playerName"},u[2])),c.a.createElement("td",null,c.a.createElement("div",{className:V.a.flag},u[7]?c.a.createElement("img",{src:E.flags.replace("|",u[7]),alt:u[7]}):null))),s.link?c.a.createElement("tr",{key:["row","dropdown"].join("."),className:[e.hidden||!e.expanded?"collapsed":""].join(" "),style:e.hidden||!e.expanded?{visibility:"collapse"}:{}},c.a.createElement("td",{colSpan:100},"chessCom"===s.linkSource&&"team"===s.linkType?c.a.createElement(Rt,{id:b,match:s,setMatch:e.setMatch,setFinished:e.setFinished,loadData:e.loadData,expanded:e.expanded,enforceBoards:s.players?Number(s.players):0,round:e.round,teams:s.teams||Ft}):null)):null)}var Wt=n(162),Gt=n(27),Ht=n.n(Gt),zt=n(62);function Vt(e){var t=Object(o.useState)(null),n=Object(f.a)(t,2),a=n[0],r=(n[1],(e.streamURL||"").match(S));r||(r=["",""]);var i=r.slice(1),l=Object(f.a)(i,2),s=l[0],u=l[1],m=s.split(".").shift(),d=Object(o.useMemo)((function(){return c.a.createElement(Wt.b,{id:Ht.a.twitchPlayer,channel:u,autoplay:!0,width:"100%",height:"640px"})}),[u]),h=Object(o.useRef)(null),p=Object(o.useCallback)((function(){h.current&&e.pop(h.current)}),[e.pop,h]);return c.a.createElement(c.a.Fragment,null,"twitch"===m?c.a.createElement("section",{className:[Ht.a.container,"animated-"+e.direction].join(" ")},c.a.createElement("div",{className:Ht.a.streamHeader},c.a.createElement(q.V,null),c.a.createElement("span",{className:"bold"},u),c.a.createElement("div",{className:"button",onClick:p},"Pop-out",c.a.createElement(zt.b,null))),c.a.createElement("div",{className:Ht.a.streamContainer},c.a.createElement("div",{id:Ht.a.twitchPlayer,ref:h,className:[Ht.a.player,a?Ht.a.popped:""].join(" ")}),c.a.createElement("div",{className:[Ht.a.player].join(" "),style:{display:a?"flex":"none"}}),c.a.createElement("div",{id:Ht.a.twitchChat,className:Ht.a.chat},c.a.createElement(Wt.a,{channel:u,width:"100%",height:"100%"})))):null,"youtube"===m?c.a.createElement("section",{className:[Ht.a.container,"animated-"+e.direction].join(" ")},c.a.createElement("div",{className:Ht.a.streamHeader},c.a.createElement(q.cb,null),c.a.createElement("span",{className:"bold"},"chess-england")),c.a.createElement("div",{className:Ht.a.streamContainer},c.a.createElement("div",{id:Ht.a.youtubePlayer,className:Ht.a.player},c.a.createElement("iframe",{title:"youtubePlayer",width:.66*Math.min(window.innerWidth-40,980),height:Math.min(window.innerWidth-40,980)/2.73,src:"https://www.youtube.com/embed/R2v-XSRMOFo",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),c.a.createElement("div",{id:Ht.a.youtubeChat,className:[Ht.a.chat,Ht.a.youtubeChat].join(" ")},c.a.createElement("iframe",{title:"youtubeChat",width:.31*Math.min(window.innerWidth-40,980),height:"315",src:"https://www.youtube.com/live_chat?v=R2v-XSRMOFo&embed_domain=localhost",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))):null,c.a.createElement("div",{className:Ht.a.footer},"If you're having problems viewing this player, try disabling any extensions or Brave Shields if you have them enabled."),c.a.createElement("div",{className:"hidden"},d))}var qt=n(17),Kt=n.n(qt);function Yt(e){var t=Object(o.useState)(10),n=Object(f.a)(t,2),a=n[0],r=(n[1],Object(o.useState)(10)),i=Object(f.a)(r,2),l=i[0];i[1];return e.children?c.a.createElement("div",{className:["popped",Kt.a.draggable].join(" "),style:{bottom:a,right:l}},e.children):null}n(292),n(286);function Jt(e){var t=Object(o.useState)(!1),n=Object(f.a)(t,2),a=n[0],r=n[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("img",Object.assign({},e,{onClick:function(){return r(!a)},style:{cursor:"pointer"}})),c.a.createElement(Be.b,null,a?c.a.createElement(Be.a,{onClose:function(){return r(!1)}},c.a.createElement(Be.c,{currentIndex:0,views:[Object.assign({},e,{source:e.src})]})):null))}var Zt=n(29),Xt=n.n(Zt),Qt=(n(529),n(87));function $t(e){var t=Object(o.useContext)(ye);function n(t){var n=t.id,a=e.playerDict.get(n);return a?c.a.createElement("div",{className:Xt.a.table},a&&a.nationality?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Xt.a.key},"Nationality"),c.a.createElement("div",{className:[Xt.a.flag,Xt.a.value].join(" ")},c.a.createElement("img",{src:E.flags.replace("|",a.nationality),alt:a.nationality}))):null,Object.entries(ge.post).map((function(t,n){var r,i=Object(f.a)(t,2),o=i[0],l=i[1];return l.show&&!l.show(a,n,e.settings,"results")?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Xt.a.key},l.mobile),c.a.createElement("div",{className:Xt.a.value},l.convert?l.convert(a[o],a,e.settings,"results"):null===(r=a[o])||void 0===r?void 0:r.toString()))}))):null}return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:[Xt.a.fireworksSection,"animated-"+e.direction].join(" ")},c.a.createElement("div",{className:"pyro"},c.a.createElement("div",{className:"before"}),c.a.createElement("div",{className:"after"})),c.a.createElement("div",{className:Xt.a.resultsScreen},c.a.createElement("div",{id:"first",className:Xt.a.place},c.a.createElement(Qt.c,null),c.a.createElement("div",{className:Xt.a.position},"1",c.a.createElement("sup",null,"st")),c.a.createElement("div",{className:Xt.a.teamName},t(e.state[0])),c.a.createElement(n,{id:e.state[0]})),c.a.createElement("div",{id:"second",className:Xt.a.place},c.a.createElement(Qt.b,null),c.a.createElement("div",{className:Xt.a.position},"2",c.a.createElement("sup",null,"nd")),c.a.createElement("div",{className:Xt.a.teamName},t(e.state[1])),c.a.createElement(n,{id:e.state[1]})),c.a.createElement("div",{id:"third",className:Xt.a.place},c.a.createElement(Y.b,null),c.a.createElement("div",{className:Xt.a.position},"3",c.a.createElement("sup",null,"rd")),c.a.createElement("div",{className:Xt.a.teamName},t(e.state[2])),c.a.createElement(n,{id:e.state[2]})))),c.a.createElement("section",null,c.a.createElement("div",{className:"container"},c.a.createElement(h.b,{to:"/t/".concat(e.id,"/standings/final"),className:["header-button",Xt.a.standingsButton].join(" ")},"View Final Standings"))))}var en=n(9),tn=n.n(en);function nn(e){var t;return c.a.createElement("div",{className:[tn.a.logo,null===(t=e.classNames)||void 0===t?void 0:t.logo].join(" ")},c.a.createElement("img",{className:tn.a.staticLogo,src:"/favicon.png",alt:"swiss-logo.png"}))}function an(e){var t,n=Object(o.useState)(e.mode),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)(""),s=Object(f.a)(l,2),u=s[0],h=s[1],v=e.setSession,b=Object(o.useState)(""),g=Object(f.a)(b,2),E=g[0],j=g[1],y=Object(o.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.set("sessionID",t);case 2:v(t),setTimeout((function(){return j("/me")}),2e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,j]);Object(o.useEffect)((function(){"register"!==r&&"login"!==r&&"reset/password"!==r||window.history.pushState("",document.title,"/"+r+window.location.search)}),[r]);var _=Object(o.useCallback)((function(e){G(e).then(y).catch((function(e){e&&e.response&&e.response.data&&h(e.response.data),console.error(e)}))}),[h,y]),k=Object(o.useContext)(ke),w=Object(o.useCallback)((function(e){var t=e.style;return c.a.createElement("div",{className:tn.a.forgottenContainer,style:t},c.a.createElement("div",{className:["input",tn.a.forgotten].join(" "),onClick:function(){return i("reminder")}},"username reminder"),c.a.createElement("div",{className:["input",tn.a.forgotten].join(" "),onClick:function(){return i("reset")}},"password reset"))}),[i]),O=Object(o.useCallback)((function(){var t,n,a=Object(o.useState)(""),r=Object(f.a)(a,2),i=r[0],l=r[1],s=null===(t=e.location.search.slice(1).split("&").find((function(e){return e.startsWith("code=")})))||void 0===t?void 0:t.slice("code=".length);return Object(o.useEffect)((function(){s&&U({url:"exchangeSession",params:{sid:s}}).then(l)}),[s]),s?c.a.createElement("form",{className:tn.a.form,method:"POST",action:fe.a.resolve(T,"triggerPasswordReset"),onSubmit:function(e){var t=e.target;if(t.password.value!==t.passwordRepeat.value)return k({title:"Password reset",message:"Passwords must match!",type:"error"}),e.preventDefault();G(e).then((function(){return j("/login")}))}},c.a.createElement("div",{className:["input",tn.a.input,tn.a.text].join(" ")},i),c.a.createElement("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,placeholder:"new password",className:["input",tn.a.input].join(" ")}),c.a.createElement("input",{type:"password",name:"passwordRepeat",required:!0,placeholder:"repeat password",className:["input",tn.a.input].join(" ")}),c.a.createElement("input",{type:"hidden",name:"sid",required:!0,value:null===(n=e.location.search.slice(1).split("&").find((function(e){return e.startsWith("code=")})))||void 0===n?void 0:n.slice("code=".length)}),c.a.createElement("button",{type:"submit",className:["input",tn.a.submit].join(" ")},"RESET PASSWORD")):(j("/login"),null)}),[k,e.location.search,j]),N=Object(o.useMemo)((function(){return c.a.createElement("form",{className:tn.a.form,method:"POST",action:fe.a.resolve(T,"requestPasswordReset"),onSubmit:function(e){return G(e).then((function(){return k({title:"Password reset",message:"Successfully sent a password reset link to the email on file. Check your inbox!"})}))}},c.a.createElement("div",{className:["input",tn.a.input,tn.a.back].join(" "),onClick:function(){return i("login")}},"BACK"),c.a.createElement("input",{type:"text",name:"username",autoComplete:"username",required:!0,placeholder:"username",className:["input",tn.a.input].join(" ")}),c.a.createElement(w,null),c.a.createElement("button",{type:"submit",className:["input",tn.a.submit].join(" ")},"REQUEST PASSWORD RESET"))}),[i,k]),C=Object(o.useMemo)((function(){return c.a.createElement("form",{className:tn.a.form,method:"POST",action:fe.a.resolve(T,"requestUsernameReminder"),onSubmit:function(e){return G(e).then((function(){return k({title:"Username reminder",message:"Successfully sent a username reminder. Check your inbox!"})}))}},c.a.createElement("div",{className:["input",tn.a.input,tn.a.back].join(" "),onClick:function(){return i("login")}},"BACK"),c.a.createElement("input",{type:"email",name:"email",autoComplete:"email",required:!0,placeholder:"email",className:["input",tn.a.input].join(" ")}),c.a.createElement(w,null),c.a.createElement("button",{type:"submit",className:["input",tn.a.submit].join(" ")},"REQUEST USERNAME REMINDER"))}),[i]),S=Object(o.useMemo)((function(){return c.a.createElement("form",{className:tn.a.form,method:"POST",onSubmit:_,action:fe.a.resolve(T,"login")},c.a.createElement("input",{type:"text",name:"username",autoComplete:"username",required:!0,placeholder:"username",className:["input",tn.a.input].join(" ")}),c.a.createElement("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,placeholder:"password",className:["input",tn.a.input].join(" ")}),c.a.createElement(w,null),c.a.createElement("button",{type:"submit",className:["input",tn.a.submit].join(" ")},"LOGIN"))}),[_]),x=Object(o.useMemo)((function(){return c.a.createElement("form",{className:tn.a.form,method:"POST",onSubmit:_,action:fe.a.resolve(T,"register")},c.a.createElement("input",{type:"text",minLength:4,name:"username",required:!0,placeholder:"username",className:["input",tn.a.input].join(" ")}),c.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"password",minLength:8,className:["input",tn.a.input].join(" ")}),c.a.createElement("input",{type:"email",name:"email",autoComplete:"email",required:!0,placeholder:"email",className:["input",tn.a.input].join(" ")}),c.a.createElement("button",{type:"submit",className:["input",tn.a.submit].join(" "),onSubmit:function(e){e.target.parentElement.requestSubmit()}},"LOGIN"))}),[_]),M=Object(o.useMemo)((function(){return c.a.createElement(nn,null)}),[]),R=Object(o.useMemo)((function(){return c.a.createElement("div",{className:[tn.a.loginSection,tn.a.initialiseButton].join(" ")},c.a.createElement("div",{className:[tn.a.flip,tn.a.loginButton].join(" "),onClick:function(){i("reset/password"===e.mode?"reset/password":"login"),h("")}},c.a.createElement("div",null,"LOGIN"),c.a.createElement("div",null,L()?c.a.createElement(q.e,null):c.a.createElement(q.c,null))),c.a.createElement("div",{className:["container",tn.a.foreground,"register"===r?tn.a.registerForeground:tn.a.loginForeground].join(" ")},M,"register"===r?x:"login"===r?S:"reminder"===r?C:"reset"===r?N:"reset/password"===r?c.a.createElement(O,null):null),c.a.createElement("div",{className:[tn.a.flip,tn.a.registerButton].join(" "),onClick:function(){i("register"),h("")}},c.a.createElement("div",null,"REGISTER"),c.a.createElement("div",null,L()?c.a.createElement(q.b,null):c.a.createElement(q.d,null))))}),[r,i,h,S,x,C,N,M,e.mode,O]);return E?("/login"===E&&(i("login"),j("")),c.a.createElement(p.a,{to:E})):c.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},c.a.createElement("div",{className:[tn.a.column].join(" ")},c.a.createElement("div",{className:[tn.a.frame,"container"].join(" ")},R),c.a.createElement("div",{className:tn.a.messageBar},u||"\u200b")))}var rn=n(57),on=n.n(rn),cn=n(287),ln=n.n(cn),sn=n(157),un=new(n.n(sn).a.ProcessNodeDefinitions)(c.a),mn=ln()({isValidNode:function(e){return"script"!==e.type},processingInstructions:[{shouldProcessNode:function(e){return!0},processNode:un.processDefaultNode}]});function dn(e){return x.test(e.href)?c.a.createElement("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()}},e.children):e.href.startsWith("https://results.scorchapp.co.uk")?c.a.createElement(h.b,{to:e.href.slice("https://results.scorchapp.co.uk".length)},e.children):c.a.createElement(h.b,{to:e.href},e.children)}var fn=n(59),hn=n.n(fn);function pn(e){var t=Object(o.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){a.length&&window.location.hash&&"#latest"===window.location.hash&&(window.location.hash="#"+a[a.length-1].createdAt)}),[a]),Object(o.useEffect)((function(){U({url:["","tournament",e.id,"getAnnouncements"].join("/")}).then(r)}),[e.id,r]),c.a.createElement("div",{className:hn.a.container},a.length?c.a.createElement("div",{className:[hn.a.nav].join(" ")},c.a.createElement("div",{className:[].join(" ")},a.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e){return c.a.createElement("a",{href:"#"+e.createdAt,className:hn.a.date},new Date(e.createdAt).toString().slice(0,21))})))):null,a.length?a.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:hn.a.announcement,id:e.createdAt},c.a.createElement(on.a,{source:e.announcement.trim(),escapeHtml:!1,astPlugins:[mn],renderers:{link:dn}}),c.a.createElement("div",{className:hn.a.dates},c.a.createElement("div",null,new Date(e.createdAt).toString().slice(0,21)),c.a.createElement("div",null,"Last update: ",new Date(e.updatedAt).toString().slice(0,21)))),c.a.createElement("hr",{className:hn.a.divider}))})):c.a.createElement("section",{className:hn.a.announcement},"This tournament has no announcements at this time."))}function vn(e){var t,n=e.match.params.id,a=Object(o.useReducer)((function(e,t){var n=t.action,a=t.set,r=Object.assign({},e);return r[n]=void 0===a||a,Object.values(r).length>=4&&(r.all=!0),r}),{}),r=Object(f.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)({}),u=Object(f.a)(s,2),m=u[0],d=u[1],b=Object(o.useState)({}),g=Object(f.a)(b,2),E=g[0],j=g[1],y=Object(o.useState)([]),_=Object(f.a)(y,2),k=_[0],w=_[1],O=Object(o.useState)([]),N=Object(f.a)(O,2),C=N[0],S=N[1],x=Object(o.useState)(null),R=Object(f.a)(x,2),P=R[0],L=R[1],A=pe({status:E,players:C,settings:m,round:E.round}),T=Object(o.useMemo)((function(){if(!A.length)return new Map;var e,t=new Map,n=Object(v.a)(A);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.set(a.id,a)}}catch(r){n.e(r)}finally{n.f()}return t}),[A]),B=E.round||0;Object(o.useEffect)((function(){U({url:"/tournament/"+n+"/fetchPlayers"}).then(S).then((function(){return l({action:"players"})})).catch((function(){return l({action:"players",set:!1})}))}),[S,n,l]),Object(o.useEffect)((function(){U({url:"/tournament/"+n+"/getSettings"}).then(d).then((function(){return l({action:"settings"})})).catch((function(){return l({action:"settings",set:!1})}))}),[d,n,l]),Object(o.useEffect)((function(){U({url:"/tournament/"+n+"/getState"}).then((function(e){var t=e.players,n=Object.entries(t).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return[Number(n),a]})).sort((function(e,t){return t[0]-e[0]})).reduce((function(e,t){return e.concat(t[1])}),[]);w(n)})).then((function(){return l({action:"state"})})).catch((function(){return l({action:"state",set:!1})}))}),[w,n,l]),Object(o.useEffect)((function(){U({url:"/tournament/"+n+"/getStatus"}).then(j).then((function(){return l({action:"status"})})).catch((function(){return l({action:"sattus",set:!1})}))}),[j,l,n]),Object(o.useEffect)((function(){if(B){for(var e=new Array(B+1),t=1;t<B+1;t++)e[t]={match:0,game:0};T.set("bye",me.bye(n,B,m))}}),[T,B,n,m]);var I=Object(o.useState)(!1),D=Object(f.a)(I,2),F=D[0],W=D[1],G=Object(o.useCallback)((function(){window.scrollY?W(!0):W(!1)}),[W]);Object(o.useEffect)((function(){return document.addEventListener("scroll",G),function(){return document.removeEventListener("scroll",G)}}),[G]);var H=Object(o.useState)(""),z=Object(f.a)(H,2),V=z[0],K=z[1],Y=Object(o.useMemo)((function(){var e=Object.entries(Ee);if(m.tieBreaks){var t=m.tieBreaks.split(",");e=e.sort((function(e,n){return t.indexOf(e[0])-t.indexOf(n[0])}))}return e}),[m.tieBreaks]),J=Object(o.useCallback)((function(e){if(!e)return"\u200b";if("bye"===e)return"BYE";if("string"!==typeof e){var t=e;return"individual"===m.competitors?[t.firstName,t.lastName].join(" "):t.firstName}var n=T.get(e);return n?"individual"===m.competitors?[n.firstName,n.lastName].join(" "):n.firstName:e}),[T,m.competitors]);return Object(o.useEffect)((function(){var e=window.location.pathname.split("/")[2];m.vanityURL&&m.vanityURL!==e&&window.history.pushState("",document.title,window.location.toString().replace(e,m.vanityURL))}),[m.vanityURL]),!1===i.state?c.a.createElement(We,null):c.a.createElement("div",{id:"main",className:"animated-"+e.location.state.direction},c.a.createElement("div",{className:"container",style:{marginTop:"60px"}},c.a.createElement("div",{className:He.a.stage},c.a.createElement("div",{className:[He.a.profilePicture,i.all?"":He.a.preload].join(" ")},i.all&&m.logoURL?c.a.createElement(Jt,{src:m.logoURL,alt:"profile_picture"}):c.a.createElement("div",{className:He.a.defaultProfilePicture},i.all&&E.name?null===(t=E.name.match(M))||void 0===t?void 0:t.map((function(e){return e.substring(0,1).toUpperCase()})).join(""):"\u200b")),c.a.createElement("div",{className:[He.a.extra,i.all?"":He.a.preload].join(" ")},i.all?m.profileURL?c.a.createElement("a",{className:[He.a.website].join(" "),href:m.profileURL,target:"_blank",rel:"noopener noreferrer"},c.a.createElement(q.D,null)):null:c.a.createElement("div",{className:[He.a.website].join(" ")},"\u200b"),i.all?m.rulesURL?c.a.createElement("a",{className:[He.a.rules].join(" "),href:m.rulesURL,target:"_blank",rel:"noopener noreferrer"},c.a.createElement(q.i,null)):null:c.a.createElement("div",{className:[He.a.rules].join(" ")},"\u200b")),c.a.createElement("div",{className:He.a.nameContainer},c.a.createElement("div",{className:He.a.name},E.name||"\u200b")),c.a.createElement("div",{className:He.a.linkButtons},i.all?c.a.createElement(h.b,{className:[He.a.linkButton,"header-button"].join(" "),to:["","t",n,"announcements"].join("/")},c.a.createElement(q.j,null),"Announcements"):c.a.createElement("div",{className:[He.a.linkButton].join(" ")},"\u200b"),i.all?E.user?c.a.createElement("div",{className:[He.a.linkButton,"header-button"].join(" "),onClick:function(){return K("description"===V?"":"description")}},c.a.createElement(q.A,null),"Description"):null:c.a.createElement("div",{className:[He.a.linkButton].join(" ")},"\u200b"),i.all?E.user?c.a.createElement(h.b,{className:[He.a.linkButton,"header-button"].join(" "),to:"/@/"+E.user},c.a.createElement(q.Y,null),E.user):null:c.a.createElement("div",{className:[He.a.linkButton].join(" ")},"\u200b")),c.a.createElement("div",{className:He.a.infoBox,style:{}},i.all?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:"rules.1"},c.a.createElement("div",null,"Format: "),c.a.createElement("div",null,ie(m.pairingSystem)),c.a.createElement("div",null,"Created: "),c.a.createElement("div",null,new Date(E.createdAt).toString().slice(4,15)),c.a.createElement("div",null,"Type: "),c.a.createElement("div",null,ie(m.competitors)+"s"),c.a.createElement("div",null,ie("team"===m.competitors?"Teams":"Players"),": "),c.a.createElement("div",null,E.players),1===m.gamePointTotal?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Games:"),c.a.createElement("div",null,A.reduce((function(e,t){return e+t.histories.reduce((function(e,t){return t?e+=t.played:e}),0)}),0)/2))),c.a.createElement("div",{key:"rules.2"},c.a.createElement("div",null,"Location: "),c.a.createElement("div",null,m.location||"-"),c.a.createElement("div",null,"Time control: "),c.a.createElement("div",null,m.timeControl||"-"),c.a.createElement("div",null,"Status: "),c.a.createElement("div",null,!1!==E.active?"Live":E.round?"Finished":"Not yet started"),m.prizes?c.a.createElement("div",{className:He.a.tieBreakLink,onClick:function(){return K("prizes"===V?"":"prizes")}},"Prizes"):m.description?c.a.createElement("div",null,"\u200b"):"",c.a.createElement("div",{className:He.a.tieBreakLink,onClick:function(){return K("tie breaks"===V?"":"tie breaks")}},"Tie breaks"))):null),c.a.createElement(p.b,{path:"/t/:id/:section?/:round?/",render:function(t){var n=parseInt(t.match.params.round);return isNaN(n)&&(n=E.round),n<0||n>m.totalRounds?null:c.a.createElement(ce,{id:e.match.params.id,settings:m,section:t.match.params.section,round:n,loaded:i})}}))),c.a.createElement("section",{className:He.a.tieBreakSection},c.a.createElement("div",{className:["container",He.a.tieBreakContainer,V?He.a.visible:""].join(" ")},c.a.createElement("div",null,c.a.createElement("div",{className:He.a.tieBreakTitle,onClick:function(){return K("")}},V.toUpperCase()),c.a.createElement("div",{className:He.a.tieBreaks},"tie breaks"===V?Y.map((function(e,t){var n=Object(f.a)(e,2)[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:[n,t,"1"].join(" ")},"#",t+1),c.a.createElement("div",{key:[n,t,"2"].join(" ")},n.name))})):"description"===V?m.description:null)))),c.a.createElement(p.b,{path:"/t/:id/:section?/:round?/",render:function(t){var n;if(n="results"===t.match.params.round?E.round+1:parseInt(t.match.params.round),isNaN(n)&&(n=E.round),"Infinity"===m.totalRounds&&(m.totalRounds=1/0),n<=0||n>m.totalRounds+1)return null;var a=t.match.params.section;return a||(a="pairings"),"pairings"!==a&&"standings"!==a?null:c.a.createElement(le,{direction:e.location.state.direction.slice(6),section:t.match.params.section,round:n,id:e.match.params.id,playerDict:T,status:E,settings:m,loaded:i})}}),c.a.createElement(p.b,{render:function(t){var a=t.location;return i.status?c.a.createElement(p.d,{location:a},c.a.createElement(p.b,{exact:!0,path:"/t/:id/",render:function(){return c.a.createElement(p.a,{push:!0,to:{pathname:"/".concat(m.vanityURL||e.match.params.id,"/").concat(E.round?"pairings":"standings"),state:e.history.location.state}})}}),c.a.createElement(p.b,{path:"/t/:id/stats/",render:function(){return c.a.createElement(Ue,{direction:e.location.state.direction.slice(6),round:E.round,status:E,players:Array.from(T.values()),settings:m})}}),c.a.createElement(p.b,{path:"/t/:id/announcements/",render:function(){return c.a.createElement(pn,{id:n})}}),c.a.createElement(p.b,{path:"/t/:id/tv/",render:function(){return c.a.createElement(Vt,{direction:e.location.state.direction.slice(6),streamURL:m.streamURL,pop:L})}}),c.a.createElement(p.b,{exact:!0,path:"/t/:id/:section/",render:function(t){return void 0===E.round?null:c.a.createElement(p.a,{push:!0,to:{pathname:t.match.url+(t.match.url.endsWith("/")?"":"/")+("pairings"===t.match.params.section&&E.round&&!E.active?"results":E.round),state:e.history.location.state}})}}),c.a.createElement(p.b,{path:"/t/:id/pairings/:round",render:function(t){if("results"===t.match.params.round)return c.a.createElement(ye.Provider,{value:J},c.a.createElement($t,{direction:e.location.state.direction.slice(6),state:k,playerDict:T,settings:m,id:t.match.params.id}));var n=parseInt(t.match.params.round);return isNaN(n)||n<0||n>m.totalRounds?null:c.a.createElement(Dt,{direction:e.location.state.direction.slice(6),round:n,id:e.match.params.id,playerDict:T,status:E,settings:m})}}),c.a.createElement(je.Provider,{value:Y},c.a.createElement(p.b,{path:"/t/:id/standings/:round",render:function(t){if("final"===t.match.params.round)return c.a.createElement(p.a,{push:!0,to:{pathname:(t.match.url+(t.match.url.endsWith("/")?"":"/")).split("/").slice(0,-2).join("/")+"/"+m.totalRounds,state:t.history.location.state}});var n=parseInt(t.match.params.round);return isNaN(n)||n<0||n>m.totalRounds?null:c.a.createElement(we,{direction:e.location.state.direction.slice(6),round:n,setDisplayPlayer:function(){},show:function(){},status:E,players:A,settings:m,state:k})}})),c.a.createElement(p.b,{path:"/t/:id/*",component:We,status:404})):null}}),c.a.createElement(Yt,{margin:10},P?c.a.createElement("div",{onClick:function(){return L(null)}},c.a.createElement(q.bb,null)):c.a.createElement("div",{className:["jumpToTop",F?"opaque":"transparent"].join(" "),onClick:function(){return window.scrollTo(0,0)}},c.a.createElement(q.e,null)),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:(null===P||void 0===P?void 0:P.outerHTML)||""}})))}var bn=n(22),gn=n.n(bn),En=n(288),jn={lichess:{name:"Lichess.org",value:function(e){return e.lichess},link:"https://lichess.org/@/|",icon:["img",ee.a],authMessage:"Authentication via lichess.org is available to any admins of a linked lichess.org team account",canLink:!0},chessCom:{name:"Chess.com",value:function(e){return e.chessCom},link:"https://chess.com/club/|",idLink:"https://chess.com/members/|",icon:["img",Q.a],authMessage:"Authentication via chess.com is available to any admins of a linked chess.com club account",canLink:!0},zoom:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.zoom},link:"https://us02web.zoom.us/user/|/profile",icon:["img",ne.a]},skype:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.skype},icon:["svg",c.a.createElement(q.N,null)]},facebook:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.facebook},link:"https://facebook.com/|",idLink:"https://facebook.com/profile.php?id=|",icon:["svg",c.a.createElement(q.z,null)],authMessage:"Authentication via Facebook is not available at this time",canLink:!0,hasMultiple:!0},phone:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.phone},icon:["svg",c.a.createElement(q.I,null)]},email:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.email},icon:["svg",c.a.createElement(q.w,null)],link:"mailto:|",permanent:!0,authMessage:"Authentication via email requires a matching verified email address",canLink:!0,hasMultiple:!0}};function yn(e){switch(e){case"chess.com":return c.a.createElement("img",{src:jn.chessCom.icon[1],alt:"chessCom",className:Kt.a.icon});case"facebook.com":return c.a.createElement(q.z,{style:{color:"#3b5998"}});case"twitter.com":return c.a.createElement(q.W,{style:{color:"#00aced"}});case"twitch.tv":return c.a.createElement(q.V,{style:{color:"#6441a5"}});case"github.com":return c.a.createElement(q.C,{style:{color:"#333"}});default:return c.a.createElement(zt.a,null)}}function _n(e){var t,n,a,r,i,l,s,u=Object(o.useContext)(ke),m=Object(o.useCallback)((function(e){return u({title:"",message:e})}),[u]),d=Object(o.useReducer)((function(e){return!e}),!1),h=Object(f.a)(d,2),p=h[0],v=h[1],b=Object(o.useRef)(null),g=Object(o.useCallback)((function(){var t,n,a;if("confirm"===e.type&&e.resolve)return e.resolve("");var r=null===(t=b.current)||void 0===t?void 0:t.value.trim();if(r||(null===(n=e.prompt)||void 0===n?void 0:n.allowNull)){if((null===(a=e.prompt)||void 0===a?void 0:a.validate)&&!e.prompt.validate(r))return v();"prompt"===e.type&&e.resolve&&e.resolve(r),m("")}}),[b,e,m]),E=Object(o.useCallback)((function(e){switch(e.keyCode){case 27:var t=b.current;t&&(t.value="");break;case 13:g()}}),[g,b]);if(!e.message)return null;var j=(e.link||"").match(x),y="string"!==typeof e.icon?e.icon:e.icon?yn(e.icon):j?yn(j[1]):null;return c.a.createElement("div",{className:Kt.a.shade,onClick:function(){return m("")}},c.a.createElement("div",{className:[Kt.a.section].join(" ")},c.a.createElement("div",{className:[Kt.a.lightBoxTitle,"error"===e.type?Kt.a.error:""].join(" "),onClick:function(){return m("")}},c.a.createElement("div",null,e.link?c.a.createElement("a",{className:Kt.a.iconLink,href:e.link,rel:"noopener noreferrer",target:"_blank"},y):c.a.createElement("div",null,y)),c.a.createElement("div",null,e.title)),c.a.createElement("div",{className:Kt.a.lightBoxContent,onClick:function(e){return e.stopPropagation()}},e.message,e.link?c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:e.link,rel:"noopener noreferrer",target:"_blank"},e.link)):null,"prompt"===e.type?"textarea"===(null===(t=e.prompt)||void 0===t?void 0:t.type)?c.a.createElement("textarea",Object.assign({ref:b,onKeyDown:E,autoFocus:!0,defaultValue:null===(n=e.prompt)||void 0===n?void 0:n.defaultValue},null===(a=e.prompt)||void 0===a?void 0:a.additionalInputProps)):c.a.createElement("input",Object.assign({ref:b,onKeyDown:E,type:(null===(r=e.prompt)||void 0===r?void 0:r.type)||"text",autoFocus:!0,defaultValue:null===(i=e.prompt)||void 0===i?void 0:i.defaultValue},null===(l=e.prompt)||void 0===l?void 0:l.additionalInputProps)):null,p?c.a.createElement("div",{className:Kt.a.error},null===(s=e.prompt)||void 0===s?void 0:s.errorMessage):null),"confirm"===e.type||"prompt"===e.type?c.a.createElement("div",{className:Kt.a.dateTime,onClick:function(e){return e.stopPropagation()}},c.a.createElement("div",{className:Kt.a.reject,onClick:function(){e.reject&&e.reject(),m("")}},c.a.createElement(q.S,null)),c.a.createElement("div",{className:Kt.a.resolve,onClick:g},c.a.createElement(q.m,null))):c.a.createElement("div",{className:Kt.a.dateTime},c.a.createElement("div",{className:Kt.a.footer},new Date(Date.now()).toString().slice(0,21)))))}function kn(e){var t=e.notif;if(!t.id)return null;var n=c.a.createElement(zt.a,null),a=(t.link||"").match(x);return a&&(n=yn(a[1])),c.a.createElement("div",{className:Kt.a.shade,onClick:function(){return e.select({})}},c.a.createElement("div",{className:[Kt.a.section].join(" ")},c.a.createElement("div",{className:Kt.a.lightBoxTitle},c.a.createElement("div",null,t.link?c.a.createElement("a",{className:Kt.a.iconLink,href:t.link,rel:"noopener noreferrer",target:"_blank"},n):c.a.createElement("div",null,n)),c.a.createElement("div",null,t.title)),c.a.createElement("div",{className:Kt.a.lightBoxContent,onClick:function(e){return e.stopPropagation()}},c.a.createElement(on.a,{source:t.content.trim()+(t.link?"\n\n[".concat(t.link,"](").concat(t.link,")"):""),escapeHtml:!1,astPlugins:[mn],renderers:{link:dn}})),c.a.createElement("div",{className:Kt.a.dateTime},c.a.createElement("div",{className:Kt.a.footer},ie(t.role)," Announcement | ",new Date(t.createdAt).toString().slice(0,21)))))}function wn(e){var t,n=Object(o.useState)(0),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)([]),s=Object(f.a)(l,2),u=s[0],m=s[1],d=Object(o.useState)([]),p=Object(f.a)(d,2),v=p[0],b=p[1],g=Object(o.useContext)(_e),E=Object(o.useCallback)((function(){return U({url:"/tournaments"}).then(m)}),[m]),j=Object(o.useCallback)((function(){return U({url:"/notifications"}).then((function(e){return b(e.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})))}))}),[b]);return Object(o.useEffect)((function(){E(),j()}),[E,j]),Object(o.useEffect)((function(){H.on("connected_count",(function(e){return i(e)}))}),[i]),Object(o.useEffect)((function(){if(!r){var e=setTimeout((function(){return H.emit("request_online")}),1e3);return function(){return clearTimeout(e)}}}),[r]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},c.a.createElement("div",{className:gn.a.container},c.a.createElement("div",{className:gn.a.title},c.a.createElement("h1",null,c.a.createElement("span",{className:"bold"},"Results")," by ScorchChess"),c.a.createElement("h3",null,"Your universal platform for results and pairings. Attractive. Automated. Effortless.")),c.a.createElement("div",{className:["container",gn.a.announcements].join(" ")},c.a.createElement("table",{className:[gn.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:gn.a.sectionHeader},"Announcements"))),c.a.createElement("tbody",null,v.map((function(e,t){var n=c.a.createElement(zt.a,null),a=(e.link||"").match(x);return a&&(n=yn(a[1])),c.a.createElement("tr",{className:gn.a.notificationRow,key:["notification",t].join(".")},c.a.createElement("td",null,c.a.createElement("div",{onClick:function(){return g(e)}},e.link?c.a.createElement("a",{className:gn.a.iconLink,href:e.link,rel:"noopener noreferrer",target:"_blank"},n):c.a.createElement("div",null,"icon"),c.a.createElement("div",null,c.a.createElement("span",{className:"bold"},e.title)),c.a.createElement("div",{className:gn.a.notifContent},e.content),c.a.createElement("div",{className:gn.a.expando},c.a.createElement(q.d,null)))))}))))),c.a.createElement("div",{className:["container",gn.a.tournaments].join(" ")},c.a.createElement("table",{className:[gn.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",{className:gn.a.sizer},c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null)),c.a.createElement("tr",null,c.a.createElement("th",{colSpan:4,className:gn.a.sectionHeader},"Public Tournaments")),c.a.createElement("tr",{className:gn.a.sectionHeader},c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Started"),c.a.createElement("th",null,"Round"),c.a.createElement("th",null))),c.a.createElement("tbody",null,u.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(e,t){var n=new Date(e.createdAt).toString();return c.a.createElement("tr",{key:[e.id,t].join("."),className:gn.a.rowLink},c.a.createElement("td",null,c.a.createElement(h.b,{className:gn.a.tournamentLink,to:"/"+e.id},e.name||e.id)),c.a.createElement("td",null,c.a.createElement(h.b,{className:gn.a.tournamentLink,to:"/"+e.id},n.slice(0,11))),c.a.createElement("td",null,c.a.createElement(h.b,{className:gn.a.tournamentLink,to:"/"+e.id},e.round)),c.a.createElement("td",null,c.a.createElement(h.b,{className:gn.a.tournamentLink,to:"/"+e.id},c.a.createElement(q.d,null))))}))))),c.a.createElement("div",{className:H.connected?gn.a.connected:gn.a.disconnected},c.a.createElement(En.a,null)," ",r||"-"," user",r>=2?"s":""," online"),c.a.createElement("a",{href:"https://beta.scorchapp.co.uk",rel:"noopener noreferrer",target:"_blank",className:[gn.a.new].join(" ")},"Create New Tournament",c.a.createElement(q.d,null)))))}var On=n(31),Nn=n.n(On);function Cn(e){var t,n=Object(o.useState)([]),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return U({url:"/users"}).then(i)}),[i]);Object(o.useEffect)((function(){l()}),[l]);var s=Object(o.useState)([]),u=Object(f.a)(s,2),m=u[0],d=u[1],p=Object(o.useCallback)((function(){return U({url:"/teams"}).then(d)}),[d]);return Object(o.useEffect)((function(){p()}),[p]),c.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},c.a.createElement("div",{className:Nn.a.container},c.a.createElement("section",{className:"container"},c.a.createElement("div",{className:Nn.a.title},c.a.createElement("div",null,c.a.createElement("b",null,"Users")),c.a.createElement("div",{className:"light"},r.length)),c.a.createElement("div",{className:Nn.a.userTable},r.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:["status",t].join("."),className:Nn.a.status},e.isLicensed?c.a.createElement(q.t,null):c.a.createElement(q.r,{style:{fontSize:"0.5em"}})),c.a.createElement(h.b,{key:["username",t].join("."),className:Nn.a.profile,to:"/@/"+e.username},e.username))})))),c.a.createElement("section",{className:"container"},c.a.createElement("div",{className:Nn.a.title},c.a.createElement("div",null,c.a.createElement("b",null,"Teams")),c.a.createElement("div",{className:"light"},m.length)),c.a.createElement("div",{className:Nn.a.userTable},m.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null),c.a.createElement(h.b,{key:["username",t].join("."),className:Nn.a.profile,to:"/team/"+e.id},e.name))}))))))}var Sn=n(37),xn=n(24),Mn=n.n(xn),Rn={draw:c.a.createElement(q.a,null),announcement:c.a.createElement(q.j,null)};function Pn(e){var t=Object(o.useMemo)((function(){var t;return t={},Object(Sn.a)(t,"/@/"+e.profile.username,"login"),Object(Sn.a)(t,"/login","login"),Object(Sn.a)(t,"/@/","community"),Object(Sn.a)(t,"/community","community"),Object(Sn.a)(t,"/team/","community"),Object(Sn.a)(t,"/player/","community"),t}),[e.profile.username]),n=Object(o.useContext)(ga),a=Object(o.useState)(!1),r=Object(f.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(!0),u=Object(f.a)(s,2),m=u[0],d=u[1],p=Object(o.useState)([]),v=Object(f.a)(p,2),b=v[0],g=v[1],E=Object(o.useReducer)((function(e){return!e}),!1),j=Object(f.a)(E,2),y=j[0],_=j[1],k=Object(o.useMemo)((function(){return b.filter((function(e){return e&&!e.seen})).length}),[b]);Object(o.useEffect)((function(){document.title=k?"("+k+") "+document.title:"Results | ScorchChess"}),[k]);var w=Object(o.useMemo)((function(){return[{name:c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"bold"},"Results"),"\u200b ","by ScorchChess"),mobile:"HOME",url:"/",selected:!Object.entries(t).some((function(t){var n=Object(f.a)(t,1)[0];return e.currentPath.startsWith(n)}))},{name:"COMMUNITY",url:"/community",selected:"community"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))]},{name:"ABOUT",url:"https://scorchapp.co.uk",mobileIgnore:!0},{name:"DESKTOP",url:"https://beta.scorchapp.co.uk",mobileIgnore:!0},{name:c.a.createElement(c.a.Fragment,null,c.a.createElement(q.h,null),k?c.a.createElement("div",{className:Mn.a.unseen},k):null),onClick:_,native:!0,mobileIgnore:!0},{name:n?e.profile.username||"PROFILE":"SIGN IN",url:n?"/@/"+e.profile.username:"/login",selected:"login"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))],native:!0}]}),[n,e.profile,e.currentPath,t,_,k]),O=Object(o.useCallback)((function(){window.innerWidth===window.screen.width&&window.innerHeight===window.screen.height?d(!1):d(!0)}),[d]);Object(o.useEffect)((function(){return document.addEventListener("fullscreenchange",O),function(){return document.removeEventListener("fullscreenchange",O)}}),[O]);var N=Object(o.useCallback)((function(e){122===e.keyCode&&(window.innerWidth>window.screen.width-10&&window.innerHeight>window.screen.height-10?d(!1):d(!0))}),[d]);Object(o.useEffect)((function(){return document.addEventListener("keydown",N),function(){return document.removeEventListener("keydown",N)}}),[O,N]);var C=Object(o.useState)(12),S=Object(f.a)(C,2),x=S[0],M=S[1],R=Object(o.useCallback)((function(){window.scrollY?M(6):M(12)}),[M]);return Object(o.useEffect)((function(){return document.addEventListener("scroll",R),function(){return document.removeEventListener("scroll",R)}}),[R]),Object(o.useEffect)((function(){if(e.profile.id){H.on("notifs",g),H.emit("request_notifs");var t=setInterval((function(){return H.emit("request_notifs")}),6e4);return function(){return clearInterval(t)}}}),[g,e.profile.id]),Object(o.useEffect)((function(){H.emit("request_notifs")}),[g]),Object(o.useEffect)((function(){var e=function(){return H.emit("request_notifs")};return window.addEventListener("focus",e),function(){return window.removeEventListener("focus",e)}}),[]),Object(o.useEffect)((function(){var e=function(){return H.emit("request_notifs")};return window.addEventListener("blur",e),function(){return window.removeEventListener("blur",e)}}),[]),m?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Mn.a.header,style:{height:x+"vh"}},c.a.createElement(h.b,{to:{pathname:"/"},className:Mn.a.logoWrapper},c.a.createElement("img",{src:"/favicon.png",className:Mn.a.logo,alt:"logo",style:{height:1.618*x+"vh"}})),L()?c.a.createElement("div",{className:Mn.a.menuButton,onClick:function(){return l(!i)}},c.a.createElement(q.g,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Mn.a.buttonContainer},w.map((function(e,t){return e.url&&e.url.startsWith("/")?c.a.createElement("div",{key:["headerLink",t].join("."),className:[Mn.a.headerButton,e.selected?Mn.a.selected:""].join(" ")},c.a.createElement(h.b,{className:[Mn.a.button,e.native?Mn.a.native:""].join(" "),to:{pathname:e.url}},e.name)):c.a.createElement("div",{key:["headerLink",t].join("."),className:[Mn.a.headerButton,e.selected?Mn.a.selected:""].join(" ")},c.a.createElement("a",{key:["headerLink",t].join("."),className:[Mn.a.button,e.native?Mn.a.native:""].join(" "),onClick:e.onClick,href:e.url,target:"_blank",rel:"noopener noreferrer"},e.name))}))))),c.a.createElement("div",{className:Mn.a.notifications,style:{opacity:y?1:0,top:x+"vh",visibility:y?"visible":"hidden"}},c.a.createElement("div",null,c.a.createElement("strong",null,"Notifications")),c.a.createElement("hr",null),b.length?b.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e){return c.a.createElement(h.b,{to:e.link,className:Mn.a.inlineNotif,onClick:function(){return W({url:"/profile/readNotification",data:{id:e.id},noCatch:!0}).then((function(){return H.emit("request_notifs")})).then((function(){return _()}))}},Rn[e.role]||c.a.createElement("div",null),c.a.createElement("div",{className:Mn.a.inlineNotifContent},c.a.createElement(on.a,{source:e.content.trim(),escapeHtml:!1,astPlugins:[mn],renderers:{link:dn}})),c.a.createElement("div",{className:Mn.a.inlineNotifDate},function(e,t){for(var n=["year","month","day","hour","minute","second"],a=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()],r=[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()],i=0;i<n.length;i++)if(a[i]!==r[i]){var o=r[i]-a[i],c=n[i];return o>=2&&(c+="s"),[o,c,"ago"].join(" ")}}(new Date(e.createdAt),new Date(Date.now()))))})):"You have no new notifications at this time."),L()?c.a.createElement("div",{className:Mn.a.mobileMenu,style:{paddingTop:i?void 0:"0px",maxHeight:i?"100%":"0px"}},w.map((function(e,t){if(e.mobileIgnore)return null;var n=e.mobile||e.name;return"string"===typeof n&&(n=n.toLowerCase()),c.a.createElement(c.a.Fragment,null,c.a.createElement(h.b,{key:[e,t].join("."),className:Mn.a.button,onClick:function(){return l(!1)},to:{pathname:e.url,state:{from:window.location.pathname}}},n))}))):null):null}function Ln(e){var t,n=Object(o.useState)(null===(t=e.expanded)||void 0===t||t),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useRef)(null),s=l.current;return Object(o.useEffect)((function(){"boolean"===typeof e.expanded&&i(e.expanded)}),[e.expanded,i]),Object(o.useEffect)((function(){if(s)for(var e=s.nextElementSibling;e&&e.className.includes("container");){if(!e)return;e.style.overflow||(e.style.overflow="hidden"),e.style.transition||(e.style.transition="all 0.333s ease"),r?e.removeAttribute("style"):Object.assign(e.style,{maxHeight:"0px",paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"0px"}),e=e.nextElementSibling}})),c.a.createElement("div",{ref:l,className:[Kt.a.divide,r?"":Kt.a.collapsed].join(" "),onClick:function(){return i(!r)}},c.a.createElement("hr",null),e.name,c.a.createElement(q.q,null),c.a.createElement("hr",null))}var An=n(89),Tn=n.n(An),Bn=n(289),In=n(19),Dn=n.n(In),Fn=n(5),Un=n.n(Fn);function Wn(e){return e?"On":!1===e?"Off":""}var Gn={source:{name:"Source",enum:["","lichess","chessCom"],convert:function(e){return"lichess"===e?"Lichess.org":"chessCom"===e?"Chess.com":"None"},defaultValue:"",level:1},pullResults:{name:"Pull results",show:{source:["lichess","chessCom"]},enum:[0,1,2],type:"number",highlight:!0,level:1,convert:function(e){return 0===e?"Off":1===e?"Ask me first":"Smart Pull and save all"},defaultValue:1},allowSelfLinks:{name:"Let users submit links?",lockOnInit:!1,enum:[0,1,2,3],type:"number",defaultValue:1,highlight:!0,level:1,convert:function(e){return 0===e?"Off":1===e?"Ask me first":2===e?"Save if both players confirm":"Save if either player confirms"}},allowSelfSubmissions:{name:"Let users submit results?",convert:Wn,locked:!0,lockOnInit:!1,type:"boolean",defaultValue:!0},allowRegistration:{name:"Let users register online?",convert:ie,enum:["closed","approve","open"],onInit:!1,defaultValue:"closed"}};function Hn(e){var t=e.p,n=Object(o.useState)({}),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)([]),s=Object(f.a)(l,2),u=s[0],m=s[1];Object(o.useEffect)((function(){U({url:["tournament",t.tournamentId,"fetchPlayers"].join("/"),params:{ids:u.join(",")}}).then((function(e){var t,n={},a=Object(v.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.id]=r.name}}catch(o){a.e(o)}finally{a.f()}i(n)}))}),[t.tournamentId,u,i]);var d=new me(t,t.tournament.round,t.tournament.setting),p="string"!==typeof t.tournament.setting.totalRounds&&t.tournament.setting.totalRounds!==1/0?t.tournament.setting.totalRounds:t.histories.length+1,b=t.histories.slice(0);Object(o.useEffect)((function(){var e=[];t.histories.forEach((function(t,n){if(!n)return null;t||(t={});var a=t.id;a&&"bye"!==a.toLowerCase()&&!(a in r)&&e.push(a)})),e.length&&m(e)}),[t.histories,r,m]);for(var g=0;g<=p;g++)b[g]||(b[g]=null);for(var E=Object(f.a)([null,null],2),j=E[0],y=E[1],_=1;_<b.length;_++){if(!b[_]){y=null;break}var k=Object.assign(b[_],{round:_,w:"W"===b[_].colour?t.id:b[_].id,b:"W"===b[_].colour?b[_].id:t.id});if(null===k.match){y=k;break}j=k}return c.a.createElement("section",{key:["section",t.id].join("."),className:["container",Dn.a.background].join(" ")},c.a.createElement("div",{className:Dn.a.stage},c.a.createElement(h.b,{to:"/t/".concat(t.tournament.setting.vanityURL||t.tournament.id),className:[Dn.a.name,Dn.a.box].join(" ")},t.tournament.name),c.a.createElement("div",{className:[Dn.a.scores,Dn.a.box].join(" ")},Object.entries(ge.post).map((function(e,n){var a,r=Object(f.a)(e,2),i=r[0],o=r[1];return o.show&&!o.show(d,n,t.tournament.setting,"results")?null:c.a.createElement("div",{className:Dn.a.row,key:["row",n].join(".")},c.a.createElement("div",{className:Dn.a.key},o.brief||o.mobile),c.a.createElement("div",{className:Dn.a.value},o.convert?o.convert(d[i],d,t.tournament.setting,"results"):null===(a=d[i])||void 0===a?void 0:a.toString()))}))),c.a.createElement(h.b,{to:"/t/".concat(t.tournament.setting.vanityURL||t.tournament.id),className:[Dn.a.currRound,Dn.a.box,"header-button"].join(" ")},"Round: ",t.tournament.round),c.a.createElement("div",{className:[Dn.a.nextRound,Dn.a.box,"header-button"].join(" ")},"Time: ",t.tournament.setting.timeControl),c.a.createElement("div",{className:[Dn.a.history,Dn.a.box].join(" "),style:t.tournament.setting.totalRounds<10?{gridTemplateRows:"1.5em repeat(".concat(t.tournament.setting.totalRounds,", auto)")}:{}},c.a.createElement("div",{className:Dn.a.subtitle},"Results"),b.map((function(e,n){if(!n)return null;e||(e={});var a=e,i=a.id,o=a.colour,l=e.game,s=e.match,m=null!==e.game&&"game"===t.tournament.setting.displayPoints,d="W"===o?t.id:e.id,f="W"===o?e.id:t.id;i&&"bye"!==i.toLowerCase()&&!(i in r)&&u.push(i);var p=[n,r[i]||("bye"===i?"BYE":i),o||"\u200b",null!==l?l:c.a.createElement(q.v,null),null!==s?s:c.a.createElement(q.v,null)];return c.a.createElement("div",{className:[Dn.a.resultsRow,m?"":Dn.a.small].join(" "),key:["row","history",n].join(".")},p.map((function(e,a){var r=1===a?Dn.a.playerName:Dn.a.fieldBox,o=1===a?"/".concat("team"===t.tournament.setting.competitors?"team":"player","/").concat(i):"/".concat(t.tournament.id,"/pairings/").concat(n,"#").concat(d,".").concat(f);return 3!==a||m?i?c.a.createElement(h.b,{to:o,className:r,key:["entry",a].join(".")},e):c.a.createElement("div",{className:r,key:["entry",a].join(".")},e):null})))}))),t.active&&t.tournament.active?c.a.createElement("div",{className:Dn.a.action},j?c.a.createElement(h.b,{className:"header-button",to:"/".concat(t.tournament.id,"/pairings/").concat(j.round,"#").concat(j.w,".").concat(j.b)},c.a.createElement("img",{src:Z.a,alt:"watch"}),"Analyse last game"):null,y?c.a.createElement(h.b,{className:"header-button",to:"/".concat(t.tournament.id,"/pairings/").concat(y.round,"#").concat(y.w,".").concat(y.b)},c.a.createElement(q.y,null),"View next game"):null):null))}function zn(e){return c.a.createElement("section",{className:["container",Dn.a.background].join(" ")},c.a.createElement("div",{className:Dn.a.teamStage},c.a.createElement(h.b,{to:"/team/".concat(e.id),className:[Dn.a.name,Dn.a.box].join(" ")},e.name),c.a.createElement("div",{className:Dn.a.action},c.a.createElement("div",{className:"header-button"},c.a.createElement(q.B,{style:{color:"var(--col-alert1)"}}),"Founded: ",new Date(e.createdAt).toString().slice(4,15)),c.a.createElement("div",{className:"header-button"},c.a.createElement(q.p,null),"Last online: ",new Date(e.updatedAt).toString().slice(4,15)))))}function Vn(e){var t,n,a=e.u,r=e.isAuthed,i=e.update,l=(Object(o.useContext)(ga),Object(o.useContext)(ke)),s=a.prop,u=a.opp,f=a.colour,p=a.round,v=a.id,b=a.result,g="B"===f&&1===s.tournament.setting.gamePointTotal,j=g?u:s,y=g?s:u,_="individual"===s.tournament.setting.competitors?"player":"team",k=Object.values(b[2]).find((function(e){return e})),w=new It(Object(Bn.a)({w:j,b:y,id:v,tournamentId:s.tournamentId,round:p,scores:[null===(t=j.histories[p])||void 0===t?void 0:t.game,null===(n=y.histories[p])||void 0===n?void 0:n.game],teams:[],link:k},b[3]),p),O=s.tournament.setting.source?Gn.source.convert(s.tournament.setting.source):"";console.log(w);var C=Object(o.useCallback)((function(){l({title:"Add game link",message:"Input your ".concat(_," game link").concat(O?" from "+O:"",":"),icon:"chessCom"===s.tournament.setting.source?"chess.com":void 0,type:"prompt",resolve:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="B"===f?u:s,a="B"===f?s:u,e.next=4,Et.a.hash([n.id,a.id,w.tournamentId,p].join("."),10);case 4:r=e.sent,W({url:"/submit/gameLink",data:{idW:n.id,idB:a.id,tournamentId:w.tournamentId,round:p,key:r,link:t}}).then(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),prompt:{validate:function(e){return"chessCom"!==s.tournament.setting.source||("team"!==_||N.test(e))},errorMessage:"team"===_?"Link must be a valid from "+O:"",additionalInputProps:{autoComplete:"game-link",spellCheck:!1}}})}),[l,s.tournament.setting,_,w,p,i]);return c.a.createElement("section",{className:["container",Un.a.upcomingBattle].join(" ")},c.a.createElement("div",{className:[Un.a.stage,g?Un.a.reversed:" "].join(" ")},c.a.createElement(h.b,{to:"/".concat(_,"/").concat(j.id),className:Un.a.name,style:{gridArea:"wName"}},j.name),j.nationality?c.a.createElement("div",{className:Un.a.flag,style:{gridArea:"wFlag"}},c.a.createElement("img",{src:E.flags.replace("|",j.nationality),alt:j.nationality})):null,c.a.createElement(h.b,{to:["","t",s.tournament.setting.vanityURL||s.tournamentId,"pairings",p].join("/"),className:[Un.a.vs,Un.a.round].join(" ")},p),c.a.createElement("div",{className:Un.a.vs},"VS"),y.nationality?c.a.createElement("div",{className:Un.a.flag,style:{gridArea:"bFlag"}},c.a.createElement("img",{src:E.flags.replace("|",y.nationality),alt:y.nationality})):null,c.a.createElement(h.b,{to:"/".concat(_,"/").concat(y.id),className:Un.a.name,style:{gridArea:"bName"}},y.name),c.a.createElement("div",{className:Un.a.infoBox},s.histories&&s.histories[p]&&w.scores.some((function(e){return e}))?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Result:"),c.a.createElement("div",{style:{fontWeight:700}},function(){switch(s.histories[p].match){case 1:return"Win";case.5:return"Draw";case 0:return"Loss"}}())):null,c.a.createElement("div",null,"Scores:"),c.a.createElement("div",null,w.scores.join("-")),c.a.createElement("div",null,w.startTime&&new Date(w.startTime).valueOf()<Date.now()?"Started:":"Starting:"),w.startTime?new Date(w.startTime).toString().slice(0,10)+" "+new Date(w.startTime).toString().slice(16,21):c.a.createElement("div",{className:[Un.a.null,Un.a.clickButton].join(" ")},"No starting time added")),c.a.createElement("div",{className:Un.a.buttons},w.scores.some((function(e){return e}))?c.a.createElement(h.b,{to:["","t",s.tournament.setting.vanityURL||s.tournamentId,"pairings",p].join("/")+"#"+v,className:["header-button","link",Un.a.join].join(" ")},c.a.createElement(q.o,null),"Scores"):w.link?c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:w.link,rel:"noopener noreferrer",target:"_blank",className:["header-button","link",Un.a.join].join(" ")},c.a.createElement(q.E,null),"Join game on ",O),r>=2?c.a.createElement("div",{className:["header-button","link",Un.a.remove].join(" ")},"Remove link"):null):r?c.a.createElement("div",{className:["header-button","link",Un.a.join,Un.a.gameLink].join(" "),onClick:C},c.a.createElement(q.K,null),"Add game link"):c.a.createElement("div",{className:["header-button",Un.a.join,Un.a.null].join(" ")},"No game link added"),c.a.createElement(h.b,{to:["","t",s.tournament.setting.vanityURL||s.tournamentId].join("/"),className:["header-button","link"].join(" ")},c.a.createElement(q.n,null),s.tournament.name),c.a.createElement("div",{className:["header-button","link",Un.a.null].join(" ")},c.a.createElement(q.h,null),"Set reminder"))))}function qn(e){var t=Object(o.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)((function(){return U({url:"/profile/tournaments"}).then(r)}),[r]);Object(o.useEffect)((function(){e.isAuthed&&"player"===e.type&&i()}),[i,e.isAuthed,e.type]);var l=Object(o.useMemo)((function(){var t=[[],[]];if(!e.profile)return t;var n,a=Object(v.a)(e.profile.tournaments);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.active&&r.tournament.active?t[0].push(r):t[1].push(r)}}catch(i){a.e(i)}finally{a.f()}return t}),[e.profile]),s=Object(f.a)(l,2),u=s[0],m=s[1];return c.a.createElement(c.a.Fragment,null,a.length?c.a.createElement("section",{className:"animated-"+e.direction,key:"standings.1"},c.a.createElement(Ln,{name:"MANAGED TOURNAMENTS"}),c.a.createElement("div",{className:["container"].join(" ")},c.a.createElement("table",{className:[Tn.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"20px"}},"Manage"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Started"),c.a.createElement("th",null,"Round"),c.a.createElement("th",null,"View"))),c.a.createElement("tbody",null,a.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(t,n){var a=new Date(t.createdAt).toString();return c.a.createElement("tr",{key:[t.id,n].join("."),className:Tn.a.rowLink},c.a.createElement("td",null,c.a.createElement("a",{className:Tn.a.tournamentLink,href:"https://beta.scorchapp.co.uk"},c.a.createElement(q.c,null))),c.a.createElement("td",null,t.name||t.id),c.a.createElement("td",null,a.slice(0,11)),c.a.createElement("td",null,t.round),c.a.createElement("td",null,t.setting&&t.setting.public?c.a.createElement(h.b,{className:Tn.a.tournamentLink,to:{pathname:"/"+t.id,state:{from:e.location.pathname}}},c.a.createElement(q.d,null)):null))})))))):null,c.a.createElement(Ln,{name:"ACTIVE TOURNAMENTS"}),u.map((function(e){return c.a.createElement(Hn,{p:e})})),c.a.createElement(Ln,{name:"INACTIVE TOURNAMENTS"}),m.map((function(e){return c.a.createElement(Hn,{p:e})})),c.a.createElement("section",null))}var Kn=n(290);function Yn(e){var t=Object(o.useContext)(ke);function n(e){return a.apply(this,arguments)}function a(){return(a=Object(d.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,_t(n.trim());case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return",console.error("Invalid username to link"));case 7:W({url:"/profile/chessCom/link",data:{username:n,nationality:null===(a=r.country)||void 0===a?void 0:a.split("/").pop()}}).then(e.updateProfile);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{href:function(){t({title:"Link Chess.com account",message:"Enter Chess.com account to link:",type:"prompt",icon:"chess.com",resolve:n})},setWindow:function(){}}}var Jn={"@id":"",name:""};function Zn(e){var t=Object(o.useState)(null),n=Object(f.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){e&&wt(e.split("/").pop()).then(r)}),[e]),a||Jn}function Xn(e){var t=Object(o.useContext)(ke),n=Object(o.useState)(""),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return U({url:"/profile/chessCom/token"}).then(i)}),[i]),s=(e.profile.chessCom||{}).username;return Object(o.useEffect)((function(){s&&(r||l())}),[r,l,s]),function(){var n=Object(d.a)(m.a.mark((function n(){var a,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(a=e.profile.chessCom)||void 0===a?void 0:a.verified)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,W({url:"/profile/chessCom/verify"}).then(e.updateProfile).catch((function(){}));case 4:t({title:"Verify your chess.com account",icon:c.a.createElement("img",{src:jn.chessCom.icon[1],alt:"chessCom"}),link:jn.chessCom.idLink.replace("|",(null===(i=e.profile.chessCom)||void 0===i?void 0:i.username)||""),message:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Head to your chess.com profile and click 'Enter a status here'. Copy and paste the following code into your status. Don't worry! You can change it back afterwards!"),c.a.createElement("span",{className:"mono"},"SCORCH_TOKEN=",r),c.a.createElement("p",null,"Click ",c.a.createElement("button",{onClick:function(){return W({url:"/profile/chessCom/verify"}).then((function(){return t({title:"",message:""})})).then(e.updateProfile)}},"here")," when done."))});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}function Qn(e){var t=Object(o.useMemo)((function(){var t;return Object.entries((null===(t=e.profile)||void 0===t?void 0:t.meta)||{}).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return a?((n=n.trim()).endsWith("?")&&(n=n.slice(0,-1)),"boolean"===typeof a?n:(n+=": ")+a.toString()):null})).filter((function(e){return e}))}),[e.profile]),n=Object(o.useMemo)((function(){return t.map((function(e,t){return e?c.a.createElement("div",{className:Un.a.notes},c.a.createElement("div",{key:["line",t].join(".")},e)):null}))}),[t]),a=Object(o.useState)(""),r=Object(f.a)(a,2),i=r[0],l=r[1],s=Zn(i),u=Object(o.useCallback)((function(e,t){return t.name?t.name:t.username?t.username:t.id?t.id:"chessCom"!==e.id?ie(e.id):s.name?s.name:(t.link&&!i&&l(t.link),ie(e.id))}),[l,s.name,i]),v=Object(o.useContext)(ga),b=Object(o.useContext)(ke),g=Object(o.useMemo)((function(){return Object.entries(jn).reverse().map((function(t,n){var a=Object(f.a)(t,2),r=a[0],i=a[1];if(!(i=Object.assign(jn[r],{id:r})))return null;var o=e.profile[r];return"email"===r&&(o=e.profile.email?Object.assign(e.profile.emailMeta||{},{id:e.profile.email}):void 0),!o||"object"!==typeof o||"user"===e.type&&!o.verified?null:[i,o]})).filter((function(e){return e}))}),[e]),j=Object(o.useCallback)((function(){b({title:"",message:""}),W({url:[e.type,e.id,"create"].join("/")}).then(e.updateProfile)}),[e.id,e.type,e.updateProfile,b]),y=Object(o.useCallback)(Object(d.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,b({title:"Claim "+e.type,message:c.a.createElement(c.a.Fragment,null,ie(e.type)," ",c.a.createElement("b",null,e.profile.name)," has the following available authentication methods:",c.a.createElement("div",{className:Un.a.auth},g.map((function(t,a){var r=Object(f.a)(t,2),i=r[0],o=r[1],l=e.user["email"===i.id?"emailMeta":i.id],m=u(i,o),d=function(){var e;return l?!(!o.id||o.id!==l.id)||(!(!o.username||o.username.toLowerCase()!==(null===(e=l.username)||void 0===e?void 0:e.toLowerCase()))||!!("chessCom"===i.id&&s&&s.admin&&s.admin.some((function(e){var t;return e.split("/").pop()===(null===(t=l.username)||void 0===t?void 0:t.toLowerCase())})))):null}();return!1!==d&&(n=!0),null===d?c.a.createElement(c.a.Fragment,null,c.a.createElement(h.b,{to:"/me/accounts",id:i.id,className:["button","link",Un.a.account].join(" "),onClick:function(){return b({title:"",message:""})}},"string"===typeof i.icon[1]?c.a.createElement("img",{src:i.icon[1],alt:i.id,className:Un.a.icon}):c.a.cloneElement(i.icon[1],{className:Un.a.icon}),"Link ",i.name||ie(i.id)," account",c.a.createElement(q.d,null)),c.a.createElement("div",null)):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:i.id,className:["button","link",Un.a.account,!1===d?Un.a.null:""].join(" "),onClick:d?j:function(){}},"string"===typeof i.icon[1]?c.a.createElement("img",{src:i.icon[1],alt:i.id,className:Un.a.icon}):c.a.cloneElement(i.icon[1],{className:Un.a.icon}),d?c.a.createElement(c.a.Fragment,null,"Claim via ",i.name||ie(i.id)):m,d?c.a.createElement(q.d,null):c.a.createElement(q.f,null)),c.a.createElement("div",{className:Un.a.authMessage},d?null:!1===d?c.a.createElement("small",null,i.authMessage):c.a.createElement("small",null,"You need to link your ",i.name||ie(i.id)," account to use it as an authentication method here.")))}))),n?null:Object.values(g).length?c.a.createElement(c.a.Fragment,null,"You do not have any available authentication methods for this ",e.type,".",c.a.createElement("br",null),"Do you definitely own it?"):c.a.createElement(c.a.Fragment,null,"There are no available authentication methods for this ",e.type,".",c.a.createElement("br",null),"Submit a request to your Tournament director."))});case 2:case"end":return t.stop()}}),t)}))),[j,g,e.user,e.profile.name,u,b,s,e.type]),_=Object(o.useState)(!1),k=Object(f.a)(_,2),w=k[0],O=k[1];return e.location.search.startsWith("?user=")&&window.close(),w?c.a.createElement(p.a,{to:"/"}):c.a.createElement("div",{className:Un.a.container},c.a.createElement("div",{className:Un.a.title},c.a.createElement("div",{className:["container",Un.a.info].join(" ")},c.a.createElement("h1",null,c.a.createElement("span",{className:"bold"},e.profile.username||e.profile.name,e.profile.verified?c.a.createElement(q.m,{className:"verified"}):null)),c.a.createElement("div",{className:Un.a.details},v&&!e.isAuthed&&"user"!==e.type?"team"===e.type&&!e.profile.teamId||"player"===e.type&&!e.profile.userId?c.a.createElement("div",{className:["button","link",Un.a.account].join(" "),onClick:y},"This ",e.type," is unclaimed. Register ",e.type,"?",c.a.createElement(q.d,null)):c.a.createElement("div",{className:["button","link",Un.a.account,Un.a.claim].join(" ")},"Registered"):null,e.profile.bio?c.a.createElement("div",{className:Un.a.bio},e.profile.bio):e.isAuthed?c.a.createElement("div",{className:["button","link",Un.a.account].join(" "),onClick:e.updateBio},"Add a ","team"!==e.type?"bio":"description","?",c.a.createElement(q.d,null)):null,e.profile.nationality?c.a.createElement("div",{className:Un.a.flag},c.a.createElement("img",{src:E.flags.replace("|",e.profile.nationality),alt:e.profile.nationality}),Kn[e.profile.nationality]):null,"team"===e.type&&e.profile.founder?c.a.createElement("div",null,"Founder: ",c.a.createElement(h.b,{to:"/@/"+e.profile.founder,className:"playerName"},e.profile.founder)):null,"team"===e.type&&e.profile.users?c.a.createElement("div",null,"Members: ",c.a.createElement(h.b,{to:["","team",e.id,"members"].join("/"),className:"playerName"},e.profile.users.length)):null,c.a.createElement("div",null,"Account creation: ",new Date(e.profile.createdAt).toString().slice(0,15))),c.a.createElement("div",{className:Un.a.buttons},e.isAuthed?c.a.createElement("div",{className:Un.a.row},c.a.createElement("a",{href:"https://beta.scorchapp.co.uk",rel:"noopener noreferrer",target:"_blank",className:["button","link",Un.a.new].join(" ")},"Create New Tournament",c.a.createElement(q.d,null)),e.endSession?c.a.createElement("div",{className:["button","link",Un.a.logout].join(" "),onClick:function(){e.endSession&&e.endSession().then((function(){return O(!0)}))}},"Log out",c.a.createElement(q.d,null)):null):null,v?Object.values(g).length?g.map((function(e,t){var n=Object(f.a)(e,2),a=n[0],r=n[1];return c.a.createElement("div",{className:Un.a.row,key:["row",t].join(".")},r.link||a.idLink||a.link?c.a.createElement("a",{id:a.id,href:r.link||("facebook"===a.id?void 0:(a.idLink||a.link).replace("|",r.username||r.id||"")),className:["button","link",Un.a.account].join(" "),rel:"noopener noreferrer",target:"_blank"},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:Un.a.icon}):c.a.cloneElement(a.icon[1],{className:Un.a.icon}),u(a,r),r.verified?c.a.createElement(q.m,{className:"verified"}):null):c.a.createElement("div",{id:a.id,className:["button","link",Un.a.account].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:Un.a.icon}):c.a.cloneElement(a.icon[1],{className:Un.a.icon}),u(a,r),r.verified?c.a.createElement(q.m,{className:"verified"}):null))})):c.a.createElement("div",{className:Un.a.row},"No contact details registered"):c.a.createElement("div",{className:Un.a.row},c.a.createElement(h.b,{to:"/login",className:["button","link"].join(" ")},"Sign in to view contact details")),n.length&&n.some((function(e){return e}))?n.map((function(e){return c.a.createElement("div",{className:Un.a.row},e)})):null),c.a.createElement(p.b,{exact:!0,path:"/@/:id/:section?",render:function(t){return c.a.createElement(oe,{section:t.match.params.section,loaded:!0,sections:{tournaments:{link:"/@/".concat(e.profile.username,"/tournaments"),icon:c.a.createElement(q.n,null)},teams:{link:"/@/".concat(e.profile.username,"/teams"),icon:c.a.createElement(q.ab,null)},accounts:{hide:!e.isAuthed,link:"/@/".concat(e.profile.username,"/accounts"),icon:c.a.createElement(q.Z,null)},settings:{hide:!e.isAuthed,link:"/@/".concat(e.profile.username,"/settings"),icon:c.a.createElement(q.s,null)}}})}}),c.a.createElement(p.b,{path:"/".concat(e.type,"/:id/:section?"),render:function(t){return c.a.createElement(oe,{section:t.match.params.section||"play",loaded:!0,sections:{play:{name:"Play",link:"/".concat(e.type,"/").concat(e.id,"/"),icon:c.a.createElement(Qt.a,null)},tournaments:{link:"/".concat(e.type,"/").concat(e.id,"/tournaments"),icon:c.a.createElement(q.n,null)},members:{hide:!e.profile.players&&!e.profile.teamId,link:"/".concat(e.type,"/").concat(e.id,"/members"),icon:c.a.createElement(q.ab,null)},accounts:{hide:e.isAuthed<2,link:"/".concat(e.type,"/").concat(e.id,"/accounts"),icon:c.a.createElement(q.Z,null)},settings:{hide:e.isAuthed<2,link:"/".concat(e.type,"/").concat(e.id,"/settings"),icon:c.a.createElement(q.s,null)}}})}}))))}function $n(e){var t=Object(o.useState)(!1),n=Object(f.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){a||W({url:"/profile/email/authenticate",data:e.location.search.slice(1).split("&").reduce((function(e,t){var n=t.split("="),a=Object(f.a)(n,2),r=a[0],i=a[1];return e[r]=i,e}),{})}).then((function(){return r(!0)}))}),[a,r,e.location.search]),a?(e.updateProfile(),c.a.createElement(p.a,{push:!0,to:{pathname:"/@/".concat(e.id,"/accounts"),state:e.history.location.state}})):null}function ea(e){var t,n=Object(o.useState)(void 0),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useMemo)((function(){return(null===r||void 0===r?void 0:r.username)||e.id}),[e.id,r]),s=Object(o.useCallback)(Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(P.test(e.id)){t.next=2;break}return t.abrupt("return",i(null));case 2:U({url:"/user/"+e.id}).then(i).catch((function(){return i(null)}));case 3:case"end":return t.stop()}}),t)}))),[e.id,i]);Object(o.useEffect)((function(){s()}),[s]);var u=Object(o.useCallback)((function(e,t){return W({url:"/profile/updateAccount",data:{account:e,data:t}}).then(s)}),[s]),h=Object(o.useContext)(ke),v=Object(o.useCallback)((function(){h({title:"Add a bio",message:"Keep it short and sweet. Maximum length 280 characters.",type:"prompt",prompt:{type:"textarea",defaultValue:(null===r||void 0===r?void 0:r.bio)||"",allowNull:!0,additionalInputProps:{maxLength:280}},resolve:function(e){return u("bio",e)}})}),[h,u,r]),b=e.id.toLowerCase()===e.profile.uniqueID;return void 0===r?null:r?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},c.a.createElement(Qn,Object.assign({},e,{user:e.profile,profile:r,updateProfile:s,updateBio:v,isAuthed:b,type:"user",setField:u})),c.a.createElement(p.b,{render:function(t){var n=t.location;return c.a.createElement(p.d,{location:n},c.a.createElement(p.b,{exact:!0,path:"/@/".concat(l),render:function(){return c.a.createElement(qn,Object.assign({},e,{user:e.profile,profile:r,isAuthed:b,direction:e.location.state.direction.slice(6),type:"player"}))}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(l,"/verify/:account?"),render:function(t){return b?c.a.createElement($n,Object.assign({},e,{id:l,updateProfile:s})):null}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(l,"/tournaments"),render:function(){return c.a.createElement(qn,Object.assign({},e,{user:e.profile,profile:r,isAuthed:b,direction:e.location.state.direction.slice(6),type:"player"}))}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(l,"/teams"),render:function(){return c.a.createElement(ta,Object.assign({},e,{profile:r,direction:e.location.state.direction.slice(6),updateProfile:s}))}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(l,"/accounts"),render:function(){return b?c.a.createElement(fa,Object.assign({},e,{profile:r,direction:e.location.state.direction.slice(6),updateProfile:s})):null}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(l,"/settings"),render:function(){return b?c.a.createElement(ra,Object.assign({},e,{user:e.profile,direction:e.location.state.direction.slice(6),updateProfile:e.updateProfile,updateBio:v})):null}}))}}))):c.a.createElement(We,null)}function ta(e){var t;return(null===(t=e.profile.teams)||void 0===t?void 0:t.length)?c.a.createElement(c.a.Fragment,null,(e.profile.teams||[]).map(zn)):c.a.createElement("section",{className:"container"},"This user is not in any teams")}function na(e){var t=Object(o.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)((function(){return U({url:"/users"}).then(r)}),[r]);Object(o.useEffect)((function(){i()}),[i]);var l=Object(o.useState)([]),s=Object(f.a)(l,2),u=s[0],m=s[1],d=Object(o.useState)([]),p=Object(f.a)(d,2),b=p[0],g=p[1];Object(o.useEffect)((function(){if(e.team.users){var t,n=[],a=[],r=Object(v.a)(e.team.users);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.level?n.push(i):a.push(i)}}catch(o){r.e(o)}finally{r.f()}m(n),g(a)}}),[m,g,e.team]);var E=Object(o.useCallback)((function(t){return W({url:["team",e.team.id,"addUser"].join("/"),data:{username:t.username}}).then(e.updateProfile)}),[e.updateProfile,e.team.id]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"container"},c.a.createElement("h1",null,c.a.createElement("b",null,"Admins")),c.a.createElement("div",{className:Nn.a.userTable},u.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:["status",t].join("."),className:Nn.a.status},e.isLicensed?c.a.createElement(q.t,null):c.a.createElement(q.r,{style:{fontSize:"0.5em"}})),c.a.createElement(h.b,{key:["username",t].join("."),className:Nn.a.profile,to:"/@/"+e.username},e.username))})))),c.a.createElement("section",{className:"container"},c.a.createElement("h1",null,c.a.createElement("b",null,"Members")),c.a.createElement("div",{className:Nn.a.userTable},e.isAuthed?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null),c.a.createElement("div",{className:Nn.a.searchBar},c.a.createElement(q.K,null),c.a.createElement(At,{onChange:function(){},onSubmit:E,action:"",options:a,convert:function(e){return e.username},styles:Nn.a,placeholder:"Add new member"}))):null,b.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:["status",t].join("."),className:Nn.a.status},e.isLicensed?c.a.createElement(q.t,null):c.a.createElement(q.r,{style:{fontSize:"0.5em"}})),c.a.createElement(h.b,{key:["username",t].join("."),className:Nn.a.profile,to:"/team/"+e.username},e.username))})))))}function aa(e){var t=Object(o.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)([]),l=Object(f.a)(i,2),s=l[0],u=l[1],h=Object(o.useCallback)(Object(d.a)(m.a.mark((function t(){var n,a,i,o,c,l,s,d,f,h,p,b,g,E,j,y,_,k,w,O,N,C,S,x,M;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],a=[],i=e.profile.tournaments.filter((function(e){return e.active})),o={},c={},l=Object(v.a)(i),t.prev=6,l.s();case 8:if((s=l.n()).done){t.next=37;break}if(d=s.value,f=[],h=[],!d.histories){t.next=25;break}p=1;case 14:if(!(p<d.histories.length)){t.next=25;break}if(b=d.histories[p]){t.next=18;break}return t.abrupt("continue",22);case 18:f.push(b.id),g=[d.id,b.id],"B"===b.colour&&(g=g.reverse()),h.push([].concat(Object(se.a)(g),[d.tournamentId,p]).join("."));case 22:p++,t.next=14;break;case 25:return t.next=28,U({url:["tournament",d.tournamentId,"fetchPlayers"].join("/"),params:{ids:f.join(",")}}).catch((function(e){return console.error(e),[]}));case 28:E=t.sent,j=Object(v.a)(E);try{for(j.s();!(y=j.n()).done;)_=y.value,o[_.id]=_}catch(m){j.e(m)}finally{j.f()}return t.next=33,U({url:["tournament",d.tournamentId,"getPairings"].join("/"),params:{ids:h.join(",")}}).catch((function(e){return console.error(e),[]}));case 33:for(k=t.sent,w=0;w<k.length;w++)c[h[w].split(".").slice(-2).join(".")]=k[w];case 35:t.next=8;break;case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(6),l.e(t.t0);case 42:return t.prev=42,l.f(),t.finish(42);case 45:O=Object(v.a)(i),t.prev=46,O.s();case 48:if((N=O.n()).done){t.next=64;break}if((C=N.value).histories){t.next=52;break}return t.abrupt("continue",62);case 52:S=C.histories.length-1;case 53:if(!(S>=0)){t.next=62;break}if(x=C.histories[S]){t.next=57;break}return t.abrupt("continue",59);case 57:M={prop:C,opp:o[x.id],b:(x.colour,C),id:"B"===x.colour?[x.id,C.id].join("."):[C.id,x.id].join("."),round:S,colour:x.colour,result:c[[C.tournamentId,S].join(".")]},null===x.match?n.push(M):a.push(M);case 59:S--,t.next=53;break;case 62:t.next=48;break;case 64:t.next=69;break;case 66:t.prev=66,t.t1=t.catch(46),O.e(t.t1);case 69:return t.prev=69,O.f(),t.finish(69);case 72:r(n),u(a);case 74:case"end":return t.stop()}}),t,null,[[6,39,42,45],[46,66,69,72]])}))),[e.profile,r,u]);return Object(o.useEffect)((function(){h()}),[h]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ln,{name:"UPCOMING MATCHES"}),a.map((function(t){return c.a.createElement(Vn,{u:t,isAuthed:e.isAuthed,update:h})})),c.a.createElement(Ln,{name:"PAST MATCHES"}),s.map((function(t){return c.a.createElement(Vn,{u:t,isAuthed:e.isAuthed,update:h})})),c.a.createElement("section",null))}function ra(e){var t=Object(o.useContext)(ke),n=Object(o.useCallback)((function(){return W({url:"/profile/updateSetting",data:{theme:"light"===e.user.theme?"dark":"light"}}).then(e.updateProfile)}),[e.user.theme,e.updateProfile]),a=Object(o.useCallback)((function(t){return W({url:"/profile/updateSetting",data:{backgroundURL:t}}).then(e.updateProfile)}),[e.updateProfile]),r=Object(o.useCallback)((function(){t({title:"Add background image",message:"Add a link to the background image you want to use. Leave empty to clear.",type:"prompt",resolve:a,prompt:{validate:function(e){return!e||x.test(e)},errorMessage:"Must be a valid link to an image",allowNull:!0,defaultValue:e.user.backgroundURL}})}),[t,a,e.user.backgroundURL]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:["container",Un.a.container].join(" ")},c.a.createElement("div",{className:["header-button",Un.a.darkMode,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,"light"===e.user.theme?"Light Mode":"Dark Mode")),c.a.createElement("div",{className:"toggleSwitch",onClick:n},"light"===e.user.theme?c.a.createElement(q.U,null):c.a.createElement(q.T,null))),c.a.createElement("div",{className:["header-button",Un.a.darkMode,"switchContainer"].join(" "),onClick:r},e.user.backgroundURL?c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:e.user.backgroundURL,target:"_blank",rel:"noopener noreferrer"},"Background set"),"\u200b"," | Change"):"Add background image")),c.a.createElement("section",{className:["container"].join(" ")},c.a.createElement("div",{className:["header-button",Un.a.darkMode,"switchContainer"].join(" "),onClick:e.updateBio},"Update bio")))}function ia(e){var t=Object(o.useReducer)((function(e){return!e}),!1),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(o.useContext)(ke),l=Object(o.useState)(""),s=Object(f.a)(l,2),u=s[0],h=s[1],v=Object(o.useState)([]),b=Object(f.a)(v,2),g=b[0],E=b[1],j=Object(o.useCallback)((function(){return U({url:"/user/"+e.user.username}).then((function(e){return E(e.teams)}))}),[e.user.username,E]);Object(o.useEffect)((function(){j()}),[j]);var y=Object(o.useReducer)((function(e,t){var n=e.slice(0);return t.set&&!n.includes(t.k)?n.push(t.k):t.set||n.includes(t.k)&&n.splice(n.indexOf(t.k),1),n}),[]),_=Object(f.a)(y,2),k=_[0],w=_[1],O=Object(o.useCallback)(function(){var t=Object(d.a)(m.a.mark((function t(n){var a,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.profile,t.next=3,U({url:["","team",n.id].join("/")});case 3:r=t.sent,o=["description","ecf","fide"].filter((function(e){return a[e]})),i({title:"Confirm the merger of ".concat(a.name," into ").concat(r.name,"?"),message:c.a.createElement(c.a.Fragment,null,o.length?"Please select which fields to keep":"",o.map((function(e,t){return a[e]===r[e]?null:c.a.createElement(c.a.Fragment,null,"Which ",ie(e)," to keep?",c.a.createElement("div",{key:[e,t].join(".")},c.a.createElement("div",{onClick:function(){return w({k:e,set:!0})}},a[e]),c.a.createElement("div",{onClick:function(){return w({k:e,set:!1})}},r[e])))}))),type:"confirm",resolve:function(){return W({url:["","team",a.id,"merge"].join("/"),data:{to:r.id,keepFields:k}}).then((function(){return i({message:"",title:""})})).then((function(){return h("/team/"+r.id)}))}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[i,e.profile,k,w,h]);return u?c.a.createElement(p.a,{to:u}):c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:["container",Un.a.container].join(" ")},c.a.createElement("div",{className:["header-button",Un.a.merge].join(" "),onClick:r},"Merge team into..."),a?g.length?g.map((function(t){return t.id===e.profile.id?null:c.a.createElement("div",{className:["header-button",Un.a.teamMerge].join(" "),onClick:function(){return O(t)}},t.name)})):"No teams available into which to merge. You must be admin of both teams to create a merge request.":null),c.a.createElement("section",{className:["container"].join(" ")},c.a.createElement("div",{className:["header-button",Un.a.darkMode,"switchContainer"].join(" "),onClick:e.updateBio},"Update description")))}function oa(e){var t,n=Object(o.useState)(void 0),a=Object(f.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return U({url:"/"+e.type+"/"+e.id}).then((function(e){return i(e),e})).then((function(t){return t.teamId?window.history.pushState("",document.title,window.location.pathname.replace(e.id,t.teamId)+window.location.search):null})).catch((function(){return i(null)}))}),[i,e.id,e.type]);Object(o.useEffect)((function(){l()}),[l]);var s=Object(o.useCallback)((function(t,n){return W({url:["",e.type,e.id,"updateField"].join("/"),data:{k:t,v:n}}).then(l)}),[e.id,e.type,l]),u=Object(o.useContext)(ke),m=Object(o.useCallback)((function(){u({title:"Add a description",message:"Keep it short and sweet. Maximum length 280 characters.",type:"prompt",prompt:{type:"textarea",defaultValue:(null===r||void 0===r?void 0:r.bio)||"",allowNull:!0,additionalInputProps:{maxLength:280}},resolve:function(e){return s("bio",e)}})}),[u,s,r]),d=jt((function(){return"player"===e.type?e.id.toLowerCase()===e.profile.uniqueID:"number"===typeof(null===r||void 0===r?void 0:r.permissions)?r.permissions+1:0}),[e.type,e.id,e.profile,r],"isAuthed");return void 0===r?null:null===r?c.a.createElement(We,null):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},c.a.createElement(Qn,Object.assign({},e,{user:e.profile,profile:r,updateProfile:l,updateBio:m,isAuthed:d,type:e.type,setField:s})),c.a.createElement(p.b,{render:function(t){var n=t.location;return c.a.createElement(p.d,{location:n},c.a.createElement(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id),render:function(){return c.a.createElement(aa,Object.assign({},e,{profile:r,direction:e.location.state.direction.slice(6),isAuthed:d,type:e.type}))}}),c.a.createElement(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id,"/tournaments"),render:function(){return c.a.createElement(qn,Object.assign({},e,{user:e.profile,profile:r,isAuthed:!!d,direction:e.location.state.direction.slice(6),type:e.type}))}}),c.a.createElement(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id,"/members"),render:function(){return c.a.createElement(na,Object.assign({},e,{team:r,isAuthed:!!r.permissions,updateProfile:l}))}}),c.a.createElement(p.b,{exact:!0,path:"/team/".concat(e.id,"/settings"),render:function(){return d?c.a.createElement(ia,Object.assign({},e,{user:e.profile,profile:r,updateProfile:l,updateBio:m,direction:e.location.state.direction.slice(6)})):null}}))}})))}function ca(e){return c.a.createElement("div",{className:["header-button","switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,e.on?e.main.on:e.main.off),e.sub?c.a.createElement("div",null,e.on?e.sub.on:e.sub.off):null),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return e.onSwitch(!e.on)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:e.on}),c.a.createElement("div",{className:"toggleSlider round"})))}function la(e){var t=e.updateProfile,n=Object(o.useState)(""),a=Object(f.a)(n,2),r=a[0],i=a[1];Object(o.useEffect)((function(){Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAll();case 2:t=e.sent,i(t.sessionID);case 4:case"end":return e.stop()}}),e)})))()}),[i]);var c=Object(o.useMemo)((function(){var t={response_type:"code",client_id:B,redirect_uri:I,scope:[["email","read"],["challenge","read"],["challenge","write"]].map((function(e){return e.join(":")})).join(" "),state:"".concat(null===r||void 0===r?void 0:r.slice(0,8),".referrer=").concat(e.currentPath)};return"".concat("https://oauth.lichess.org/oauth/authorize","?").concat(Object.entries(t).map((function(e){return e.join("=")})).join("&"))}),[r,e.currentPath]),l=Object(o.useState)(null),s=Object(f.a)(l,2),u=s[0],h=s[1],p=Object(o.useCallback)((function(e){e.closed&&(h(null),t())}),[t,h]);return Object(o.useEffect)((function(){if(u){var e=setInterval((function(){return p(u)}),1e3);return function(){return clearInterval(e)}}}),[u,p]),{href:c,setWindow:h}}function sa(e){return W({url:["profile","lichess","updateFrom"].join("/")}).finally(e)}function ua(e){return Object(o.useCallback)((function(t){t&&t.id&&W({url:"/profile/facebook/link",data:{id:t.userID,name:t.name,email:t.id,accessToken:t.accessToken}}).then(e.updateProfile)}),[e.updateProfile])}var ma=n(291),da=n.n(ma);function fa(e){var t,n=Object(o.useState)(e.profile),l=Object(f.a)(n,2),s=l[0],u=l[1];Object(o.useEffect)((function(){u(e.profile)}),[u,e.profile]);Object(o.useCallback)((function(){return U({url:"/user/"+e.profile.username+"/getAccounts"}).then(u)}),[u,e.profile.username]);var m=Object(o.useCallback)((function(e,t){W({url:"/profile/updateAccount",data:{account:"email"===e?"emailMeta":e,data:t}}).then(u)}),[u]),d=Object(o.useState)([]),h=Object(f.a)(d,2),p=h[0],v=h[1],b=Object(o.useState)([]),g=Object(f.a)(b,2),E=g[0],j=g[1],y=Object(o.useState)([]),_=Object(f.a)(y,2),k=_[0],w=_[1];Object(o.useEffect)((function(){for(var e=[],t=[],n=[],a=0,r=Object.entries(jn);a<r.length;a++){var i=Object(f.a)(r[a],2),o=i[0],c=i[1];if(o in s){var l,u,m,d=s[o];"email"===o&&(d=Object.assign(s.emailMeta||{},{id:d,username:d})),Object.assign(c,{id:o}),(null===(l=d)||void 0===l?void 0:l.verified)?e.push([c,d]):((null===(u=d)||void 0===u?void 0:u.id)||(null===(m=d)||void 0===m?void 0:m.username))&&t.push([c,d]),d&&!c.hasMultiple||n.push([c,d])}else c.canLink&&n.push([c,{}])}v(e),j(t),w(n)}),[s,v,j,w]);var O=e.updateProfile,N=e.location.state.currentPath,C=r.useLink({currentPath:N,updateProfile:O}),S=a.useLink({updateProfile:O}),x=i.useFacebook({updateProfile:O}),M=(t={},Object(Sn.a)(t,"lichess",C),Object(Sn.a)(t,"chessCom",S),Object(Sn.a)(t,"facebook",{href:x,setWindow:function(){}}),t),R=Object(o.useContext)(ke),P=a.useVerify({profile:e.profile,updateProfile:O}),L=Object(o.useMemo)((function(){return{chessCom:P,email:function(t){return W({url:"/profile/email/verify",data:{force:t}}).then((function(){return R({title:"Verify email account",message:"An email has been sent to "+e.profile.email+". Check your inbox!"})})).then(O)}}}),[P,R,e.profile.email,O]),A=Object(o.useMemo)((function(){return{lichess:function(){return r.handleSync(O)}}}),[O]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ln,{name:"VERIFIED ACCOUNTS"}),p.map((function(e,t){var n=Object(f.a)(e,2),a=n[0],r=n[1];return c.a.createElement("section",{key:["section",t].join(" "),className:["container",Un.a.accountSection].join(" ")},c.a.createElement("div",{className:["optionsContainer",Un.a.optionsContainer].join(" ")},c.a.createElement("a",{id:a.id,href:(a.idLink||a.link).replace("|",r.username||r.id),className:["button","link",Un.a.account,Un.a.inline].join(" "),rel:"noopener noreferrer",target:"_blank"},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:Un.a.icon}):c.a.cloneElement(a.icon[1],{className:Un.a.icon}),a.name||ie(a.id),c.a.createElement(q.m,{className:"verified"})),c.a.createElement(ca,{on:!1!==r.public,onSwitch:function(e){return m(a.id,{public:e})},main:{on:"Public",off:"Hidden"},sub:{on:"Switch to hide your account from public view",off:"Switch on to make visible to all signed-in users"}}),a.id in A?c.a.createElement("div",{className:["header-button",Un.a.accountButton].join(" "),onClick:A[a.id]},c.a.createElement("div",null,c.a.createElement(q.Q,null),"Sync data")):null,a.permanent?null:c.a.createElement("div",{className:["header-button",Un.a.accountButton,Un.a.remove].join(" "),onClick:function(){return W({url:"/profile/removeAccount",data:{account:a.id}}).then(u)}},c.a.createElement("div",null,c.a.createElement(q.M,null),"Remove integration"))))})),c.a.createElement(Ln,{name:"PENDING VERIFICATION"}),E.map((function(e,t){var n=Object(f.a)(e,2),a=n[0],r=n[1];return c.a.createElement("section",{key:["section",t].join(" "),className:["container",Un.a.accountSection].join(" ")},c.a.createElement("div",{className:["optionsContainer",Un.a.pendingContainer].join(" ")},c.a.createElement("div",{id:a.id,onClick:function(){a.id&&(a.id in L&&(r.sent||(0,L[a.id])()))},className:["button","link",Un.a.account,Un.a.inline,r.sent?"sent":""].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:Un.a.icon}):c.a.cloneElement(a.icon[1],{className:Un.a.icon}),r.sent?"":"Verify"," ",r.username||a.name||ie(a.id),r.sent?null:c.a.createElement(q.d,null)),r.sent?c.a.createElement("div",{className:["header-button",Un.a.accountButton].join(" "),onClick:function(){a.id&&(a.id in L&&(0,L[a.id])(!0))}},c.a.createElement("div",null,c.a.createElement(q.G,null),"Resend email")):null,a.permanent?null:c.a.createElement("div",{className:["header-button",Un.a.accountButton,Un.a.remove].join(" "),onClick:function(){return W({url:"/profile/removeAccount",data:{account:a.id}}).then(u)}},c.a.createElement("div",null,c.a.createElement(q.R,null),"Cancel"))))})),c.a.createElement(Ln,{name:"AVAILABLE"}),k.length?c.a.createElement("section",{className:["container",Un.a.accountSection].join(" ")},c.a.createElement("div",{className:["optionsContainer",Un.a.availableContainer].join(" ")},k.map((function(e,t){var n=Object(f.a)(e,2),a=n[0];n[1];if(a.id&&"facebook"===a.id){var r={render:function(e){return c.a.createElement("div",{key:["entry",t].join(" "),id:a.id,onClick:e.onClick,className:["button","link",Un.a.account,Un.a.inline].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:Un.a.icon}):c.a.cloneElement(a.icon[1],{className:Un.a.icon}),"Link ",a.name||ie(a.id),c.a.createElement(q.d,null))}};return c.a.createElement("div",{key:["entry",t].join(" "),id:a.id,onClick:function(){if(a.id&&a.id in M){var e=M[a.id],t=e.href,n=e.setWindow;"function"===typeof t?t():n(window.open(t,"_blank"))}},className:["button","link",Un.a.account,Un.a.inline].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:Un.a.icon}):c.a.cloneElement(a.icon[1],{className:Un.a.icon}),c.a.createElement(da.a,Object.assign({appId:"3423958477620478",fields:"name,email",scope:"public_profile",cssClass:Un.a.facebookLink,callback:M.facebook.href},r)),c.a.createElement(q.d,null))}return c.a.createElement("div",{key:["entry",t].join(" "),id:a.id,onClick:function(){if(a.id&&a.id in M){var e=M[a.id],t=e.href,n=e.setWindow;"function"===typeof t?t():n(window.open(t,"_blank"))}},className:["button","link",Un.a.account,Un.a.inline].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:Un.a.icon}):c.a.cloneElement(a.icon[1],{className:Un.a.icon}),"Link ",a.name||ie(a.id),c.a.createElement(q.d,null))})))):c.a.createElement("section",null))}function ha(e){var t=e.page,n=Object(o.useState)(""),a=Object(f.a)(n,2),r=a[0],i=a[1];return Object(o.useEffect)((function(){g.a.get("/pages/".concat(t,".md")).then((function(e){return e.data})).then(i)}),[i,t]),c.a.createElement("div",{id:"main"},c.a.createElement("section",null,c.a.createElement(on.a,{source:r.trim(),escapeHtml:!1,astPlugins:[mn],renderers:{link:dn}})))}var pa=Date.now(),va=["/","pairings","standings","stats","tv","community","team","player","@","login"];function ba(e){var t,n=function(e){for(var t=0;t<va.length;t++)if(va[t]===e)return t;for(var n=va.length;n>0;n--)if(e.includes(va[n]))return n;return.5}(e);t=.5===n?"home":.5===n?"tournament":va[n],H.connected&&H.emit("public_page",{section:t,tournament:n>0&&n<5?e.split("/")[1]:e.split("/")[2],time:(Date.now()-pa)/6e4,mobile:L()}),pa=Date.now()}var ga=Object(o.createContext)(void 0);function Ea(e,t){var n="";var a=[e,t].map((function(e){return Number(e.split("/").pop())})),r=Object(f.a)(a,2),i=r[0],o=r[1];return i&&o&&!isNaN(i)&&!isNaN(o)&&(o>i?n="right":i>o&&(n="left")),n}var ja={direction:"",referrer:"",currentPath:""};var ya=function(){var e=Object(o.useState)({}),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)({}),i=Object(f.a)(r,2),l=i[0],s=i[1],u=Object(o.useState)(void 0),v=Object(f.a)(u,2),b=v[0],g=v[1],E=Object(o.useMemo)((function(){return void 0===b?void 0:!!b}),[b]),j=Object(o.useCallback)(Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W({url:"/endSession"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.prev=8,e.next=11,F.remove("sessionID");case 11:return g(""),e.finish(8);case 13:case"end":return e.stop()}}),e,null,[[0,5,8,13]])}))),[g]);Object(o.useEffect)((function(){var e=document.getElementById("root");e&&("dark"===l.theme||l.backgroundURL?e.className+=" dark":e.className=e.className.replace(C,""),l.backgroundURL?e.style.backgroundImage="url(".concat(l.backgroundURL,")"):e.style.backgroundImage="")}),[l]);var y=Object(o.useCallback)((function(){return U({url:"/profile",timeout:5e3}).then(s).catch(function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(404!==(null===(n=t.response)||void 0===n?void 0:n.status)){e.next=4;break}j(),e.next=6;break;case 4:return e.next=6,F.remove("sessionID");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[s,j]),_=Object(o.useCallback)(Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAll();case 2:if(t=e.sent,n=t.sessionID){e.next=6;break}throw t;case 6:g(n);case 7:case"end":return e.stop()}}),e)}))),[g]);Object(o.useEffect)((function(){_().catch((function(){return g("")}))}),[_]),Object(o.useEffect)((function(){var e;e=b,H.close(),H=O()(T,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:1e5,reconnectionAttempts:5,query:{sessionID:e}})}),[b]),Object(o.useEffect)((function(){b&&y().catch(console.error)}),[b,y]);var k=Object(o.useState)({title:"",message:""}),w=Object(f.a)(k,2),N=w[0],S=w[1];return Object(o.useEffect)((function(){A=function(e,t){S({icon:c.a.createElement(q.x,null),title:e,message:"string"===typeof t?t.startsWith("<!DOCTYPE html>")?c.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}):t:JSON.stringify(t,null,4),type:"error"})}}),[S]),c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{basename:""},c.a.createElement(p.b,{render:function(e){var t,n=e.location;e.history;return ja.currentPath.split("?").shift()!==n.pathname&&(ja=Object.assign(ja||{},{direction:Ea(ja.currentPath||n.pathname+n.search,n.pathname+n.search)||ja.direction,referrer:ja.currentPath||n.pathname+n.search,currentPath:n.pathname+n.search})||{}),n.state=ja,ba(ja.referrer),c.a.createElement(ke.Provider,{value:S},c.a.createElement(_e.Provider,{value:a},c.a.createElement(ga.Provider,{value:E},c.a.createElement(Pn,{setID:function(){},profile:l,referrer:null===(t=ja)||void 0===t?void 0:t.referrer,currentPath:n.pathname}),c.a.createElement(p.d,{location:n},c.a.createElement(p.b,{exact:!0,path:"/",render:function(e){return c.a.createElement(wn,e)}}),c.a.createElement(p.b,{exact:!0,path:"/community",render:function(e){return!1===E?c.a.createElement(p.a,{to:{pathname:"/login",search:e.location.search,state:e.history.location.state}}):l.username?c.a.createElement(Cn,e):null}}),c.a.createElement(p.b,{path:"/me/",render:function(e){return!1===E?c.a.createElement(p.a,{to:{pathname:"/login",search:e.location.search,state:e.history.location.state}}):l.username?c.a.createElement(p.a,{push:!0,to:{pathname:e.location.pathname.replace("/me","/@/"+l.username),search:e.location.search,state:e.history.location.state}}):null}}),c.a.createElement(p.b,{path:"/@/:id",render:function(e){return c.a.createElement(ea,Object.assign({},e,{id:e.match.params.id,profile:l,updateProfile:y,endSession:j}))}}),c.a.createElement(p.b,{path:"/reset/password",render:function(e){return c.a.createElement(an,Object.assign({},e,{loggedIn:E,mode:"reset/password",setSession:g,updateProfile:y}))}}),c.a.createElement(p.b,{path:"/login",render:function(e){var t=ja.referrer.split("?"),n=Object(f.a)(t,2),a=n[0],r=n[1];return E?c.a.createElement(p.a,{push:!0,to:{pathname:"/login"===a?"/me":a,search:r,state:e.history.location.state}}):c.a.createElement(an,Object.assign({},e,{loggedIn:E,mode:"login",setSession:g,updateProfile:y}))}}),c.a.createElement(p.b,{path:"/register",render:function(e){var t=ja.referrer.split("?"),n=Object(f.a)(t,2),a=n[0],r=n[1];return E?c.a.createElement(p.a,{push:!0,to:{pathname:"/login"===a?"/me":a,search:r,state:e.history.location.state}}):c.a.createElement(an,Object.assign({},e,{loggedIn:E,mode:"register",setSession:g,updateProfile:y}))}}),c.a.createElement(p.b,{path:"/player/:id/",render:function(e){return c.a.createElement(oa,Object.assign({},e,{id:e.match.params.id,profile:l,type:"player"}))}}),c.a.createElement(p.b,{path:"/team/:id/",render:function(e){return c.a.createElement(oa,Object.assign({},e,{id:e.match.params.id,profile:l,type:"team"}))}}),c.a.createElement(p.b,{path:"/t/:id/",render:function(e){return c.a.createElement(vn,e)}}),c.a.createElement(p.b,{path:"/tournament/:id/",render:function(e){var t=ja.referrer.split("?"),n=Object(f.a)(t,2),a=n[0],r=n[1];return c.a.createElement(p.a,{push:!0,to:{pathname:"/t/"+a.slice("/tournament/".length),search:r,state:e.history.location.state}})}}),["privacy","tos"].map((function(e,t){return c.a.createElement(p.b,{exact:!0,path:"/"+e,key:[e,t].join("."),render:function(){return c.a.createElement(ha,{page:e})}})})),c.a.createElement(p.b,{path:"/:id/",render:function(e){return["me","@","login","register","player","team","tournament","community"].includes(e.match.params.id)?c.a.createElement(p.b,{path:"*",component:We,status:404}):c.a.createElement(p.a,{push:!0,to:{pathname:"/t"+e.location.pathname,search:ja.referrer.split("?")[1],state:e.history.location.state}})}}),c.a.createElement(p.b,{path:"*",component:We,status:404})))))}}),c.a.createElement(kn,{notif:n,select:a}),c.a.createElement(ke.Provider,{value:S},c.a.createElement(_n,N))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ya,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,n){e.exports={tableAnnounce:"tournaments_tableAnnounce__1C0aM",rowLink:"tournaments_rowLink__yipit",tournamentLink:"tournaments_tournamentLink__2x3TE"}},9:function(e,t,n){e.exports={canvas:"login_canvas__2ikWU",column:"login_column__3uITj",foreground:"login_foreground__1ykfN",frame:"login_frame__20Z9N",loginSection:"login_loginSection__1K9Z0",forgottenContainer:"login_forgottenContainer__2gIks","fade-in":"login_fade-in__2f_Dp",forgotten:"login_forgotten__ZPpUD",form:"login_form__3XNz8",input:"login_input__3k9YU",back:"login_back__mN50K",text:"login_text__3nL0w",submit:"login_submit__N_d98",flip:"login_flip__acaII",loginButton:"login_loginButton__2aRhC",registerButton:"login_registerButton__3WVmy",loginForeground:"login_loginForeground__n7ZiP",registerForeground:"login_registerForeground__a-Z7s",messageBar:"login_messageBar__1WRi0",logo:"login_logo__33RtW",staticLogo:"login_staticLogo__3tDBM",loadingGif:"login_loadingGif__3WB0u",crownOutline:"login_crownOutline__ObsyZ",loadingLine:"login_loadingLine__3__iq","grow-right":"login_grow-right__3CjQS"}}},[[300,1,2]]]);
//# sourceMappingURL=main.f95da7d6.chunk.js.map