(this["webpackJsonpscorch-whiplash"]=this["webpackJsonpscorch-whiplash"]||[]).push([[0],{11:function(e,t,n){e.exports={canvas:"login_canvas__2ikWU",column:"login_column__3uITj",foreground:"login_foreground__1ykfN",container:"login_container__2zINz",frame:"login_frame__20Z9N",loginSection:"login_loginSection__1K9Z0",initialiseButton:"login_initialiseButton__1Z-vV",forgottenContainer:"login_forgottenContainer__2gIks","fade-in":"login_fade-in__2f_Dp",forgotten:"login_forgotten__ZPpUD",form:"login_form__3XNz8",input:"login_input__3k9YU",submit:"login_submit__N_d98",loginBackground:"login_loginBackground__1Bn2B",loginForeground:"login_loginForeground__n7ZiP",registerForeground:"login_registerForeground__a-Z7s",flip:"login_flip__acaII",messageBar:"login_messageBar__1WRi0",logo:"login_logo__33RtW",staticLogo:"login_staticLogo__3tDBM",loadingGif:"login_loadingGif__3WB0u",crownOutline:"login_crownOutline__ObsyZ",loadingLine:"login_loadingLine__3__iq","grow-right":"login_grow-right__3CjQS"}},143:function(e,t,n){e.exports=n.p+"static/media/watch.ddf443c3.svg"},144:function(e,t,n){e.exports=n.p+"static/media/twitch.e1f7813a.svg"},145:function(e,t,n){e.exports=n.p+"static/media/youtube.46bc6904.svg"},148:function(e,t,n){},16:function(e,t,n){e.exports={container:"streams_container__2JvcN",streamHeader:"streams_streamHeader__DKPjP",streamContainer:"streams_streamContainer__2IUUF",player:"streams_player__2DTT5",twitchChat:"streams_twitchChat__46a4m","move-to-corner":"streams_move-to-corner__HBHbb",chat:"streams_chat__34Cjy",footer:"streams_footer__1nnZ3",twitchPlayer:"streams_twitchPlayer__3qnZh"}},17:function(e,t,n){e.exports={fireworksSection:"results_fireworksSection__2fXqz",resultsScreen:"results_resultsScreen__26gN-",place:"results_place__1N8zz",position:"results_position__2gVin",teamName:"results_teamName__2MtlJ",table:"results_table__3xXKH",key:"results_key__34g-2",standingsButton:"results_standingsButton__2cV32",value:"results_value__1l55_",flag:"results_flag__2dIeV"}},212:function(e,t,n){e.exports=n(492)},217:function(e,t,n){},22:function(e,t,n){e.exports={th:"crosstable_th__pj-Am",round:"crosstable_round__3EoJh",headerCell:"crosstable_headerCell__1aQ1w",tr:"crosstable_tr__3f5JF",footer:"crosstable_footer__2YrnX"}},23:function(e,t,n){e.exports={stage:"nav_stage__1vB7T",profilePicture:"nav_profilePicture__141LM",nameContainer:"nav_nameContainer__2_YKB",name:"nav_name__1IBcg",infoBox:"nav_infoBox__2e2-O",buttonContainer:"nav_buttonContainer__2SIed",website:"nav_website__2OLjk",rules:"nav_rules__1WSvv",defaultProfilePicture:"nav_defaultProfilePicture__2vO-7",tieBreakLink:"nav_tieBreakLink__2Uo-v",tieBreakContainer:"nav_tieBreakContainer__1wYkK",visible:"nav_visible__2r8FP",tieBreakTitle:"nav_tieBreakTitle__HTdz5",tieBreaks:"nav_tieBreaks__1hSeL","slide-in-from-left":"nav_slide-in-from-left__tJEaU"}},263:function(e,t){},29:function(e){e.exports=JSON.parse('{"server":"http://192.168.1.225:8080/","prodServer":"https://api.scorchapp.co.uk/","useProd":true,"prodDomain":"scorchapp.co.uk","flags":"https://ratings.fide.com/svg/|.svg"}')},30:function(e,t,n){e.exports={draggable:"components_draggable__rJSIu","move-to-corner":"components_move-to-corner__CbSvi",lightBox:"components_lightBox__a6Guh",section:"components_section__3L2EN",lightBoxContent:"components_lightBoxContent__2-Td2",lightBoxTitle:"components_lightBoxTitle__1fG59",dateTime:"components_dateTime__JY3-8"}},32:function(e,t,n){e.exports={container:"chesscom_container__vhkD8",wrapper:"chesscom_wrapper__35uxX",boardlabel:"chesscom_boardlabel__394gP",boardLabel:"chesscom_boardLabel__2ThNI",gameViewWrapper:"chesscom_gameViewWrapper__1ninU",board:"chesscom_board__2DH3-","fade-in":"chesscom_fade-in__13dOU",row:"chesscom_row__dxX_z",square:"chesscom_square__HiFz4",W:"chesscom_W__3aJdG",B:"chesscom_B__2iwwI",null:"chesscom_null__1h49B",active:"chesscom_active__GV4qN",loading:"chesscom_loading__W8sFc",spin:"chesscom_spin__3DATj"}},360:function(e,t,n){},364:function(e,t,n){},46:function(e,t,n){e.exports={header:"header_header__he_1K",buttonContainer:"header_buttonContainer__2xYiA",button:"header_button__2n59F",nameWrapper:"header_nameWrapper__1bAW5",logoWrapper:"header_logoWrapper__3v8Kd",installer:"header_installer__3DfuB",icons:"header_icons__1W-ol"}},47:function(e,t,n){e.exports={container:"profile_container__27sVG",title:"profile_title__Ak4SC",grid:"profile_grid__2kEJv"}},483:function(e,t){},492:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(18),o=n.n(i),c=(n(217),n(14)),l=n.n(c),s=n(26),u=n(3),m=n(10),d=n(45),h=n(20),f=(n(86),n(64)),v=n(66),p=n.n(v),g=n(29),b=n(7),E=n(8),_=new(n(205).a),y=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,[{key:"getAll",value:function(){return Promise.resolve(_.getAll()||{})}},{key:"get",value:function(e){return Promise.resolve(_.get(e)||"")}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{domain:L};return Promise.resolve(_.set(e,t,n))}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{domain:L};return _.get(e)?Promise.resolve(_.remove(e,t)):Promise.reject("Couldn't remove cookie")}}]),e}(),w=n(189),j=n.n(w),O=/chess\.com\/(?:live#tm=|club\/matches\/live\/(?:[a-z-]+\/)?)([0-9]+)/,k=/(?:https:\/\/)?(?:www.)?(?:(twitch.tv|youtube.com))\/(.*)/,N=/(?:https:\/\/)?(?:www.)?([a-z.]*)\/?(?:.*)?/,S=/[a-z0-9]*/gi,x=[/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i],C=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;function P(){var e=navigator.userAgent||navigator.vendor||"";return!!x[0].test(e)||!!x[1].test(e.substr(0,4))}var M=function(){};console.log("isDev",!1);var R=g.prodServer,L=g.prodDomain;p.a.defaults.baseURL=R;var D=new y;function B(e){return e=Object.assign(e,{method:"GET"}),p()(e).then((function(e){return e.data})).catch((function(e){var t;throw console.error(e),e.response&&M([e.response.status,e.response.statusText,":","/"+(null===(t=e.response.config.url)||void 0===t?void 0:t.split("/").pop())].join(" ")),e}))}function T(e){e.preventDefault&&e.preventDefault(),e.persist&&e.persist();for(var t=e.target;"HTMLFormElement"!==t.constructor.name&&t.parentElement;)t=t.parentElement;if("HTMLFormElement"!==t.constructor.name)throw new Error("Couldn't find valid form");return function(e){return e=Object.assign(e,{method:"POST",headers:{"Content-Type":"application/json"}}),p()(e).then((function(e){return e.data})).catch((function(e){throw e&&e.response&&e.response.data&&M(e.response.data),e}))}({data:Array.from(t).reduce((function(e,t){return t.name?("submit"===t.name||("number"===t.type?e[t.name]=Number(t.value):e[t.name]=t.value),e):e}),{}),url:t.action})}P()||p.a.interceptors.request.use(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.a,e.t1={},e.t2=t,e.t3=f.a,e.t4={},e.t5=t.headers,e.t6=JSON,e.next=9,D.getAll();case 9:return e.t7=e.sent,e.t8=e.t6.stringify.call(e.t6,e.t7),e.t9={Authorization:e.t8},e.t10=(0,e.t3)(e.t4,e.t5,e.t9),e.t11={headers:e.t10},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t11));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var F=j()(R);var A=n(6),I=n.n(A),W=n(5),z=n(79),G=n(40),H=n(143),U=n.n(H);n(144),n(145);function q(e){return r.a.createElement("div",{className:[I.a.modeSwitcher].join(" ")},r.a.createElement(m.b,{to:"/".concat(e.id,"/pairings"),className:["header-button","pairings"===e.section?"selected":""].join(" ")},r.a.createElement("div",null,r.a.createElement(W.a,null),"Pairings")),r.a.createElement(m.b,{to:"/".concat(e.id,"/standings"),className:["header-button","standings"===e.section?"selected":""].join(" ")},r.a.createElement("div",null,r.a.createElement(z.b,null)," Standings")),r.a.createElement(m.b,{to:"/".concat(e.id,"/stats"),className:["header-button","stats"===e.section?"selected":""].join(" ")},r.a.createElement("div",null,r.a.createElement(G.c,null)," Stats")),e.settings.streamURL?r.a.createElement(m.b,{to:"/".concat(e.id,"/tv"),className:["header-button","stream-link","stats"===e.section?"selected":"","twitch-link"].join(" ")},r.a.createElement("div",null,r.a.createElement("img",{src:U.a})," TV")):null)}function V(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),i=n[0],o=n[1],c=Object(a.useCallback)((function(){return B({url:"tournament/".concat(e.id,"/fetchRounds")}).then(o)}),[e.id,o]);Object(a.useEffect)((function(){c()}),[c]);for(var l=[],s="Infinity"===e.settings.totalRounds?1:e.settings.totalRounds,d=1;d<s+1;d++){var h=i[d]?new Date(i[d]).toString():"";l.push(r.a.createElement(m.b,{className:["header-button",I.a.pairingRound,e.round===d?I.a.roundSelected:"",d>e.status.round?I.a.nullRound:""].join(" "),to:"/".concat(e.id,"/").concat(e.section,"/").concat(d),key:["round",d].join(".")},r.a.createElement("div",{className:"full-text"},r.a.createElement("h4",null,"Round ",d),i[d]?r.a.createElement("h5",null,h.substring(0,11)+h.substring(16,21)):null)))}return"pairings"===e.section&&e.round&&!e.status.active&&l.push(r.a.createElement(m.b,{className:["header-button",I.a.pairingRound,e.round===s+1?I.a.roundSelected:""].join(" "),to:"/".concat(e.id,"/").concat(e.section,"/results")},r.a.createElement("div",{className:"full-text"},r.a.createElement("h4",null,"Results"),i[s+1]?r.a.createElement("h5",null,new Date(i[s+1]).toString().substring(0,11)+new Date(i[s+1]).toString().substring(16,21)):null))),r.a.createElement("div",{className:["container","bodyContainer"].join(" ")},r.a.createElement("div",{className:"button-list"},l))}var J=n(68),Y={score:0,gamePoints:0,played:0,gamesPlayed:0,gameDifference:0,expectedScore:0,expectedGameScore:0,whiteTotal:0,wins:0,draws:0,losses:0,matchPercentage:0,gamePercentage:0,ratingDifference:0},Z=function(){function e(t,n,a){Object(b.a)(this,e),this.round=n,this.settings=a,this.rounds=void 0,this.tournamentId=void 0,this.id=void 0,this.firstName=void 0,this.lastName=void 0,this.rating=void 0,this.nationality=void 0,this.score=void 0,this.gamePoints=void 0,this.played=void 0,this.expectedScore=void 0,this.expectedGameScore=void 0,this.whiteTotal=void 0,this.isPlaying=void 0,this.active=void 0,this.performanceRating=void 0,this.histories=void 0,this.bonuses=void 0,this.clashList=void 0,this.contact=void 0,this.createdAt=void 0,this.updatedAt=void 0,this._netGamePoint=void 0,this._progressiveScore=void 0,this._oppRatingSum=void 0;for(var r=Object.keys(Y),i=0,o=Object.keys(t);i<o.length;i++){var c=o[i];r.includes(c)||Object.defineProperty(this,c,{value:t[c]})}"bye"!==this.id&&this.compute(n,a)}return Object(E.a)(e,[{key:"setRound",value:function(e){this.round=e,this.compute(e,this.settings)}},{key:"setSettings",value:function(e){this.settings=e,this.compute(this.round,e)}},{key:"setBonuses",value:function(e){var t=this;this.bonuses=e.filter((function(e){return e.id===t.id})),this.compute(this.round,this.settings)}},{key:"compute",value:function(e,t){for(var n=Object.assign({},Y),a=1;a<e+1;a++){var r=this.histories[a];r&&(null!==r.match&&("bye"!==r.id&&(n.played++,r.played&&(n.gamesPlayed+=r.played)),0===r.match?(n.score+=t.lossReward,n.losses++):.5===r.match?(n.score+=t.drawReward,n.draws++):1===r.match&&(n.score+=t.winReward,n.wins++),r.game&&(n.gamePoints+=r.game),n.expectedScore+=r.expected,n.expectedGameScore+=r.expected*r.played),"W"===r.colour&&n.whiteTotal++)}if(Object.assign(n,{gameDifference:2*n.gamePoints-n.gamesPlayed,matchPercentage:n.played?100*n.score/n.played:-1,gamePercentage:n.gamesPlayed?100*n.gamePoints/n.gamesPlayed:-1,ratingDifference:this.performanceRating-this.rating}),this.bonuses){var i,o=Object(h.a)(this.bonuses);try{for(o.s();!(i=o.n()).done;){var c=i.value;c.round>e||(c.MP&&(n.score+=c.MP),c.GP&&(n.gamePoints+=c.GP))}}catch(f){o.e(f)}finally{o.f()}}for(var l=0,s=Object.keys(n);l<s.length;l++){var u=s[l];Object.defineProperty(this,u,{value:n[u],configurable:!0})}for(var m=[""],d=1;d<this.histories.length;d++)d>e||!this.histories[d]?m[d]="":(null===this.histories[d].match||void 0===this.histories[d].match?m[d]="*":m[d]=this.histories[d].match.toString(),"bye"===this.histories[d].id&&(m[d]+="b"));return this.rounds=m.slice(1),this}},{key:"hasPlayed",value:function(e){return!!this.histories&&this.histories.some((function(t){return t.id&&t.id===e}))}},{key:"scoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.match?t+=n.match:t}),0):0}},{key:"gameScoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.game?t+=n.game:t}),0):0}},{key:"rank",get:function(){return 0}},{key:"name",get:function(){return"individual"===this.settings.competitors?[this.firstName,this.lastName].join(" "):this.firstName}},{key:"netGamePoint",get:function(){if(this._netGamePoint)return this._netGamePoint;if(!this.histories)return 0;var e=0,t=0;return this.histories.forEach((function(n){n&&(e+=n.game||0,t+=n.played)})),this._netGamePoint=2*e-t}},{key:"progressiveScore",get:function(){if(this._progressiveScore)return this._progressiveScore;if(!this.histories)return 0;var e,t=0,n=Object(h.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(a.match&&(t+=a.match))}}catch(r){n.e(r)}finally{n.f()}return this._progressiveScore=t}},{key:"oppRatingSum",get:function(){if(this._oppRatingSum)return this._oppRatingSum;if(!this.histories)return 0;var e,t=0,n=Object(h.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(t+=a.oppRating)}}catch(r){n.e(r)}finally{n.f()}return this._oppRatingSum=t}}],[{key:"bye",value:function(t,n,a){return new e({id:"bye",tournamentId:t,rating:0,firstName:"",lastName:"",histories:[]},n,a)}}]),e}(),K=n(41),X=n.n(K),Q=[];function $(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)([]),c=Object(u.a)(o,2),l=c[0],s=c[1],m=Object(a.useCallback)((function(t,n){switch(n){case"props":return e.players.length?e.players.map((function(t){return new Z(t,e.round,e.settings)})):t;case"round":if(!e.round)return t;if(!t.length)return t;var a,r=t.slice(0),i=Object(h.a)(r);try{for(i.s();!(a=i.n()).done;){a.value.setRound(e.round)}}catch(d){i.e(d)}finally{i.f()}return r;case"settings":return e.settings.winReward?e.players.map((function(t){return new Z(t,e.round,e.settings)})):t;case"bonuses":if(!l.length)return t;if(!t.length)return t;var o,c=!1,s=t.slice(0),u=Object(h.a)(l);try{var m=function(){var e=o.value,t=s.findIndex((function(t){return t.id===e.id}));if(t<0)return"continue";s[t].bonuses||(s[t].setBonuses(l),c=!0)};for(u.s();!(o=u.n()).done;)m()}catch(d){u.e(d)}finally{u.f()}return c?s:t;default:return t}}),[e.players,e.round,e.settings,l]),d=Object(a.useReducer)(m,[]),f=Object(u.a)(d,2),v=f[0],p=f[1];Object(a.useEffect)((function(){p("props")}),[p,e.players]),Object(a.useEffect)((function(){p("settings")}),[p,e.settings]),Object(a.useEffect)((function(){p("round")}),[p,e.round]),Object(a.useEffect)((function(){l.length&&p("bonuses")}),[p,l]);var g=Object(a.useCallback)((function(){return e.status.id&&!r?B({url:X.a.resolve(R,["tournament",e.status.id,"fetchBonuses"].join("/"))}).then(s).finally((function(){return i(!0)})):null}),[e.status.id,s,i]);return Object(a.useEffect)((function(){r||g()}),[g,r]),r?v:Q}var ee=n(22),te=n.n(ee),ne={pre:{rank:{mobile:"Rank",name:"",className:"blank",sort:!1,postConvert:function(e,t){return(1+t).toString()}},name:{name:"Name",className:"playerName",id:function(e){return e.id},sort:function(e,t){return e>t?1:e<t?-1:0}},nationality:{name:"Fed",mobile:"Federation",className:"flag",convert:function(e){return e?r.a.createElement("img",{src:g.flags.replace("|",e),alt:e}):null}},rating:{name:"Rating",className:"locked",show:function(e,t,n){return n.showRatings}}},roundColumn:{name:function(e,t){return e.slice(-1)},className:function(e,t,n){return"*"===e?"edit":""===e?"unset":"locked"},convert:function(e,t,n,a){if(""===e)return"";if("*"===e)return"*";var r=!1,i=Number(a.slice(-1));if(t.bonuses){var o,c=Object(h.a)(t.bonuses);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.round===i&&(e+=l.MP,r=!0)}}catch(m){c.e(m)}finally{c.f()}}var s,u=parseFloat(e);return s=.5===u?"\xbd":u.toString(),e.endsWith("b")&&(s+="b"),r&&(s+="*"),s},sort:function(e,t){if(e===t)return 0;if(""===e)return 1;if(""===t)return-1;if("*"===e)return 1;if("*"===t)return-1;var n=[parseInt(e),parseInt(t)],a=n[0],r=n[1];return e.toString().endsWith("b")&&(a-=.001),t.toString().endsWith("b")&&(r-=.001),r-a}},post:{score:{mobile:"Match Points",name:"MP",className:"locked",convert:function(e,t){return Math.floor(e)===e?e.toFixed():.5===e?"\xbd":Math.floor(e).toFixed()+"\xbd"}},gamePoints:{mobile:"Game Points",name:"GP",className:"locked",convert:function(e){return e.toFixed(1)}},gameDifference:{mobile:"Game Point Difference",name:"G. +/-",className:"locked",convert:function(e){return e?e>0?"+"+e.toFixed(1):e.toFixed(1):""}},gamesPlayed:{mobile:"Games Played",name:"P",className:"locked",convert:function(e){return e.toString()}},matchPercentage:{mobile:"Match Point Percentage",name:"M. %",className:"rating",convert:function(e){return e.toFixed()}},gamePercentage:{mobile:"Game Point Percentage",name:"G. %",className:"rating",convert:function(e){return e.toFixed()}},performanceRating:{mobile:"Performance Rating",name:"Perf",className:"rating",convert:function(e){return e.toFixed()},show:function(e,t,n){return n.showRatings}},ratingDifference:{mobile:"Performance Rating Difference",name:"P. +/-",className:"rating",convert:function(e){return e?e>0?"+"+e.toString():e.toString():""},show:function(e,t,n){return n.showRatings}},expectedScore:{mobile:"Expected Score",name:"Expected",className:"rating",convert:function(e,t){return e.toFixed(1)+" / "+t.played},show:function(e,t,n){return n.showRatings}},expectedDifference:{mobile:"Score to Expected",name:"E. +/-",className:"rating",convert:function(e){return"undefined"===typeof e?"":e>0?"+"+e.toFixed(2):e.toFixed(2)},show:function(e,t,n){return n.showRatings}},wins:{mobile:"Wins",name:"W",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}},draws:{mobile:"Draws",name:"D",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}},losses:{mobile:"Losses",name:"L",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}},played:{mobile:"Played",name:"P",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()}}}},ae={h2h:{name:"By head-to-head score",func:function(e,t){return t.scoreAgainst(e.id)-e.scoreAgainst(e.id)}},gamePoint:{name:"By game point total",func:function(e,t){return t.gamePoints-e.gamePoints}},gamePointDiff:{name:"By net game points",func:function(e,t){return t.netGamePoint-e.netGamePoint}},whites:{name:"By times played black",func:function(e,t){return e.whiteTotal-t.whiteTotal}},progScore:{name:"By progressive score",func:function(e,t){return t.progressiveScore-e.progressiveScore}},wins:{name:"By most wins",func:function(e,t){return t.histories&&e.histories?t.histories.filter((function(e){return e&&1===e.match})).length-e.histories.filter((function(e){return e&&1===e.match})).length:0}},gameh2h:{name:"By head-to-head of game points",func:function(e,t){return t.gameScoreAgainst(e.id)-e.gameScoreAgainst(e.id)}},perfRating:{name:"By performance rating",func:function(e,t){return t.performanceRating-e.performanceRating}},rating:{name:"By rating",func:function(e,t){return t.rating-e.rating}},oppRating:{name:"By average rating cut",func:function(e,t){var n,a;if(t.oppRatingSum!==e.oppRatingSum)return t.oppRatingSum-e.oppRatingSum;var r=null===(n=e.histories)||void 0===n?void 0:n.filter((function(e){return e})),i=null===(a=t.histories)||void 0===a?void 0:a.filter((function(e){return e}));if(!r||!i||!r.length||!i.length)return 0;for(var o=r.sort((function(e,t){return e.oppRating-t.oppRating})),c=i.sort((function(e,t){return e.oppRating-t.oppRating}));;){var l=[o.shift(),c.shift()],s=l[0],u=l[1];if(void 0===s||void 0===u)break;if(s||u){var m=o.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/o.length,d=c.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/c.length;if(m!==d)return d-m}}return 0}},alphabetical:{name:"Alphabetical",func:function(e,t){return t.firstName>e.firstName?-1:e.firstName>t.firstName?1:0}}},re=Object(a.createContext)(Object.entries(ae)),ie=Object(a.createContext)((function(){return""}));function oe(e){var t=$(e),n=Object(a.useMemo)((function(){return e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds?e.status.round:e.settings.totalRounds}),[e.status.round,e.settings.totalRounds]),i=Object(a.useMemo)((function(){for(var e=[],t=1;t<=n;t++)e.push("round."+t.toString());return e}),[n]),o=Object(a.useMemo)((function(){return[].concat(Object(J.a)(Object.keys(ne.pre)),Object(J.a)(i),Object(J.a)(Object.keys(ne.post)))}),[i]).filter((function(t,n){var a=ne.pre[t]||ne.post[t];return!a||!(a.show&&!a.show(null,n,e.settings))})),c=Object(a.useCallback)((function(e,t){return o.includes(t)?e[0]!==t?[t,0]:[t,e[1]+1]:["",0]}),[o]),l=Object(a.useReducer)(c,["score",0]),s=Object(u.a)(l,2),d=s[0],h=s[1],f=Object(a.useContext)(re),v=Object(a.useMemo)((function(){if(!t.length)return[];for(var a=[],i=function(r){var i=t[r];if("bye"===i.id)return"continue";for(var o=[],c=0,l=Object.entries(ne.pre);c<l.length;c++){var s=Object(u.a)(l[c],2),m=s[0],d=s[1];d.show&&!d.show(i,r,e.settings)||o.push([i[m],d,i])}for(var h=i.rounds,f=h.length+1;f<=n;f++)h.push("");for(var v=h.map((function(e){return[e,ne.roundColumn,i]})),p=[],g=0,b=Object.entries(ne.post);g<b.length;g++){var E=Object(u.a)(b[g],2),_=E[0],y=E[1];y.show&&!y.show(i,r,e.settings)||p.push([i[_],y,i])}var w=[].concat(o,Object(J.a)(v),p);a.push(w)},c=0;c<t.length;c++)i(c);var l=function(e,t){return t-e},s=d[0].startsWith("round")?ne.roundColumn:ne.pre[d[0]]||ne.post[d[0]];if(s&&!1!==s.sort){s.sort&&(l=s.sort);var h=o.indexOf(d[0]);-1!==h&&(a=a.sort((function(t,a){var r;if(r=d[1]%2?l(a[h][0],t[h][0]):l(t[h][0],a[h][0]))return r;if(e.round===n)return e.state.indexOf(t[h][2].id)-e.state.indexOf(a[h][2].id);for(var i=f.slice(0),o=i.shift();o;){var c=o[1].func(t[h][2],a[h][2]);if(c)return c;o=i.shift()}return 0})))}return a.map((function(t,n){return r.a.createElement("tr",{key:"row."+n,className:te.a.tr},t.map((function(t,a){var i=Object(u.a)(t,3),c=i[0],l=i[1],s=i[2],d=c?c.toString():"";l.convert?d=l.convert(c,s,e.settings,o[a]):l.postConvert&&(d=l.postConvert(d,n)),"undefined"!==typeof d&&""!==d||(d="\u200b");var h="function"===typeof l.className?l.className("string"===typeof d?d:"",a,e.settings):l.className;return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{className:[te.a.cell,te.a.headerCell].join(" "),key:["cellHeader",a].join(".")},r.a.createElement("div",null,l.mobile?l.mobile:"function"===typeof l.name?l.name((o[a]||"").toString(),a):l.name)),r.a.createElement("th",{key:["cellBody",a].join(".")},l.id?r.a.createElement(m.b,{to:{pathname:["","individual"===e.settings.competitors?"player":"team",l.id(s,n)].join("/"),state:{referrer:"/standings"}},className:[te.a.cell,h,te.a[h]].join(" ")},d):r.a.createElement("div",{key:[c,a].join("."),className:[te.a.cell,h,te.a[h]].join(" ")},d)))})))}))}),[t,d,o,e.round,e.state,n,e.settings,f]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",null,r.a.createElement("table",{className:["download-table full-width",te.a.table,"standings"].join(" ")},r.a.createElement("thead",{className:te.a.headers},r.a.createElement("tr",null,o.map((function(e,t){var n=e.startsWith("round")?ne.roundColumn:ne.pre[e]||ne.post[e];return r.a.createElement("th",{scope:"column",key:["column",t].join("."),className:[te.a.th,e.startsWith("round")?te.a.round:""].join(" "),id:e,onClick:function(){return h(e)}},r.a.createElement("div",{className:[te.a.cell,te.a.headerCell].join(" ")},"function"===typeof n.name?n.name(e,t):n.name))})))),r.a.createElement("tbody",null,v))),r.a.createElement("section",null,r.a.createElement("div",{className:te.a.footer},"* denotes bonuses or requested byes granted.")))}var ce=n(80),le=n.n(ce),se=n(39),ue=n.n(se),me=n(192),de=n.n(me),he=n(193),fe=n.n(he),ve=(n(148),n(51)),pe=n.n(ve);function ge(e){return e?e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase():e}var be=n(196),Ee=n(37),_e=n(84),ye=n.n(_e);n(162);function we(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],o=n[1],c=e.useState||[i,o],l=Object(u.a)(c,2),s=l[0],m=l[1],d=Object(a.createRef)();return s?r.a.createElement(Ee.b,null,r.a.createElement(Ee.a,{onClose:function(){return m(!1)}},r.a.createElement("div",{className:["chartContainer","rankings",ye.a.container,e.className].join(" "),ref:d},r.a.createElement("div",{className:[ye.a.fullScreenHeader,"header--isModal css-111ute9 css-1ycyyax"].join(" ")},r.a.createElement("span",null),r.a.createElement("span",null,r.a.createElement("button",{type:"button",title:"Enter fullscreen (f)",className:"header_button __header_button--fullscreen css-m6j0xf css-1ycyyax",onClick:function(){return!document.fullscreenElement&&d.current?d.current.requestFullscreen():document.exitFullscreen()}},r.a.createElement("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh"},r.a.createElement("path",{d:"M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z"}))),r.a.createElement("button",{type:"button",title:"Close (esc)",className:"react-images__header_button react-images__header_button--close css-m6j0xf css-1ycyyax",onClick:function(){return m(!1)}},r.a.createElement("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh"},r.a.createElement("path",{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"}))))),r.a.createElement("div",{className:ye.a.stage},e.children)))):null}function je(e){var t=Object(a.useState)(15),n=Object(u.a)(t,2),i=n[0],o=n[1],c=$(e),l=Object(a.useMemo)((function(){return{rating:{mobile:"Rating",name:"Rating",value:function(e){return e.rating},show:function(e){return!1}},score:{mobile:"Match Points",name:"MP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.match||0:e}),0)}},gamePoints:{mobile:"Game Points",name:"GP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.game||0:e}),0)},show:function(e){return 1!==e.gamePointTotal}},gameDifference:{mobile:"Game Point Difference",name:"G. +/-",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=null!==n?e.played:0)})),2*n-a},show:function(e){return 1!==e.gamePointTotal}},matchPercentage:{mobile:"Match Point Percentage",name:"M. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.match||0,a+=1)})),0===a?-1:100*n/a}},gamePercentage:{mobile:"Game Point Percentage",name:"G. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=e.played||0)})),0===a?-1:100*n/a},show:function(e){return 1!==e.gamePointTotal}},performanceRating:{mobile:"Performance Rating",name:"Perf",value:function(e){return e.performanceRating},show:function(e){return!1}},ratingDifference:{mobile:"Performance Rating Difference",name:"P. +/-",value:function(e){return e.performanceRating?e.performanceRating-e.rating:0},show:function(e){return!1}},expectedScore:{mobile:"Expected Score",name:"Expected",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected?e+=t.expected||0:e}),0)},show:function(e){return!1}},expectedDifference:{mobile:"Score to Expected",name:"E. +/-",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected&&"number"===typeof t.match?e+=t.match-t.expected||0:e}),0)},show:function(e){return e.showRatings}}}}),[]),s=Object(a.useMemo)((function(){return e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds?e.status.round:e.settings.totalRounds}),[e.status.round,e.settings.totalRounds]),m=Object(a.useState)([]),d=Object(u.a)(m,2),h=d[0],f=d[1],v=Object(a.useMemo)((function(){for(var e={},t=h.slice(0),n=c.filter((function(e){return"bye"!==e.id})),a=0;a<n.length;a++)for(var r=n[a],i=0,o=Object.entries(l);i<o.length;i++){var m=Object(u.a)(o[i],2),d=m[0],v=m[1];e[d]||(e[d]=[]);for(var p=[],g=1;g<s+1;g++)t[g-1]=g.toString(),g>=r.histories.length?p.push(void 0):p[g]=v.value(r,g);e[d][a]=p}return f(t),e}),[c,l,s]),p=Object(a.useContext)(re),g=Object(a.useState)(!0),b=Object(u.a)(g,2),E=b[0],_=b[1],y=Object(a.useState)(!0),w=Object(u.a)(y,2),j=w[0],O=w[1],k=Object(a.useState)(!1),N=Object(u.a)(k,2),S=N[0],x=N[1],C=Object(a.useCallback)((function(e,t){for(var n=e[0].length,a=[],r=[],i=1;i<n;i++){a[i]=[];for(var o=0;o<e.length;o++)a[i][o]={meta:c[o],value:e[o][i]};a[i]=a[i].sort((function(e,t){if(void 0===e.value)return 1;if(void 0===t.value)return-1;if(e.value!==t.value)return t.value-e.value;for(var n=p.slice(0),a=n.shift();a;){var r=a[1].func(e.meta,t.meta);if(r)return r;a=n.shift()}return 0})),r[i]=a[i].map((function(e){return void 0!==e.value?[e.meta.id,e.value]:["",void 0]}))}for(var l=[],s=0;s<e.length;s++){l[s]=[];for(var u=function(e){var n=c[s],a=r[e].findIndex((function(e){return e[0]===n.id}));l[s][e-1]={meta:n.firstName+" "+n.lastName,value:n.histories[e]&&"number"===typeof n.histories[e].match&&a>=0?t?-a-1:r[e][a][1]:void 0}},m=1;m<n;m++)u(m)}return l}),[c,l]),M=Object(a.useState)([]),R=Object(u.a)(M,2),L=R[0],D=R[1],B=Object(a.useState)(!0),T=Object(u.a)(B,2),F=T[0],A=T[1],z=Object(a.useState)(1),G=Object(u.a)(z,2),H=G[0],U=G[1],q=Object(a.useState)("score"),V=Object(u.a)(q,2),J=V[0],Y=V[1],Z=Object(a.useMemo)((function(){return Object.entries(l).map((function(t,n){var a=Object(u.a)(t,2),i=a[0],o=a[1];return o.show&&!o.show(e.settings)?null:r.a.createElement("div",{className:["header-button",I.a.pairingRound,J===i?I.a.roundSelected:""].join(" "),onClick:function(){return Y(i)},key:["round",n].join(".")},r.a.createElement("div",{className:"full-text"},r.a.createElement("h4",null,o.mobile)))}))}),[l,J,Y,e.settings]),K=Object(a.useMemo)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:["header-button",I.a.pairingRound,F?I.a.roundSelected:""].join(" "),onClick:function(){return A(!0)},key:["round","order"].join(".")},r.a.createElement("div",{className:"full-text"},r.a.createElement("h4",null,"Ranking"))),r.a.createElement("div",{className:["header-button",I.a.pairingRound,F?"":I.a.roundSelected].join(" "),onClick:function(){return A(!1)},key:["round","unorder"].join(".")},r.a.createElement("div",{className:"full-text"},r.a.createElement("h4",null,"Points"))))}),[F,A]),X=Object(a.useCallback)((function(e,t){return[e,F?"#"+(-Number(t)).toString():""].join("\n")}),[F]),Q=Object(a.useMemo)((function(){var t=J;if(!v[t])return null;for(var n=C(v[t],F),a=Math.ceil(n.length/2),o=function(t){if(n.reduce((function(n,a,r){var i,o;return t<e.status.round&&(null===(i=a[t-1])||void 0===i||i.value),"number"===typeof(null===(o=a[t])||void 0===o?void 0:o.value)?n+=1:n}),0)>a)return U(t),"break"},c=s;c>=0;c--){if("break"===o(c))break}var l=n.sort((function(e,t){var n,a;return((null===(n=t[H])||void 0===n?void 0:n.value)||-1/0)-((null===(a=e[H])||void 0===a?void 0:a.value)||-1/0)})).map((function(t,n){var a,i,o,c,l,s,u,m,d;if(!F)return r.a.createElement(r.a.Fragment,null,null===(a=t[H])||void 0===a?void 0:a.meta);if(!H)return r.a.createElement(r.a.Fragment,null,null===(i=t[H])||void 0===i?void 0:i.meta);if(H===e.status.round)return r.a.createElement(r.a.Fragment,null,"#",n," ",null===(o=t[H])||void 0===o?void 0:o.meta);if(void 0===(null===(c=t[H])||void 0===c?void 0:c.value)||void 0===(null===(l=t[H])||void 0===l?void 0:l.value))return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:["chartArrow"].join(" ")},r.a.createElement("div",null,"\u200b"),r.a.createElement("div",null,"\u200b")),null===(s=t[H])||void 0===s?void 0:s.meta);var h=(null===(u=t[H])||void 0===u?void 0:u.value)-(null===(m=t[H-1])||void 0===m?void 0:m.value),f=h>0?r.a.createElement(W.g,null):h<0?r.a.createElement(W.f,null):r.a.createElement(W.s,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:["chartArrow",h>0?"chartPositive":h<0?"chartNegative":"chartNeutral"].join(" ")},r.a.createElement("div",null,Math.abs(h)||"\u200b"),f),null===(d=t[H])||void 0===d?void 0:d.meta)}));return D(l),F&&n.push([{meta:"placeholder",value:-n.length}]),de()({tooltipFnc:X}),ue.a.plugins.tooltip({tooltipFnc:X}),fe()(),r.a.createElement(le.a,{data:{labels:h,series:n},options:{fullWidth:!0,divisor:.5,axisY:{offset:25,onlyInteger:F,labelInterpolationFnc:function(e){return F?e?"#"+(-e).toString():"":e}},width:S?.8*window.innerWidth:"100%",height:S?window.innerHeight-150:F&&E?i*(v[t].length+(i<21.7?4.2:0)):.8*window.innerHeight,plugins:[ue.a.plugins.tooltip({tooltipFnc:X}),ue.a.plugins.ctAxisTitle({axisX:{axisTitle:"Round",axisClass:"ct-axis-title",textAnchor:"middle"}})]},type:"Line"})}),[v,J,H,C,h,s,F,X,e.status.round,i,E,S]),ee=Object(a.useMemo)((function(){for(var e,t,n="",a="p".charCodeAt(0);a<"z".charCodeAt(0)+1;a++){var r=(e=0,t=65536,Math.floor(Math.random()*(t-e+1)+e)).toString(16);n+=".ct-series.ct-series-".concat(String.fromCharCode(a)," {\n\t\t\t\tstroke: #").concat("0".repeat(6-r.length)).concat(r,";\n\t\t\t}"),n+=".ct-series.ct-series-".concat(String.fromCharCode(a)," > path {\n\t\t\t\tstroke: #").concat("0".repeat(6-r.length)).concat(r,";\n\t\t\t}")}return n}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:["container","bodyContainer"].join(" ")},r.a.createElement("div",{className:"button-list"},Z)),r.a.createElement("div",{className:["container","bodyContainer"].join(" ")},r.a.createElement("div",{className:"button-list"},K)),r.a.createElement("section",null,r.a.createElement("style",null,ee),r.a.createElement("div",{className:I.a.description},"This chart shows the rankings for each team throughout the rounds, beginning with round 1 on the left.",r.a.createElement("br",null),"Switch to 'Points' above to see each team's points progression.",r.a.createElement("br",null)),r.a.createElement("div",{className:"sliderContainer container"},r.a.createElement("div",null,"Size"),r.a.createElement(be.a,{className:I.a.slider,thumbClassName:I.a.thumb,trackClassName:I.a.track,min:5,max:E&&F?Math.max(30,window.innerHeight/c.length):void 0,step:j?.5:5,value:E&&F?i:.8*window.innerHeight/c.length,disabled:!E||!F,onChange:function(e){return"number"===typeof e?o(e):null},renderThumb:function(e,t){return r.a.createElement("div",e,t.valueNow)}}),r.a.createElement("div",{className:"increment",onClick:function(){return i>=6?o(i-1):null}},r.a.createElement(W.b,null)),r.a.createElement("div",{className:"increment",onClick:function(){return i<=29?o(i+1):null}},r.a.createElement(W.e,null))),r.a.createElement("div",{className:"optionsContainer container"},r.a.createElement("div",{className:["header-button",I.a.pairingRound,"switchContainer"].join(" ")},r.a.createElement("label",null,r.a.createElement("div",null,E&&F?"Detailed":"Fit"),r.a.createElement("div",null,E&&F?"Switch off to view on one screen":F?"Switch to view player names":"Detailed view is only available with Ranking")),r.a.createElement("div",{className:"toggleSwitch",onClick:function(){return _(!E)}},r.a.createElement("input",{type:"checkbox",className:"check",checked:E&&F}),r.a.createElement("div",{className:"toggleSlider round"}))),r.a.createElement("div",{className:["header-button",I.a.pairingRound,"switchContainer"].join(" ")},r.a.createElement("label",null,r.a.createElement("div",null,j?"High":"Low"," Performance"),r.a.createElement("div",null,"Switch off if slow on Size change")),r.a.createElement("div",{className:"toggleSwitch",onClick:function(){return O(!j)}},r.a.createElement("input",{type:"checkbox",className:"check",checked:j}),r.a.createElement("div",{className:"toggleSlider round"}))),r.a.createElement("div",{className:["header-button",I.a.pairingRound,"switchContainer"].join(" ")},r.a.createElement("label",null,r.a.createElement("div",null,"Full Screen")),r.a.createElement("div",{className:"toggleSwitch",onClick:function(){return x(!S)}},r.a.createElement("input",{type:"checkbox",className:"check",checked:S}),r.a.createElement("div",{className:"toggleSlider round"})))),r.a.createElement("div",{className:I.a.description},"Hover to view team names."),r.a.createElement("div",{className:["chartContainer","rankings"].join(" ")},Q,F&&E?r.a.createElement("div",{className:"chartKey",style:P()?{}:{visibility:i<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(L.length,", ").concat(i,"px)"),left:"calc(".concat((H+0)/(s-1)," * 100%)"),fontSize:Math.min(i,25)-3+"px",marginTop:i>21.7?"2px":i+6+"px"}},L.map((function(e,t){return r.a.createElement("div",{key:["id",t].join("."),className:"playerLabel"},r.a.createElement("hr",{style:{display:P()||H>=s-1?"none":"block",width:.8/(s+2)*(window.innerWidth-60)}}),r.a.createElement("div",null,e))}))):null)),r.a.createElement(we,{className:pe.a.fsChart,useState:[S,x]},r.a.createElement("div",{className:pe.a.header},r.a.createElement("div",{className:pe.a.title},e.status.name),r.a.createElement("div",{className:pe.a.subtitle},l[J].mobile)),Q,F&&E&&i>15?r.a.createElement("div",{className:"chartKey",style:P()?{}:{visibility:i<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(L.length,", ").concat(i,"px)"),left:"calc(".concat((H+0)/(s-1)," * 100%)"),fontSize:Math.min(i,25)-3+"px",marginTop:i>21.7?"2px":i+6+"px"}},L.map((function(e,t){return r.a.createElement("div",{key:["id",t].join("."),className:"playerLabel"},r.a.createElement("hr",{style:{display:P()||H>=s-1?"none":"block",width:.8/(s+2)*(window.innerWidth-60)}}),r.a.createElement("div",null,e))}))):null,r.a.createElement("div",{className:pe.a.name},"Results by ScorchChess"),r.a.createElement("div",{className:pe.a.url},"https://scorchapp.co.uk")))}var Oe=function(){return r.a.createElement("div",{className:"container",style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("img",{src:"/logo512.png",style:{width:256,height:256},alt:"Not-Found"}),r.a.createElement("div",null,"PAGE NOT FOUND"))},ke=n(23),Ne=n.n(ke),Se=n(197),xe=n.n(Se),Ce=n(32),Pe=n.n(Ce),Me=(n(360),n(65)),Re=n(13),Le=n(12),De=n(198),Be=n.n(De),Te=n(199),Fe=n.n(Te),Ae=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],Ie=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.headerInfo;if(!e)return null;var t=e.Link,n=e.White,a=e.Black,i=e.WhiteTeam,o=e.BlackTeam,c=e.BlackElo,l=e.WhiteElo,s=e.Round,u=e.Game,m=e.Result,d=e.Event,h=e.Site,f=e.Date.split("."),v=f&&"".concat(f[2]," ").concat(Ae[new Number(f[1])-1]," ").concat(f[0]),p=d&&h?" ".concat(d," | ").concat(h," | ").concat(m," "):null,g=v&&s&&u?" ".concat(v," | Round ").concat(s," | Game ").concat(u," "):null,b={fontWeight:"bold",marginBottom:"0.25rem"},E={fontSize:"14px"};return r.a.createElement("div",{className:"pgnHeader",style:{padding:"5px"}},t?r.a.createElement("a",{href:t,rel:"noopener noreferrer",target:"_blank",style:b},n," (",l,") vs. ",a," (",c,")"):r.a.createElement("div",{style:b},n," (",l,") vs. ",a," (",c,")"),i||o?r.a.createElement("div",{style:b},i," vs. ",o):null,r.a.createElement("div",{style:E},p),r.a.createElement("div",{style:E},g))}}]),n}(r.a.Component),We=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleDownload=function(){var t=e.props.onDownload;"function"===typeof t&&t()},e}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this._handleDownload,style:this.props.iconStyles},r.a.createElement(W.o,null))}}]),n}(r.a.Component),ze=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handlePreviousMove=function(){var t=e.props.onPreviousMove;"function"===typeof t&&t()},e}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this._handlePreviousMove,style:this.props.iconStyles},r.a.createElement(W.c,null))}}]),n}(r.a.Component),Ge=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleNextMove=function(){var t=e.props.onNextMove;"function"===typeof t&&t()},e}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this._handleNextMove,style:this.props.iconStyles},r.a.createElement(W.d,null))}}]),n}(r.a.Component),He=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleLastMove=function(){var t=e.props.onLastMove;"function"===typeof t&&t()},e}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this._handleLastMove,style:this.props.iconStyles},r.a.createElement(W.x,null))}}]),n}(r.a.Component),Ue=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleReset=function(){var t=e.props.onReset;"function"===typeof t&&t()},e}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this._handleReset,style:this.props.iconStyles},r.a.createElement(W.w,null))}}]),n}(r.a.Component),qe=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleFlipBoard=function(){var t=e.props.onFlipBoard;"function"===typeof t&&t()},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.iconStyles,t=JSON.parse(JSON.stringify(e));return r.a.createElement("div",{onClick:this._handleFlipBoard,style:t},r.a.createElement(W.A,null))}}]),n}(r.a.Component),Ve=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handlePlay=function(){var t=e.props.onPlay;"function"===typeof t&&t()},e}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this._handlePlay,style:this.props.iconStyles},this.props.isPlaying?r.a.createElement(W.t,null):r.a.createElement(W.u,null))}}]),n}(r.a.Component),Je=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onDownload,n=e.onNextMove,a=e.onPreviousMove,i=e.onReset,o=e.onFlipBoard,c=e.width,l=e.onLastMove,s=e.onPlay,u=e.isPlaying,m=e.fenMove,d={cursor:"pointer",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:c,paddingTop:"10px",paddingBottom:"5px"},h={paddingLeft:"20px"};return r.a.createElement("div",{className:"pgnViewerFooter",style:d},!m&&r.a.createElement(Ue,{onReset:i,iconStyles:h}),!m&&r.a.createElement(ze,{onPreviousMove:a,iconStyles:h}),!m&&r.a.createElement(Ge,{onNextMove:n,iconStyles:h}),!m&&r.a.createElement(He,{onLastMove:l,iconStyles:h}),!m&&r.a.createElement(Ve,{onPlay:s,iconStyles:h,isPlaying:u}),r.a.createElement(qe,{onFlipBoard:o,iconStyles:h}),r.a.createElement(We,{onDownload:t,iconStyles:h}))}}]),n}(r.a.Component),Ye=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleChangeMove=function(){var t=e.props,n=t.onChangeMove,a=t.moveIndex;"function"===typeof n&&n(a)},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props,t=e.move,n=e.moveIndex,a=e.currentIndex,i=n%2!==0,o=Math.ceil(n/2)+".",c={cursor:"pointer",color:"black",display:"inline-block"};return a===n&&(c.fontWeight=700),r.a.createElement("span",{onClick:this._handleChangeMove,style:c},i&&o,"\xa0",t,"\xa0")}}]),n}(r.a.Component),Ze=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).moveList=Object(a.createRef)(),e}return Object(E.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.props.moves){var t=e.moves||[];this.props.moves.length!==t.length&&this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}}},{key:"componentDidMount",value:function(){this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}},{key:"render",value:function(){var e=this.props,t=e.result,n=e.moves,a=e.currentIndex,i=e.onChangeMove,o=e.startAtMove,c=e.endAtMove,l=e.fenMove;return n?r.a.createElement("div",{className:"pgnViewerMoveList",ref:this.moveList},!l&&n.map((function(e,t){return t<o-1||t>c-1?null:r.a.createElement(Ye,{onChangeMove:i,key:t,currentIndex:a,move:e,moveIndex:t+1})})),l&&r.a.createElement("div",null,l%2===0?"White":"Black"," to move"),r.a.createElement("span",{className:"bold"},t)):null}}]),n}(r.a.Component),Ke={base:{display:"flex",justifyContent:"center",flexDirection:"row"},wrapper:{width:500,background:"white"}},Xe=function(e){var t,n=JSON.parse(JSON.stringify(Ke)),a=Object(h.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.area][r.stylePair[0]]=r.stylePair[1]}}catch(i){a.e(i)}finally{a.f()}return n},Qe=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e))._updateDimensions=function(){a.setState({windowWidth:window&&window.innerWidth})},a._makeIncreasingMoves=function(e){for(var t=e.numberOfMoves,n=e.reset,r=a.state,i=r.chess,o=r.moves,c=r.index,l=n?0:new Number(c),s=0;s<t;s++)i.move(o[l]),l++;a.setState({chess:i,index:l})},a._handleNextMove=function(){var e=a.state,t=e.moves,n=e.chess,r=e.index,i=e.endAtMove,o=new Number(r);o>=t.length||r===i||(n.move(t[o]),o++,a.setState({chess:n,index:o}))},a._handlePreviousMove=function(){var e=a.state,t=e.chess,n=e.index,r=e.startAtMove,i=new Number(n);i<=0||n===r||(t.undo(),i--,a.setState({chess:t,index:i}))},a._handleReset=function(){var e=a.state,t=e.chess,n=e.startAtMove;t.reset(),n?a._makeIncreasingMoves({numberOfMoves:n,reset:!0}):a.setState({chess:t,index:0})},a._handleLastMove=function(){var e=a.state,t=e.moves,n=e.index,r=e.endAtMove;if(!(n>=t.length||n===r)){var i=r?r-n:t.length-n;a._makeIncreasingMoves({numberOfMoves:i})}},a._handleFlipBoard=function(){a.setState({orientation:"w"===a.state.orientation?"b":"w"})},a._handlePlay=function(){var e=a.state,t=e.moves,n=(e.chess,e.index),r=e.isPlaying;r||(n>=t.length&&a._handleReset(),a._handleNextMove()),a.setState({isPlaying:!r})},a._handleChangeMove=function(e){var t=a.state,n=t.chess,r=t.index;if(e!==r)if(e<r){for(var i=0;i<r-e;i++)n.undo();a.setState({chess:n,index:e})}else{var o=e-r;a._makeIncreasingMoves({numberOfMoves:o})}},a._handleDownload=function(){var e=a.state,t=e.headerInfo,n=e.fenMove,r=e.chess,i=document.createElement("a"),o=n?r.fen():a.props.pgnInformation,c=n?"txt":"pgn",l=new Blob([o],{type:"text/plain"}),s=t.White.split(" ").pop(),u=t.Black.split(" ").pop();i.href=URL.createObjectURL(l),i.download="".concat(s,"_vs_").concat(u,"_").concat(t.Date,".").concat(c),i.click()},a.state={chess:null,moves:null,index:null,headerInfo:null,isPlaying:null,isLoaded:null,startAtMove:null,fenMove:null,endAtMove:null,windowWidth:window&&window.innerWidth,orientation:a.props.orientation},a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.pgnInformation,t=new Be.a,n=0,a=e.trim().replace(/\[/g,"");if(!a)return null;var r=a.split("]").map((function(e){return e.trim()}));t.load_pgn(e);for(var i=0;i<r.length-2;i++){var o=r[i].split(' "');o[1]?t.header(o[0].replace(/\"/g,""),o[1].replace(/\"/g,"")):t.header(o[0].replace(/\"/g,""))}var c=t.header(),l=t.history();t.reset();var s=2*c.StartAtMove-1,u=2*c.EndAtMove,m=c.Fen&&c.Fen.split(""),d=m&&"b"===m.pop(),h=m&&m.join(""),f=d?2*h:2*h-1;if(s)for(var v=0;v<s;v++)t.move(l[n]),n++;else if(m)for(var p=0;p<f;p++)t.move(l[n]),n++;if(this.props.startAtLatest)for(var g=0;g<l.length;g++)t.move(l[n]),n++;this.setState({chess:t,moves:l,index:n,startAtMove:s,endAtMove:u,fenMove:m?f:null,headerInfo:c}),this._updateDimensions(),window.addEventListener("resize",this._updateDimensions),window.addEventListener("load",this._updateDimensions),window.addEventListener("orientationchange",this._updateDimensions)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.isPlaying?this.timeoutID=setTimeout((function(){return e._handleNextMove()}),1e3):clearTimeout(this.timeoutID)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._updateDimensions),window.removeEventListener("load",this._updateDimensions),window.removeEventListener("orientationchange",this._updateDimensions)}},{key:"render",value:function(){var e=this.props,t=e.blackSquareColor,n=e.whiteSquareColor,a=e.width,i=e.backgroundColor,o=e.showCoordinates,c=this.state,l=c.chess,s=c.moves,u=c.index,m=c.headerInfo,d=c.orientation,h=c.isPlaying,f=c.windowWidth,v=c.startAtMove,p=c.endAtMove,g=c.fenMove,b=function(e){var t=e.windowWidth,n=e.backgroundColor,a=e.defaultWidth,r=t&&t<768,i=r?"100%":a,o=r?"column":"row",c=[];c.push({area:"base",stylePair:["width",i]}),c.push({area:"base",stylePair:["flexDirection",o]}),c.push({area:"wrapper",stylePair:["width",i]}),c.push({area:"wrapper",stylePair:["background",n]});var l=Xe(c);return{width:i,isMobile:r,baseStyles:l.base,wrapperStyles:l.wrapper}}({windowWidth:f,backgroundColor:i,defaultWidth:a}),E=(b.baseStyles,b.wrapperStyles),_=b.isMobile,y=b.width,w=function(e,t){var n=(t-1)%2===0,a=null;if(e&&t)switch(e[t-1]){case"O-O":a=n?"g1":"g8";break;case"O-O-O":a=n?"c1":"c8";break;default:a=e[t-1].match(/[a-z][1-8]/gm)[0]}return a}(s,u);return r.a.createElement("div",{className:"pgnWrapper",style:E},m&&r.a.createElement(Ie,{headerInfo:m,width:y}),r.a.createElement("div",{className:"pgnViewerMain",onWheel:function(e){e.stopPropagation()}},r.a.createElement(Fe.a,{blackSquareColour:t,fen:l&&l.fen()||"start",orientation:d,showCoordinates:o,activeSquare:w,style:{border:"2px solid lightgrey"},whiteSquareColour:n,width:_?y:2/3*y,height:_?y:2/3*y}),!_&&r.a.createElement(Ze,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:s,width:1/3*y,startAtMove:v,endAtMove:p,fenMove:g,result:m?m.Result:null})),r.a.createElement(Je,{isPlaying:h,onPlay:this._handlePlay,onDownload:this._handleDownload,onFlipBoard:this._handleFlipBoard,onNextMove:this._handleNextMove,onPreviousMove:this._handlePreviousMove,onReset:this._handleReset,fenMove:g,onLastMove:this._handleLastMove,width:y}),_&&r.a.createElement(Ze,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:s,width:y,startAtMove:v,endAtMove:p,fenMove:g,result:m?m.Result:null}))}}]),n}(r.a.Component),$e=function(e){Object(Re.a)(n,e);var t=Object(Le.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).makeViewer=function(e){var t=e.pgnInformation,n=a.props,i=n.blackSquareColor,o=n.whiteSquareColor,c=n.orientation,l=n.width,s=n.backgroundColor,u=n.showCoordinates,m=n.startAtLatest;return r.a.createElement(Qe,{pgnInformation:t,blackSquareColor:i,whiteSquareColor:o,width:l,orientation:c,backgroundColor:s,showCoordinates:u,startAtLatest:m})},a.createInnerHtml=function(){return{__html:a.props.children}},a.additionalHTMLModification=function(){var e=a.props,t=e.nodeToModify,n=e.nodeModification,r=o.a.findDOMNode(Object(Me.a)(a)).querySelectorAll(t);if("function"!==typeof n||!t)return null;for(var i=0;i<r.length;i++)n(r[i])},a.setPgn=function(e){for(var t=o.a.findDOMNode(Object(Me.a)(a)).querySelectorAll("pgn"),n=0;n<t.length;n++)o.a.render(a.makeViewer({pgnInformation:e[n]}),t[n])},a.state={pgns:null},a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){for(var e=o.a.findDOMNode(this).querySelectorAll("pgn"),t=[],n=0;n<e.length;n++)t.push(e[n].innerHTML.slice(0));this.setState({pgns:t}),this.additionalHTMLModification(),this.setPgn(t)}},{key:"componentDidUpdate",value:function(){this.additionalHTMLModification(),this.setPgn(this.state.pgns)}},{key:"render",value:function(){var e=this.props,t=e.innerHTML,n=e.children;return r.a.createElement("div",null,t&&r.a.createElement("div",{dangerouslySetInnerHTML:this.createInnerHtml()}),!t&&r.a.createElement("div",null,this.makeViewer({pgnInformation:n})))}}]),n}(r.a.Component);$e.defaultProps={backgroundColor:"#e1e5ed",blackSquareColor:"steelblue",orientation:"w",showCoordinates:!0,whiteSquareColor:"aliceblue",width:600};var et=$e,tt=new xe.a({queue:!0});function nt(e,t){return at.apply(this,arguments)}function at(){return(at=Object(s.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){tt.dispatch(tt.getTeamLiveMatchBoard,(function(t,n){if(n)return a(n);e(t.body)}),[t,n])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return it.apply(this,arguments)}function it(){return(it=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){tt.dispatch(tt.getTeamLiveMatch,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}new Map([["p",r.a.createElement(W.l,null)],["n",r.a.createElement(W.k,null)],["b",r.a.createElement(W.h,null)],["r",r.a.createElement(W.n,null)],["q",r.a.createElement(W.m,null)],["k",r.a.createElement(W.j,null)]]);function ot(e){var t=Object(a.useState)(e.enforceBoards||20),n=Object(u.a)(t,2),i=n[0],o=n[1],c=Object(a.useReducer)((function(e,t){var n=e.slice(0);return n[t.board]={boardScores:t.boardScores,games:t.games},n}),[]),m=Object(u.a)(c,2),d=m[0],f=m[1],v=Object(a.useState)(0),p=Object(u.a)(v,2),g=p[0],b=p[1],E=Object(a.useReducer)((function(e,t){return e[t.i]=t.name,e}),["",""]),_=Object(u.a)(E,2),y=_[0],w=_[1],j=Object(a.useReducer)((function(e,t){var n=Object.assign({},e);return n[t.player.username.toLowerCase()]=t.team,n}),{}),k=Object(u.a)(j,2),N=k[0],S=k[1],x=Object(a.useState)(!1),C=Object(u.a)(x,2),P=C[0],M=C[1],R=Object(a.useReducer)((function(e,t){var n=e.slice(0);return n[t.board]=t.set,n}),[]),L=Object(u.a)(R,2),D=L[0],B=L[1],T=Object(a.useState)(0),F=Object(u.a)(T,2),A=F[0],I=F[1],W=Object(a.useCallback)(Object(s.a)(l.a.mark((function t(){var n,a,r,i,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.matchURL.match(O)){t.next=3;break}return t.abrupt("return",console.error("Invalid URL: ",e.matchURL));case 3:return a=Number(n[1]),t.prev=4,t.next=7,rt(a);case 7:for((r=t.sent).boards&&o(r.boards),"finished"===r.status&&M(!0),i=function(){var e=s[c],t=y.findIndex((function(t){return!t||t===e.name}));w({name:e.name,i:t});var n,a=Object(h.a)(e.players);try{for(a.s();!(n=a.n()).done;){var r=n.value;S({player:r,team:t})}}catch(i){a.e(i)}finally{a.f()}},c=0,s=Object.values(r.teams);c<s.length;c++)i();t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.error(t.t0);case 17:b(a);case 18:case"end":return t.stop()}}),t,null,[[4,14]])}))),[e.matchURL,y]);Object(a.useEffect)((function(){W()}),[W]);var G=Object(a.useCallback)(Object(s.a)(l.a.mark((function t(){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=2;break}return t.abrupt("return");case 2:if(!P||!d.length||i){t.next=4;break}return t.abrupt("return");case 4:n=l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!D[n]){t.next=2;break}return t.abrupt("return","continue");case 2:if(a=nt(g,n).then((function(e){f({games:e.games,boardScores:e.board_scores,board:n});var t=e.games[e.games.length-1];if(!t)throw"No game data given";return e.games.length>A?I(e.games.length):e.games.length>=A&&t.end_time&&B({board:n,set:!0}),!0})).catch((function(e){return console.error(e),!e.message.includes("doesn't have board")||!(1!==n||d.length>2)||(o(2===n?n-2:n-1),!1)})),i!==(e.enforceBoards||20)){t.next=9;break}return t.next=6,a;case 6:if(t.t0=t.sent,!1!==t.t0){t.next=9;break}return t.abrupt("return","break");case 9:case"end":return t.stop()}}),t)})),a=1;case 6:if(!(a<i+1)){t.next=17;break}return t.delegateYield(n(a),"t0",8);case 8:r=t.t0,t.t1=r,t.next="continue"===t.t1?12:"break"===t.t1?13:14;break;case 12:return t.abrupt("continue",14);case 13:return t.abrupt("break",17);case 14:a++,t.next=6;break;case 17:case"end":return t.stop()}}),t)}))),[g,i,P,D,d.length,e.enforceBoards,A,I]);if(Object(a.useEffect)((function(){var e=setInterval(G,1e3);return function(){return clearInterval(e)}}),[G]),!d.length&&!i)return r.a.createElement("div",null,"Match has not yet started!");if(!d.length)return r.a.createElement("div",{className:Pe.a.loading},r.a.createElement(z.a,null));var H=d.length?{}:{gridTemplateColumns:"1fr"};return r.a.createElement("div",{className:Pe.a.container,style:H},d.map((function(t,n){return r.a.createElement(ct,{pairing:t,teamDict:N,teams:y,round:e.round,board:n})})))}function ct(e){var t=Object(a.useMemo)((function(){return Object.entries(e.pairing.boardScores)}),[e.pairing.boardScores]),n=Object(a.useState)(e.pairing.games.length-1),i=Object(u.a)(n,2),o=i[0],c=i[1],l=Object(a.useMemo)((function(){return e.pairing.games.map((function(t,n){var a=e.teamDict[t.black.username.toLowerCase()];if(!t.pgn)return null;var i=['[WhiteTeam "'.concat(a?e.teams[0]:e.teams[1],'"]'),'[BlackTeam "'.concat(a?e.teams[1]:e.teams[0],'"]'),'[Board "'.concat(e.board+1,'"]'),'[Game "'.concat(n+1,'"]'),t.pgn.replace('[Round "-"]','[Round "'.concat(e.round,'"]'))].join("\n");return r.a.createElement(et,{innerHTML:!1,showCoordinates:!0,width:"100%",startAtLatest:!0},i)}))}),[e.pairing.games,e.round,e.teams,e.teamDict]),s=e.pairing.games[o],m=s&&e.teamDict[s.black.username.toLowerCase()]?t.reverse():t;return Object(a.useEffect)((function(){window.dispatchEvent(new Event("resize"))})),o<0?null:r.a.createElement("div",{className:Pe.a.wrapper},r.a.createElement("div",{className:Pe.a.boardLabel},r.a.createElement(W.c,{className:[Pe.a.pan,o?Pe.a.active:Pe.a.null].join(" "),onClick:function(){return o?c(o-1):null}}),r.a.createElement("span",{className:"bold"},m[0][1]),r.a.createElement("a",{href:"https://www.chess.com/live/game/"+s.url.split("/").pop(),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(W.i,null)),r.a.createElement("span",{className:"bold"},m[1][1]),r.a.createElement(W.d,{className:[Pe.a.pan,o===e.pairing.games.length-1?Pe.a.null:Pe.a.active].join(" "),onClick:function(){return o<e.pairing.games.length-1?c(o+1):null}})),l.map((function(e,t){return r.a.createElement("div",{className:Pe.a.gameViewWrapper,style:{visibility:t===o?"visible":"hidden"}},e)})))}function lt(e){var t,n,i=Object(a.createRef)(),o=Object(a.useState)(!1),c=Object(u.a)(o,2),l=c[0],s=c[1];Object(a.useEffect)((function(){l&&i.current&&i.current.focus()}),[i,l]);var m=Object(a.useCallback)((function(t){var n=t.nativeEvent,a=t.target,r=a.value,i=r.length,o=e.options.filter((function(t){return e.convert(t).toLowerCase().startsWith(r.toLowerCase())}));if(e.onChange(o),r.trim()&&n.data){var c=o[0];if(c){var l=e.convert(c);a.value=l,a.select(),a.setSelectionRange(i,l.length,"forward")}}}),[e.options]);return r.a.createElement("div",{className:null===(t=e.styles)||void 0===t?void 0:t.scoreSection},r.a.createElement("form",{target:"_self",onInput:function(t){return e.onSubmit(t).then((function(){return s(!0)}))},method:"POST",action:e.action},r.a.createElement("input",{type:"text",className:[null===(n=e.styles)||void 0===n?void 0:n.input].join(" "),name:"value",required:!0,placeholder:e.placeholder||"Search",onInput:m,autoComplete:"off"})))}var st={aborted:0,pending:0,scheduled:0,registered:0,live:0,finished:0,confirmed:0};function ut(e){var t=Object(a.useMemo)((function(){if(!e.matches)return st;var t=Object.assign({},st,{pending:e.total});return Object.values(e.matches).forEach((function(n){n.round===e.round&&(t[n.status]++,t.pending--)})),t}),[e.matches,e.round,e.total]),n=Object(a.useMemo)((function(){return r.a.createElement(le.a,{type:"Pie",data:{labels:Object.entries(t).map((function(t){var n=Object(u.a)(t,2),a=n[0],r=n[1];return"".concat(a," ").concat(Math.round(100*r/e.total),"% (").concat(r,")")})),series:Object.entries(t).map((function(e){var t=Object(u.a)(e,2);return{meta:t[0],value:t[1]}}))},options:{donut:!0,donutSolid:!0,donutWidth:60,startAngle:270,total:2*e.total,height:400,ignoreEmptyValues:!0,showLabel:!0,labelPosition:"outside"},listener:{draw:function(e){if("slice"===e.type){var t=e.element._node.getTotalLength(),n={"stroke-dashoffset":{id:"anim"+e.index,dur:1e3,from:-t+"px",to:"0px",easing:se.Svg.Easing.easeOutQuint,fill:"freeze",begin:void 0}};0!==e.index&&(n["stroke-dashoffset"].begin="anim"+(e.index-1)+".end"),e.element.attr({"stroke-dashoffset":-t+"px"}),e.element.animate(n,!1)}}}})}),[t,e.total]);return r.a.createElement("div",{className:"gauge"},n)}var mt=function(){function e(t,n){Object(b.a)(this,e),this.round=n,this.id=void 0,this.w=void 0,this.b=void 0,this.teamID=void 0,this.link=void 0,this.linkSource=void 0,this.linkType=void 0,this.aborted=void 0,this.bodyStatus=void 0,this.metaStatus=void 0,this.registrationTime=void 0,this.startTime=void 0,this.endTime=void 0,this.players=void 0,this.scored=void 0,this.debugStatus=void 0;for(var a=0,r=Object.keys(t);a<r.length;a++){var i=r[a];Object.defineProperty(this,i,{value:t[i]})}this.debugStatus=this.status}return Object(E.a)(e,[{key:"status",get:function(){if(this.aborted)return"aborted";for(var e=0,t=["Confirmed","Finished","Live","Registered","Scheduled"];e<t.length;e++){var n=t[e];if("is"+n in this&&this["is"+n])return n.toLowerCase()}return"pending"}},{key:"isConfirmed",get:function(){return!!this.scored}},{key:"isFinished",get:function(){return!!this.isConfirmed||("finished"===this.bodyStatus||Date.now()>(this.endTime||1/0))}},{key:"isLive",get:function(){return"In Progress"===this.metaStatus||("in_progress"===this.bodyStatus||!!(!this.isFinished&&this.startTime&&Date.now()>this.startTime))}},{key:"isRegistered",get:function(){return Date.now()>(this.registrationTime||1/0)||(!!this.players||(!!this.isLive||!!this.isFinished))}},{key:"isScheduled",get:function(){return Date.now()>(this.startTime||1/0)||(!!this.startTime||("scheduled"===this.bodyStatus||(!!this.isRegistered||!!this.isFinished)))}}]),e}();function dt(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),i=n[0],o=n[1],c=Object(a.useReducer)((function(e,t){var n=e.slice(0);return e.includes(t)?n.splice(n.indexOf(t)):n.push(t),n}),[]),m=Object(u.a)(c,2),d=m[0],h=m[1],f=Object(a.useState)(!1),v=Object(u.a)(f,2),p=v[0],g=v[1],b=Object(a.useReducer)((function(e,t){var n=Object.assign({},e);return n[t.id]=new mt(t,t.round),n}),{}),E=Object(u.a)(b,2),_=E[0],y=E[1];Object(a.useEffect)((function(){g(!1),B({url:"/tournament/"+e.id+"/getPairings",params:{round:e.round}}).then(o).then((function(){return g(!0)})).catch((function(){}))}),[o,e.round,e.id]);var w=Object(a.useState)([]),j=Object(u.a)(w,2),k=j[0],N=j[1],x=["White","White score","Black","Black score","Game link","Time"],C=Object(a.useState)([]),P=Object(u.a)(C,2),M=P[0],R=P[1],L=Object(a.useCallback)(Object(s.a)(l.a.mark((function t(){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.length){t.next=2;break}return t.abrupt("return");case 2:for(n=e.round.valueOf(),a=function(t){var a,r,o,c=i[t],l=[c[0].trim(),c[1].trim()].join("."),s=e.playerDict.get(c[0].trim()),m=e.playerDict.get(c[1].trim()),d=Object.entries(c[2]).find((function(e){return e}))||[void 0,void 0],h=Object(u.a)(d,2),f=h[0],v=h[1],p=null===(a=v)||void 0===a?void 0:a.match(O);p&&(v="https://www.chess.com/club/matches/live/"+p[1].trim());var g=p?Number(p[1]):void 0,b=(null===s||void 0===s||null===(r=s.histories[e.round])||void 0===r?void 0:r.game)||(null===m||void 0===m||null===(o=m.histories[e.round])||void 0===o?void 0:o.game),E={id:l,teamID:g,link:v,w:s,b:m,round:n,scored:!!b,linkSource:f?f.startsWith("lichess")?"lichess":"chessCom":void 0,linkType:f?f.includes("Team")?"team":"individual":void 0};y(E),g&&rt(g).catch((function(e){return e&&console.error(e),{}})).then((function(e){return e&&(e.start_time&&Date.now()<1e3*e.start_time||"finished"===e.status)?(y(Object.assign(E,{bodyStatus:e.status,startTime:1e3*e.start_time,endTime:e.end_time?1e3*e.end_time:void 0,players:e.boards})),Promise.reject()):e})).then((function(t){B({url:"/tournament/"+e.id+"/scrapeChessComTeamPage",params:{url:v}}).then((function(e){if(!e["Registration Open"]&&!e["Start Time"]&&!e["Finished On"])throw null;y(Object.assign(E,{registrationTime:e["Registration Open"]?new Date(e["Registration Open"]).valueOf():void 0,metaStatus:e.Status,startTime:t&&t.start_time?1e3*t.start_time:e["Start Time"]?new Date(e["Start Time"]).valueOf():void 0,endTime:e["Finished On"]?new Date(e["Finished On"]).valueOf():void 0,players:e["Players per Team"]}))})).catch((function(e){e&&console.error(e),y(Object.assign(E,{aborted:!0}))}))})).catch((function(e){return e?console.error(e):null}))},r=0;r<i.length;r++)a(r);case 5:case"end":return t.stop()}}),t)}))),[i,y,e.id,e.playerDict,e.round]);Object(a.useEffect)((function(){L()}),[L]);var D=Object(a.useCallback)((function(t){return t&&t.id?"bye"===t.id?"BYE":"individual"===e.settings.competitors?[t.firstName,t.lastName].join(" "):t.firstName:"\u200b"}),[e.settings.competitors]),T=Object(a.useMemo)((function(){var t=[],n=Object.values(_).map((function(n,a){var i,o,c,l,s,u;if(n.round!==e.round)return null;var m=n.startTime||n.registrationTime,f=new Date(m||0).toString(),v=[D(n.w),null!==(i=null===(o=n.w)||void 0===o||null===(c=o.histories[e.round])||void 0===c?void 0:c.game)&&void 0!==i?i:"",D(n.b),null!==(l=null===(s=n.b)||void 0===s||null===(u=s.histories[e.round])||void 0===u?void 0:u.game)&&void 0!==l?l:"",m?f.slice(0,10)+"\n"+f.slice(16,21):"",n.link,n.w?n.w.nationality:"",n.b?n.b.nationality:""];return t[a+1]=v,r.a.createElement(ht,{key:["row",a].join("."),data:v,match:n,round:e.round,expanded:d.includes(n.id),setExpanded:h,hidden:!!k.length&&!k.some((function(e){return e.id===n.w.id}))&&!k.some((function(e){return e.id===n.b.id})),settings:e.settings})}));return R(t),n}),[D,h,R,d,k,_,e.round,e.settings]),F=Object(a.useCallback)((function(){var t=document.createElement("a"),n=x.join(",")+"\n"+M.map((function(e){return e.join(",")})).join("\n"),a=new Blob([n],{type:"text/csv"}),r=(e.status.name.match(S)||[]).join(""),i=new Date(Date.now()).toString().slice(4,15);t.href=URL.createObjectURL(a),t.download="".concat(r,"_").concat(i,"_").concat([e.round],".").concat("csv"),t.click()}),[M,e.round,x,e.status.name]),A=Object(a.useMemo)((function(){return r.a.createElement(ut,{matches:_,round:e.round,total:i.length})}),[_,e.round,i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",null,A),r.a.createElement("section",null,r.a.createElement("div",{className:I.a.subheader},r.a.createElement("div",null,"All times in ",new Date(Date.now()).toString().slice(25)),r.a.createElement("div",{className:["button"].join(" "),onClick:F},r.a.createElement("div",null,r.a.createElement(W.o,null)),r.a.createElement("div",null,"Download")),r.a.createElement("div",null,r.a.createElement("div",{className:I.a.searchBar},r.a.createElement(W.v,null),r.a.createElement(lt,{onChange:function(e){return N(e)},onSubmit:function(){return Promise.resolve()},action:"",options:Array.from(e.playerDict.values()),convert:function(e){return D(e)},styles:I.a,placeholder:"Search"})))),r.a.createElement("table",{className:"download-table full-width pairings"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"5%"}},"Fed"),r.a.createElement("td",{style:{width:"22.5%"}},"White"),r.a.createElement("td",{style:{width:"12.5%"}},"Link"),r.a.createElement("td",{style:{width:"5%"}}),r.a.createElement("td",{style:{width:"10%"}},"Start Time"),r.a.createElement("td",{style:{width:"5%"}}),r.a.createElement("td",{style:{width:"12.5%"}},"Watch Live"),r.a.createElement("td",{style:{width:"22.5%"}},"Black"),r.a.createElement("td",{style:{width:"5%"}},"Fed"))),r.a.createElement("tbody",null,p&&!i.length?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:100},"Draw has not yet taken place!")):null,T))))}function ht(e){var t,n,a,i,o=e.match,c=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:["row"].join("."),style:{display:e.hidden?"none":void 0}},r.a.createElement("td",null,r.a.createElement("div",{className:I.a.flag},c[6]?r.a.createElement("img",{src:g.flags.replace("|",c[6]),alt:c[6]}):null)),r.a.createElement("td",{id:null===(t=o.w)||void 0===t?void 0:t.id},r.a.createElement(m.b,{to:{pathname:["","individual"===e.settings.competitors?"player":"team",null===(n=o.w)||void 0===n?void 0:n.id].join("/"),state:{from:"pairings"}},className:"playerName"},c[0])),r.a.createElement("td",{className:I.a.inner},o.link?r.a.createElement("a",{className:"button",href:o.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(W.r,null),r.a.createElement("div",null,"chess.com")):null),r.a.createElement("td",{className:I.a.inner},r.a.createElement("div",{className:["bold",I.a.score,I.a[o.status],o.status].join(" ")},c[1])),r.a.createElement("td",{style:{whiteSpace:"pre-line"}},c[4]||"-"),r.a.createElement("td",{className:I.a.inner},r.a.createElement("div",{className:["bold",I.a.score,I.a[o.status],o.status].join(" ")},c[3])),r.a.createElement("td",{className:I.a.inner},o.link&&o.isScheduled?r.a.createElement("div",{className:"button",onClick:function(){return o.isFinished?e.setExpanded(o.id):null}},o.isFinished?r.a.createElement("div",null,"Analysis"):r.a.createElement(r.a.Fragment,null,o.isLive?r.a.createElement("img",{className:"icon",src:U.a,alt:"Watch games"}):r.a.createElement(W.i,null),r.a.createElement("a",{href:"https://www.chess.com/live#tm="+o.teamID,target:"_blank",rel:"noopener noreferrer"},o.isLive?" Watch live":"Join Game"))):null),r.a.createElement("td",{id:null===(a=o.b)||void 0===a?void 0:a.id},r.a.createElement(m.b,{to:{pathname:["","individual"===e.settings.competitors?"player":"team",null===(i=o.b)||void 0===i?void 0:i.id].join("/"),state:{from:"pairings"}},className:"playerName"},c[2])),r.a.createElement("td",null,r.a.createElement("div",{className:I.a.flag},c[7]?r.a.createElement("img",{src:g.flags.replace("|",c[7]),alt:c[7]}):null))),o.link&&e.expanded?r.a.createElement("tr",{key:["row","dropdown"].join(".")},r.a.createElement("td",{colSpan:100},"chessCom"===o.linkSource&&"team"===o.linkType?r.a.createElement(ot,{matchURL:o.link,enforceBoards:o.players?Number(o.players):0,round:e.round}):null)):null)}var ft=n(118),vt=n(16),pt=n.n(vt),gt=n(49);function bt(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),i=n[0],o=(n[1],(e.streamURL||"").match(k));o||(o=["",""]);var c=o.slice(1),l=Object(u.a)(c,2),s=l[0],m=l[1],d=s.split(".").shift(),h=Object(a.useMemo)((function(){return r.a.createElement(ft.b,{id:pt.a.twitchPlayer,channel:m,autoplay:!0,width:"100%",height:"640px"})}),[m]),f=Object(a.useRef)(null),v=Object(a.useCallback)((function(){f.current&&e.pop(f.current)}),[e.pop,f]);return r.a.createElement("div",{className:pt.a.container},"twitch"===d?r.a.createElement("section",null,r.a.createElement("div",{className:pt.a.streamHeader},r.a.createElement(W.y,null),r.a.createElement("span",{className:"bold"},m),r.a.createElement("div",{className:"button",onClick:v},"Pop-out",r.a.createElement(gt.b,null))),r.a.createElement("div",{className:pt.a.streamContainer},r.a.createElement("div",{id:pt.a.twitchPlayer,ref:f,className:[pt.a.player,i?pt.a.popped:""].join(" ")}),r.a.createElement("div",{className:[pt.a.player].join(" "),style:{display:i?"flex":"none"}}),r.a.createElement("div",{id:pt.a.twitchChat,className:pt.a.chat},r.a.createElement(ft.a,{channel:m,width:"100%",height:"100%"})))):null,"youtube"===d?r.a.createElement("section",null,r.a.createElement("div",{className:pt.a.streamHeader},r.a.createElement(W.C,null),r.a.createElement("span",{className:"bold"},"chess-england")),r.a.createElement("div",{className:pt.a.streamContainer},r.a.createElement("div",{id:pt.a.youtubePlayer,className:pt.a.player},r.a.createElement("iframe",{title:"youtubePlayer",width:.66*Math.min(window.innerWidth-40,980),height:Math.min(window.innerWidth-40,980)/2.73,src:"https://www.youtube.com/embed/R2v-XSRMOFo",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),r.a.createElement("div",{id:pt.a.youtubeChat,className:[pt.a.chat,pt.a.youtubeChat].join(" ")},r.a.createElement("iframe",{title:"youtubeChat",width:.31*Math.min(window.innerWidth-40,980),height:"315",src:"https://www.youtube.com/live_chat?v=R2v-XSRMOFo&embed_domain=localhost",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))):null,r.a.createElement("div",{className:pt.a.footer},"If you're having problems viewing this player, try disabling any extensions or Brave Shields if you have them enabled."),r.a.createElement("div",{className:"hidden"},h))}var Et=n(30),_t=n.n(Et);function yt(e){var t=Object(a.useState)(10),n=Object(u.a)(t,2),i=n[0],o=(n[1],Object(a.useState)(10)),c=Object(u.a)(o,2),l=c[0];c[1];return e.children?r.a.createElement("div",{className:["popped",_t.a.draggable].join(" "),style:{bottom:i,right:l},onClick:function(){return console.log("amListening")}},e.children):null}n(204),n(200);function wt(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],o=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",Object.assign({},e,{onClick:function(){return o(!i)},style:{cursor:"pointer"}})),r.a.createElement(Ee.b,null,i?r.a.createElement(Ee.a,{onClose:function(){return o(!1)}},r.a.createElement(Ee.c,{currentIndex:0,views:[Object.assign({},e,{source:e.src})]})):null))}var jt=n(17),Ot=n.n(jt),kt=(n(364),n(119));function Nt(e){var t=Object(a.useContext)(ie);function n(t){var n=t.id,a=e.playerDict.get(n);return a?r.a.createElement("div",{className:Ot.a.table},a&&a.nationality?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ot.a.key},"Nationality"),r.a.createElement("div",{className:[Ot.a.flag,Ot.a.value].join(" ")},r.a.createElement("img",{src:g.flags.replace("|",a.nationality),alt:a.nationality}))):null,Object.entries(ne.post).map((function(t,n){var i,o=Object(u.a)(t,2),c=o[0],l=o[1];return l.show&&!l.show(a,n,e.settings,"results")?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ot.a.key},l.mobile),r.a.createElement("div",{className:Ot.a.value},l.convert?l.convert(a[c],a,e.settings,"results"):null===(i=a[c])||void 0===i?void 0:i.toString()))}))):null}return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:Ot.a.fireworksSection},r.a.createElement("div",{className:"pyro"},r.a.createElement("div",{className:"before"}),r.a.createElement("div",{className:"after"})),r.a.createElement("div",{className:Ot.a.resultsScreen},r.a.createElement("div",{id:"first",className:Ot.a.place},r.a.createElement(kt.b,null),r.a.createElement("div",{className:Ot.a.position},"1",r.a.createElement("sup",null,"st")),r.a.createElement("div",{className:Ot.a.teamName},t(e.state[0])),r.a.createElement(n,{id:e.state[0]})),r.a.createElement("div",{id:"second",className:Ot.a.place},r.a.createElement(kt.a,null),r.a.createElement("div",{className:Ot.a.position},"2",r.a.createElement("sup",null,"nd")),r.a.createElement("div",{className:Ot.a.teamName},t(e.state[1])),r.a.createElement(n,{id:e.state[1]})),r.a.createElement("div",{id:"third",className:Ot.a.place},r.a.createElement(G.d,null),r.a.createElement("div",{className:Ot.a.position},"3",r.a.createElement("sup",null,"rd")),r.a.createElement("div",{className:Ot.a.teamName},t(e.state[2])),r.a.createElement(n,{id:e.state[2]})))),r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:{pathname:"/".concat(e.id,"/standings/final"),state:{from:window.location.pathname}},className:["header-button",Ot.a.standingsButton].join(" ")},"View Final Standings"))))}function St(e){var t,n=e.match.params.id,i=Object(a.useReducer)((function(e,t){var n=e.findIndex((function(e){return void 0===e})),a=e.slice(0);return a[n]=t,a}),[void 0,void 0,void 0,void 0]),o=Object(u.a)(i,2),c=o[0],l=o[1],s=Object(a.useState)({}),m=Object(u.a)(s,2),f=m[0],v=m[1],p=Object(a.useState)({}),g=Object(u.a)(p,2),b=g[0],E=g[1],_=Object(a.useState)([]),y=Object(u.a)(_,2),w=y[0],j=y[1],O=Object(a.useState)([]),k=Object(u.a)(O,2),N=k[0],x=k[1],C=Object(a.useMemo)((function(){return e.history.location.state&&"/"===e.history.location.state.from}),[e.history.action]),P=Object(a.useState)(null),M=Object(u.a)(P,2),R=M[0],L=M[1],D=$({status:b,players:N,settings:f,round:b.round}),T=Object(a.useMemo)((function(){if(!D.length)return new Map;var e,t=new Map,n=Object(h.a)(D);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.set(a.id,a)}}catch(r){n.e(r)}finally{n.f()}return t}),[D]),F=b.round||0;Object(a.useEffect)((function(){B({url:"/tournament/"+n+"/fetchPlayers"}).then(x).then((function(){return l(!0)})).catch((function(){return l(!1)}))}),[x,n,l]),Object(a.useEffect)((function(){B({url:"/tournament/"+n+"/getSettings"}).then(v).then((function(){return l(!0)})).catch((function(){return l(!1)}))}),[v,n,l]),Object(a.useEffect)((function(){B({url:"/tournament/"+n+"/getState"}).then((function(e){var t=e.players,n=Object.entries(t).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return[Number(n),a]})).sort((function(e,t){return t[0]-e[0]})).reduce((function(e,t){return e.concat(t[1])}),[]);j(n)})).then((function(){return l(!0)})).catch((function(){return l(!1)}))}),[j,n,l]),Object(a.useEffect)((function(){B({url:"/tournament/"+n+"/getStatus"}).then(E).then((function(){return l(!0)})).catch((function(){return l(!1)}))}),[E,l,n]),Object(a.useEffect)((function(){if(F){for(var e=new Array(F+1),t=1;t<F+1;t++)e[t]={match:0,game:0};T.set("bye",Z.bye(n,F,f))}}),[T,F,n,f]);var A=Object(a.useState)(!1),I=Object(u.a)(A,2),z=I[0],H=I[1],U=Object(a.useMemo)((function(){var e=Object.entries(ae);if(f.tieBreaks){var t=f.tieBreaks.split(",");e=e.sort((function(e,n){return t.indexOf(e[0])-t.indexOf(n[0])}))}return e}),[f.tieBreaks]),J=Object(a.useCallback)((function(e){if(!e)return"\u200b";if("bye"===e)return"BYE";if("string"!==typeof e){var t=e;return"individual"===f.competitors?[t.firstName,t.lastName].join(" "):t.firstName}var n=T.get(e);return n?"individual"===f.competitors?[n.firstName,n.lastName].join(" "):n.firstName:e}),[T,f.competitors]);return c.some((function(e){return void 0===e}))?null:c.some((function(e){return!1===e}))?r.a.createElement(Oe,null):r.a.createElement("div",{id:"main",className:C?"animated-right":""},r.a.createElement("div",{className:"container",style:{marginTop:"60px"}},r.a.createElement("div",{className:Ne.a.stage},r.a.createElement("div",{className:Ne.a.profilePicture},f.logoURL?r.a.createElement(wt,{src:f.logoURL,alt:"profile_picture"}):r.a.createElement("div",{className:Ne.a.defaultProfilePicture},null===(t=b.name.match(S))||void 0===t?void 0:t.map((function(e){return e.substring(0,1).toUpperCase()})).join(""))),r.a.createElement("div",{className:Ne.a.nameContainer},r.a.createElement("div",{className:Ne.a.name},b.name)),f.profileURL?r.a.createElement("a",{className:[Ne.a.website].join(" "),href:f.profileURL,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(W.r,null)," Website"):null,f.rulesURL?r.a.createElement("a",{className:[Ne.a.rules].join(" "),href:f.rulesURL,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(G.e,null)," Rules"):null,r.a.createElement("div",{className:Ne.a.infoBox},r.a.createElement("div",null,r.a.createElement("div",null,"Director: "),r.a.createElement("div",null,b.user),r.a.createElement("div",null,"Created: "),r.a.createElement("div",null,new Date(b.createdAt).toString().slice(4,15)),r.a.createElement("div",null,ge("team"===f.competitors?"Teams":"Players"),": "),r.a.createElement("div",null,b.players),r.a.createElement("div",null,"Format: "),r.a.createElement("div",null,ge(f.pairingSystem))),r.a.createElement("div",null,r.a.createElement("div",null,"Location: "),r.a.createElement("div",null,f.location||"-"),r.a.createElement("div",null,"Time control: "),r.a.createElement("div",null,f.timeControl||"-"),r.a.createElement("div",null,"Status: "),r.a.createElement("div",null,!1!==b.active?"Live":b.round?"Finished":"Not yet started"),r.a.createElement("div",{className:Ne.a.tieBreakLink,onClick:function(){return H(!z)}},"Tie Breaks"))),r.a.createElement(d.b,{path:"/:id/:section/:round?/",render:function(t){var n=parseInt(t.match.params.round);return isNaN(n)&&(n=b.round),n<0||n>f.totalRounds?null:r.a.createElement(q,{id:e.match.params.id,settings:f,section:t.match.params.section})}}))),r.a.createElement("section",null,r.a.createElement("div",{className:["container",Ne.a.tieBreakContainer,z?Ne.a.visible:""].join(" ")},r.a.createElement("div",null,r.a.createElement("div",{className:Ne.a.tieBreakTitle,onClick:function(){return H(!1)}},"TIE BREAKS"),r.a.createElement("div",{className:Ne.a.tieBreaks},U.map((function(e,t){var n=Object(u.a)(e,2)[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"#",t+1),r.a.createElement("div",null,n.name))})))))),r.a.createElement(d.b,{path:"/:id/:section/:round?/",render:function(t){var n;if(n="results"===t.match.params.round?b.round+1:parseInt(t.match.params.round),isNaN(n)&&(n=b.round),"Infinity"===f.totalRounds&&(f.totalRounds=1/0),n<0||n>f.totalRounds+1)return null;var a=t.match.params.section;return"pairings"!==a&&"standings"!==a?null:r.a.createElement(V,{section:t.match.params.section,round:n,id:e.match.params.id,playerDict:T,status:b,settings:f})}}),r.a.createElement(d.b,{render:function(t){var n=t.location;return r.a.createElement(d.d,{location:n},r.a.createElement(d.b,{exact:!0,path:"/:id/",render:function(){return r.a.createElement(d.a,{push:!0,to:{pathname:"/".concat(f.vanityURL||e.match.params.id,"/pairings"),state:e.history.location.state}})}}),r.a.createElement(d.b,{path:"/:id/stats/",render:function(){return r.a.createElement(je,{round:b.round,status:b,players:Array.from(T.values()),settings:f})}}),r.a.createElement(d.b,{path:"/:id/tv/",render:function(){return r.a.createElement(bt,{streamURL:f.streamURL,pop:L})}}),r.a.createElement(d.b,{exact:!0,path:"/:id/:section/",render:function(t){return r.a.createElement(d.a,{push:!0,to:{pathname:t.match.url+(t.match.url.endsWith("/")?"":"/")+(b.round&&!b.active?"results":b.round),state:e.history.location.state}})}}),r.a.createElement(d.b,{path:"/:id/pairings/:round",render:function(t){if("results"===t.match.params.round)return r.a.createElement(ie.Provider,{value:J},r.a.createElement(Nt,{state:w,playerDict:T,settings:f,id:t.match.params.id}));var n=parseInt(t.match.params.round);return isNaN(n)||n<0||n>f.totalRounds?null:r.a.createElement(dt,{round:n,id:e.match.params.id,playerDict:T,status:b,settings:f})}}),r.a.createElement(re.Provider,{value:U},r.a.createElement(d.b,{path:"/:id/standings/:round",render:function(e){if("final"===e.match.params.round)return r.a.createElement(d.a,{push:!0,to:{pathname:(e.match.url+(e.match.url.endsWith("/")?"":"/")).split("/").slice(0,-2).join("/")+"/"+f.totalRounds,state:e.history.location.state}});var t=parseInt(e.match.params.round);return isNaN(t)||t<0||t>f.totalRounds?null:r.a.createElement(oe,{round:t,setDisplayPlayer:function(){},show:function(){},status:b,players:D,settings:f,state:w})}})),r.a.createElement(d.b,{path:"/:id/*",component:Oe,status:404}))}}),r.a.createElement(yt,{margin:10},R?r.a.createElement("div",{onClick:function(){return L(null)}},r.a.createElement(W.B,null)):null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:(null===R||void 0===R?void 0:R.outerHTML)||""}})))}var xt=n(9),Ct=n.n(xt),Pt=n(203),Mt=n(201),Rt=n.n(Mt),Lt=n(202),Dt=n.n(Lt),Bt=n(114),Tt=new(n.n(Bt).a.ProcessNodeDefinitions)(r.a),Ft=Dt()({isValidNode:function(e){return"script"!==e.type},processingInstructions:[{shouldProcessNode:function(e){return!0},processNode:Tt.processDefaultNode}]});function At(e){return N.test(e.href)?r.a.createElement("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()}},e.children):r.a.createElement(m.b,{to:{pathname:e.href,state:{from:window.location.href.toString()}}},e.children)}function It(e){switch(e){case"facebook.com":return r.a.createElement(W.p,{style:{color:"#3b5998"}});case"twitter.com":return r.a.createElement(W.z,{style:{color:"#00aced"}});case"twitch.tv":return r.a.createElement(W.y,{style:{color:"#6441a5"}});case"github.com":return r.a.createElement(W.q,{style:{color:"#333"}});default:return r.a.createElement(gt.a,null)}}function Wt(e){var t=e.notif;if(!t.id)return null;var n=r.a.createElement(gt.a,null),a=(t.link||"").match(N);return a&&(n=It(a[1])),r.a.createElement("div",{className:_t.a.lightBox,onClick:function(){return e.select({})}},r.a.createElement("div",{className:[_t.a.section].join(" ")},r.a.createElement("div",{className:_t.a.lightBoxTitle},r.a.createElement("div",null,t.link?r.a.createElement("a",{className:_t.a.iconLink,href:t.link,rel:"noopener noreferrer",target:"_blank"},n):r.a.createElement("div",null,"icon")),r.a.createElement("div",null,t.title)),r.a.createElement("div",{className:_t.a.lightBoxContent,onClick:function(e){return e.stopPropagation()}},r.a.createElement(Rt.a,{source:t.content.trim()+(t.link?"\n\n[".concat(t.link,"](").concat(t.link,")"):""),escapeHtml:!1,astPlugins:[Ft],renderers:{link:At}})),r.a.createElement("div",{className:_t.a.dateTime},ge(t.role)," Announcement | ",new Date(t.createdAt).toString().slice(0,21))))}var zt=0;function Gt(e){var t,n=Object(a.useState)([]),i=Object(u.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)([]),s=Object(u.a)(l,2),d=s[0],h=s[1],f=Object(a.useState)({}),v=Object(u.a)(f,2),p=v[0],g=v[1],b=Object(a.useCallback)((function(){return B({url:"/tournaments"}).then(c)}),[c]),E=Object(a.useCallback)((function(){return B({url:"/notifications"}).then((function(e){return h(e.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})))}))}),[h]);return Object(a.useEffect)((function(){b(),E()}),[b,E]),Object(a.useEffect)((function(){F.on("connected_count",(function(e){return zt=e}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},r.a.createElement("div",{className:Ct.a.container},r.a.createElement("div",{className:Ct.a.title},r.a.createElement("h1",null,r.a.createElement("span",{className:"bold"},"Results")," by ScorchChess"),r.a.createElement("h3",null,"Your universal platform for results and pairings. Attractive. Automated. Effortless.")),r.a.createElement("div",{className:["container",Ct.a.announcements].join(" ")},r.a.createElement("table",{className:[Ct.a.tableAnnounce].join(" ")},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:Ct.a.sectionHeader,colSpan:3},"Announcements"))),r.a.createElement("tbody",null,d.map((function(e,t){var n=r.a.createElement(gt.a,null),a=(e.link||"").match(N);return a&&(n=It(a[1])),r.a.createElement("tr",{className:Ct.a.notificationRow,key:["notification",t].join(".")},r.a.createElement("td",null,r.a.createElement("div",{onClick:function(){return p.id===e.id?g({}):g(e)}},e.link?r.a.createElement("a",{className:Ct.a.iconLink,href:e.link,rel:"noopener noreferrer",target:"_blank"},n):r.a.createElement("div",null,"icon"),r.a.createElement("div",null,r.a.createElement("span",{className:"bold"},e.title)),r.a.createElement("div",{className:Ct.a.notifContent},e.content),r.a.createElement("div",{className:Ct.a.expando},r.a.createElement(W.d,null)))))}))))),r.a.createElement("div",{className:["container",Ct.a.tournaments].join(" ")},r.a.createElement("table",{className:[Ct.a.tableAnnounce].join(" ")},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:4,className:Ct.a.sectionHeader},"Public Tournaments")),r.a.createElement("tr",{className:Ct.a.sectionHeader},r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Started"),r.a.createElement("th",null,"Round"),r.a.createElement("th",null))),r.a.createElement("tbody",null,o.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(t,n){var a=new Date(t.createdAt).toString();return r.a.createElement("tr",{key:[t.id,n].join("."),className:Ct.a.rowLink},r.a.createElement("td",null,r.a.createElement(m.b,{className:Ct.a.tournamentLink,to:{pathname:"/"+t.id,state:{from:e.location.pathname}}},t.name||t.id)),r.a.createElement("td",null,r.a.createElement(m.b,{className:Ct.a.tournamentLink,to:{pathname:"/"+t.id,state:{from:e.location.pathname}}},a.slice(0,11))),r.a.createElement("td",null,r.a.createElement(m.b,{className:Ct.a.tournamentLink,to:{pathname:"/"+t.id,state:{from:e.location.pathname}}},t.round)),r.a.createElement("td",null,r.a.createElement(m.b,{className:Ct.a.tournamentLink,to:{pathname:"/"+t.id,state:{from:e.location.pathname}}},r.a.createElement(W.d,null))))}))))),r.a.createElement("div",{className:F.connected?Ct.a.connected:Ct.a.disconnected},r.a.createElement(Pt.a,null)," ",zt||"-"," users online"),r.a.createElement("a",{href:"https://beta.scorchapp.co.uk",rel:"noopener noreferrer",target:"_blank",className:[Ct.a.new].join(" ")},"Create New Tournament",r.a.createElement(W.d,null)))),r.a.createElement(Wt,{notif:p,select:g}))}var Ht=n(46),Ut=n.n(Ht);function qt(e){var t=Object(a.useContext)(cn),n=Object(a.useState)(!0),i=Object(u.a)(n,2),o=i[0],c=i[1],l=Object(a.useMemo)((function(){return[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"bold"},"Results"),"\u200b ","by ScorchChess"),url:"/",selected:"/profile"!==window.location.pathname&&"/login"!==window.location.pathname},{name:"ABOUT",url:"https://scorchapp.co.uk"},{name:"DESKTOP",url:"https://beta.scorchapp.co.uk"},{name:t?e.profile.username||"PROFILE":"SIGN IN",url:t?"/profile":"/login",selected:"/profile"===window.location.pathname||"/login"===window.location.pathname}]}),[t,e.profile]),s=Object(a.useCallback)((function(){window.innerWidth===window.screen.width&&window.innerHeight===window.screen.height?c(!1):c(!0)}),[c]);Object(a.useEffect)((function(){return document.addEventListener("fullscreenchange",s),function(){return document.removeEventListener("fullscreenchange",s)}}),[s]);var d=Object(a.useCallback)((function(e){122===e.keyCode&&(window.innerWidth>window.screen.width-10&&window.innerHeight>window.screen.height-10?c(!1):c(!0))}),[c]);Object(a.useEffect)((function(){return document.addEventListener("keydown",d),function(){return document.removeEventListener("keydown",d)}}),[s,d]);var h=Object(a.useState)(12),f=Object(u.a)(h,2),v=f[0],p=f[1],g=Object(a.useCallback)((function(){window.scrollY?p(6):p(12)}),[p]);return Object(a.useEffect)((function(){return document.addEventListener("scroll",g),function(){return document.removeEventListener("scroll",g)}}),[g]),o?r.a.createElement("div",{className:Ut.a.header,style:{height:v+"vh"}},r.a.createElement(m.b,{to:{pathname:"/",state:{referrer:e.currentPath}},className:Ut.a.logoWrapper},r.a.createElement("img",{src:"/favicon.png",className:Ut.a.logo,alt:"logo",style:{height:1.618*v+"vh"}})),P()?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ut.a.buttonContainer},l.map((function(t,n){return t.url.startsWith("/")?r.a.createElement(m.b,{key:["headerLink",n].join("."),className:[Ut.a.button,t.selected?Ut.a.selected:""].join(" "),to:{pathname:t.url,state:{referrer:e.currentPath}}},t.name):r.a.createElement("a",{key:["headerLink",n].join("."),className:Ut.a.button,href:t.url,target:"_blank",rel:"noopener noreferrer"},t.name)}))))):null}var Vt=n(11),Jt=n.n(Vt);function Yt(e){var t;return r.a.createElement("div",{className:[Jt.a.logo,null===(t=e.classNames)||void 0===t?void 0:t.logo].join(" ")},r.a.createElement("img",{style:{visibility:e.loading?"hidden":"visible"},className:Jt.a.staticLogo,src:"/favicon.png",alt:"swiss-logo.png"}),r.a.createElement("img",{style:{visibility:e.loading?"visible":"hidden"},className:Jt.a.staticLogo,src:"/images/loading_queen.png",alt:"swiss-logo.png"}),r.a.createElement("img",{style:{visibility:e.loading?"visible":"hidden"},className:Jt.a.crownOutline,src:"/images/crown-outline.png",alt:"outline-gif"}),r.a.createElement("img",{style:{visibility:e.loading?"visible":"hidden"},className:Jt.a.loadingGif,src:"/images/loading-crown.gif",alt:"loading-gif"}))}function Zt(e){var t,n=Object(a.useState)(""),i=Object(u.a)(n,2),o=i[0],c=i[1],m=Object(a.useState)(!1),h=Object(u.a)(m,2),f=(h[0],h[1]),v=Object(a.useState)("register"===e.mode),p=Object(u.a)(v,2),g=p[0],b=p[1],E=Object(a.useState)(""),_=Object(u.a)(E,2),y=_[0],w=_[1],j=Object(a.useCallback)(function(){var t=Object(s.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.set("sessionID",n);case 2:e.login(!0),c(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[c,e.login,e.updateProfile]),O=Object(a.useCallback)((function(e){f(!1),T(e).then((function(e){return j(e)})).catch((function(e){e&&e.response&&e.response.data&&w(e.response.data),console.error(e)})).finally((function(){f(!1)}))}),[f,w,j]),k=Object(a.useMemo)((function(){return r.a.createElement("form",{className:Jt.a.form,method:"POST",onSubmit:O,action:X.a.resolve(R,"login")},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"username",className:["input",Jt.a.input].join(" ")}),r.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"password",className:["input",Jt.a.input].join(" ")}),r.a.createElement("div",{className:Jt.a.forgottenContainer},r.a.createElement("div",{className:["input",Jt.a.forgotten].join(" ")},"username reminder"),r.a.createElement("div",{className:["input",Jt.a.forgotten].join(" ")},"password reset")),r.a.createElement("input",{type:"submit",value:"LOGIN",className:["input",Jt.a.submit].join(" ")}))}),[O]),N=Object(a.useMemo)((function(){return r.a.createElement("form",{className:Jt.a.form,method:"POST",onSubmit:O,action:X.a.resolve(R,"register")},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"username",className:["input",Jt.a.input].join(" ")}),r.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"password",minLength:8,className:["input",Jt.a.input].join(" ")}),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"email",className:["input",Jt.a.input].join(" ")}),r.a.createElement("input",{type:"submit",value:"REGISTER",className:["input",Jt.a.submit].join(" ")}))}),[O]),S=Object(a.useMemo)((function(){return r.a.createElement(Yt,{setLoading:function(e){return f(e)},loading:!1})}),[f]),x=Object(a.useMemo)((function(){return r.a.createElement("div",{className:[Jt.a.loginSection,Jt.a.initialiseButton].join(" ")},r.a.createElement("div",{className:Jt.a.loginBackground},r.a.createElement("div",{className:[Jt.a.flip].join(" "),onClick:function(){f(!0),b(!1),w(""),setTimeout((function(){return f(!1)}),500)}},r.a.createElement("div",null,"LOGIN"),r.a.createElement("div",null,r.a.createElement(G.a,null))),r.a.createElement("div",null),r.a.createElement("div",{className:[Jt.a.flip].join(" "),onClick:function(){f(!0),b(!0),w(""),setTimeout((function(){return f(!1)}),500)}},r.a.createElement("div",null,"REGISTER"),r.a.createElement("div",null,r.a.createElement(G.b,null)))),r.a.createElement("div",{className:["container",Jt.a.foreground,g?Jt.a.registerForeground:Jt.a.loginForeground].join(" ")},S,g?N:k))}),[f,b,w,g,k,N,S]);return o?r.a.createElement(d.a,{to:{pathname:"/profile",state:{from:"/login"}}}):r.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},r.a.createElement("div",{className:[Jt.a.column,"container"].join(" ")},r.a.createElement("div",{className:Jt.a.frame},x)),r.a.createElement("div",{className:Jt.a.messageBar},y||"\u200b"))}function Kt(e){var t,n=Object(a.useState)([]),i=Object(u.a)(n,2),o=i[0],c=i[1],l=Object(a.useCallback)((function(){return B({url:"/tournaments"}).then(c)}),[c]);return Object(a.useEffect)((function(){l()}),[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},r.a.createElement("div",{className:Ct.a.container},r.a.createElement("div",{className:Ct.a.title},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,r.a.createElement("span",{className:"bold"},e.profile.username)),r.a.createElement("div",null,"Email: ",e.profile.email),r.a.createElement("div",null,"Account creation: ",new Date(e.profile.createdAt).toString().slice(0,15)),r.a.createElement("div",null,"Tournaments: ",o.length),r.a.createElement("div",null,"Public tournaments: ",o.filter((function(e){return e.setting&&e.setting.public})).length))),r.a.createElement("div",{className:["container",Ct.a.yourTournaments].join(" ")},r.a.createElement("table",{className:[Ct.a.tableAnnounce].join(" ")},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:5,className:Ct.a.sectionHeader},"Your Tournaments")),r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"20px"}},"Manage"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Started"),r.a.createElement("th",null,"Round"),r.a.createElement("th",null,"View"))),r.a.createElement("tbody",null,o.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(t,n){var a=new Date(t.createdAt).toString();return r.a.createElement("tr",{key:[t.id,n].join("."),className:Ct.a.rowLink},r.a.createElement("td",null,r.a.createElement("a",{className:Ct.a.tournamentLink,href:"https://beta.scorchapp.co.uk"},r.a.createElement(W.c,null))),r.a.createElement("td",null,t.name||t.id),r.a.createElement("td",null,a.slice(0,11)),r.a.createElement("td",null,t.round),r.a.createElement("td",null,t.setting&&t.setting.public?r.a.createElement(m.b,{className:Ct.a.tournamentLink,to:{pathname:"/"+t.id,state:{from:e.location.pathname}}},r.a.createElement(W.d,null)):null))}))))),r.a.createElement("div",null,r.a.createElement("a",{href:"https://beta.scorchapp.co.uk",rel:"noopener noreferrer",target:"_blank",className:["header-button",Ct.a.new].join(" ")},"Create New Tournament",r.a.createElement(W.d,null))))))}var Xt=n(47),Qt=n.n(Xt);function $t(e,t){var n=Object(u.a)(e,2),a=n[0],i=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fieldBox"},ge(a.trim())+":"),r.a.createElement("div",{className:"fieldBox"},function(e){return null===e?"":C.test(e)?r.a.createElement("a",{href:"mailto:"+e,rel:"noopener noreferrer",target:"_blank"},e):e.startsWith("http")?r.a.createElement("a",{href:e,rel:"noopener noreferrer",target:"_blank"},e):e}(i)))}function en(e){var t,n=Object(a.useState)(null),i=Object(u.a)(n,2),o=i[0],c=i[1],l=Object(a.useCallback)((function(){return B({url:"/team/"+e.id}).then((function(e){return c(new Z(e,e.histories.length,e.setting))}))}),[c,e.id]);Object(a.useEffect)((function(){l()}),[l]);var s=Object(a.useContext)(cn);Object(a.useMemo)((function(){return e.history.location.state&&e.history.location.state.from}),[e.history.location]);if(!o)return null;var m=(Math.max(o.histories.length,1)-1-(o.isPlaying?1:0)).toString(),d=o.histories.reduce((function(e,t){return t?e+=t.played:e}),0),h=o?{Score:o.score.toString()+" / "+m,"Game score":o.gamePoints.toString()+" / "+d.toString(),"Expected score":o.expectedScore.toFixed(2),"Expected game score":o.expectedGameScore.toFixed(2)+" / "+d}:{};return o.settings.displayPoints||(delete h["Game score"],delete h["Expected game score"]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},r.a.createElement("div",{className:Qt.a.container},r.a.createElement("div",{className:Qt.a.title},r.a.createElement("div",{className:["container",Qt.a.info].join(" ")},r.a.createElement("h1",null,r.a.createElement("span",{className:"bold"},o.name)))),r.a.createElement("div",{className:["container",Qt.a.info].join(" ")},r.a.createElement("h1",null,"Scores"),r.a.createElement("div",{className:Qt.a.grid},Object.entries(h).map($t))),r.a.createElement("div",{className:["container",Qt.a.info].join(" ")},r.a.createElement("h1",null,"Contact"),s?o.contact&&Object.values(o.contact).length?r.a.createElement("div",{className:Qt.a.grid},Object.entries(o.contact).map($t)):r.a.createElement("div",null,"No contact details registered"):r.a.createElement("div",null,"Sign in to view contact details")))))}var tn=["pairings","standings","stats"],nn=Date.now(),an="",rn="";function on(e){"PUSH"===e.history.action&&F.connected&&F.emit("public_page",{section:an,tournament:rn,time:(Date.now()-nn)/6e4,mobile:P()});var t=tn.find((function(t){return e.location.pathname.includes(t)}))||"",n=e.match.params.id||"/";nn=Date.now(),an=t,rn=n}var cn=Object(a.createContext)(!1),ln=["/","pairings","standings","stats","tv","team","player","user","profile","login"];function sn(e){for(var t=0;t<ln.length;t++)if(ln[t]===e)return t;for(var n=ln.length;n>=0;n--)if(e.includes(ln[n]))return n;return-1}var un=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)({}),c=Object(u.a)(o,2),h=c[0],f=c[1],v=Object(a.useCallback)((function(){return B({url:"/profile"}).then(f).then((function(){return i(!0)})).catch((function(e){console.error(e),i(!1)}))}),[f,i]),p=Object(a.useCallback)(Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("sessionID");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:i(!0);case 6:case"end":return e.stop()}}),e)}))),[i]);return Object(a.useEffect)((function(){v(),p()}),[p,v]),r.a.createElement(m.a,{basename:""},r.a.createElement(d.b,{render:function(e){var t,a=e.location,o=e.history;console.log(a,o);var c,l,s=a.state||{};return s=Object.assign(s,{direction:(c=s.referrer||"/",l=a.pathname,sn&&console.log(c,l,sn(c),sn(l)),sn(l)>sn(c)?"right":sn(l)<sn(c)?"left":""),referrer:a.pathname})||{},a.state=Object.assign(a.state||{},s),r.a.createElement(cn.Provider,{value:n},r.a.createElement(qt,{setID:function(){},profile:h,referrer:null===(t=s)||void 0===t?void 0:t.referrer,currentPath:a.pathname}),r.a.createElement(d.d,{location:a},r.a.createElement(d.b,{exact:!0,path:"/",render:function(e){return on(e),r.a.createElement(Gt,e)}}),r.a.createElement(d.b,{path:"/profile",render:function(e){return r.a.createElement(Kt,Object.assign({},e,{profile:h,updateProfile:v}))}}),r.a.createElement(d.b,{path:"/login",render:function(e){var t;return n?r.a.createElement(d.a,{to:(null===(t=s)||void 0===t?void 0:t.referrer)||"/"}):r.a.createElement(Zt,Object.assign({},e,{mode:"login",login:i,updateProfile:v}))}}),r.a.createElement(d.b,{path:"/team/:id/",render:function(e){return r.a.createElement(en,Object.assign({},e,{id:e.match.params.id}))}}),r.a.createElement(d.b,{path:"/tournament/:id/",render:function(e){return r.a.createElement(d.a,{to:e.location.pathname.slice(11)})}}),r.a.createElement(d.b,{path:"/:id/",render:function(e){return on(e),r.a.createElement(St,e)}}),r.a.createElement(d.b,{path:"*",component:Oe,status:404})))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(un,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,n){e.exports={fsChart:"stats_fsChart__1bkCZ",title:"stats_title__1RyDZ",subtitle:"stats_subtitle__cJGON",name:"stats_name__VnA4Q",url:"stats_url__oDPQ0",header:"stats_header__2EQDA"}},6:function(e,t,n){e.exports={score:"pairings_score__jjzQc",confirmed:"pairings_confirmed__3JGB8",finished:"pairings_finished__3bXeo",live:"pairings_live__2FsMM",registered:"pairings_registered__3HdoN",scheduled:"pairings_scheduled__KBDmy",pending:"pairings_pending__3Geg4",aborted:"pairings_aborted__3FarP",pairingRound:"pairings_pairingRound__1LPA4",roundSelected:"pairings_roundSelected__3u_UO",nullRound:"pairings_nullRound__PaO8W",inner:"pairings_inner__1dqLU",subheader:"pairings_subheader__2Howu",searchBar:"pairings_searchBar__1ruUx",description:"pairings_description__1Wwzz",buttonList:"pairings_buttonList__3R6LZ",modeSwitcher:"pairings_modeSwitcher__1N9i1",flag:"pairings_flag__ddtBP"}},84:function(e,t,n){e.exports={container:"fullscreen_container__2tyD_",fullScreenHeader:"fullscreen_fullScreenHeader__Sk0XW",stage:"fullscreen_stage__3CBkW"}},86:function(e,t,n){},9:function(e,t,n){e.exports={container:"home_container__1Uj13",section:"home_section__1RrkC",title:"home_title__1fMaE",announcements:"home_announcements__3hzqx",tableAnnounce:"home_tableAnnounce__1fX3a",yourTournaments:"home_yourTournaments__2L6My",tournaments:"home_tournaments__2sp_F",sectionHeader:"home_sectionHeader__29bWV",notificationRow:"home_notificationRow__Vijgj",expando:"home_expando__3ZujP",rowLink:"home_rowLink__17Iz9",tournamentLink:"home_tournamentLink__23A_D",iconLink:"home_iconLink__1VqvH",connected:"home_connected__2PQfY",disconnected:"home_disconnected__2Dr6p",new:"home_new__2ecUP"}}},[[212,1,2]]]);
//# sourceMappingURL=main.322a8dcc.chunk.js.map