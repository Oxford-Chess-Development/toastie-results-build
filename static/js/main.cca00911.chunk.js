(this["webpackJsonptoastie-results"]=this["webpackJsonptoastie-results"]||[]).push([[0],{10:function(e,t,a){e.exports={wrapper:"chesscom_wrapper__3vwwR",container:"chesscom_container__AGg5n",boardLabel:"chesscom_boardLabel__1N2Qy",board:"chesscom_board__3LGEQ","fade-in":"chesscom_fade-in__15-gn",row:"chesscom_row__17flm",square:"chesscom_square___JdY5",W:"chesscom_W__1Kbfl",B:"chesscom_B__misXA"}},23:function(e,t,a){},36:function(e,t,a){e.exports=a.p+"static/media/watch.ddf443c3.svg"},45:function(e,t,a){e.exports=a(92)},50:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(38),l=a.n(c),s=(a(50),a(42)),o=a(9),u=a(14),i=a(3),m=(a(23),a(8)),d=a.n(m),f=a(16),b=a(39),h=a.n(b),v=a(40),p=a.n(v),E=/chess\.com\/club\/matches\/live\/[a-z-]+\/([0-9]+)/,w=a(10),g=a.n(w),j=a(11),O=a(19),y=new p.a({queue:!0});function _(){return(_=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){y.dispatch(y.getTeamLiveMatchBoard,(function(t){e(t.body)}),[t,a])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){y.dispatch(y.getTeamLiveMatch,(function(t){e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=new Map([["p",r.a.createElement(j.e,null)],["n",r.a.createElement(j.d,null)],["b",r.a.createElement(j.a,null)],["r",r.a.createElement(j.g,null)],["q",r.a.createElement(j.f,null)],["k",r.a.createElement(j.c,null)]]);function S(e){var t=Object(n.useReducer)((function(e,t){var a=e.slice(0);return a[t.board]={boardScores:t.boardScores,game:t.game},a}),[]),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(0),o=Object(i.a)(s,2),m=o[0],b=o[1],v=Object(n.useReducer)((function(e,t){return e[t.i]=t.name,e}),["",""]),p=Object(i.a)(v,2),w=p[0],y=p[1],k=Object(n.useReducer)((function(e,t){return e.set(t.player.username,t.team),e}),new Map),S=Object(i.a)(k,2),x=S[0],R=S[1],C=Object(n.useState)(0),B=Object(i.a)(C,2),M=B[0],T=B[1],W=Object(n.useState)(!1),P=Object(i.a)(W,2),U=P[0],q=P[1],I=Object(n.useReducer)((function(e,t){var a=e.slice(0);return a[t.board]=t.set,a}),[]),A=Object(i.a)(I,2),F=A[0],G=A[1],J=Object(n.useCallback)(Object(f.a)(d.a.mark((function t(){var a,n,r,c,l,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.matchURL.match(E)){t.next=3;break}return t.abrupt("return",console.error("Invalid URL: ",e.matchURL));case 3:return n=Number(a[1]),b(n),t.next=7,N(n);case 7:for(r=t.sent,T(r.boards),c=function(){var e=s[l],t=w.findIndex((function(t){return!t||t===e.name}));y({name:e.name,i:t});var a,n=Object(u.a)(e.players);try{for(n.s();!(a=n.n()).done;){var r=a.value;R({player:r,team:t})}}catch(c){n.e(c)}finally{n.f()}},l=0,s=Object.values(r.teams);l<s.length;l++)c();"finished"!==r.status&&"scheduled"!==r.status||q(!0);case 12:case"end":return t.stop()}}),t)}))),[e.matchURL,w]);Object(n.useEffect)((function(){J()}),[J]);var Q=Object(n.useCallback)((function(){if(m&&M&&(!U||!c.length))for(var e=function(e){if(F[e])return"continue";(function(e,t){return _.apply(this,arguments)})(m,e).then((function(t){var a=t.games[t.games.length-1];l({game:a,boardScores:t.board_scores,board:e}),Date.now()>a.end_time&&G({board:e,set:!0})}))},t=1;t<M;t++)e(t)}),[m,M,U,F,c.length]);return Object(n.useEffect)((function(){var e=setInterval(Q,1e3);return function(){return clearInterval(e)}}),[Q]),r.a.createElement("div",{className:g.a.container},c.map((function(e){var t=Object.entries(e.boardScores),a=e.game,n=new h.a(a.fen).board,c=x.get(a.white.username),l=r.a.createElement(r.a.Fragment,null,a.white.username," (",a.white.rating,")"," ",r.a.createElement(O.b,null)),s=r.a.createElement(r.a.Fragment,null,a.black.username," (",a.black.rating,")"," ",r.a.createElement(O.a,null));return t[0][0]===a.black.username&&c&&(t=t.reverse()),r.a.createElement("div",{className:g.a.wrapper},r.a.createElement("div",{className:g.a.boardLabel},r.a.createElement("span",{className:"bold"},t[0][1]),r.a.createElement("a",{href:"https://www.chess.com/live/game/"+a.url.split("/").pop(),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(j.b,null)),r.a.createElement("span",{className:"bold"},t[1][1])),r.a.createElement("div",null,c?l:s," ",w[0]),r.a.createElement("div",{className:g.a.board},n.map((function(e){return r.a.createElement("div",{className:g.a.row},e.map((function(e){return r.a.createElement("div",{className:[g.a.square,g.a[(t=e,t.toLowerCase()===t?"B":"W")]].join(" ")},L.get(e.toLowerCase()));var t})))}))),r.a.createElement("div",null,c?s:l," ",w[1]))})))}var x=a(17),R=a.n(x),C=function(){};function B(e){return e=Object.assign(e,{method:"GET"}),R()(e).then((function(e){return e.data})).catch((function(e){var t;throw console.error(e),e.response&&C([e.response.status,e.response.statusText,":","/"+(null===(t=e.response.config.url)||void 0===t?void 0:t.split("/").pop())].join(" ")),e}))}R.a.defaults.baseURL="http://localhost:8080";var M=a(41),T=a(36),W=a.n(T);function P(e){var t=e.match.params.id,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)({}),m=Object(i.a)(o,2),d=(m[0],m[1],Object(n.useState)({})),f=Object(i.a)(d,2),b=(f[0],f[1],Object(n.useState)({})),h=Object(i.a)(b,2),v=h[0],p=h[1],w=Object(n.useState)([]),g=Object(i.a)(w,2),j=g[0],O=g[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],k=_[1],L=Object(n.useMemo)((function(){if(!j.length)return new Map;var e,t=new Map,a=Object(u.a)(j);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.set(n.id,n)}}catch(r){a.e(r)}finally{a.f()}return t}),[j]);Object(n.useEffect)((function(){Promise.all([B({url:"/tournament/"+t+"/fetchPlayers"}).then(O).catch((function(){})),B({url:"/tournament/"+t+"/getPairings"}).then(k).catch((function(){})),B({url:"/tournament/"+t+"/getStatus"}).then(p).catch((function(){}))]).then((function(){return s(!0)}))}),[k,O]);var x=v.round||0,R=Object(n.useState)(""),C=Object(i.a)(R,2),T=C[0],P=C[1];return Object(n.useEffect)((function(){if(x){for(var e=new Array(x+1),t=1;t<x+1;t++)e[t]={match:0,game:0};L.set("bye",{id:"bye",firstName:"BYE",histories:e})}}),[L,x]),l?r.a.createElement("div",{id:"main"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,v.name),r.a.createElement("section",null,r.a.createElement("h2",null,"Pairings"),r.a.createElement("table",{className:"download-table full-width"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"30%"}},"White"),r.a.createElement("td",{style:{width:"12.5%"}}),r.a.createElement("td",{style:{width:"5%"}}),r.a.createElement("td",{style:{width:"5%"}}),r.a.createElement("td",{style:{width:"5%"}}),r.a.createElement("td",{style:{width:"12.5%"}}),r.a.createElement("td",{style:{width:"30%"}},"Black"))),r.a.createElement("tbody",null,N.map((function(e){var t,a,n,c=[e[0].trim(),e[1].trim()].join("."),l=L.get(e[0].trim()),s=L.get(e[1].trim()),o=Object.values(e[2]).find((function(e){return e})),u=null===(t=o)||void 0===t?void 0:t.match(E);return o=u?"https://www.chess.com/club/matches/live/"+u[1]:"",r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",{className:"playerName"},null===l||void 0===l?void 0:l.firstName)),r.a.createElement("td",{style:{padding:0}},o?r.a.createElement("a",{className:"button",href:o.trim(),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"icon",src:W.a,alt:"Watch games"})):null),r.a.createElement("td",{className:"bold"},null===l||void 0===l||null===(a=l.histories[x])||void 0===a?void 0:a.game),r.a.createElement("td",null,"-"),r.a.createElement("td",{className:"bold"},null===s||void 0===s||null===(n=s.histories[x])||void 0===n?void 0:n.game),r.a.createElement("td",{style:{padding:0}},o?r.a.createElement("div",{className:"button",onClick:function(){return P(T?"":c)}},r.a.createElement(M.a,{style:{transform:T?"rotate(-90deg)":"rotate(0deg)"}})):null),r.a.createElement("td",null,r.a.createElement("div",{className:"playerName"},null===s||void 0===s?void 0:s.firstName))),o&&T===c?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:100},(e[2].chessComLink||e[2].chessComTeamLink)&&e[2].chessComTeamLink?r.a.createElement(S,{matchURL:e[2].chessComTeamLink}):null)):null)}))))))):null}var U=function(){return r.a.createElement(s.a,{basename:""},r.a.createElement(o.a,{render:function(e){var t=e.location;return r.a.createElement(o.c,{location:t},r.a.createElement(o.a,{exact:!0,path:"/tournament/:id/",render:function(e){return r.a.createElement(P,e)}}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.cca00911.chunk.js.map